<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>è‡ªæˆ‘ä»‹ç»</title>
    <url>/2023/10/28/hello-world/</url>
    <content><![CDATA[<p>å¤§å®¶å¥½ï¼Œæˆ‘å« <strong>xiaowu</strong>ï¼Œæ¥è‡ªç¾ä¸½çš„<em>åœ°çƒ</em>ï¼Œä»Šå¹´<strong>20</strong>å²  </p>
<h4 id="å­¦ä¹ æ­å»ºè‡ªå·±çš„blogğŸ‘‡"><a href="#å­¦ä¹ æ­å»ºè‡ªå·±çš„blogğŸ‘‡" class="headerlink" title="å­¦ä¹ æ­å»ºè‡ªå·±çš„blogğŸ‘‡"></a>å­¦ä¹ æ­å»ºè‡ªå·±çš„blogğŸ‘‡</h4><h1 id="ä¸ªäººåšå®¢æ­å»º"><a href="#ä¸ªäººåšå®¢æ­å»º" class="headerlink" title="ä¸ªäººåšå®¢æ­å»º"></a><a href="https://www.yuque.com/qq2796189414/wcxyrt/sowgy92vnghgixpn?singleDoc#">ä¸ªäººåšå®¢æ­å»º</a></h1>]]></content>
  </entry>
  <entry>
    <title>javaweb</title>
    <url>/2023/11/05/javaweb/</url>
    <content><![CDATA[<center>javaweb</center>

<span id="more"></span>
]]></content>
      <categories>
        <category>javaweb</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>javaweb</tag>
        <tag>servlet</tag>
      </tags>
  </entry>
  <entry>
    <title>ç½‘ç»œç¼–ç¨‹</title>
    <url>/2023/11/05/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/</url>
    <content><![CDATA[<center>ç½‘ç»œç¼–ç¨‹</center>

<span id="more"></span>

<h2 id="1-1-æ¦‚è¿°"><a href="#1-1-æ¦‚è¿°" class="headerlink" title="1.1 æ¦‚è¿°"></a>1.1 æ¦‚è¿°</h2><p><strong>è®¡ç®—æœºç½‘ç»œï¼š</strong></p>
<p><a href="https://so.csdn.net/so/search?q=%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C&spm=1001.2101.3001.7020">è®¡ç®—æœºç½‘ç»œ</a>æ˜¯æŒ‡å°†åœ°ç†ä½ç½®ä¸åŒçš„<strong>è®¡ç®—æœºåŠå…¶å¤–éƒ¨éƒ¨ä»¶ï¼Œé€šè¿‡é€šä¿¡çº¿è·¯è¿æ¥èµ·æ¥</strong>ï¼Œåœ¨ç½‘ç»œç¼–ç¨‹åè®®ä¸‹ï¼Œå®ç°ä¸åŒè®¡ç®—æœºä¹‹é—´çš„ä¿¡æ¯å…±äº«ä»¥åŠä¿¡æ¯äº¤æµçš„è®¡ç®—æœºç³»ç»Ÿã€‚</p>
<p><strong>ç½‘ç»œç¼–ç¨‹çš„ç›®çš„ï¼š</strong></p>
<p>ä¼ æ’­äº¤æµä¿¡æ¯ï¼ˆæ— çº¿ç”µå°ï¼‰ï¼šæ•°æ®äº¤æ¢ï¼Œé€šä¿¡ã€‚</p>
<p><strong>æƒ³è¦è¾¾åˆ°è¿™äº›æ•ˆæœéœ€è¦åšä»€ä¹ˆï¼š</strong></p>
<ol>
<li>å¦‚ä½•å‡†ç¡®åœ°å®šä½ç½‘ç»œä¸Šçš„ä¸€å°ä¸»æœº 192.168.16.124ï¼šç«¯å£ï¼Œå®šä½åˆ°è¿™ä¸ªè®¡ç®—æœºä¸Šçš„æŸä¸ªèµ„æº</li>
<li>æ‰¾åˆ°äº†è¿™ä¸ªä¸»æœºï¼Œå¦‚ä½•ä¼ è¾“æ•°æ®å‘¢ï¼Ÿ</li>
</ol>
<p>javawebï¼šç½‘é¡µç¼–ç¨‹ B&#x2F;S</p>
<p>ç½‘ç»œç¼–ç¨‹ï¼šTCP&#x2F;IP C&#x2F;S</p>
<h2 id="1-2-ç½‘ç»œé€šä¿¡çš„è¦ç´ "><a href="#1-2-ç½‘ç»œé€šä¿¡çš„è¦ç´ " class="headerlink" title="1.2 ç½‘ç»œé€šä¿¡çš„è¦ç´ "></a>1.2 ç½‘ç»œé€šä¿¡çš„è¦ç´ </h2><p>TCP&#x2F;IPå‚è€ƒæ¨¡å‹ï¼š</p>
<img src="/2023/11/05/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/1658392221039-7f88a7a0-c25d-4f9d-8eaa-cfd556be9cd2.png" class title="img">

<p>ç½‘ç»œç¼–ç¨‹é’ˆå¯¹ä¼ è¾“å±‚ TCPï¼ŒUDP</p>
<p>å°ç»“ï¼š</p>
<ol>
<li>ç½‘ç»œç¼–ç¨‹ä¸¤ä¸ªä¸»è¦é—®é¢˜</li>
</ol>
<ul>
<li><ul>
<li>å¦‚ä½•å‡†ç¡®å®šä½åˆ°ç½‘ç»œä¸Šçš„ä¸€å°æˆ–å¤šå°ä¸»æœº</li>
<li>æ‰¾åˆ°ä¸»æœºä¹‹åå¦‚ä½•è¿›è¡Œé€šä¿¡</li>
</ul>
</li>
</ul>
<ol>
<li>ç½‘ç»œç¼–ç¨‹ä¸­çš„è¦ç´ </li>
</ol>
<ul>
<li><ul>
<li>IPå’Œç«¯å£å·</li>
<li>ç½‘ç»œé€šä¿¡åè®®ï¼šTCP,UDP</li>
</ul>
</li>
</ul>
<ol>
<li>ä¸‡ç‰©çš†å¯¹è±¡</li>
</ol>
<h2 id="1-3-IPåœ°å€"><a href="#1-3-IPåœ°å€" class="headerlink" title="1.3 IPåœ°å€"></a>1.3 IPåœ°å€</h2><p>ipåœ°å€ï¼šInterAddress</p>
<ul>
<li><p>å”¯ä¸€å®šä½ä¸€å°ç½‘ç»œä¸Šçš„è®¡ç®—æœº</p>
</li>
<li><p>127.0.0.1ï¼šæœ¬æœºï¼Œlocalhostï¼ˆC:\Windows\System32\drivers\etc\hosts å¯ä»¥æ›´æ”¹åç§°ï¼‰</p>
</li>
<li><p>ipåœ°å€åˆ†ç±»</p>
</li>
<li><ul>
<li>IPv4 &#x2F; IPv6</li>
</ul>
</li>
<li><ul>
<li><ul>
<li>&#x3D;&#x3D;IPV4ï¼š&#x3D;&#x3D;127.0.0.1ï¼Œå››ä¸ªå­—èŠ‚ç»„æˆã€‚0 ~ 255ï¼Œ 42äº¿~ï¼›30äº¿éƒ½åœ¨åŒ—ç¾ï¼Œäºšæ´²4äº¿ã€‚2001å¹´å°±ç”¨å°½äº†ï¼›</li>
<li>&#x3D;&#x3D;IPV6ï¼š&#x3D;&#x3D;fe80::755f:fc6c:2ebc:b6e6%18ï¼Œ128ä½ã€‚8ä¸ªæ— ç¬¦å·æ•´æ•°ï¼å¯ä»¥ç»™åœ°çƒä¸Šæ¯ç²’æ²™å­åˆ†é…ï¼›</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="number">2001</span>:0bb2:aaaa:<span class="number">0015</span>:<span class="number">0000</span>:<span class="number">0000</span>:1aaa:<span class="number">1312</span></span><br></pre></td></tr></table></figure>

<ul>
<li><ul>
<li>å…¬ç½‘ï¼ˆäº’è”ç½‘ï¼‰ &#x2F; ç§ç½‘ï¼ˆå±€åŸŸç½‘ï¼‰</li>
</ul>
</li>
<li><ul>
<li><ul>
<li>ABCDç±»åœ°å€</li>
<li>192.168.xx.xxï¼Œä¸“é—¨ç»™ç»„ç»‡å†…éƒ¨ä½¿ç”¨</li>
</ul>
</li>
</ul>
</li>
</ul>
<img src="/2023/11/05/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/1658392533208-d723379b-af17-403f-8d3e-f8b0d9faf28f.png" class title="img">

<ul>
<li><p>åŸŸåï¼šè®°å¿†IPé—®é¢˜</p>
</li>
<li><ul>
<li>IPï¼š<a href="http://www.vip.com/">www.vip.com</a></li>
</ul>
</li>
</ul>
<p><strong>ç»ƒä¹ ï¼šInetAddressç±»çš„å¸¸ç”¨æ–¹æ³•</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è·å–ç½‘ç«™ipåœ°å€</span></span><br><span class="line"><span class="type">InetAddress</span> <span class="variable">address</span> <span class="operator">=</span> InetAddress.getByName(<span class="string">&quot;www.baidu.com&quot;</span>);</span><br><span class="line">System.out.println(address);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¸¸ç”¨æ–¹æ³•</span></span><br><span class="line">System.out.println(address.getHostAddress()); <span class="comment">// ipåœ°å€ï¼ˆå¸¸ç”¨ï¼‰</span></span><br><span class="line">System.out.println(address.getAddress()); <span class="comment">//è¿”å›åŸç”Ÿåœ°å€ï¼Œæ²¡ä»€ä¹ˆç”¨</span></span><br><span class="line">System.out.println(address.getCanonicalHostName()); <span class="comment">//è§„èŒƒçš„åå­—</span></span><br><span class="line">System.out.println(address.getHostName()); <span class="comment">//åŸŸåï¼ˆæˆ–è€…æœ¬æœºç”µè„‘çš„åå­—ï¼‰</span></span><br></pre></td></tr></table></figure>

<h2 id="1-4-ç«¯å£"><a href="#1-4-ç«¯å£" class="headerlink" title="1.4 ç«¯å£"></a>1.4 ç«¯å£</h2><p>ç«¯å£è¡¨ç¤ºè®¡ç®—æœºä¸Šçš„ä¸€ä¸ªç¨‹åºçš„è¿›ç¨‹ï¼›</p>
<ul>
<li>ä¸åŒçš„è¿›ç¨‹æœ‰ä¸åŒçš„ç«¯å£å·ï¼ç”¨æ¥åŒºåˆ†è½¯ä»¶ï¼</li>
<li>è¢«è§„å®š0 ~ 65535ï¼ˆç”µè„‘æœ€å¤šè·‘çš„è¿›ç¨‹æ•°ï¼‰</li>
<li>TCPï¼ŒUDPï¼š65535 * 2 ï¼Œå•ä¸ªåè®®ä¸‹ï¼Œç«¯å£å·ä¸èƒ½å†²çªï¼ˆtcp:80 udp:80å¯ä»¥ï¼‰</li>
</ul>
<p>åˆ†ç±»ï¼š</p>
<ul>
<li><p>å…¬æœ‰ç«¯å£ 0~1023</p>
</li>
<li><ul>
<li>HTTPï¼š80</li>
<li>HTTPSï¼š443</li>
<li>FTPï¼š21</li>
<li>Telentï¼š23</li>
</ul>
</li>
<li><p>ç¨‹åºæ³¨å†Œç«¯å£ï¼š1024~49151ï¼Œåˆ†é…ç»™ç”¨æˆ·æˆ–è€…ç¨‹åº</p>
</li>
<li><ul>
<li>Tomcatï¼š8080ï¼ŒMySQLï¼š3306ï¼ŒOracleï¼š1521</li>
</ul>
</li>
<li><p>åŠ¨æ€ã€ç§æœ‰ï¼š49152~65535</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">netstat -ano #æŸ¥çœ‹æ‰€æœ‰çš„ç«¯å£</span><br><span class="line">netstat -ano | finstr <span class="string">&quot;5900&quot;</span> #æŸ¥çœ‹æŒ‡å®šçš„ç«¯å£</span><br><span class="line">tasklist | findstr <span class="string">&quot;8696&quot;</span> #æŸ¥çœ‹æŒ‡å®šç«¯å£çš„è¿›ç¨‹</span><br><span class="line">ctrl + shift + ESC #æ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨ï¼Œæ­»æœºä¹Ÿèƒ½ç”¨</span><br></pre></td></tr></table></figure>

<p>ç»ƒä¹ ï¼šInetSocketAddressç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åˆ›å»ºå¥—æ¥å­—åœ°å€:IPåœ°å€å’Œç«¯å£å·</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestInetSocketAddress</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">InetSocketAddress</span> <span class="variable">socketAddress</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InetSocketAddress</span>(<span class="string">&quot;127.0.0.1&quot;</span>,<span class="number">8080</span>);</span><br><span class="line">        System.out.println(socketAddress);</span><br><span class="line"></span><br><span class="line">        System.out.println(socketAddress.getAddress()); <span class="comment">//åœ°å€</span></span><br><span class="line">        System.out.println(socketAddress.getHostName());</span><br><span class="line">        System.out.println(socketAddress.getPort()); <span class="comment">//ç«¯å£å·</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="1-5-é€šä¿¡åè®®"><a href="#1-5-é€šä¿¡åè®®" class="headerlink" title="1.5 é€šä¿¡åè®®"></a>1.5 <a href="https://so.csdn.net/so/search?q=%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE&spm=1001.2101.3001.7020">é€šä¿¡åè®®</a></h2><p>åè®®ï¼šçº¦å®šï¼Œå°±å¥½æ¯”æˆ‘ä»¬ç°åœ¨è¯´çš„æ˜¯æ™®é€šè¯ã€‚</p>
<p><strong>ç½‘ç»œé€šä¿¡åè®®ï¼š</strong>é€Ÿç‡ï¼Œä¼ è¾“ç ç‡ï¼Œä¼ è¾“æ§åˆ¶â€¦â€¦</p>
<p><strong>é—®é¢˜ï¼š</strong>éå¸¸çš„å¤æ‚ï¼Ÿ</p>
<p>å¤§äº‹åŒ–å°ï¼šåˆ†å±‚ï¼</p>
<p><strong>TCP&#x2F;IPåè®®ç°‡ï¼š</strong></p>
<p>é‡è¦çš„ä¸¤ä¸ªåè®®ï¼š</p>
<p>TCPï¼šç”¨æˆ·ä¼ è¾“åè®®<br><a href="https://so.csdn.net/so/search?q=UDP&spm=1001.2101.3001.7020">UDP</a>ï¼šç”¨æˆ·æ•°æ®æŠ¥åè®®</p>
<p>å‡ºåçš„åè®®ï¼šTCPï¼ŒIPï¼ˆç½‘ç»œäº’è¿åè®®ï¼‰ï¼Œå®é™…ä¸Šæ˜¯ä¸€ç»„åè®®</p>
<p><strong>TCPï¼ŒUDPå¯¹æ¯”ï¼š</strong></p>
<p>TCPï¼šæ‰“ç”µè¯</p>
<ul>
<li>è¿æ¥ï¼šç¨³å®š</li>
<li>ä¸‰æ¬¡æ¡æ‰‹ å››æ¬¡æŒ¥æ‰‹</li>
<li>å®¢æˆ·ç«¯ï¼ŒæœåŠ¡ç«¯</li>
<li>ä¼ è¾“å®Œæˆï¼Œé‡Šæ”¾è¿æ¥ã€æ•ˆç‡ä½</li>
</ul>
<p>UDPï¼šå‘çŸ­ä¿¡</p>
<ul>
<li>è¿æ¥ï¼šä¸ç¨³å®š</li>
<li>å®¢æˆ·ç«¯ï¼ŒæœåŠ¡ç«¯æ²¡æœ‰æ˜æ˜¾çš„ç•Œé™</li>
<li>ä¸ç®¡æœ‰æ²¡æœ‰å‡†å¤‡å¥½ï¼Œéƒ½å¯ä»¥å‘ç»™ä½ ï¼ˆå¯¼å¼¹ï¼‰</li>
<li>DDOSï¼šæ´ªæ°´æ”»å‡»ï¼é¥±å’Œæ”»å‡»</li>
</ul>
<p>æ‰©å±•ï¼šä¸‰æ¬¡æ¡æ‰‹ï¼Œå››æ¬¡æŒ¥æ‰‹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">æœ€å°‘éœ€è¦ä¸‰æ¬¡ï¼Œä¿è¯ç¨³å®šè¿æ¥ï¼</span><br><span class="line">Aï¼šä½ ç…å•¥ï¼Ÿ #ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯ç”³è¯·è¿æ¥</span><br><span class="line">Bï¼šç…ä½ å’‹åœ°ï¼Ÿ#ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡ç«¯å‘å®¢æˆ·ç«¯è¿”å›ç¡®è®¤åŒæ„è¿æ¥</span><br><span class="line">Aï¼šå¹²ä¸€åœºï¼ #ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯å‘é€ç¡®è®¤æŠ¥æ–‡æ®µï¼Œå®Œæˆè¿æ¥</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Aï¼šæˆ‘è¦èµ°äº†</span><br><span class="line">Bï¼šä½ çœŸçš„è¦èµ°äº†å—ï¼Ÿ</span><br><span class="line">Bï¼šä½ çœŸçš„çœŸçš„è¦èµ°äº†å—ï¼Ÿ</span><br><span class="line">Aï¼šæˆ‘çœŸçš„è¦èµ°äº†</span><br></pre></td></tr></table></figure>

<h2 id="1-6-TCPåè®®"><a href="#1-6-TCPåè®®" class="headerlink" title="1.6 TCPåè®®"></a>1.6 TCPåè®®</h2><p>å®¢æˆ·ç«¯ï¼š</p>
<ol>
<li>è¿æ¥æœåŠ¡å™¨ Socket(address,port)</li>
<li>å‘é€æ¶ˆæ¯</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//1.è¦çŸ¥é“æœåŠ¡å™¨çš„åœ°å€ï¼Œç«¯å£å·</span></span><br><span class="line"><span class="type">InetAddress</span> <span class="variable">address</span> <span class="operator">=</span> InetAddress.getByName(<span class="string">&quot;127.0.0.1&quot;</span>);</span><br><span class="line"><span class="type">int</span> <span class="variable">port</span> <span class="operator">=</span> <span class="number">9999</span>;</span><br><span class="line"><span class="comment">//2.åˆ›å»ºä¸€ä¸ªSocketè¿æ¥</span></span><br><span class="line"><span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Socket</span>(address, port);</span><br><span class="line"><span class="comment">//3.å‘é€æ¶ˆæ¯</span></span><br><span class="line"><span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> socket.getOutputStream();</span><br><span class="line">os.write(<span class="string">&quot;Hello World&quot;</span>.getBytes()); <span class="comment">//è¿”å›å­—èŠ‚æ•°ç»„ï¼ˆå°†Stringç¼–ç ä¸ºå­—èŠ‚åºåˆ— å­˜åˆ°å­—èŠ‚æ•°ç»„ï¼‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å…³é—­è¿æ¥</span></span><br><span class="line">socket.close();</span><br><span class="line">os.close();</span><br></pre></td></tr></table></figure>

<p>æœåŠ¡å™¨ï¼š</p>
<ol>
<li>å»ºç«‹æœåŠ¡çš„ç«¯å£ ServerSocket</li>
<li>ç­‰å¾…ç”¨æˆ·çš„è¿æ¥ accept()</li>
<li>æ¥æ”¶ç”¨æˆ·çš„æ¶ˆæ¯</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//1.åˆ›å»ºæœåŠ¡ç«¯ ç«¯å£</span></span><br><span class="line"><span class="type">ServerSocket</span> <span class="variable">serverSocket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">9999</span>);</span><br><span class="line"><span class="comment">//2.ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥</span></span><br><span class="line"><span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> serverSocket.accept();</span><br><span class="line"><span class="comment">//3.è¯»å–å®¢æˆ·ç«¯çš„æ¶ˆæ¯</span></span><br><span class="line"><span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> socket.getInputStream();</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç®¡é“æµ(è¿‡æ»¤ä¸€ä¸‹ï¼Œé˜²æ­¢ä¸­æ–‡ä¹±ç )</span></span><br><span class="line"><span class="type">ByteArrayOutputStream</span> <span class="variable">baos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ByteArrayOutputStream</span>();</span><br><span class="line"><span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>]; <span class="comment">//æ–°å»ºç¼“å†²åŒº</span></span><br><span class="line"><span class="type">int</span> len;</span><br><span class="line"><span class="keyword">while</span>((len = is.read(buffer))!=-<span class="number">1</span>)&#123;</span><br><span class="line">    baos.write(buffer,<span class="number">0</span>,len);</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(baos.toString()); <span class="comment">//æ‰“å°ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å…³é—­è¿æ¥ï¼Œå…ˆå¼€åå…³</span></span><br><span class="line">baos.close();</span><br><span class="line">is.close();</span><br><span class="line">socket.close();</span><br><span class="line">serverSocket.close();</span><br></pre></td></tr></table></figure>

<h3 id="TCPæ–‡ä»¶ä¸Šä¼ "><a href="#TCPæ–‡ä»¶ä¸Šä¼ " class="headerlink" title="TCPæ–‡ä»¶ä¸Šä¼ "></a>TCPæ–‡ä»¶ä¸Šä¼ </h3><p>æœåŠ¡å™¨ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.mine.lesson2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TcpServerDemo02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//1.åˆ›å»ºæœåŠ¡å™¨ç«¯å£</span></span><br><span class="line">        <span class="type">ServerSocket</span> <span class="variable">serverSocket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServerSocket</span>(<span class="number">9000</span>);</span><br><span class="line">        <span class="comment">//2.ç­‰å¾…ç”¨æˆ·è¿æ¥</span></span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> serverSocket.accept();</span><br><span class="line">        <span class="comment">//3.è·å–è¾“å…¥æµ</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> socket.getInputStream();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4.æ–‡ä»¶è¾“å‡º</span></span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;receive.jpg&quot;</span>));</span><br><span class="line">        <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="type">int</span> len;</span><br><span class="line">        <span class="keyword">while</span>((len=is.read(buffer))!=-<span class="number">1</span>)&#123;</span><br><span class="line">            fos.write(buffer,<span class="number">0</span>,len);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//é€šçŸ¥å®¢æˆ·ç«¯æ¥æ”¶å®Œæ¯•</span></span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> socket.getOutputStream();</span><br><span class="line">        os.write(<span class="string">&quot;æ¥æ”¶å®Œæ¯•ï¼Œå¯ä»¥æ–­å¼€è¿æ¥äº†&quot;</span>.getBytes());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å…³é—­æ‰€æœ‰è¿æ¥</span></span><br><span class="line">        os.close();</span><br><span class="line">        fos.close();</span><br><span class="line">        is.close();</span><br><span class="line">        socket.close();</span><br><span class="line">        serverSocket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å®¢æˆ·ç«¯ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.mine.lesson2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.InetAddress;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">import</span> java.net.UnknownHostException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TcpClientDemo02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//1.æ–°å»ºä¸€ä¸ªSocketè¿æ¥</span></span><br><span class="line">        <span class="type">Socket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Socket</span>(InetAddress.getByName(<span class="string">&quot;127.0.0.1&quot;</span>),<span class="number">9000</span>);</span><br><span class="line">        <span class="comment">//2.åˆ›å»ºä¸€ä¸ªè¾“å‡ºæµ</span></span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> socket.getOutputStream();</span><br><span class="line">        <span class="comment">//3.è¯»å–æ–‡ä»¶</span></span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;åˆ€å¦¹06.jpg&quot;</span>));</span><br><span class="line">        <span class="comment">//4.å†™å‡ºæ–‡ä»¶</span></span><br><span class="line">        <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="type">int</span> len;</span><br><span class="line">        <span class="keyword">while</span>((len=fis.read(buffer))!=-<span class="number">1</span>)&#123;</span><br><span class="line">            os.write(buffer,<span class="number">0</span>,len);   <span class="comment">// å†™å‡ºæ–‡ä»¶</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//é€šçŸ¥æœåŠ¡å™¨æˆ‘ä¼ è¾“ç»“æŸäº†</span></span><br><span class="line">        socket.shutdownOutput(); <span class="comment">//ä¼ è¾“å®Œäº†</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç¡®å®šæœåŠ¡å™¨æ¥æ”¶å®Œï¼Œæ‰èƒ½å¤Ÿæ–­å¼€è¿æ¥</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> socket.getInputStream();</span><br><span class="line">        <span class="comment">//String&lt;==&gt;byte[]</span></span><br><span class="line">        <span class="type">ByteArrayOutputStream</span> <span class="variable">baos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ByteArrayOutputStream</span>();</span><br><span class="line">        <span class="type">byte</span>[] buffer2 = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="type">int</span> len2;</span><br><span class="line">        <span class="keyword">while</span> ((len2=is.read(buffer2))!=-<span class="number">1</span>)&#123;</span><br><span class="line">            baos.write(buffer2,<span class="number">0</span>,len2);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(baos.toString()); <span class="comment">//è½¬ä¸ºå­—ç¬¦ä¸²</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//å…³é—­è¿æ¥</span></span><br><span class="line">        baos.close();</span><br><span class="line">        is.close();</span><br><span class="line">        fis.close();</span><br><span class="line">        os.close();</span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="åˆè¯†Tomcat"><a href="#åˆè¯†Tomcat" class="headerlink" title="åˆè¯†Tomcat"></a>åˆè¯†Tomcat</h3><p>æœåŠ¡ç«¯ï¼š</p>
<ul>
<li>è‡ªå®šä¹‰ C</li>
<li>TomcatæœåŠ¡å™¨ Sï¼šJavaåç«¯å¼€å‘</li>
</ul>
<p>å®¢æˆ·ç«¯ï¼š</p>
<ul>
<li>è‡ªå®šä¹‰ C</li>
<li>æµè§ˆå™¨ B</li>
</ul>
<h2 id="1-7-UDP"><a href="#1-7-UDP" class="headerlink" title="1.7 UDP"></a>1.7 UDP</h2><p>æ•°æ®æŠ¥åŒ…ï¼ˆDatagramSocketï¼‰å‘é€ä¸æ¥æ”¶</p>
<p>å‘é€ç«¯ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.mine.lesson3;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.net.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸éœ€è¦è¿æ¥æœåŠ¡å™¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UdpClientDemo01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//1.æ–°å»ºä¸€ä¸ªSocket</span></span><br><span class="line">        <span class="type">DatagramSocket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramSocket</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.å»ºä¸ªåŒ… DatagramPacket</span></span><br><span class="line">        String msg=<span class="string">&quot;ä½ å¥½ï¼ŒæœåŠ¡å™¨ï¼&quot;</span>;</span><br><span class="line">        <span class="type">InetAddress</span> <span class="variable">address</span> <span class="operator">=</span> InetAddress.getByName(<span class="string">&quot;localhost&quot;</span>);</span><br><span class="line">        <span class="type">int</span> port=<span class="number">9090</span>;</span><br><span class="line">        <span class="type">DatagramPacket</span> <span class="variable">packet</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramPacket</span>(msg.getBytes(), <span class="number">0</span>, msg.getBytes().length, address, port);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.å‘é€åŒ…</span></span><br><span class="line">        socket.send(packet);</span><br><span class="line"></span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ¥æ”¶ç«¯ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.mine.lesson3;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.net.DatagramPacket;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramSocket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UdpServerDemo01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//å¼€æ”¾ç«¯å£</span></span><br><span class="line">        <span class="type">DatagramSocket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramSocket</span>(<span class="number">9090</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ¥æ”¶æ•°æ®åŒ…</span></span><br><span class="line">        <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="type">DatagramPacket</span> <span class="variable">packet</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramPacket</span>(buffer, <span class="number">0</span>, buffer.length);</span><br><span class="line"></span><br><span class="line">        socket.receive(packet); <span class="comment">//é˜»å¡æ¥æ”¶</span></span><br><span class="line"></span><br><span class="line">        System.out.println(packet.getAddress().getHostAddress());</span><br><span class="line">        System.out.println(<span class="keyword">new</span> <span class="title class_">String</span>(packet.getData(),<span class="number">0</span>,packet.getLength())); <span class="comment">//byte[]-&gt;String</span></span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="UDPèŠå¤©å®ç°"><a href="#UDPèŠå¤©å®ç°" class="headerlink" title="UDPèŠå¤©å®ç°"></a>UDPèŠå¤©å®ç°</h3><p>å¾ªç¯å‘é€æ¶ˆæ¯</p>
<p>å‘é€æ–¹ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">DatagramSocket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramSocket</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‡†å¤‡æ•°æ®ï¼šä»æ§åˆ¶å°æ¥æ”¶æ•°æ®</span></span><br><span class="line">    <span class="type">BufferedReader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(System.in));</span><br><span class="line">    <span class="type">String</span> <span class="variable">data</span> <span class="operator">=</span> reader.readLine();</span><br><span class="line">    <span class="type">byte</span>[] datas = data.getBytes();</span><br><span class="line">    <span class="comment">//æ‰“åŒ…</span></span><br><span class="line">    <span class="type">DatagramPacket</span> <span class="variable">packet</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramPacket</span>(datas, <span class="number">0</span>, datas.length, <span class="keyword">new</span> <span class="title class_">InetSocketAddress</span>(<span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">6666</span>));</span><br><span class="line"></span><br><span class="line">    socket.send(packet);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(data.equals(<span class="string">&quot;bye&quot;</span>)) <span class="keyword">break</span>; <span class="comment">//byeé€€å‡ºå¾ªç¯æ¥æ”¶</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">socket.close();</span><br></pre></td></tr></table></figure>

<p>æ¥æ”¶è€…ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">DatagramSocket</span> <span class="variable">socket</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramSocket</span>(<span class="number">6666</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‡†å¤‡æ¥æ”¶æ•°æ®</span></span><br><span class="line">    <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">    <span class="type">DatagramPacket</span> <span class="variable">packet</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatagramPacket</span>(bytes, <span class="number">0</span>, bytes.length);</span><br><span class="line">    socket.receive(packet); <span class="comment">//é˜»å¡å¼æ¥æ”¶åŒ…è£¹</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ–­å¼€è¿æ¥ï¼šå¦‚æœæ¥æ”¶åˆ° byeå°±é€€å‡ºå¾ªç¯</span></span><br><span class="line">    <span class="type">byte</span>[] data = packet.getData();</span><br><span class="line">    <span class="type">String</span> <span class="variable">receiveData</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(data, <span class="number">0</span>, data.length);</span><br><span class="line">    System.out.println(receiveData);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (receiveData.equals(<span class="string">&quot;bye&quot;</span>)) &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">socket.close();</span><br></pre></td></tr></table></figure>

<h3 id="å¤šçº¿ç¨‹åœ¨çº¿å’¨è¯¢"><a href="#å¤šçº¿ç¨‹åœ¨çº¿å’¨è¯¢" class="headerlink" title="å¤šçº¿ç¨‹åœ¨çº¿å’¨è¯¢"></a>å¤šçº¿ç¨‹åœ¨çº¿å’¨è¯¢</h3><img src="/2023/11/05/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/1658405046676-ea33fa74-5d6e-466e-ae92-5c1e9f59697e.png" class title="img">

<h2 id="1-8-URL"><a href="#1-8-URL" class="headerlink" title="1.8 URL"></a>1.8 URL</h2><p><a href="https://www.baidu.com/">https://www.baidu.com</a></p>
<p>ç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼šå®šä½èµ„æºçš„ï¼Œå®šä½äº’è”ç½‘ä¸Šçš„æŸä¸€ä¸ªèµ„æº</p>
<p>DNSåŸŸåè§£æ <a href="http://www.baidu.com/">www.baidu.com</a> xxx.x.xx.xx</p>
<p>åè®®ï¼š&#x2F;&#x2F;ipåœ°å€ï¼šç«¯å£&#x2F;é¡¹ç›®å&#x2F;èµ„æº</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">URL</span> <span class="variable">url</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URL</span>(<span class="string">&quot;http://localhost:8080/helloworld/index.jsp?username=root&quot;</span>);</span><br><span class="line">System.out.println(url.getProtocol());  <span class="comment">//åè®®å</span></span><br><span class="line">System.out.println(url.getHost());  <span class="comment">//ä¸»æœºIP</span></span><br><span class="line">System.out.println(url.getPort());   <span class="comment">//ç«¯å£å·</span></span><br><span class="line">System.out.println(url.getPath());   <span class="comment">//æ–‡ä»¶</span></span><br><span class="line">System.out.println(url.getFile());   <span class="comment">//æ–‡ä»¶å…¨è·¯å¾„</span></span><br><span class="line">System.out.println(url.getQuery());   <span class="comment">//å‚æ•°</span></span><br></pre></td></tr></table></figure>

<h3 id="ä¸‹è½½æ–‡ä»¶"><a href="#ä¸‹è½½æ–‡ä»¶" class="headerlink" title="ä¸‹è½½æ–‡ä»¶"></a>ä¸‹è½½æ–‡ä»¶</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">URLDown</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">//1.ä¸‹è½½åœ°å€ï¼ˆå¯ä»¥å†™è‡ªå·±æƒ³ä¸‹çš„èµ„æºé“¾æ¥ï¼‰</span></span><br><span class="line">        <span class="type">URL</span> <span class="variable">url</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">URL</span>(<span class="string">&quot;https://m701.music.126.net/20210505164644/b272db6641b6e975c78e51e182d1211d/jdyyaac/obj/w5rDlsOJwrLDjj7CmsOj/8698723658/63d4/2446/ae0d/788e204c24f3497eb896a9112fa6baac.m4a&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.è¿æ¥åˆ°è¿™ä¸ªèµ„æº HTTP</span></span><br><span class="line">        <span class="type">HttpURLConnection</span> <span class="variable">urlConnection</span> <span class="operator">=</span> (HttpURLConnection) url.openConnection();</span><br><span class="line"></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> urlConnection.getInputStream();</span><br><span class="line"></span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;mine.m4a&quot;</span>);</span><br><span class="line">        <span class="type">byte</span>[] bytes = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="type">int</span> len;</span><br><span class="line">        <span class="keyword">while</span> ((len=inputStream.read(bytes))!=-<span class="number">1</span>)&#123;</span><br><span class="line">            fos.write(bytes,<span class="number">0</span>,len); <span class="comment">//å†™å‡ºè¿™ä¸ªæ•°æ®åˆ°æ–‡ä»¶</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        fos.close();</span><br><span class="line">        inputStream.close();</span><br><span class="line">        urlConnection.disconnect(); <span class="comment">//æ–­å¼€è¿æ¥</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>ç½‘ç»œç¼–ç¨‹</category>
      </categories>
      <tags>
        <tag>ç½‘ç»œç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>javase</title>
    <url>/2023/11/05/javase/</url>
    <content><![CDATA[<center>java</center>

<span id="more"></span>
]]></content>
      <categories>
        <category>åç«¯</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>åç«¯</tag>
        <tag>javase</tag>
      </tags>
  </entry>
  <entry>
    <title>springboot</title>
    <url>/2023/11/05/springboot/</url>
    <content><![CDATA[<center>springboot</center>

<span id="more"></span>

<p>å¾®æœåŠ¡é˜¶æ®µ</p>
<ul>
<li>javase:AOP</li>
<li>mysql:æŒä¹…åŒ–</li>
<li>html+css+js+jquery-+æ¡†æ¶ï¼šè§†å›¾ï¼Œæ¡†æ¶ä¸ç†Ÿç»ƒï¼Œcssä¸å¥½ï¼›</li>
<li>avaweb:ç‹¬ç«‹å¼€å‘MVCä¸‰å±‚æ¶æ„çš„ç½‘ç«™äº†ï¼šåŸå§‹</li>
<li>ssmï¼šæ¡†æ¶ï¼šç®€åŒ–äº†æˆ‘ä»¬çš„å¼€å‘æµç¨‹</li>
<li>war:tomcatiè¿è¡Œ</li>
<li>springå†ç®€åŒ–ï¼šSpringBoot;å¾®æœåŠ¡æ¶æ„ï¼</li>
<li>æœåŠ¡è¶Šæ¥è¶Šå¤šï¼šspringcloud;</li>
</ul>
<img src="/2023/11/05/springboot/1688025501226-e19b91c2-20e9-408b-94b4-38d15908b2bd.png" class title="img">

<h1 id="ä¸€ã€ä»€ä¹ˆæ˜¯SpringBootï¼Ÿä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ"><a href="#ä¸€ã€ä»€ä¹ˆæ˜¯SpringBootï¼Ÿä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ" class="headerlink" title="ä¸€ã€ä»€ä¹ˆæ˜¯SpringBootï¼Ÿä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ"></a>ä¸€ã€ä»€ä¹ˆæ˜¯SpringBootï¼Ÿä»€ä¹ˆæ˜¯å¾®æœåŠ¡ï¼Ÿ</h1><p><a href="https://mp.weixin.qq.com/s?__biz=Mzg2NTAzMTExNg==&mid=2247483724&idx=1&sn=77ce80187dbfdbaaafa0366f6a0c9151&scene=19#wechat_redirect">SpringBoot01ï¼šHello,Worldï¼</a></p>
<h2 id="ç¯å¢ƒå‡†å¤‡"><a href="#ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ç¯å¢ƒå‡†å¤‡"></a>ç¯å¢ƒå‡†å¤‡</h2><ul>
<li>jdk1.8</li>
<li>maven 3.6.1</li>
<li>springboot:2.2.13</li>
<li>IDEA</li>
</ul>
<h2 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h2><p>å®˜æ–¹ï¼šæä¾›äº†ä¸€ä¸ªå¿«é€Ÿç”Ÿæˆçš„ç½‘ç«™ï¼IDEAé›†æˆäº†è¿™ä¸ªç½‘ç«™ï¼<br>ä¸¤ç§æ–¹æ³•ï¼š</p>
<ul>
<li>å¯ä»¥åœ¨å®˜ç½‘ç›´æ¥ä¸‹è½½åï¼Œå¯¼å…¥ideaå¼€å‘ï¼ˆå®˜ç½‘åœ¨å“ªï¼‰</li>
<li>ç›´æ¥ä½¿ç”¨ideaåˆ›å»ºä¸€ä¸ªspringbootIé¡¹ç›®ï¼ˆä¸€èˆ¬å¼€å‘ç›´æ¥åœ¨IDEAä¸­åˆ›å»ºï¼‰</li>
</ul>
<p><a href="https://spring.io/projects/spring-boot">SpringBootå®˜ç½‘</a><br><a href="https://start.spring.io/">SpringBootå®˜ç½‘ä¸‹è½½é¡¹ç›®jaråŒ…</a></p>
<img src="/2023/11/05/springboot/1688029244197-8bbbec94-91fd-4fb3-896a-fd3881f384a8.png" class title="img">

<h3 id="IDEAåˆ›å»ºæ­¥éª¤"><a href="#IDEAåˆ›å»ºæ­¥éª¤" class="headerlink" title="IDEAåˆ›å»ºæ­¥éª¤"></a>IDEAåˆ›å»ºæ­¥éª¤</h3><img src="/2023/11/05/springboot/1688039766800-cfffd9bf-9018-4594-b6af-b3a2187da829.png" class title="img">

<p><strong>é€‰æ‹©springboot3.0ä»¥ä¸‹çš„ç‰ˆæœ¬ï¼ˆ3.0ä»¥ä¸Šçš„ç‰ˆæœ¬å½“å‰mavenç‰ˆæœ¬ä¸æ”¯æŒï¼‰è¸©å‘</strong></p>
<img src="/2023/11/05/springboot/1688039901385-a734fc23-3e9d-46c2-8039-241adfb4e5eb.png" class title="img">

<p>æ¨èä½¿ç”¨(2.3.12.RELEASE)ç‰ˆæœ¬</p>
<p>ç”±äºæˆ‘å½“å‰ç‰ˆæœ¬æœ€ä½ä¹Ÿæ˜¯2.7çš„ç‰ˆæœ¬æ‰€ä»¥åœ¨æ–°å»ºé¡¹ç›®çš„æ—¶å€™å»pom.xmlæ”¹ä¸‹springbootçš„ç‰ˆæœ¬</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.12.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>é¡¹ç›®ç»“æ„</strong></p>
<img src="/2023/11/05/springboot/1688034982879-ee3defe1-20b5-4d72-9cff-9b5bfd0aaf35.png" class title="img">

<p>åˆ é™¤ä¸ç”¨çš„æ–‡ä»¶</p>
<img src="/2023/11/05/springboot/1688035023654-462b3280-8e2d-4524-981b-b6503a02c96b.png" class title="img">

<p>å¯åŠ¨ç¨‹åº</p>
<img src="/2023/11/05/springboot/1688039951899-5d7c2a12-319b-4095-9bfa-43378b81422a.png" class title="img">

<p><strong>æ·»åŠ controllerå±‚ï¼ˆæ³¨æ„åˆ›å»ºåŒ…è¦åœ¨åŒçº§ç›®å½•ä¸‹ï¼‰</strong></p>
<img src="/2023/11/05/springboot/1688040072514-50c91892-a425-46a3-bf26-c645da7ae729.png" class title="img">

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.springboot01helloworld.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>é€šè¿‡ç«¯å£å®ç°webæ•ˆæœ</strong></p>
<img src="/2023/11/05/springboot/1688040225081-1f230551-9e12-4066-8295-56959dae0ba5.png" class title="img">

<h3 id="å°ç©æ„"><a href="#å°ç©æ„" class="headerlink" title="å°ç©æ„"></a>å°ç©æ„</h3><ol>
<li>æ”¹ç«¯å£å·</li>
</ol>
<p>åœ¨application.propertiesé‡Œç¼–å†™</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">#ä¿®æ”¹ç«¯å£å·</span><br><span class="line">server.port=8081</span><br></pre></td></tr></table></figure>

<ol>
<li>æ›´æ”¹bannerè‰ºæœ¯å­—</li>
</ol>
<p><strong>å®˜ç½‘ï¼š</strong><a href="https://www.bootschool.net/ascii-art"><strong>https://www.bootschool.net/ascii-art</strong></a></p>
<p><strong>åœ¨resourcesç›®å½•ä¸‹åˆ›å»ºbanner.txtæ–‡ä»¶</strong></p>
<figure class="highlight latex"><table><tr><td class="code"><pre><span class="line">            <span class="built_in">_</span>                                    </span><br><span class="line">  <span class="built_in">_</span><span class="built_in">_</span> <span class="built_in">_</span><span class="built_in">_</span>    (<span class="built_in">_</span>)    <span class="built_in">_</span><span class="built_in">_</span> <span class="built_in">_</span>     <span class="built_in">_</span><span class="built_in">_</span><span class="built_in">_</span>   <span class="built_in">_</span><span class="built_in">_</span> <span class="built_in">_</span><span class="built_in">_</span> <span class="built_in">_</span><span class="built_in">_</span> <span class="built_in">_</span>  <span class="built_in">_</span>   </span><br><span class="line">  <span class="keyword">\ </span><span class="keyword">\ </span>/    | |   / <span class="built_in">_</span>` |   / <span class="built_in">_</span> <span class="keyword">\ </span> <span class="keyword">\ </span>V  V /| +| |  </span><br><span class="line">  /<span class="built_in">_</span><span class="keyword">\_</span><span class="keyword">\ </span>  <span class="built_in">_</span>|<span class="built_in">_</span>|<span class="built_in">_</span>  <span class="keyword">\_</span><span class="built_in">_</span>,<span class="built_in">_</span>|   <span class="keyword">\_</span><span class="built_in">_</span><span class="built_in">_</span>/   <span class="keyword">\_</span>/<span class="keyword">\_</span>/  <span class="keyword">\_</span>,<span class="built_in">_</span>|  </span><br><span class="line"><span class="built_in">_</span>|&quot;&quot;&quot;&quot;&quot;|<span class="built_in">_</span>|&quot;&quot;&quot;&quot;&quot;|<span class="built_in">_</span>|&quot;&quot;&quot;&quot;&quot;|<span class="built_in">_</span>|&quot;&quot;&quot;&quot;&quot;|<span class="built_in">_</span>|&quot;&quot;&quot;&quot;&quot;|<span class="built_in">_</span>|&quot;&quot;&quot;&quot;&quot;| </span><br><span class="line">&quot;`-0-0-&#x27;&quot;`-0-0-&#x27;&quot;`-0-0-&#x27;&quot;`-0-0-&#x27;&quot;`-0-0-&#x27;&quot;`-0-0-&#x27; </span><br></pre></td></tr></table></figure>

<h1 id="äºŒã€åŸç†åˆæ¢"><a href="#äºŒã€åŸç†åˆæ¢" class="headerlink" title="äºŒã€åŸç†åˆæ¢"></a>äºŒã€åŸç†åˆæ¢</h1><p>è¿è¡ŒåŸç†</p>
<p><a href="https://mp.weixin.qq.com/s?__biz=Mzg2NTAzMTExNg==&mid=2247483743&idx=1&sn=431a5acfb0e5d6898d59c6a4cb6389e7&scene=19#wechat_redirect">SpringBoot02ï¼šè¿è¡ŒåŸç†åˆæ¢</a></p>
<p>è‡ªåŠ¨é…ç½®ï¼š</p>
<h2 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h2><ul>
<li>spring-boot-dependencies:æ ¸å¿ƒä¾èµ–åœ¨çˆ¶å·¥ç¨‹ä¸­ï¼</li>
<li>æˆ‘ä»¬åœ¨å†™æˆ–è€…å¼•å…¥ä¸€äº›Springbootä¾èµ–çš„æ—¶å€™ï¼Œä¸éœ€è¦æŒ‡å®šç‰ˆæœ¬ï¼Œå°±å› ä¸ºæœ‰è¿™äº›ç‰ˆæœ¬ä»“åº“</li>
</ul>
<h2 id="å¯åŠ¨å™¨"><a href="#å¯åŠ¨å™¨" class="headerlink" title="å¯åŠ¨å™¨"></a>å¯åŠ¨å™¨</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>å¯åŠ¨å™¨ï¼šè¯´ç™½äº†å°±æ˜¯Springbootçš„å¯åŠ¨åœºæ™¯ï¼›</li>
<li>æ¯”å¦‚spring-boot-starter-web,ä»–å°±ä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨å¯¼å…¥webç¯å¢ƒæ‰€æœ‰çš„ä¾èµ–ï¼</li>
<li>springbootä¼šå°†æ‰€æœ‰çš„åŠŸèƒ½åœºæ™¯ï¼Œéƒ½å˜æˆä¸€ä¸ªä¸ªçš„å¯åŠ¨å™¨</li>
<li>æˆ‘ä»¬è¦ä½¿ç”¨ä»€ä¹ˆåŠŸèƒ½ï¼Œå°±åªéœ€è¦æ‰¾åˆ°å¯¹åº”çš„å¯åŠ¨å™¨å°±å¯ä»¥äº†starter</li>
</ul>
<h2 id="ä¸»ç¨‹åº"><a href="#ä¸»ç¨‹åº" class="headerlink" title="ä¸»ç¨‹åº"></a>ä¸»ç¨‹åº</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.springboot01helloworld;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="comment">// @SpringBootAppLicationï¼šæ ‡æ³¨è¿™ä¸ªç±»æ˜¯ä¸€ä¸ªspringbootçš„åº”ç”¨</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springboot01HellowordApplication</span> &#123;</span><br><span class="line">    <span class="comment">//å°†springboot.åº”ç”¨å¯åŠ¨</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Springboot01HellowordApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<h2 id="æ³¨è§£"><a href="#æ³¨è§£" class="headerlink" title="æ³¨è§£"></a>æ³¨è§£</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">    <span class="meta">@SpringBootConfiguration</span>:	springbootçš„é…ç½®</span><br><span class="line">    <span class="meta">@Configuration</span>:	springé…ç½®ç±»</span><br><span class="line">    <span class="meta">@Component</span>:	è¯´æ˜è¿™ä¹Ÿæ˜¯ä¸€ä¸ªspringçš„ç»„ä»¶</span><br><span class="line"></span><br><span class="line">    <span class="meta">@EnableAutoConfiguration</span>:	è‡ªåŠ¨é…ç½®</span><br><span class="line">    <span class="meta">@AutoConfigurationPackage</span>:	è‡ªåŠ¨é…ç½®åŒ…</span><br><span class="line">    <span class="meta">@Import(AutoConfigurationPackages.Registrar.class)</span>:	è‡ªåŠ¨é…ç½®`åŒ…æ³¨å†Œ</span><br><span class="line">    <span class="meta">@Import(AutoConfigurationImportselector.class)</span>: è‡ªåŠ¨é…ç½®å¯¼å…¥é€‰æ‹©</span><br><span class="line"></span><br><span class="line">   <span class="comment">//è·å–æ‰€æœ‰çš„é…ç½®</span></span><br><span class="line">List&lt;string&gt;configurations <span class="title function_">getCandidateConfigurations</span><span class="params">(annotationMetadata,</span></span><br><span class="line"><span class="params">attributes)</span>;     </span><br></pre></td></tr></table></figure>

<p><strong>è·å–å€™é€‰çš„é…ç½®</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">protected</span> List&lt;string&gt;getCandidateConfigurations(AnnotationMetadata metadata,  AnnotationAttributes attributes)&#123;</span><br><span class="line">                                               </span><br><span class="line">    List&lt;string&gt;configurations=</span><br><span class="line">        SpringFactoriesLoader.loadFactoryNames(getSpringFactoriesLoaderFactoryclass(),  getBeanclassLoader());</span><br><span class="line">                                             </span><br><span class="line">    Assert.notEmpty(configurations,<span class="string">&quot;No auto configuration classes found inMETA-INF/spring.factories.If you&quot;</span></span><br><span class="line">        </span><br><span class="line">      +  <span class="string">&quot;are using a custom packaging,make sure that file is correct.&quot;</span>);</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">return</span> configurations;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>META-lNF&#x2F;spring.factories:è‡ªåŠ¨é…ç½®çš„æ ¸å¿ƒæ–‡ä»¶</strong></p>
<img src="/2023/11/05/springboot/1688083648091-bba524e9-8417-4f03-8527-7ae75ece526c.png" class title="img">

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Properties properties PropertiesLoaderutils.loadProperties(resource);</span><br><span class="line"> <span class="comment">// æ‰€æœ‰èµ„æºåŠ è½½åˆ°é…ç½®ç±»ä¸­ï¼</span></span><br></pre></td></tr></table></figure>

<h2 id="ç»“è®ºï¼š"><a href="#ç»“è®ºï¼š" class="headerlink" title="ç»“è®ºï¼š"></a>ç»“è®ºï¼š</h2><p>springbootæ‰€æœ‰è‡ªåŠ¨é…ç½®éƒ½æ˜¯åœ¨å¯åŠ¨çš„æ—¶å€™æ‰«æå¹¶åŠ è½½ï¼šspring.factoriesæ‰€æœ‰çš„è‡ªåŠ¨é…ç½®ç±»éƒ½åœ¨è¿™é‡Œé¢ï¼Œä½†æ˜¯ä¸ä¸€å®šç”Ÿæ•ˆï¼Œè¦åˆ¤æ–­æ¡ä»¶æ˜¯å¦æˆç«‹ï¼Œåªè¦å¯¼å…¥äº†å¯¹åº”çš„startï¼Œå°±æœ‰å¯¹åº”çš„å¯åŠ¨å™¨äº†ï¼Œæœ‰äº†å¯åŠ¨å™¨ï¼Œæˆ‘ä»¬è‡ªåŠ¨è£…é…å°±ä¼šç”Ÿæ•ˆï¼Œç„¶åå°±é…ç½®æˆåŠŸï¼</p>
<ol>
<li>springbootåœ¨å¯åŠ¨çš„æ—¶å€™ï¼Œä»ç±»è·¯å¾„ä¸‹&#x2F;META-INF&#x2F;spring.factoriesè·å–æŒ‡å®šçš„å€¼ï¼›</li>
<li>å°†è¿™äº›è‡ªåŠ¨é…ç½®çš„ç±»å¯¼å…¥å®¹å™¨ï¼Œè‡ªåŠ¨é…ç½®å°±ä¼šç”Ÿæ•ˆï¼Œå¸®æˆ‘è¿›è¡Œè‡ªåŠ¨é…ç½®ï¼</li>
<li>ä»¥å‰æˆ‘ä»¬éœ€è¦è‡ªåŠ¨é…ç½®çš„ä¸œè¥¿ï¼Œç°åœ¨springbootå¸®æˆ‘ä»¬åšäº†ï¼</li>
<li>æ•´åˆjavaEE,è§£å†³æ–¹æ¡ˆå’Œè‡ªåŠ¨é…ç½®çš„ä¸œè¥¿éƒ½åœ¨spring-boot-autoconfigure-.2.7.13.RELEASE.jarè¿™ä¸ªåŒ…ä¸‹</li>
<li>å®ƒä¼šæŠŠæ‰€æœ‰éœ€è¦å¯¼å…¥çš„ç»„ä»¶ï¼Œä»¥ç±»åçš„æ–¹å¼è¿”å›ï¼Œè¿™äº›ç»„ä»¶å°±ä¼šè¢«æ·»åŠ åˆ°å®¹å™¨ï¼›</li>
<li>å®¹å™¨ä¸­ä¹Ÿä¼šå­˜åœ¨éå¸¸å¤šçš„xxxAutoConfigurationçš„æ–‡ä»¶(@Bean),å°±æ˜¯è¿™äº›ç±»ç»™å®¹å™¨ä¸­å¯¼å…¥äº†è¿™ä¸ªåœºæ™¯éœ€è¦çš„æ‰€æœ‰ç»„ä»¶ï¼›å¹¶è‡ªåŠ¨é…ç½®ï¼Œ@Configurationï¼ŒJavaConfig!</li>
<li>æœ‰äº†è‡ªåŠ¨é…ç½®ç±»ï¼Œå…å»äº†æˆ‘ä»¬æ‰‹åŠ¨ç¼–å†™é…ç½®æ–‡ä»¶çš„å·¥ä½œï¼</li>
</ol>
<img src="/2023/11/05/springboot/1688041119125-0487fcdb-ed5e-4b86-b855-8dbb2b0f536a.png" class title="img">

<p>å…³äºSpringBootï¼Œè°ˆè°ˆä½ çš„ç†è§£ï¼š</p>
<ul>
<li>è‡ªåŠ¨è£…é…</li>
<li>runï¼ˆï¼‰</li>
</ul>
<h1 id="ä¸‰ã€yamlè¯­æ³•"><a href="#ä¸‰ã€yamlè¯­æ³•" class="headerlink" title="ä¸‰ã€yamlè¯­æ³•"></a>ä¸‰ã€yamlè¯­æ³•</h1><p><a href="https://mp.weixin.qq.com/s?__biz=Mzg2NTAzMTExNg==&mid=2247483744&idx=1&sn=b4ec762e71b2ddf9403c035635299206&scene=19#wechat_redirect">SpringBoot03ï¼šyamlé…ç½®æ³¨å…¥</a></p>
<img src="/2023/11/05/springboot/1688093369827-978dc484-69b9-47cf-a9b0-c4dcf8a7ae25.png" class title="img">

<p><strong>çº§åˆ«ï¼šyaml</strong> <strong>æ¯”</strong> <strong>propertiesé«˜</strong></p>
<img src="/2023/11/05/springboot/1688112096576-b9a19167-453b-4782-a088-e55839f51a68.png" class title="img">

<p>yaml</p>
<ul>
<li>å¯¹ç©ºæ ¼è¦æ±‚ç‰¹åˆ«é«˜ï¼Œä¸€ä¸ªç©ºæ ¼ç­‰äºä¸€ä¸ªç­‰çº§</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#ä¾‹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#è¿™é‡Œageåœ¨studentä¸‹æ˜¯å’ŒnameåŒçº§</span></span><br><span class="line"><span class="attr">student:</span> </span><br><span class="line"> <span class="attr">name:</span> <span class="string">xiaowu</span>  </span><br><span class="line"> <span class="attr">age:</span> <span class="number">20</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#è¿™é‡Œçš„ageåœ¨studentä¸‹æ˜¯å’Œnameæ˜¯ä¸Šä¸‹çº§å…³ç³»</span></span><br><span class="line"><span class="attr">student:</span></span><br><span class="line"><span class="attr">name:</span> <span class="string">xiaowu</span></span><br><span class="line"> <span class="attr">age:</span> <span class="number">20</span></span><br></pre></td></tr></table></figure>

<ul>
<li>å¯ä»¥æ³¨å…¥åˆ°æˆ‘ä»¬çš„é…ç½®ç±»ä¸­ï¼</li>
</ul>
<h2 id="3-1ã€ç»™å±æ€§èµ‹å€¼çš„å‡ ç§æ–¹å¼"><a href="#3-1ã€ç»™å±æ€§èµ‹å€¼çš„å‡ ç§æ–¹å¼" class="headerlink" title="3.1ã€ç»™å±æ€§èµ‹å€¼çš„å‡ ç§æ–¹å¼"></a>3.1ã€ç»™å±æ€§èµ‹å€¼çš„å‡ ç§æ–¹å¼</h2><h3 id="1ã€-Value"><a href="#1ã€-Value" class="headerlink" title="1ã€@Value"></a>1ã€@Value</h3><p>æ³¨ï¼šå·æ‡’ä½¿ç”¨äº†lombokæ’ä»¶</p>
<p><strong>Dog</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.springboot02config.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span> <span class="comment">/*æŠŠå½“å‰ç±»æ·»åŠ åˆ°springbootç»„ä»¶é‡Œ*/</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Person</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.springboot02config.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Boolean happy;</span><br><span class="line">    <span class="keyword">private</span> Date birth;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,Object&gt; maps;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Object&gt; lists;</span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ³¨å…¥Dog</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line">    <span class="meta">@Value(&quot;å°ç™½&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@Value(&quot;3&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.springboot02config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.wu.springboot02config.pojo.Dog;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Springboot02ConfigApplicationTests</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span> <span class="comment">//è‡ªåŠ¨è£…é…</span></span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(dog);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç»“æœï¼š</p>
<img src="/2023/11/05/springboot/1688115132265-8ee2e278-df34-4c7e-8898-1618646c684a.png" class title="img">

<h3 id="2ã€yamlèµ‹å€¼"><a href="#2ã€yamlèµ‹å€¼" class="headerlink" title="2ã€yamlèµ‹å€¼"></a>2ã€yamlèµ‹å€¼</h3><p><strong>application.yaml</strong></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">person:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">xiaowu</span></span><br><span class="line">  <span class="attr">age:</span> <span class="number">20</span></span><br><span class="line">  <span class="attr">happy:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">birth:</span> <span class="number">2003</span><span class="string">/05/03</span></span><br><span class="line">  <span class="attr">maps:</span> &#123;<span class="attr">k1:</span> <span class="string">v1</span>,<span class="attr">k2:</span> <span class="string">v2</span>&#125;</span><br><span class="line">  <span class="attr">lists:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">code</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">music</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">girl</span></span><br><span class="line">  <span class="attr">dog:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">æ—ºè´¢</span></span><br><span class="line">    <span class="attr">age:</span> <span class="number">3</span></span><br></pre></td></tr></table></figure>

<p>åœ¨å®ä½“ç±»ä¸ŠåŠ ä¸Šæ³¨è§£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;person&quot;)</span> <span class="comment">//prefix=ç»‘å®šçš„å®ä½“ç±»</span></span><br></pre></td></tr></table></figure>

<p>ä¼šå‡ºç°ä¸‹é¢çš„çŠ¶å†µ</p>
<img src="/2023/11/05/springboot/1688116554284-e907d1db-32ae-4e8e-9f73-1d07b9c880e6.png" class title="img">

<p><a href="https://docs.spring.io/spring-boot/docs/2.6.7/reference/html/configuration-metadata.html#appendix.configuration-metadata.annotation-processor">ç‚¹å‡»æ¬¡é“¾æ¥ï¼Œè¿›å®˜æ–¹è§£å†³æ–¹æ¡ˆ</a></p>
<p>åŠ ä¸Šä¾èµ–</p>
<p>å¯åŠ å¯ä¸åŠ ï¼Œä¸åŠ çˆ†çº¢èƒ½æ­£å¸¸ä½¿ç”¨ï¼ŒåŠ äº†çˆ†çº¢æ²¡äº†ï¼Œå¤šäº†æç¤º</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3ã€ç¬¬ä¸‰ç§â€”â€”åŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶"><a href="#3ã€ç¬¬ä¸‰ç§â€”â€”åŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶" class="headerlink" title="3ã€ç¬¬ä¸‰ç§â€”â€”åŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶"></a>3ã€ç¬¬ä¸‰ç§â€”â€”åŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶</h3><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">name</span>=<span class="string">xiaowu</span></span><br><span class="line"><span class="attr">//åŠ è½½æŒ‡å®šé…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="attr">@PropertySource(value</span> = <span class="string">&quot;classpath:xiaowu.properties&quot;)</span></span><br><span class="line">    <span class="attr">public</span> <span class="string">class Person &#123;</span></span><br><span class="line">     <span class="attr">//SPELè¡¨è¾¾å¼å–å‡ºé…ç½®æ–‡ä»¶çš„å€¼</span></span><br><span class="line">    <span class="attr">@Value(&quot;$&#123;name&#125;&quot;)</span></span><br><span class="line">    <span class="attr">private</span> <span class="string">String name;</span></span><br><span class="line">    <span class="attr">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="3-2ã€é…ç½®æ–‡ä»¶å ä½ç¬¦ï¼š"><a href="#3-2ã€é…ç½®æ–‡ä»¶å ä½ç¬¦ï¼š" class="headerlink" title="3.2ã€é…ç½®æ–‡ä»¶å ä½ç¬¦ï¼š"></a>3.2ã€é…ç½®æ–‡ä»¶å ä½ç¬¦ï¼š</h2><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">person:</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">xiaowu$&#123;random.uuid&#125;</span></span><br><span class="line">  <span class="attr">age:</span> <span class="string">$&#123;random.int&#125;</span></span><br><span class="line">  <span class="attr">happy:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">birth:</span> <span class="number">2003</span><span class="string">/05/03</span></span><br><span class="line">  <span class="attr">maps:</span> &#123;<span class="attr">k1:</span> <span class="string">v1</span>,<span class="attr">k2:</span> <span class="string">v2</span>&#125;</span><br><span class="line">  <span class="attr">hello:</span> <span class="string">haapy</span>  <span class="comment">#ç›¸å½“äºå ä½ç¬¦</span></span><br><span class="line">  <span class="attr">lists:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">code</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">music</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">girl</span></span><br><span class="line">  <span class="attr">dog:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">$&#123;person.hello:hello&#125;_æ—ºè´¢</span></span><br><span class="line">    <span class="attr">age:</span> <span class="number">3</span></span><br></pre></td></tr></table></figure>

<p>è¾“å‡º</p>
<p>Person(name&#x3D;xiaowu2ddc72f0-7353-4fe4-8b84-2efbb138c5b3, age&#x3D;-866389890, happy&#x3D;true, birth&#x3D;Sat May 03 00:00:00 CST 2003, maps&#x3D;{k1&#x3D;v1, k2&#x3D;v2}, lists&#x3D;[code, music, girl], dog&#x3D;Dog(name&#x3D;haapy_æ—ºè´¢, age&#x3D;3))</p>
<h3 id="æ¾æ•£ç»‘å®šï¼š"><a href="#æ¾æ•£ç»‘å®šï¼š" class="headerlink" title="æ¾æ•£ç»‘å®šï¼š"></a>æ¾æ•£ç»‘å®šï¼š</h3><p><strong>application.yaml</strong></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">dog:</span></span><br><span class="line">  <span class="attr">first-name:</span> <span class="string">å°ç™½</span></span><br><span class="line">  <span class="attr">age:</span> <span class="number">2</span></span><br></pre></td></tr></table></figure>

<p><strong>Dog</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span> <span class="comment">/*æ³¨å†Œbean*/</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;dog&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line">   <span class="comment">/* @Value(&quot;å°ç™½&quot;)*/</span></span><br><span class="line">    <span class="keyword">private</span> String firstName;</span><br><span class="line">   <span class="comment">/* @Value(&quot;3&quot;)*/</span></span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æµ‹è¯•</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.springboot02config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.wu.springboot02config.pojo.Dog;</span><br><span class="line"><span class="keyword">import</span> com.wu.springboot02config.pojo.Person;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Springboot02ConfigApplicationTests</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> Person person;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//System.out.println(person);</span></span><br><span class="line">        System.out.println(dog);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡º</p>
<p>Dog(firstName&#x3D;å°ç™½, age&#x3D;2)</p>
<h2 id="3-3ã€ç»“è®ºï¼š"><a href="#3-3ã€ç»“è®ºï¼š" class="headerlink" title="3.3ã€ç»“è®ºï¼š"></a>3.3ã€ç»“è®ºï¼š</h2><ul>
<li>é…ç½®ymlå’Œé…ç½®propertieséƒ½å¯ä»¥è·å–åˆ°å€¼ ï¼Œ å¼ºçƒˆæ¨è ymlï¼›</li>
<li>å¦‚æœæˆ‘ä»¬åœ¨æŸä¸ªä¸šåŠ¡ä¸­ï¼Œåªéœ€è¦è·å–é…ç½®æ–‡ä»¶ä¸­çš„æŸä¸ªå€¼ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸‹ @valueï¼›</li>
<li>å¦‚æœè¯´ï¼Œæˆ‘ä»¬ä¸“é—¨ç¼–å†™äº†ä¸€ä¸ªJavaBeanæ¥å’Œé…ç½®æ–‡ä»¶è¿›è¡Œä¸€ä¸€æ˜ å°„ï¼Œå°±ç›´æ¥@configurationPropertiesï¼Œä¸è¦çŠ¹è±«ï¼</li>
</ul>
<h2 id="3-4ã€JSR303æ•°æ®æ ¡éªŒ"><a href="#3-4ã€JSR303æ•°æ®æ ¡éªŒ" class="headerlink" title="3.4ã€JSR303æ•°æ®æ ¡éªŒ"></a>3.4ã€JSR303æ•°æ®æ ¡éªŒ</h2><p><a href="https://blog.csdn.net/weixin_44440642/article/details/106335653">JSR303ä»‹ç»å’Œä½¿ç”¨_java303_ä¸çŸ¥æ‰€ç»ˆ,ä¸çŸ¥æ‰€èµ·çš„åšå®¢-CSDNåšå®¢</a></p>
<p><strong>ä½¿ç”¨</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Validated</span>  <span class="comment">//æ•°æ®æ ¡éªŒ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    <span class="meta">@Email(message = &quot;é‚®ç®±æ ¼å¼é”™è¯¯&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> Boolean happy;</span><br><span class="line">    <span class="keyword">private</span> Date birth;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, Object&gt; maps;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Object&gt; lists;</span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯èƒ½ä¼šå‡ºç°@Validatedä¸‹çš„æŸä¸ª@XXX()æ³¨è§£çš„çˆ†çº¢</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¼€å¯æ•°æ®æ ¡éªŒ--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-validation<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ³¨è§£æºç åœ°å€</p>
<img src="/2023/11/05/springboot/1688265638026-b0fa1424-8e74-46dc-a435-db1b16d234a0.png" class title="img">

<figure class="highlight latex"><table><tr><td class="code"><pre><span class="line">ç©ºæ£€æŸ¥ </span><br><span class="line">@Null éªŒè¯å¯¹è±¡æ˜¯å¦ä¸ºnull </span><br><span class="line">@NotNull éªŒè¯å¯¹è±¡æ˜¯å¦ä¸ä¸ºnull, æ— æ³•æŸ¥æ£€é•¿åº¦ä¸º0çš„å­—ç¬¦ä¸² </span><br><span class="line">@NotBlank æ£€æŸ¥çº¦æŸå­—ç¬¦ä¸²æ˜¯ä¸æ˜¯Nullè¿˜æœ‰è¢«Trimçš„é•¿åº¦æ˜¯å¦å¤§äº0,åªå¯¹å­—ç¬¦ä¸²,ä¸”ä¼šå»æ‰å‰åç©ºæ ¼. </span><br><span class="line">@NotEmpty æ£€æŸ¥çº¦æŸå…ƒç´ æ˜¯å¦ä¸ºNULLæˆ–è€…æ˜¯EMPTY.</span><br><span class="line"></span><br><span class="line">Booelanæ£€æŸ¥ </span><br><span class="line">@AssertTrue éªŒè¯ Boolean å¯¹è±¡æ˜¯å¦ä¸º true </span><br><span class="line">@AssertFalse éªŒè¯ Boolean å¯¹è±¡æ˜¯å¦ä¸º false</span><br><span class="line"></span><br><span class="line">é•¿åº¦æ£€æŸ¥ </span><br><span class="line">@Size(min=, max=) éªŒè¯å¯¹è±¡ï¼ˆArray,Collection,Map,Stringï¼‰é•¿åº¦æ˜¯å¦åœ¨ç»™å®šçš„èŒƒå›´ä¹‹å†… </span><br><span class="line">@Length(min=, max=) Validates that the annotated string is between min and max included.</span><br><span class="line"></span><br><span class="line">æ—¥æœŸæ£€æŸ¥ </span><br><span class="line">@Past éªŒè¯ Date å’Œ Calendar å¯¹è±¡æ˜¯å¦åœ¨å½“å‰æ—¶é—´ä¹‹å‰ï¼ŒéªŒè¯æˆç«‹çš„è¯è¢«æ³¨é‡Šçš„å…ƒç´ ä¸€å®šæ˜¯ä¸€ä¸ªè¿‡å»çš„æ—¥æœŸ </span><br><span class="line">@Future éªŒè¯ Date å’Œ Calendar å¯¹è±¡æ˜¯å¦åœ¨å½“å‰æ—¶é—´ä¹‹å ï¼ŒéªŒè¯æˆç«‹çš„è¯è¢«æ³¨é‡Šçš„å…ƒç´ ä¸€å®šæ˜¯ä¸€ä¸ªå°†æ¥çš„æ—¥æœŸ </span><br><span class="line">@Pattern éªŒè¯ String å¯¹è±¡æ˜¯å¦ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼çš„è§„åˆ™ï¼Œè¢«æ³¨é‡Šçš„å…ƒç´ ç¬¦åˆåˆ¶å®šçš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œregexp:æ­£åˆ™è¡¨è¾¾å¼ flags: æŒ‡å®š Pattern.Flag çš„æ•°ç»„ï¼Œè¡¨ç¤ºæ­£åˆ™è¡¨è¾¾å¼çš„ç›¸å…³é€‰é¡¹ã€‚</span><br><span class="line"></span><br><span class="line">æ•°å€¼æ£€æŸ¥ </span><br><span class="line">å»ºè®®ä½¿ç”¨åœ¨Stirng,Integerç±»å‹ï¼Œä¸å»ºè®®ä½¿ç”¨åœ¨intç±»å‹ä¸Šï¼Œå› ä¸ºè¡¨å•å€¼ä¸ºâ€œâ€æ—¶æ— æ³•è½¬æ¢ä¸ºintï¼Œä½†å¯ä»¥è½¬æ¢ä¸ºStirngä¸ºâ€â€œ,Integerä¸ºnull </span><br><span class="line">@Min éªŒè¯ Number å’Œ String å¯¹è±¡æ˜¯å¦å¤§ç­‰äºæŒ‡å®šçš„å€¼ </span><br><span class="line">@Max éªŒè¯ Number å’Œ String å¯¹è±¡æ˜¯å¦å°ç­‰äºæŒ‡å®šçš„å€¼ </span><br><span class="line">@DecimalMax è¢«æ ‡æ³¨çš„å€¼å¿…é¡»ä¸å¤§äºçº¦æŸä¸­æŒ‡å®šçš„æœ€å¤§å€¼. è¿™ä¸ªçº¦æŸçš„å‚æ•°æ˜¯ä¸€ä¸ªé€šè¿‡BigDecimalå®šä¹‰çš„æœ€å¤§å€¼çš„å­—ç¬¦ä¸²è¡¨ç¤º.å°æ•°å­˜åœ¨ç²¾åº¦ </span><br><span class="line">@DecimalMin è¢«æ ‡æ³¨çš„å€¼å¿…é¡»ä¸å°äºçº¦æŸä¸­æŒ‡å®šçš„æœ€å°å€¼. è¿™ä¸ªçº¦æŸçš„å‚æ•°æ˜¯ä¸€ä¸ªé€šè¿‡BigDecimalå®šä¹‰çš„æœ€å°å€¼çš„å­—ç¬¦ä¸²è¡¨ç¤º.å°æ•°å­˜åœ¨ç²¾åº¦ </span><br><span class="line">@Digits éªŒè¯ Number å’Œ String çš„æ„æˆæ˜¯å¦åˆæ³• </span><br><span class="line">@Digits(integer=,fraction=) éªŒè¯å­—ç¬¦ä¸²æ˜¯å¦æ˜¯ç¬¦åˆæŒ‡å®šæ ¼å¼çš„æ•°å­—ï¼ŒintergeræŒ‡å®šæ•´æ•°ç²¾åº¦ï¼ŒfractionæŒ‡å®šå°æ•°ç²¾åº¦ã€‚ </span><br><span class="line">@Range(min=, max=) è¢«æŒ‡å®šçš„å…ƒç´ å¿…é¡»åœ¨åˆé€‚çš„èŒƒå›´å†… </span><br><span class="line">@Range(min=10000,max=50000,message=â€range.bean.wageâ€) </span><br><span class="line">@Valid é€’å½’çš„å¯¹å…³è”å¯¹è±¡è¿›è¡Œæ ¡éªŒ, å¦‚æœå…³è”å¯¹è±¡æ˜¯ä¸ªé›†åˆæˆ–è€…æ•°ç»„,é‚£ä¹ˆå¯¹å…¶ä¸­çš„å…ƒç´ è¿›è¡Œé€’å½’æ ¡éªŒ,å¦‚æœæ˜¯ä¸€ä¸ªmap,åˆ™å¯¹å…¶ä¸­çš„å€¼éƒ¨åˆ†è¿›è¡Œæ ¡éªŒ.(æ˜¯å¦è¿›è¡Œé€’å½’éªŒè¯) </span><br><span class="line">@CreditCardNumberä¿¡ç”¨å¡éªŒè¯ </span><br><span class="line">@Email éªŒè¯æ˜¯å¦æ˜¯é‚®ä»¶åœ°å€ï¼Œå¦‚æœä¸ºnull,ä¸è¿›è¡ŒéªŒè¯ï¼Œç®—é€šè¿‡éªŒè¯ã€‚ </span><br><span class="line">@ScriptAssert(lang= ,script=, alias=) </span><br><span class="line">@URL(protocol=,host=, port=,regexp=, flags=)]()]()</span><br></pre></td></tr></table></figure>

<p><strong>æµ‹è¯•ï¼š</strong></p>
<p>é”™è¯¯ç¡®é‚®ç®±åœ°å€</p>
<img src="/2023/11/05/springboot/1688265977895-c36557f2-a1de-4aeb-9525-2551f2b30e1f.png" class title="img">

<p>æ­£ç¡®</p>
<img src="/2023/11/05/springboot/1688266095797-fd4ce0ac-884d-4437-a3f6-b9f51d33aaab.png" class title="img">

<h2 id="3-5ã€å¤šç¯å¢ƒé…ç½®"><a href="#3-5ã€å¤šç¯å¢ƒé…ç½®" class="headerlink" title="3.5ã€å¤šç¯å¢ƒé…ç½®"></a>3.5ã€å¤šç¯å¢ƒé…ç½®</h2><img src="/2023/11/05/springboot/1688692605499-f5721d9e-af50-451e-adff-046219608cbb.png" class title="img">

<img src="/2023/11/05/springboot/1688692629819-74e5ef7c-6832-4aad-9e11-88fa4b943d9b.png" class title="img">

<h3 id="é‡‡ç”¨-propertiesæ–‡ä»¶"><a href="#é‡‡ç”¨-propertiesæ–‡ä»¶" class="headerlink" title="é‡‡ç”¨.propertiesæ–‡ä»¶"></a>é‡‡ç”¨.propertiesæ–‡ä»¶</h3><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment">#spring çš„å¤šç¯å¢ƒé…ç½®ï¼Œå¯ä»¥é€‰æ‹©æ¿€æ´»é‚£ä¸ªé…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="attr">spring.profiles.active</span>=<span class="string">dev</span></span><br><span class="line"><span class="attr">server.port</span>=<span class="string">8081</span></span><br></pre></td></tr></table></figure>

<img src="/2023/11/05/springboot/1688693582049-fcad2ae0-9f07-49f7-a2f3-6f927e5e91ab.png" class title="img">

<h3 id="é‡‡ç”¨ymlæ–‡ä»¶"><a href="#é‡‡ç”¨ymlæ–‡ä»¶" class="headerlink" title="é‡‡ç”¨ymlæ–‡ä»¶"></a>é‡‡ç”¨ymlæ–‡ä»¶</h3><p><strong>application.yaml</strong></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8081</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8082</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span> <span class="string">dev</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8083</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span> <span class="string">test</span></span><br></pre></td></tr></table></figure>

<img src="/2023/11/05/springboot/1688693781613-e6b879a0-6d1e-44f2-a8a8-1908cc7bbb45.png" class title="img">

<h1 id="å››ã€è‡ªåŠ¨é…ç½®åŸç†"><a href="#å››ã€è‡ªåŠ¨é…ç½®åŸç†" class="headerlink" title="å››ã€è‡ªåŠ¨é…ç½®åŸç†"></a>å››ã€è‡ªåŠ¨é…ç½®åŸç†</h1><p><a href="https://mp.weixin.qq.com/s?__biz=Mzg2NTAzMTExNg==&mid=2247483766&idx=1&sn=27739c5103547320c505d28bec0a9517&scene=19#wechat_redirect">SpringBoot05ï¼šè‡ªåŠ¨é…ç½®åŸç†</a></p>
<h2 id="ç²¾é«“"><a href="#ç²¾é«“" class="headerlink" title="ç²¾é«“"></a>ç²¾é«“</h2><p><strong>1</strong>ã€SpringBootå¯åŠ¨ä¼šåŠ è½½å¤§é‡çš„è‡ªåŠ¨é…ç½®ç±»<br><strong>2</strong>ã€æˆ‘ä»¬çœ‹æˆ‘ä»¬éœ€è¦çš„åŠŸèƒ½æœ‰æ²¡æœ‰åœ¨SpringBooté»˜è®¤å†™å¥½çš„è‡ªåŠ¨é…ç½®ç±»å½“ä¸­ï¼›</p>
<p><strong>3</strong>ã€æˆ‘ä»¬å†æ¥çœ‹è¿™ä¸ªè‡ªåŠ¨é…ç½®ç±»ä¸­åˆ°åº•é…ç½®äº†å“ªäº›ç»„ä»¶ï¼›ï¼ˆåªè¦æˆ‘ä»¬è¦ç”¨çš„ç»„ä»¶å­˜åœ¨åœ¨å…¶ä¸­ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦å†æ‰‹åŠ¨é…ç½®äº†ï¼‰<br><strong>4</strong>ã€ç»™å®¹å™¨ä¸­è‡ªåŠ¨é…ç½®ç±»æ·»åŠ ç»„ä»¶çš„æ—¶å€™ï¼Œä¼šä»propertiesç±»ä¸­è·å–æŸäº›å±æ€§ã€‚æˆ‘ä»¬åªéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šè¿™äº›å±æ€§çš„å€¼å³å¯ï¼›</p>
<p>xxxxAutoConfigurartionï¼šè‡ªåŠ¨é…ç½®ç±»ï¼›ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶</p>
<p>xxxxProperties:å°è£…é…ç½®æ–‡ä»¶ä¸­ç›¸å…³å±æ€§ï¼›</p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡å¯ç”¨ debug&#x3D;trueå±æ€§ï¼›æ¥è®©æ§åˆ¶å°æ‰“å°è‡ªåŠ¨é…ç½®æŠ¥å‘Šï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„çŸ¥é“å“ªäº›è‡ªåŠ¨é…ç½®ç±»ç”Ÿæ•ˆï¼›</p>
<figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="params">#</span>å¼€å¯springbootçš„è°ƒè¯•ç±»</span><br><span class="line">debug=true</span><br></pre></td></tr></table></figure>

<h1 id="äº”ã€é™æ€èµ„æºå¤„ç†"><a href="#äº”ã€é™æ€èµ„æºå¤„ç†" class="headerlink" title="äº”ã€é™æ€èµ„æºå¤„ç†"></a>äº”ã€é™æ€èµ„æºå¤„ç†</h1><p><a href="https://mp.weixin.qq.com/s?__biz=Mzg2NTAzMTExNg==&mid=2247483796&idx=1&sn=ea13e2858328a582338e89c3459021c1&scene=19#wechat_redirect">SpringBoot10ï¼šWebå¼€å‘é™æ€èµ„æºå¤„ç†</a></p>
<h2 id="5-1ã€webjars"><a href="#5-1ã€webjars" class="headerlink" title="5.1ã€webjars"></a>5.1ã€webjars</h2><p>ç¬¬ä¸€ç§ï¼š</p>
<p><a href="https://www.webjars.org/">ç½‘å€</a></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.webjars<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jquery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¯¼å…¥å®Œæ¯•ï¼ŒæŸ¥çœ‹webjarsç›®å½•ç»“æ„ï¼Œå¹¶è®¿é—®Jquery.jsæ–‡ä»¶ï¼</p>
<img src="/2023/11/05/springboot/1688804769462-97dfd1b5-e0dc-47cb-ad38-80c2027bf13b.png" class title="img">

<p>ç¬¬äºŒç§ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¿™ä¸ªæ˜¯webjarsç›®å½•</span></span><br><span class="line"><span class="string">&quot;classpath:/META-INF/resources/&quot;</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">//è¿™æ˜¯åœ¨èµ„æºç›®å½•ä¸‹ä»é«˜åˆ°ä½çš„ä¼˜å…ˆçº§æ’åº   </span></span><br><span class="line"><span class="string">&quot;classpath:/resources/&quot;</span></span><br><span class="line"><span class="string">&quot;classpath:/static/&quot;</span></span><br><span class="line"><span class="string">&quot;classpath:/public/&quot;</span></span><br></pre></td></tr></table></figure>

<img src="/2023/11/05/springboot/1688805249086-5c6e35db-54d9-44bb-8e02-874a98803719.png" class title="img">

<h2 id="5-2ã€é¦–é¡µå®šåˆ¶"><a href="#5-2ã€é¦–é¡µå®šåˆ¶" class="headerlink" title="5.2ã€é¦–é¡µå®šåˆ¶"></a>5.2ã€é¦–é¡µå®šåˆ¶</h2><p>æºç ï¼š <img src="/2023/11/05/springboot/1688805679096-7880afeb-6455-4d02-9f4c-f941ee174e24.png" class title="img"></p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1688805716630-5de18249-89a8-43bb-8075-3521f753d70b.png" alt="img"></p>
<p>æ·»åŠ index</p>
<img src="/2023/11/05/springboot/1688805773234-d19a6cbb-ed01-47f0-a865-9a4c57ade7c3.png" class title="img">

<h2 id="5-3ã€å›¾æ ‡"><a href="#5-3ã€å›¾æ ‡" class="headerlink" title="5.3ã€å›¾æ ‡"></a>5.3ã€å›¾æ ‡</h2><p><strong>è€ç‰ˆæœ¬2.1.7ä»¥ä¹‹å‰çš„æœ‰ï¼Œåé¢çš„ç‰ˆæœ¬éƒ½æ¢å†™æ³•äº†</strong></p>
<p><strong>æ­¥éª¤</strong></p>
<ol>
<li>å»é…ç½®æ–‡ä»¶å†™</li>
</ol>
<img src="/2023/11/05/springboot/1688807227397-e6c9f0c9-3e88-4fd0-bfd6-1a86b1adcdd4.png" class title="img">

<ol>
<li>æ¸…ç†æµè§ˆå™¨ç¼“å­˜</li>
<li>æŠŠicoæ–‡ä»¶æ”¾åˆ°resourceç›®å½•ä¸‹publicï¼Œresourceï¼Œstaticä»»æ„ä¸€ä¸ªç›®å½•ä¸­</li>
<li>æ–°ç‰ˆå†™æ³•</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#å…³é—­é»˜è®¤å›¾æ ‡</span><br><span class="line">spring.favicon.enabled=false</span><br></pre></td></tr></table></figure>

<h1 id="å…­ã€Thymeleafæ¨¡æ¿å¼•æ“"><a href="#å…­ã€Thymeleafæ¨¡æ¿å¼•æ“" class="headerlink" title="å…­ã€Thymeleafæ¨¡æ¿å¼•æ“"></a>å…­ã€Thymeleafæ¨¡æ¿å¼•æ“</h1><p><a href="https://mp.weixin.qq.com/s?__biz=Mzg2NTAzMTExNg==&mid=2247483807&idx=1&sn=7e1d5df51cdeb046eb37dec7701af47b&scene=19#wechat_redirect">SpringBoot11ï¼šThymeleafæ¨¡æ¿å¼•æ“</a></p>
<h2 id="6-1ã€å¼•å…¥Thymeleaf"><a href="#6-1ã€å¼•å…¥Thymeleaf" class="headerlink" title="6.1ã€å¼•å…¥Thymeleaf"></a>6.1ã€å¼•å…¥Thymeleaf</h2><p><a href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html">Thymeleafæ–‡æ¡£</a></p>
<ul>
<li>Thymeleaf å®˜ç½‘ï¼š<a href="https://www.thymeleaf.org/">https://www.thymeleaf.org/</a></li>
<li>Thymeleaf åœ¨Github çš„ä¸»é¡µï¼š<a href="https://github.com/thymeleaf/thymeleaf">https://github.com/thymeleaf/thymeleaf</a></li>
<li>Springå®˜æ–¹æ–‡æ¡£ï¼šæ‰¾åˆ°æˆ‘ä»¬<a href="https://docs.spring.io/spring-boot/docs/2.2.5.RELEASE/reference/htmlsingle/#using-boot-starter">å¯¹åº”çš„ç‰ˆæœ¬</a></li>
<li>æ‰¾åˆ°å¯¹åº”çš„pomä¾èµ–ï¼šå¯ä»¥é€‚å½“ç‚¹è¿›æºç çœ‹ä¸‹æœ¬æ¥çš„åŒ…ï¼</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--thymeleaf--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<img src="/2023/11/05/springboot/1688862333505-b42109f2-91ba-4cd5-a548-1d07fda78041.png" class title="img">

<h2 id="6-2ã€æ¨¡æ¿å¼•æ“çš„ä½œç”¨"><a href="#6-2ã€æ¨¡æ¿å¼•æ“çš„ä½œç”¨" class="headerlink" title="6.2ã€æ¨¡æ¿å¼•æ“çš„ä½œç”¨"></a>6.2ã€æ¨¡æ¿å¼•æ“çš„ä½œç”¨</h2><p> å°±æ˜¯æˆ‘ä»¬æ¥å†™ä¸€ä¸ª<strong>é¡µé¢æ¨¡æ¿</strong>ï¼Œæ¯”å¦‚æœ‰äº›å€¼å‘¢ï¼Œæ˜¯åŠ¨æ€çš„ï¼Œæˆ‘ä»¬å†™ä¸€äº›è¡¨è¾¾å¼ã€‚è€Œè¿™äº›å€¼ï¼Œä»å“ªæ¥å‘¢ï¼Œå°±æ˜¯æˆ‘ä»¬åœ¨åå°å°è£…ä¸€äº›æ•°æ®ã€‚ç„¶åæŠŠè¿™ä¸ªæ¨¡æ¿å’Œè¿™ä¸ªæ•°æ®äº¤ç»™æˆ‘ä»¬æ¨¡æ¿å¼•æ“ï¼Œæ¨¡æ¿å¼•æ“æŒ‰ç…§æˆ‘ä»¬è¿™ä¸ªæ•°æ®å¸®ä½ æŠŠè¿™è¡¨è¾¾å¼è§£æã€å¡«å……åˆ°æˆ‘ä»¬æŒ‡å®šçš„ä½ç½®ï¼Œç„¶åæŠŠè¿™ä¸ªæ•°æ®æœ€ç»ˆç”Ÿæˆä¸€ä¸ªæˆ‘ä»¬æƒ³è¦çš„å†…å®¹ç»™æˆ‘ä»¬å†™å‡ºå»ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è¿™ä¸ªæ¨¡æ¿å¼•æ“ï¼Œä¸ç®¡æ˜¯jspè¿˜æ˜¯å…¶ä»–æ¨¡æ¿å¼•æ“ï¼Œéƒ½æ˜¯è¿™ä¸ªæ€æƒ³ã€‚åªä¸è¿‡å‘¢ï¼Œå°±æ˜¯è¯´ä¸åŒæ¨¡æ¿å¼•æ“ä¹‹é—´ï¼Œä»–ä»¬å¯èƒ½è¿™ä¸ªè¯­æ³•æœ‰ç‚¹ä¸ä¸€æ ·ã€‚å…¶ä»–çš„æˆ‘å°±ä¸ä»‹ç»äº†ï¼Œæˆ‘ä¸»è¦æ¥ä»‹ç»ä¸€ä¸‹SpringBootç»™æˆ‘ä»¬æ¨èçš„Thymeleafæ¨¡æ¿å¼•æ“ï¼Œè¿™æ¨¡æ¿å¼•æ“å‘¢ï¼Œæ˜¯ä¸€ä¸ªé«˜çº§è¯­è¨€çš„æ¨¡æ¿å¼•æ“ï¼Œä»–çš„è¿™ä¸ªè¯­æ³•æ›´ç®€å•ã€‚è€Œä¸”å‘¢ï¼ŒåŠŸèƒ½æ›´å¼ºå¤§ã€‚</p>
<h2 id="6-3ã€æµ‹è¯•"><a href="#6-3ã€æµ‹è¯•" class="headerlink" title="6.3ã€æµ‹è¯•"></a>6.3ã€æµ‹è¯•</h2><p>Thymeleafçš„æ‰€æœ‰æ¨¡æ¿å¼•æ“éƒ½å†™åœ¨è¿™ä¸ªåŒ…ä¸‹â€”templates</p>
<img src="/2023/11/05/springboot/1688862411666-a47367d9-7152-46b0-b274-92a70cfe2094.png" class title="img">

<p>æºç â€”â€”ThymeleafProperties</p>
<img src="/2023/11/05/springboot/1688862479127-81b5b6b7-22e1-415c-9b48-91ff77451161.png" class title="img">

<p>å†™ä¸€ä¸ªtest.html</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>xiaowuåŠªåŠ›å­¦ä¹ <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•IndexController</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IndexController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/test&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç»“æœï¼š</p>
<img src="/2023/11/05/springboot/1688862801211-536cfd65-342e-4838-8223-036e0bd4ae70.png" class title="img">

<p><strong>ç»“è®ºï¼š</strong><br>åªè¦éœ€è¦ä½¿ç”¨thymeleaf,åªéœ€è¦å¯¼å…¥å¯¹åº”çš„ä¾èµ–å°±å¯ä»¥äº†ï¼æˆ‘ä»¬å°†htmlæ”¾åœ¨æˆ‘ä»¬çš„templatesç›®å½•ä¸‹å³å¯ï¼</p>
<h3 id="å¯¼å…¥çº¦æŸ"><a href="#å¯¼å…¥çº¦æŸ" class="headerlink" title="å¯¼å…¥çº¦æŸ"></a>å¯¼å…¥çº¦æŸ</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>IndexController</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IndexController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/test&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">test</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;hello,springboot&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>test.html</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>xiaowuåŠªåŠ›å­¦ä¹ <span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;msg&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¿è¡Œ</p>
<img src="/2023/11/05/springboot/1688863131638-ded13c92-68dc-4ca1-ac02-3ea0b06d744e.png" class title="img">

<h3 id="thymeleafè¯­æ³•"><a href="#thymeleafè¯­æ³•" class="headerlink" title="thymeleafè¯­æ³•"></a>thymeleafè¯­æ³•</h3><p><strong>IndexController</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/test&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">test</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">       model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;&lt;h1&gt;hello,springboot&lt;/h1&gt;&quot;</span>);</span><br><span class="line">       model.addAttribute(<span class="string">&quot;users&quot;</span>, Arrays.asList(<span class="string">&quot;xiaowu&quot;</span>,<span class="string">&quot;å´å¿—å¼º&quot;</span>));</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p><strong>test.html</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>xiaowuåŠªåŠ›å­¦ä¹ <span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--æ‰€æœ‰çš„htmlå…ƒç´ éƒ½å¯ä»¥è¢«thymeLeafæ›¿æ¢æ¥ç®¡ï¼š thï¼šå…ƒç´ å--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;msg&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--utext,ä¼šè§£æhtml,æ˜¾ç¤ºç›¸åº”çš„æ•ˆæœ--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">th:utext</span>=<span class="string">&quot;$&#123;msg&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--éå†å–å€¼--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span> <span class="attr">th:each</span>=<span class="string">&quot;user:$&#123;users&#125;&quot;</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;user&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--è¡Œå†…å–å€¼--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&lt;h3 th:each=&quot;user:$&#123;users&#125;&quot;&gt;[[ $&#123;users&#125; ]]&lt;/h3&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ç»“æœï¼š</p>
<img src="/2023/11/05/springboot/1688884732452-8a360d03-f665-4602-a27a-f71d9c241546.png" class title="img">

<h1 id="MVCè‡ªåŠ¨é…ç½®åŸç†"><a href="#MVCè‡ªåŠ¨é…ç½®åŸç†" class="headerlink" title="MVCè‡ªåŠ¨é…ç½®åŸç†"></a>MVCè‡ªåŠ¨é…ç½®åŸç†</h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Spring MVC Auto-configuration</span><br><span class="line"><span class="comment">// Spring Bootä¸ºSpring MVCæä¾›äº†è‡ªåŠ¨é…ç½®ï¼Œå®ƒå¯ä»¥å¾ˆå¥½åœ°ä¸å¤§å¤šæ•°åº”ç”¨ç¨‹åºä¸€èµ·å·¥ä½œã€‚</span></span><br><span class="line">Spring Boot provides auto-configuration <span class="keyword">for</span> Spring MVC that works well with most applications.</span><br><span class="line"><span class="comment">// è‡ªåŠ¨é…ç½®åœ¨Springé»˜è®¤è®¾ç½®çš„åŸºç¡€ä¸Šæ·»åŠ äº†ä»¥ä¸‹åŠŸèƒ½ï¼š</span></span><br><span class="line">The auto-configuration adds the following features on top of Springâ€™s defaults:</span><br><span class="line"><span class="comment">// åŒ…å«è§†å›¾è§£æå™¨</span></span><br><span class="line">Inclusion of ContentNegotiatingViewResolver and BeanNameViewResolver beans.</span><br><span class="line"><span class="comment">// æ”¯æŒé™æ€èµ„æºæ–‡ä»¶å¤¹çš„è·¯å¾„ï¼Œä»¥åŠwebjars</span></span><br><span class="line">Support <span class="keyword">for</span> serving <span class="keyword">static</span> resources, including support <span class="keyword">for</span> WebJars </span><br><span class="line"><span class="comment">// è‡ªåŠ¨æ³¨å†Œäº†Converterï¼š</span></span><br><span class="line"><span class="comment">// è½¬æ¢å™¨ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬ç½‘é¡µæäº¤æ•°æ®åˆ°åå°è‡ªåŠ¨å°è£…æˆä¸ºå¯¹è±¡çš„ä¸œè¥¿ï¼Œæ¯”å¦‚æŠŠ&quot;1&quot;å­—ç¬¦ä¸²è‡ªåŠ¨è½¬æ¢ä¸ºintç±»å‹</span></span><br><span class="line"><span class="comment">// Formatterï¼šã€æ ¼å¼åŒ–å™¨ï¼Œæ¯”å¦‚é¡µé¢ç»™æˆ‘ä»¬äº†ä¸€ä¸ª2019-8-10ï¼Œå®ƒä¼šç»™æˆ‘ä»¬è‡ªåŠ¨æ ¼å¼åŒ–ä¸ºDateå¯¹è±¡ã€‘</span></span><br><span class="line">Automatic registration of Converter, GenericConverter, and Formatter beans.</span><br><span class="line"><span class="comment">// HttpMessageConverters</span></span><br><span class="line"><span class="comment">// SpringMVCç”¨æ¥è½¬æ¢Httpè¯·æ±‚å’Œå“åº”çš„çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬è¦æŠŠä¸€ä¸ªUserå¯¹è±¡è½¬æ¢ä¸ºJSONå­—ç¬¦ä¸²ï¼Œå¯ä»¥å»çœ‹å®˜ç½‘æ–‡æ¡£è§£é‡Šï¼›</span></span><br><span class="line">Support <span class="keyword">for</span> <span class="title function_">HttpMessageConverters</span> <span class="params">(covered later in <span class="built_in">this</span> document)</span>.</span><br><span class="line"><span class="comment">// å®šä¹‰é”™è¯¯ä»£ç ç”Ÿæˆè§„åˆ™çš„</span></span><br><span class="line">Automatic registration of <span class="title function_">MessageCodesResolver</span> <span class="params">(covered later in <span class="built_in">this</span> document)</span>.</span><br><span class="line"><span class="comment">// é¦–é¡µå®šåˆ¶</span></span><br><span class="line">Static index.html support.</span><br><span class="line"><span class="comment">// å›¾æ ‡å®šåˆ¶</span></span><br><span class="line">Custom Favicon <span class="title function_">support</span> <span class="params">(covered later in <span class="built_in">this</span> document)</span>.</span><br><span class="line"><span class="comment">// åˆå§‹åŒ–æ•°æ®ç»‘å®šå™¨ï¼šå¸®æˆ‘ä»¬æŠŠè¯·æ±‚æ•°æ®ç»‘å®šåˆ°JavaBeanä¸­ï¼</span></span><br><span class="line">Automatic use of a ConfigurableWebBindingInitializer <span class="title function_">bean</span> <span class="params">(covered later in <span class="built_in">this</span> document)</span>.</span><br></pre></td></tr></table></figure>

<h2 id="æ‰©å±•è§†å›¾è§£æå™¨"><a href="#æ‰©å±•è§†å›¾è§£æå™¨" class="headerlink" title="æ‰©å±•è§†å›¾è§£æå™¨"></a>æ‰©å±•è§†å›¾è§£æå™¨</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.View;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ViewResolver;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Locale;</span><br><span class="line"><span class="comment">//å¦‚æœ,ä½ æƒ³è‡ªå®šä¹‰ä¸€äº›å®šåˆ¶åŒ–çš„åŠŸèƒ½,åªè¦å†™è¿™ä¸ªç»„ä»¶,ç„¶åå°†å®ƒäº¤ç»™springboot,springbootå°±ä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨è£…é…ç½®ï¼</span></span><br><span class="line"><span class="comment">//æ‰©å±•springmvc dispatchservlet</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyMvcConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line">    <span class="comment">//ViewResolver å®ç°äº†è§†å›¾è§£æå™¨æ¥å£çš„ç±»,æˆ‘ä»¬å°±å¯ä»¥æŠŠä»–å½“åšè§†å›¾è§£æå™¨æ¥çœ‹</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ViewResolver <span class="title function_">myViewResolver</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MyViewResolver</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å®šä¹‰äº†ä¸€ä¸ªè‡ªå·±çš„è§†å›¾è§£æå™¨MyViewResolver</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">MyViewResolver</span> <span class="keyword">implements</span> <span class="title class_">ViewResolver</span> &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> View <span class="title function_">resolveViewName</span><span class="params">(String s, Locale locale)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>åº•å±‚ï¼šè·å–æ‰€æœ‰è§†å›¾</strong></p>
<img src="/2023/11/05/springboot/1688892282404-cde511ce-624f-47a5-bd54-7d229d5aca39.png" class title="img">

<p><strong>æ–­ç‚¹æŸ¥çœ‹springbootåå°ä¿¡æ¯ï¼šå‘ç°æˆ‘ä»¬è‡ªå®šä¹‰çš„è§†å›¾ä¹Ÿåœ¨é‡Œé¢</strong></p>
<img src="/2023/11/05/springboot/1688892593791-870059a7-3999-403a-96f1-1425122e0674.png" class title="img">

<h2 id="Formatter"><a href="#Formatter" class="headerlink" title="Formatter"></a>Formatter</h2><p><strong>æºç ï¼š****WebMvcAutoConfiguration</strong></p>
<p>åœ¨<strong>WebMvcAutoConfigurationä¸‹çš„</strong></p>
<img src="/2023/11/05/springboot/1688893079900-eab1465d-b7bb-46f3-8bcf-abf1fb4e80c5.png" class title="img">

<p>ç”±ä¸Šå¯çŸ¥ï¼Œå®ƒèƒ½é€šè¿‡é…ç½®æ–‡ä»¶(<strong>this.mvcProperties</strong>)è¯»å–æˆ‘ä»¬æ ¼å¼åŒ–ï¼Œæ‰€ä»¥æˆ‘ä»¬èƒ½åœ¨é…ç½®æ–‡ä»¶é‡Œè®¾ç½®ä»–çš„æ ¼å¼</p>
<img src="/2023/11/05/springboot/1688944313066-ee4e29f2-12f1-4ccd-a36c-615dfebf064e.png" class title="img">

<p><strong>ä¾‹å­ï¼š</strong></p>
<p><strong>è§†å›¾è·³è½¬</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¦‚æœæˆ‘ä»¬çœŸçš„è¦æ‰©å±•springmvcï¼Œå®˜æ–¹å»ºè®®æˆ‘ä»¬è¿™æ ·å»åšï¼</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableWebMvc</span>  <span class="comment">//è¿™ç©æ„å°±æ˜¯å¯¼å…¥äº†ä¸€ä¸ªç±»ï¼šDeLegatingWebMvcConfiguration:ä»å®¹å™¨ä¸­è·å–æ‰€æœ‰WebMvcConfig:</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyMvcConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line">    <span class="comment">//è§†å›¾è·³è½¬</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> &#123;</span><br><span class="line">       registry.addViewController(<span class="string">&quot;/xiaowu&quot;</span>).setViewName(<span class="string">&quot;test&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="å‘˜å·¥ç®¡ç†ç³»ç»Ÿ"><a href="#å‘˜å·¥ç®¡ç†ç³»ç»Ÿ" class="headerlink" title="å‘˜å·¥ç®¡ç†ç³»ç»Ÿ"></a>å‘˜å·¥ç®¡ç†ç³»ç»Ÿ</h1><h2 id="ï¼ˆä¸€ï¼‰ç¯å¢ƒæ­å»º"><a href="#ï¼ˆä¸€ï¼‰ç¯å¢ƒæ­å»º" class="headerlink" title="ï¼ˆä¸€ï¼‰ç¯å¢ƒæ­å»º"></a>ï¼ˆä¸€ï¼‰ç¯å¢ƒæ­å»º</h2><p><strong>åŸºäºæˆ‘ä»¬åˆ›å»ºå¥½çš„â€œspringboot-03-webâ€ä¿®æ”¹</strong></p>
<h3 id="1-å¯¼å…¥é™æ€èµ„æº"><a href="#1-å¯¼å…¥é™æ€èµ„æº" class="headerlink" title="1.å¯¼å…¥é™æ€èµ„æº"></a>1.å¯¼å…¥é™æ€èµ„æº</h3><p>é“¾æ¥ï¼š<a href="https://pan.baidu.com/s/1URaFmN6rt2AzDOwVogWBNQ">https://pan.baidu.com/s/1URaFmN6rt2AzDOwVogWBNQ</a><br>æå–ç ï¼šbruc</p>
<p>å°†htmlé™æ€èµ„æºæ”¾ç½®templatesç›®å½•ä¸‹</p>
<img src="/2023/11/05/springboot/1688975080487-449486a7-0fa9-4cfc-98e2-86353f923d4b.png" class title="img">

<p>å°†assertsç›®å½•ä¸‹çš„cssã€imgã€jsç­‰é™æ€èµ„æºæ”¾ç½®staticç›®å½•ä¸‹</p>
<img src="/2023/11/05/springboot/1688975113451-e8cbaa37-12fc-48c3-8bc1-519901e2d259.png" class title="img">

<h3 id="2-æ¨¡æ‹Ÿæ•°æ®åº“"><a href="#2-æ¨¡æ‹Ÿæ•°æ®åº“" class="headerlink" title="2. æ¨¡æ‹Ÿæ•°æ®åº“"></a>2. æ¨¡æ‹Ÿæ•°æ®åº“</h3><h4 id="1-åˆ›å»ºæ•°æ®åº“å®ä½“ç±»"><a href="#1-åˆ›å»ºæ•°æ®åº“å®ä½“ç±»" class="headerlink" title="1. åˆ›å»ºæ•°æ®åº“å®ä½“ç±»"></a>1. åˆ›å»ºæ•°æ®åº“å®ä½“ç±»</h4><p>åœ¨ä¸»ç¨‹åºåŒçº§ç›®å½•ä¸‹æ–°å»ºpojoåŒ…ï¼Œç”¨æ¥å­˜æ”¾å®ä½“ç±»</p>
<p>åœ¨pojoåŒ…ä¸‹åˆ›å»ºä¸€ä¸ªéƒ¨é—¨è¡¨Departmentå’Œä¸€ä¸ªå‘˜å·¥è¡¨Employee</p>
<img src="/2023/11/05/springboot/1688975617982-22e3c60e-5714-4523-a839-1bfa4ef7a846.png" class title="img">

<p>ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯¼å…¥lombok</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>éƒ¨é—¨è¡¨</strong>ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="comment">//éƒ¨é—¨è¡¨</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Department</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String departmentName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å‘˜å·¥è¡¨</strong>ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‘˜å·¥</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Employee</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String lastName;</span><br><span class="line">    <span class="keyword">private</span> String email;</span><br><span class="line">    <span class="keyword">private</span> Integer gender; <span class="comment">//0:å¥³ 1ï¼šç”·</span></span><br><span class="line">    <span class="keyword">private</span> Department department;</span><br><span class="line">    <span class="keyword">private</span> Date birth;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Employee</span><span class="params">(Integer id, String lastName, String email, Integer gender, Department department)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.lastName = lastName;</span><br><span class="line">        <span class="built_in">this</span>.email = email;</span><br><span class="line">        <span class="built_in">this</span>.gender = gender;</span><br><span class="line">        <span class="built_in">this</span>.department = department;</span><br><span class="line">        <span class="built_in">this</span>.birth = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-ç¼–å†™daoå±‚ï¼ˆæ¨¡æ‹Ÿæ•°æ®ï¼‰"><a href="#2-ç¼–å†™daoå±‚ï¼ˆæ¨¡æ‹Ÿæ•°æ®ï¼‰" class="headerlink" title="2. ç¼–å†™daoå±‚ï¼ˆæ¨¡æ‹Ÿæ•°æ®ï¼‰"></a>2. ç¼–å†™daoå±‚ï¼ˆæ¨¡æ‹Ÿæ•°æ®ï¼‰</h4><p>åœ¨ä¸»ç¨‹åºåŒçº§ç›®å½•ä¸‹æ–°å»ºdaoåŒ…</p>
<p>ç„¶ååˆ†åˆ«ç¼–å†™DepartmentDaoå’ŒEmployeeDaoï¼Œå¹¶åœ¨å…¶ä¸­æ¨¡æ‹Ÿæ•°æ®åº“çš„æ•°æ®</p>
<img src="/2023/11/05/springboot/1688975773226-639e3514-e93b-4453-a488-45e38cfe2afd.png" class title="img">

<p><strong>DepartmentDao****ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.wu.pojo.Department;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">//éƒ¨é—¨dao</span></span><br><span class="line"><span class="meta">@Repository</span> <span class="comment">//è¢«stringæ‰˜ç®¡</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DepartmentDao</span> &#123;</span><br><span class="line">    <span class="comment">//æ¨¡æ‹Ÿæ•°æ®åº“ä¸­çš„æ•°æ®</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Map&lt;Integer,Department&gt; departments=<span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        departments = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;Integer, Department&gt;(); <span class="comment">//åˆ›å»ºä¸€ä¸ªéƒ¨é—¨è¡¨</span></span><br><span class="line"></span><br><span class="line">        departments.put(<span class="number">101</span>,<span class="keyword">new</span> <span class="title class_">Department</span>(<span class="number">101</span>,<span class="string">&quot;æ•™å­¦éƒ¨&quot;</span>));</span><br><span class="line">        departments.put(<span class="number">102</span>,<span class="keyword">new</span> <span class="title class_">Department</span>(<span class="number">102</span>,<span class="string">&quot;å¸‚åœºéƒ¨&quot;</span>));</span><br><span class="line">        departments.put(<span class="number">103</span>,<span class="keyword">new</span> <span class="title class_">Department</span>(<span class="number">103</span>,<span class="string">&quot;æ•™ç ”éƒ¨&quot;</span>));</span><br><span class="line">        departments.put(<span class="number">104</span>,<span class="keyword">new</span> <span class="title class_">Department</span>(<span class="number">104</span>,<span class="string">&quot;è¿è¥éƒ¨&quot;</span>));</span><br><span class="line">        departments.put(<span class="number">105</span>,<span class="keyword">new</span> <span class="title class_">Department</span>(<span class="number">105</span>,<span class="string">&quot;åå‹¤éƒ¨&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è·å–æ‰€æœ‰çš„éƒ¨é—¨ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">public</span>	<span class="keyword">static</span> Collection&lt;Department&gt; <span class="title function_">getDepartments</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> departments.values();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é€šè¿‡idå¾—åˆ°éƒ¨é—¨</span></span><br><span class="line">    <span class="keyword">public</span> Department <span class="title function_">getDepartmentById</span><span class="params">(Integer id)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> departments.get(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>EmployeeDao:</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.wu.pojo.Department;</span><br><span class="line"><span class="keyword">import</span> com.wu.pojo.Employee;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‘˜å·¥dao</span></span><br><span class="line"><span class="meta">@Repository</span> <span class="comment">//è¢«stringæ‰˜ç®¡</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmployeeDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ¨¡æ‹Ÿæ•°æ®åº“ä¸­çš„æ•°æ®</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Map&lt;Integer, Employee&gt; employees = <span class="literal">null</span>;</span><br><span class="line">    <span class="comment">//å‘˜å·¥æ‰€å±çš„éƒ¨é—¨</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DepartmentDao departmentDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        employees = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;Integer, Employee&gt;(); <span class="comment">//åˆ›å»ºä¸€ä¸ªéƒ¨é—¨è¡¨</span></span><br><span class="line"></span><br><span class="line">        employees.put(<span class="number">1001</span>, <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1001</span>, <span class="string">&quot;AA&quot;</span>, <span class="string">&quot;1622840727@qq.com&quot;</span>, <span class="number">1</span>, <span class="keyword">new</span> <span class="title class_">Department</span>(<span class="number">101</span>, <span class="string">&quot;æ•™å­¦éƒ¨&quot;</span>)));</span><br><span class="line">        employees.put(<span class="number">1002</span>, <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1002</span>, <span class="string">&quot;BB&quot;</span>, <span class="string">&quot;2622840727@qq.com&quot;</span>, <span class="number">0</span>, <span class="keyword">new</span> <span class="title class_">Department</span>(<span class="number">102</span>, <span class="string">&quot;å¸‚åœºéƒ¨&quot;</span>)));</span><br><span class="line">        employees.put(<span class="number">1003</span>, <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1003</span>, <span class="string">&quot;CC&quot;</span>, <span class="string">&quot;4622840727@qq.com&quot;</span>, <span class="number">1</span>, <span class="keyword">new</span> <span class="title class_">Department</span>(<span class="number">103</span>, <span class="string">&quot;æ•™ç ”éƒ¨&quot;</span>)));</span><br><span class="line">        employees.put(<span class="number">1004</span>, <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1004</span>, <span class="string">&quot;DD&quot;</span>, <span class="string">&quot;5628440727@qq.com&quot;</span>, <span class="number">0</span>, <span class="keyword">new</span> <span class="title class_">Department</span>(<span class="number">104</span>, <span class="string">&quot;è¿è¥éƒ¨&quot;</span>)));</span><br><span class="line">        employees.put(<span class="number">1005</span>, <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1005</span>, <span class="string">&quot;FF&quot;</span>, <span class="string">&quot;6022840727@qq.com&quot;</span>, <span class="number">1</span>, <span class="keyword">new</span> <span class="title class_">Department</span>(<span class="number">105</span>, <span class="string">&quot;åå‹¤éƒ¨&quot;</span>)));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¸»é”®è‡ªå¢</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Integer</span> <span class="variable">initId</span> <span class="operator">=</span> <span class="number">1006</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¢åŠ ä¸€ä¸ªå‘˜å·¥</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(Employee employee)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (employee.getId() == <span class="literal">null</span>) &#123;</span><br><span class="line">            employee.setId(initId++);</span><br><span class="line">        &#125;</span><br><span class="line">        employee.setDepartment(departmentDao.getDepartmentById(employee.getDepartment().getId()));</span><br><span class="line">        employees.put(employee.getId(), employee);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŸ¥è¯¢å…¨éƒ¨çš„å‘˜å·¥</span></span><br><span class="line">    <span class="keyword">public</span> Collection&lt;Employee&gt; <span class="title function_">getALL</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> employees.values();</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">//é€šè¿‡idæŸ¥è¯¢å‘˜å·¥</span></span><br><span class="line">    <span class="keyword">public</span> Employee <span class="title function_">getEmployeeById</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> employees.get(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ é™¤ä¸€ä¸ªå‘˜é€šè¿‡id</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        employees.remove(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ï¼ˆäºŒï¼‰é¦–é¡µå®ç°"><a href="#ï¼ˆäºŒï¼‰é¦–é¡µå®ç°" class="headerlink" title="ï¼ˆäºŒï¼‰é¦–é¡µå®ç°"></a>ï¼ˆäºŒï¼‰é¦–é¡µå®ç°</h2><p>åœ¨ä¸»ç¨‹åºåŒçº§ç›®å½•ä¸‹æ–°å»ºconfigåŒ…ç”¨æ¥å­˜æ”¾è‡ªå·±çš„é…ç½®ç±»</p>
<p>åœ¨å…¶ä¸­æ–°å»ºä¸€ä¸ªè‡ªå·±çš„é…ç½®ç±»MyMvcConfigï¼Œè¿›è¡Œè§†å›¾è·³è½¬</p>
<img src="/2023/11/05/springboot/1688976124555-df9349b8-2b96-48a3-9b79-a2cd317e0425.png" class title="img">

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.ViewControllerRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰©å±•ä½¿ç”¨SpringMVC</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyMvcConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addViewControllers</span><span class="params">(ViewControllerRegistry registry)</span> &#123;</span><br><span class="line">        registry.addViewController(<span class="string">&quot;/&quot;</span>).setViewName(<span class="string">&quot;index&quot;</span>);</span><br><span class="line">        registry.addViewController(<span class="string">&quot;/index.html&quot;</span>).setViewName(<span class="string">&quot;index&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯åŠ¨ä¸»ç¨‹åºè®¿é—®æµ‹è¯•ä¸€ä¸‹ï¼Œè®¿é—®localhost:8080&#x2F;æˆ–è€…locahost:8080&#x2F;index.html</p>
<p>å‡ºç°ä»¥ä¸‹é¡µé¢åˆ™æˆåŠŸ</p>
<img src="/2023/11/05/springboot/1688976314120-9c5b6a3d-4e97-44a0-89c9-fa9e4651eff3.png" class title="img">

<p>ä¸Šè¿°æµ‹è¯•å¯ä»¥çœ‹åˆ°é¡µé¢æœ‰å›¾ç‰‡æ²¡æœ‰åŠ è½½å‡ºæ¥ï¼Œä¸”æ²¡æœ‰csså’Œjsçš„æ ·å¼ï¼Œè¿™å°±æ˜¯å› ä¸ºæˆ‘ä»¬htmlé¡µé¢ä¸­é™æ€èµ„æºå¼•å…¥çš„è¯­æ³•å‡ºäº†é—®é¢˜ï¼Œåœ¨SpringBootä¸­ï¼Œæ¨èä½¿ç”¨Thymeleafä½œä¸ºæ¨¡æ¿å¼•æ“ï¼Œæˆ‘ä»¬å°†å…¶ä¸­çš„è¯­æ³•æ”¹ä¸ºThymeleafï¼Œæ‰€æœ‰é¡µé¢çš„é™æ€èµ„æºéƒ½éœ€è¦ä½¿ç”¨å…¶æ¥ç®¡</p>
<p>æ³¨æ„æ‰€æœ‰htmléƒ½éœ€è¦å¼•å…¥Thymeleafå‘½åç©ºé—´</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ç„¶åä¿®æ”¹æ‰€æœ‰é¡µé¢é™æ€èµ„æºçš„å¼•å…¥ï¼Œä½¿ç”¨@{â€¦} é“¾æ¥è¡¨è¾¾å¼</p>
<p>ä¾‹å¦‚index.htmlä¸­ï¼š</p>
<p><strong>æ³¨æ„</strong>ï¼šç¬¬ä¸€ä¸ª&#x2F;ä»£è¡¨é¡¹ç›®çš„classpathï¼Œä¹Ÿå°±æ˜¯è¿™é‡Œçš„resourcesç›®å½•</p>
<img src="/2023/11/05/springboot/1688976412367-f8fdbed9-df01-4d54-ab33-788842082dca.png" class title="img">

<p><strong>å…¶ä»–é¡µé¢äº¦æ˜¯å¦‚æ­¤ï¼Œå†æ¬¡æµ‹è¯•è®¿é—®ï¼Œæ­£ç¡®æ˜¾ç¤ºé¡µé¢</strong></p>
<img src="/2023/11/05/springboot/1688976459555-d62d316b-9a4e-4157-b1c6-6f7462ca9bb6.png" class title="img">

<h2 id="ï¼ˆä¸‰ï¼‰é¡µé¢å›½é™…åŒ–"><a href="#ï¼ˆä¸‰ï¼‰é¡µé¢å›½é™…åŒ–" class="headerlink" title="ï¼ˆä¸‰ï¼‰é¡µé¢å›½é™…åŒ–"></a>ï¼ˆä¸‰ï¼‰é¡µé¢å›½é™…åŒ–</h2><h3 id="1-ç»Ÿä¸€propertiesç¼–ç "><a href="#1-ç»Ÿä¸€propertiesç¼–ç " class="headerlink" title="1. ç»Ÿä¸€propertiesç¼–ç "></a>1. ç»Ÿä¸€propertiesç¼–ç </h3><p>é¦–å…ˆåœ¨IDEAä¸­ç»Ÿä¸€è®¾ç½®propertiesçš„ç¼–ç ä¸ºUTF-8</p>
<img src="/2023/11/05/springboot/1688976567241-19d8a3aa-9c0e-4898-a48b-8faaf8ecf2de.png" class title="img">

<h3 id="2-ç¼–å†™i18nå›½é™…åŒ–èµ„æºæ–‡ä»¶"><a href="#2-ç¼–å†™i18nå›½é™…åŒ–èµ„æºæ–‡ä»¶" class="headerlink" title="2. ç¼–å†™i18nå›½é™…åŒ–èµ„æºæ–‡ä»¶"></a>2. ç¼–å†™i18nå›½é™…åŒ–èµ„æºæ–‡ä»¶</h3><p>åœ¨resourcesç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªi18nåŒ…ï¼Œå…¶ä¸­æ”¾ç½®å›½é™…åŒ–ç›¸å…³çš„é…ç½®</p>
<img src="/2023/11/05/springboot/1688976617671-4dd0968b-44e9-4059-ad0a-ff3419a6d3dd.png" class title="img">

<p>å…¶ä¸­æ–°å»ºä¸‰ä¸ªé…ç½®æ–‡ä»¶ï¼Œç”¨æ¥é…ç½®è¯­è¨€ï¼š</p>
<ul>
<li>login.propertiesï¼šæ— è¯­è¨€é…ç½®æ—¶å€™ç”Ÿæ•ˆ</li>
<li>login_en_US.propertiesï¼šè‹±æ–‡ç”Ÿæ•ˆ</li>
<li>login_zh_CN.propertiesï¼šä¸­æ–‡ç”Ÿæ•ˆ</li>
</ul>
<p><strong>å‘½åæ–¹å¼</strong>æ˜¯ä¸‹åˆ’çº¿çš„ç»„åˆï¼šæ–‡ä»¶å_è¯­è¨€_å›½å®¶.propertiesï¼›</p>
<p>ä»¥æ­¤æ–¹å¼å‘½åï¼ŒIDEAä¼šå¸®æˆ‘ä»¬è¯†åˆ«è¿™æ˜¯ä¸ªå›½é™…åŒ–é…ç½®åŒ…ï¼Œè‡ªåŠ¨ç»‘å®šåœ¨ä¸€èµ·è½¬æ¢æˆå¦‚ä¸‹çš„æ¨¡å¼ï¼š</p>
<img src="/2023/11/05/springboot/1689040247338-2bbb3dbb-c2d2-4bb9-a1a1-cca282d87dff.png" class title="img">

<p>ç»‘å®šåœ¨ä¸€èµ·åï¼Œæˆ‘ä»¬æƒ³è¦æ·»åŠ æ›´è¿‡è¯­è¨€é…ç½®ï¼Œåªéœ€è¦åœ¨å¤§çš„èµ„æºåŒ…<strong>å³é”®æ·»åŠ åˆ°è¯¥ç»‘å®šé…ç½®æ–‡ä»¶</strong>å³å¯</p>
<img src="/2023/11/05/springboot/1689040301816-028834fb-f96c-450f-8045-cd892815f937.png" class title="img">

<p>æ­¤æ—¶åªéœ€è¦è¾“å…¥åŒºåŸŸåå³å¯åˆ›å»ºæˆåŠŸï¼Œæ¯”å¦‚è¾“å…¥en_USï¼Œå°±ä¼šè‡ªåŠ¨è¯†åˆ«</p>
<img src="/2023/11/05/springboot/1689040374198-bc5b63bc-b4be-4701-813c-eae325746522.png" class title="img">

<img src="/2023/11/05/springboot/1689040419749-8ed5b3ef-757e-4036-8d46-5b9c4038db53.png" class title="img">

<p>ç„¶åæ‰“å¼€è‹±æ–‡æˆ–è€…ä¸­æ–‡è¯­è¨€çš„é…ç½®æ–‡ä»¶ï¼Œç‚¹å‡»Resource Bundleè¿›å…¥å¯è§†åŒ–ç¼–è¾‘é¡µé¢</p>
<p>é—®é¢˜ï¼šæ–°ç‰ˆæœ¬ideaæ‰¾ä¸åˆ°Resource Bundle</p>
<p><strong>è§£å†³ï¼š</strong></p>
<p><a href="https://blog.csdn.net/m0_52241823/article/details/121850065">idea 2021. 2.3 ä¸­ä½¿ç”¨springboot å›½é™…åŒ– Resource Bundleä¸æ˜¾ç¤ºé—®é¢˜</a></p>
<img src="/2023/11/05/springboot/1689040955440-67345010-1781-4a40-86c5-8cf334b0e254.png" class title="img">

<p>è¿›å…¥åˆ°å¯è§†åŒ–ç¼–è¾‘é¡µé¢åï¼Œç‚¹å‡»åŠ å·ï¼Œæ·»åŠ å±æ€§ï¼Œé¦–å…ˆæ–°å»ºä¸€ä¸ªlogin.tipä»£è¡¨é¦–é¡µä¸­çš„æç¤º</p>
<img src="/2023/11/05/springboot/1689041020855-978782f1-65a8-421b-a3f8-1dc241e079f9.png" class title="img">

<p>ç„¶åå¯¹è¯¥æç¤ºåˆ†åˆ«åšä¸‰ç§æƒ…å†µçš„è¯­è¨€é…ç½®ï¼Œåœ¨ä¸‰ä¸ªå¯¹åº”çš„è¾“å…¥æ¡†è¾“å…¥å³å¯ï¼ˆ<strong>æ³¨æ„ï¼šIDEAæ–°ç‰ˆæœ¬å¯èƒ½æ— æ³•ä¿å­˜ï¼Œå»ºè®®ç›´æ¥åœ¨é…ç½®æ–‡ä»¶ä¸­ç¼–å†™</strong>ï¼‰</p>
<img src="/2023/11/05/springboot/1689041081223-fd647ad4-c636-44ad-a09a-d2ed1baf9ed0.png" class title="img">

<p>æ¥ä¸‹æ¥å†é…ç½®æ‰€æœ‰è¦è½¬æ¢è¯­è¨€çš„å˜é‡ï¼ˆ<strong>æ³¨æ„ï¼šIDEAæ–°ç‰ˆæœ¬å¯èƒ½æ— æ³•ä¿å­˜ï¼Œå»ºè®®ç›´æ¥åœ¨é…ç½®æ–‡ä»¶ä¸­ç¼–å†™</strong>ï¼‰</p>
<img src="/2023/11/05/springboot/1689041137347-a8d94eec-38e0-4ae7-9250-7f4023cc2a5b.png" class title="img">

<p>ç„¶åæ‰“å¼€ä¸‰ä¸ªé…ç½®æ–‡ä»¶çš„æŸ¥çœ‹å…¶ä¸­çš„æ–‡æœ¬å†…å®¹ï¼Œå¯ä»¥çœ‹åˆ°å·²ç»åšå¥½äº†å…¨éƒ¨çš„é…ç½®</p>
<p>login.properties</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">login.tip</span>=<span class="string">è¯·ç™»å½•</span></span><br><span class="line"><span class="attr">login.password</span>=<span class="string">å¯†ç </span></span><br><span class="line"><span class="attr">login.remember</span>=<span class="string">è®°ä½æˆ‘</span></span><br><span class="line"><span class="attr">login.btn</span>=<span class="string">ç™»å½•</span></span><br><span class="line"><span class="attr">login.username</span>=<span class="string">ç”¨æˆ·å</span></span><br></pre></td></tr></table></figure>

<p>login_en_US.properties</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">login.tip</span>=<span class="string">Please sign in</span></span><br><span class="line"><span class="attr">login.password</span>=<span class="string">password</span></span><br><span class="line"><span class="attr">login.remember</span>=<span class="string">remember me</span></span><br><span class="line"><span class="attr">login.btn</span>=<span class="string">login</span></span><br><span class="line"><span class="attr">login.username</span>=<span class="string">username</span></span><br></pre></td></tr></table></figure>

<p>login_zh_CN.properties</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">login.tip</span>=<span class="string">è¯·ç™»å½•</span></span><br><span class="line"><span class="attr">login.password</span>=<span class="string">å¯†ç </span></span><br><span class="line"><span class="attr">login.remember</span>=<span class="string">è®°ä½æˆ‘</span></span><br><span class="line"><span class="attr">login.btn</span>=<span class="string">ç™»å½•</span></span><br><span class="line"><span class="attr">login.username</span>=<span class="string">ç”¨æˆ·å</span></span><br></pre></td></tr></table></figure>

<h3 id="3-é…ç½®å›½é™…åŒ–èµ„æºæ–‡ä»¶åç§°"><a href="#3-é…ç½®å›½é™…åŒ–èµ„æºæ–‡ä»¶åç§°" class="headerlink" title="3. é…ç½®å›½é™…åŒ–èµ„æºæ–‡ä»¶åç§°"></a>3. é…ç½®å›½é™…åŒ–èµ„æºæ–‡ä»¶åç§°</h3><p>åœ¨Springç¨‹åºä¸­ï¼Œå›½é™…åŒ–ä¸»è¦æ˜¯é€šè¿‡ResourceBundleMessageSourceè¿™ä¸ªç±»æ¥å®ç°çš„</p>
<p>Spring Booté€šè¿‡MessageSourceAutoConfigurationä¸ºæˆ‘ä»¬è‡ªåŠ¨é…ç½®å¥½äº†ç®¡ç†å›½é™…åŒ–èµ„æºæ–‡ä»¶çš„ç»„ä»¶</p>
<p>æˆ‘ä»¬åœ¨IDEAä¸­æŸ¥çœ‹ä»¥ä¸‹MessageSourceAutoConfigurationç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(name = AbstractApplicationContext.MESSAGE_SOURCE_BEAN_NAME, search = SearchStrategy.CURRENT)</span></span><br><span class="line"><span class="meta">@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE)</span></span><br><span class="line"><span class="meta">@Conditional(ResourceBundleCondition.class)</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MessageSourceAutoConfiguration</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Resource[] NO_RESOURCES = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Bean</span></span><br><span class="line">	<span class="meta">@ConfigurationProperties(prefix = &quot;spring.messages&quot;)</span></span><br><span class="line">	<span class="keyword">public</span> MessageSourceProperties <span class="title function_">messageSourceProperties</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MessageSourceProperties</span>();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Bean</span></span><br><span class="line">	<span class="keyword">public</span> MessageSource <span class="title function_">messageSource</span><span class="params">(MessageSourceProperties properties)</span> &#123;</span><br><span class="line">		<span class="type">ResourceBundleMessageSource</span> <span class="variable">messageSource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ResourceBundleMessageSource</span>();</span><br><span class="line">		<span class="keyword">if</span> (StringUtils.hasText(properties.getBasename())) &#123;</span><br><span class="line">			messageSource.setBasenames(StringUtils</span><br><span class="line">					.commaDelimitedListToStringArray(StringUtils.trimAllWhitespace(properties.getBasename())));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (properties.getEncoding() != <span class="literal">null</span>) &#123;</span><br><span class="line">			messageSource.setDefaultEncoding(properties.getEncoding().name());</span><br><span class="line">		&#125;</span><br><span class="line">		messageSource.setFallbackToSystemLocale(properties.isFallbackToSystemLocale());</span><br><span class="line">		<span class="type">Duration</span> <span class="variable">cacheDuration</span> <span class="operator">=</span> properties.getCacheDuration();</span><br><span class="line">		<span class="keyword">if</span> (cacheDuration != <span class="literal">null</span>) &#123;</span><br><span class="line">			messageSource.setCacheMillis(cacheDuration.toMillis());</span><br><span class="line">		&#125;</span><br><span class="line">		messageSource.setAlwaysUseMessageFormat(properties.isAlwaysUseMessageFormat());</span><br><span class="line">		messageSource.setUseCodeAsDefaultMessage(properties.isUseCodeAsDefaultMessage());</span><br><span class="line">		<span class="keyword">return</span> messageSource;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//......</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸»è¦äº†è§£messageSource()è¿™ä¸ªæ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> MessageSource <span class="title function_">messageSource</span><span class="params">(MessageSourceProperties properties)</span>;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°ï¼Œå®ƒçš„å‚æ•°ä¸ºMessageSourcePropertieså¯¹è±¡ï¼Œæˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MessageSourceProperties</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Comma-separated list of basenames (essentially a fully-qualified classpath</span></span><br><span class="line"><span class="comment">	 * location), each following the ResourceBundle convention with relaxed support for</span></span><br><span class="line"><span class="comment">	 * slash based locations. If it doesn&#x27;t contain a package qualifier (such as</span></span><br><span class="line"><span class="comment">	 * &quot;org.mypackage&quot;), it will be resolved from the classpath root.</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="type">String</span> <span class="variable">basename</span> <span class="operator">=</span> <span class="string">&quot;messages&quot;</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Message bundles encoding.</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="keyword">private</span> <span class="type">Charset</span> <span class="variable">encoding</span> <span class="operator">=</span> StandardCharsets.UTF_8;</span><br></pre></td></tr></table></figure>

<p>ç±»ä¸­é¦–å…ˆå£°æ˜äº†ä¸€ä¸ªå±æ€§basename,é»˜è®¤å€¼ä¸ºmessages;</p>
<p>æˆ‘ä»¬ç¿»è¯‘å…¶æ³¨é‡Šï¼š</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689041316778-79838765-8d12-40dc-b8ef-2dbded9202b3.png" alt="img"></p>
<p>- é€—å·åˆ†éš”çš„åŸºååˆ—è¡¨(æœ¬è´¨ä¸Šæ˜¯å®Œå…¨é™å®šçš„ç±»è·¯å¾„ä½ç½®)</p>
<p>- æ¯ä¸ªéƒ½éµå¾ªResourceBundleçº¦å®šï¼Œå¹¶è½»æ¾æ”¯æŒäºæ–œæ çš„ä½ç½®</p>
<p>- å¦‚æœä¸åŒ…å«åŒ…é™å®šç¬¦(ä¾‹å¦‚â€org.mypackageâ€),å®ƒå°†ä»ç±»è·¯å¾„æ ¹ç›®å½•ä¸­è§£æ</p>
<p><strong>æ„æ€æ˜¯</strong>ï¼š</p>
<ul>
<li>å¦‚æœä½ ä¸åœ¨springbooté…ç½®æ–‡ä»¶ä¸­æŒ‡å®šä»¥.åˆ†éš”å¼€çš„å›½é™…åŒ–èµ„æºæ–‡ä»¶åç§°çš„è¯</li>
<li>å®ƒé»˜è®¤ä¼šå»ç±»è·¯å¾„ä¸‹æ‰¾messages.propertiesä½œä¸ºå›½é™…åŒ–èµ„æºæ–‡ä»¶</li>
</ul>
<p>è¿™é‡Œæˆ‘ä»¬è‡ªå®šä¹‰äº†å›½é™…åŒ–èµ„æºæ–‡ä»¶ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åœ¨SpringBooté…ç½®æ–‡ä»¶application.propertiesä¸­åŠ å…¥ä»¥ä¸‹é…ç½®æŒ‡å®šæˆ‘ä»¬é…ç½®æ–‡ä»¶çš„åç§°</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring.messages.basename</span>=<span class="string">i18n.login</span></span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­i18næ˜¯å­˜æ”¾èµ„æºçš„æ–‡ä»¶å¤¹åï¼Œloginæ˜¯èµ„æºæ–‡ä»¶çš„åŸºæœ¬åç§°ã€‚</p>
<h3 id="4-é¦–é¡µè·å–æ˜¾ç¤ºå›½é™…åŒ–å€¼"><a href="#4-é¦–é¡µè·å–æ˜¾ç¤ºå›½é™…åŒ–å€¼" class="headerlink" title="4. é¦–é¡µè·å–æ˜¾ç¤ºå›½é™…åŒ–å€¼"></a>4. é¦–é¡µè·å–æ˜¾ç¤ºå›½é™…åŒ–å€¼</h3><p>åˆ©ç”¨#{â€¦} æ¶ˆæ¯è¡¨è¾¾å¼ï¼Œå»é¦–é¡µindex.htmlè·å–å›½é™…åŒ–çš„å€¼</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689041491425-bf3da4a1-273f-46fc-92c4-97612d3f706e.png" alt="img"></p>
<p>é‡å¯é¡¹ç›®ï¼Œè®¿é—®é¦–é¡µï¼Œå¯ä»¥å‘ç°å·²ç»è‡ªåŠ¨è¯†åˆ«ä¸ºä¸­æ–‡</p>
<img src="/2023/11/05/springboot/1689043111395-e1920f11-1b96-46f9-9f6e-9cac3470e1f4.png" class title="img">

<h3 id="5-é…ç½®å›½é™…åŒ–ç»„ä»¶å®ç°ä¸­è‹±æ–‡åˆ‡æ¢"><a href="#5-é…ç½®å›½é™…åŒ–ç»„ä»¶å®ç°ä¸­è‹±æ–‡åˆ‡æ¢" class="headerlink" title="5. é…ç½®å›½é™…åŒ–ç»„ä»¶å®ç°ä¸­è‹±æ–‡åˆ‡æ¢"></a>5. é…ç½®å›½é™…åŒ–ç»„ä»¶å®ç°ä¸­è‹±æ–‡åˆ‡æ¢</h3><h4 id="1-æ·»åŠ ä¸­è‹±æ–‡åˆ‡æ¢æ ‡ç­¾é“¾æ¥"><a href="#1-æ·»åŠ ä¸­è‹±æ–‡åˆ‡æ¢æ ‡ç­¾é“¾æ¥" class="headerlink" title="1. æ·»åŠ ä¸­è‹±æ–‡åˆ‡æ¢æ ‡ç­¾é“¾æ¥"></a>1. æ·»åŠ ä¸­è‹±æ–‡åˆ‡æ¢æ ‡ç­¾é“¾æ¥</h4><p>ä¸Šè¿°å®ç°äº†ç™»å½•é¦–é¡µæ˜¾ç¤ºä¸ºä¸­æ–‡ï¼Œæˆ‘ä»¬åœ¨index.htmlé¡µé¢ä¸­å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªæ ‡ç­¾</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-sm&quot;</span>&gt;</span>ä¸­æ–‡<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-sm&quot;</span>&gt;</span>English<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå°±å¯¹åº”ç€è§†å›¾ä¸­çš„</p>
<img src="/2023/11/05/springboot/1689041551919-f63dca7f-c950-4414-8590-c19cb2ef7707.png" class title="img">

<p>é‚£ä¹ˆæˆ‘ä»¬æ€ä¹ˆé€šè¿‡è¿™ä¸¤ä¸ªæ ‡ç­¾å®ç°ä¸­è‹±æ–‡åˆ‡æ¢å‘¢?</p>
<p>é¦–å…ˆåœ¨è¿™ä¸¤ä¸ªæ ‡ç­¾ä¸ŠåŠ ä¸Šè·³è½¬é“¾æ¥å¹¶å¸¦ä¸Šç›¸åº”çš„å‚æ•°</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--è¿™é‡Œä¼ å…¥å‚æ•°ä¸éœ€è¦ä½¿ç”¨?ä½¿ç”¨key=value--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-sm&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/index.html(l=&#x27;zh_CN&#x27;)&#125;&quot;</span>&gt;</span>ä¸­æ–‡<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-sm&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/index.html(l=&#x27;en_US&#x27;)&#125;&quot;</span>&gt;</span>English<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-è‡ªå®šä¹‰åœ°åŒºè§£æå™¨ç»„ä»¶"><a href="#2-è‡ªå®šä¹‰åœ°åŒºè§£æå™¨ç»„ä»¶" class="headerlink" title="2. è‡ªå®šä¹‰åœ°åŒºè§£æå™¨ç»„ä»¶"></a>2. è‡ªå®šä¹‰åœ°åŒºè§£æå™¨ç»„ä»¶</h4><p>æ€ä¹ˆå®ç°æˆ‘ä»¬è‡ªå®šä¹‰çš„åœ°åŒºè§£æå™¨å‘¢ï¼Ÿæˆ‘ä»¬é¦–å…ˆæ¥åˆ†æä¸€æ³¢æºç </p>
<p>åœ¨Springä¸­æœ‰å…³äºå›½é™…åŒ–çš„ä¸¤ä¸ªç±»ï¼š</p>
<ul>
<li>Localeï¼šä»£è¡¨åœ°åŒºï¼Œæ¯ä¸€ä¸ªLocaleå¯¹è±¡éƒ½ä»£è¡¨äº†ä¸€ä¸ªç‰¹å®šçš„åœ°ç†ã€æ”¿æ²»å’Œæ–‡åŒ–åœ°åŒº</li>
<li>LocaleResolverï¼šåœ°åŒºè§£æå™¨</li>
</ul>
<p>é¦–å…ˆæœç´¢WebMvcAutoConfigurationï¼Œå¯ä»¥åœ¨å…¶ä¸­æ‰¾åˆ°å…³äºä¸€ä¸ªæ–¹æ³•localeResolver()</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean</span></span><br><span class="line"><span class="meta">@ConditionalOnProperty(prefix = &quot;spring.mvc&quot;, name = &quot;locale&quot;)</span></span><br><span class="line"><span class="keyword">public</span> LocaleResolver <span class="title function_">localeResolver</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//å¦‚æœç”¨æˆ·é…ç½®äº†,åˆ™ä½¿ç”¨ç”¨æˆ·é…ç½®å¥½çš„</span></span><br><span class="line">   <span class="keyword">if</span> (<span class="built_in">this</span>.mvcProperties.getLocaleResolver() == WebMvcProperties.LocaleResolver.FIXED) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">FixedLocaleResolver</span>(<span class="built_in">this</span>.mvcProperties.getLocale());</span><br><span class="line">   &#125;</span><br><span class="line">    <span class="comment">//ç”¨æˆ·æ²¡æœ‰é…ç½®,åˆ™ä½¿ç”¨é»˜è®¤çš„</span></span><br><span class="line">   <span class="type">AcceptHeaderLocaleResolver</span> <span class="variable">localeResolver</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AcceptHeaderLocaleResolver</span>();</span><br><span class="line">   localeResolver.setDefaultLocale(<span class="built_in">this</span>.mvcProperties.getLocale());</span><br><span class="line">   <span class="keyword">return</span> localeResolver;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¯¥æ–¹æ³•å°±æ˜¯è·å–LocaleResolveråœ°åŒºå¯¹è±¡è§£æå™¨ï¼š</p>
<ul>
<li>å¦‚æœç”¨æˆ·é…ç½®äº†åˆ™ä½¿ç”¨ç”¨æˆ·é…ç½®çš„åœ°åŒºè§£æå™¨ï¼›</li>
<li>å¦‚æœç”¨æˆ·æ²¡æœ‰é…ç½®ï¼Œåˆ™ä½¿ç”¨é»˜è®¤çš„åœ°åŒºè§£æå™¨</li>
</ul>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°é»˜è®¤åœ°åŒºè§£æå™¨çš„æ˜¯AcceptHeaderLocaleResolverå¯¹è±¡ï¼Œæˆ‘ä»¬ç‚¹å…¥è¯¥ç±»æŸ¥çœ‹æºç </p>
<img src="/2023/11/05/springboot/1689041654354-b6587235-4e94-4cfa-a976-d1aed85446d4.png" class title="img">

<p>å¯ä»¥å‘ç°å®ƒç»§æ‰¿äº†LocaleResolveræ¥å£ï¼Œå®ç°äº†åœ°åŒºè§£æ</p>
<p>å› æ­¤æˆ‘ä»¬æƒ³è¦å®ç°ä¸Šè¿°è‡ªå®šä¹‰çš„å›½é™…åŒ–èµ„æºç”Ÿæ•ˆï¼Œåªéœ€è¦ç¼–å†™ä¸€ä¸ªè‡ªå·±çš„åœ°åŒºè§£æå™¨ï¼Œç»§æ‰¿LocaleResolveræ¥å£ï¼Œé‡å†™å…¶æ–¹æ³•å³å¯</p>
<p>æˆ‘ä»¬åœ¨configåŒ…ä¸‹æ–°å»ºMyLocaleResolverï¼Œä½œä¸ºè‡ªå·±çš„å›½é™…åŒ–åœ°åŒºè§£æå™¨</p>
<img src="/2023/11/05/springboot/1689041717173-9634c82d-1158-47ec-b440-6a6375177830.png" class title="img">

<p>æˆ‘ä»¬åœ¨index.htmlä¸­ï¼Œç¼–å†™äº†å¯¹åº”çš„è¯·æ±‚è·³è½¬</p>
<ul>
<li>å¦‚æœç‚¹å‡»ä¸­æ–‡æŒ‰é’®ï¼Œåˆ™è·³è½¬åˆ°&#x2F;index.html(l&#x3D;â€™zh_CNâ€™)é¡µé¢</li>
<li>å¦‚æœç‚¹å‡»EnglishæŒ‰é’®ï¼Œåˆ™è·³è½¬åˆ°&#x2F;index.html(l&#x3D;â€™en_USâ€™)é¡µé¢</li>
</ul>
<img src="/2023/11/05/springboot/1689041735638-f904613f-753d-4226-8a9c-b73b78655972.png" class title="img">

<p>å› æ­¤æˆ‘ä»¬è‡ªå®šä¹‰çš„åœ°åŒºè§£æå™¨MyLocaleResolverä¸­ï¼Œéœ€è¦å¤„ç†è¿™ä¸¤ä¸ªå¸¦å‚æ•°çš„é“¾æ¥è¯·æ±‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.cglib.core.Local;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.StringUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.LocaleResolver;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servl et.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.util.Locale;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyLocaleResolver</span> <span class="keyword">implements</span> <span class="title class_">LocaleResolver</span> &#123;</span><br><span class="line">    <span class="comment">//è§£æè¯·æ±‚</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Locale <span class="title function_">resolveLocale</span><span class="params">(HttpServletRequest request)</span> &#123;</span><br><span class="line">        <span class="comment">//è·å–è¯·æ±‚ä¸­çš„å›½é™…åŒ–å‚æ•°</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">language</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;l&quot;</span>);</span><br><span class="line">        <span class="comment">//é»˜è®¤çš„åœ°åŒº</span></span><br><span class="line">        <span class="type">Locale</span> <span class="variable">locale</span> <span class="operator">=</span> Locale.getDefault();</span><br><span class="line">        <span class="comment">//å¦‚æœè¯·æ±‚çš„é“¾æ¥å‚æ•°ä¸ä¸ºç©º,æºå¸¦äº†å›½é™…åŒ–å‚æ•°</span></span><br><span class="line">        <span class="keyword">if</span> (!StringUtils.isEmpty(language)) &#123;</span><br><span class="line">            String[] split = language.split(<span class="string">&quot;_&quot;</span>);<span class="comment">//zh_CN(è¯­è¨€_åœ°åŒº)</span></span><br><span class="line">            locale = <span class="keyword">new</span> <span class="title class_">Locale</span>(split[<span class="number">0</span>], split[<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> locale;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setLocale</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Locale locale)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸ºäº†è®©æˆ‘ä»¬çš„åŒºåŸŸåŒ–ä¿¡æ¯èƒ½å¤Ÿç”Ÿæ•ˆï¼Œæˆ‘ä»¬éœ€è¦å†é…ç½®ä¸€ä¸‹è¿™ä¸ªç»„ä»¶ï¼åœ¨è‡ªå·±çš„MvcConofigé…ç½®ç±»ä¸‹æ·»åŠ beanï¼›</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è‡ªå®šä¹‰çš„å›½é™…åŒ–ç»„ä»¶ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> LocaleResolver <span class="title function_">localeResolver</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MyLocaleResolver</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬é‡å¯é¡¹ç›®ï¼Œæ¥è®¿é—®ä¸€ä¸‹ï¼Œå‘ç°ç‚¹å‡»æŒ‰é’®å¯ä»¥å®ç°æˆåŠŸåˆ‡æ¢ï¼</p>
<p>ç‚¹å‡»ä¸­æ–‡æŒ‰é’®ï¼Œè·³è½¬åˆ°<a href="http://localhost:8080/index.html?l=zh_CN%EF%BC%8C%E6%98%BE%E7%A4%BA%E4%B8%BA%E4%B8%AD%E6%96%87">http://localhost:8080/index.html?l=zh_CNï¼Œæ˜¾ç¤ºä¸ºä¸­æ–‡</a></p>
<img src="/2023/11/05/springboot/1689061836095-89f612a7-c21b-490e-bc2f-1c0b0691ba0e.png" class title="img">

<p>ç‚¹å‡»EnglishæŒ‰é’®ï¼Œè·³è½¬åˆ°<a href="http://localhost:8080/index.html?l=en_US%EF%BC%8C%E6%98%BE%E7%A4%BA%E4%B8%BA%E8%8B%B1%E6%96%87">http://localhost:8080/index.html?l=en_USï¼Œæ˜¾ç¤ºä¸ºè‹±æ–‡</a></p>
<img src="/2023/11/05/springboot/1689061864593-e88cc733-8c5a-4235-8cde-e48ce74947f2.png" class title="img">

<h2 id="ï¼ˆå››ï¼‰ç™»å½•åŠŸèƒ½çš„å®ç°"><a href="#ï¼ˆå››ï¼‰ç™»å½•åŠŸèƒ½çš„å®ç°" class="headerlink" title="ï¼ˆå››ï¼‰ç™»å½•åŠŸèƒ½çš„å®ç°"></a>ï¼ˆå››ï¼‰ç™»å½•åŠŸèƒ½çš„å®ç°</h2><p>ç™»å½•ï¼Œä¹Ÿå°±æ˜¯å½“æˆ‘ä»¬ç‚¹å‡»ç™»å½•æŒ‰é’®çš„æ—¶å€™ï¼Œä¼šè¿›å…¥ä¸€ä¸ªé¡µé¢ï¼Œè¿™é‡Œè¿›å…¥dashboardé¡µé¢</p>
<p>å› æ­¤æˆ‘ä»¬é¦–å…ˆåœ¨index.htmlä¸­çš„è¡¨å•ç¼–å†™ä¸€ä¸ªæäº¤åœ°å€&#x2F;user&#x2F;loginï¼Œå¹¶ç»™åç§°å’Œå¯†ç è¾“å…¥æ¡†æ·»åŠ nameå±æ€§ä¸ºäº†åé¢çš„ä¼ å‚</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689041973701-18e6e8d9-9c13-489c-bc4a-68bea92bf5e2.png" alt="img"></p>
<p>ç„¶åç¼–å†™å¯¹åº”çš„<strong>controller</strong></p>
<p>åœ¨controlleråŒ…ä¸­æ–°å»ºç±»loginControllerï¼Œå¤„ç†ç™»å½•è¯·æ±‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/user/login&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">login</span><span class="params">(<span class="meta">@RequestParam(&quot;username&quot;)</span> String username, <span class="meta">@RequestParam(&quot;password&quot;)</span> String password, Model model)</span> &#123;</span><br><span class="line">        <span class="comment">//å¦‚æœç”¨æˆ·åå’Œå¯†ç æ­£ç¡®</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;xiaowu&quot;</span>.equals(username) &amp;&amp; <span class="string">&quot;xiaowu&quot;</span>.equals(password))</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;dashboard&quot;</span>;<span class="comment">//è·³è½¬åˆ°dashboardé¡µé¢</span></span><br><span class="line">            <span class="comment">//å¦‚æœç”¨æˆ·åæˆ–è€…å¯†ç ä¸æ­£ç¡®</span></span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            model.addAttribute(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;ç”¨æˆ·åæˆ–è€…å¯†ç é”™è¯¯&quot;</span>);<span class="comment">//æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;<span class="comment">//è·³è½¬åˆ°é¦–é¡µ</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åæˆ‘ä»¬åœ¨index.htmlé¦–é¡µä¸­åŠ ä¸€ä¸ªæ ‡ç­¾ç”¨æ¥æ˜¾ç¤ºcontrollerè¿”å›çš„é”™è¯¯ä¿¡æ¯</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"> <span class="comment">&lt;!--å¦‚æœmsgçš„å€¼ä¸ºç©º,åˆ™ä¸æ˜¾ç¤ºæ¶ˆæ¯--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;color: red&quot;</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;msg&#125;&quot;</span> <span class="attr">th:if</span>=<span class="string">&quot;$&#123;not #strings.isEmpty(msg)&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<img src="/2023/11/05/springboot/1689490835421-abcce780-10ef-4391-9176-b174cd3ff1db.png" class title="img">

<p>æˆ‘ä»¬å†æµ‹è¯•ä¸€ä¸‹ï¼Œå¯åŠ¨ä¸»ç¨‹åºï¼Œè®¿é—®localhost:8080</p>
<p>å¦‚æœæˆ‘ä»¬è¾“å…¥æ­£ç¡®çš„ç”¨æˆ·åå’Œå¯†ç </p>
<img src="/2023/11/05/springboot/1689062109108-cadac13a-5867-42c6-ab40-b90f317a3899.png" class title="img">

<p>åˆ™é‡æ–°è·³è½¬åˆ°dashboardé¡µé¢ï¼Œæµè§ˆå™¨urlä¸º<a href="http://localhost:8080/user/login?username=xiaowu&password=xiaowu">http://localhost:8080/user/login?username=xiaowu&amp;password=xiaowu</a></p>
<img src="/2023/11/05/springboot/1689061114721-3bbd8b7e-5613-46ee-8009-75a674d7ad8b.png" class title="img">

<p>è´¦å·å¯†ç å‡ºé”™</p>
<img src="/2023/11/05/springboot/1689062187580-30d207ff-1e9e-4d73-96e6-a4ff905ce016.png" class title="img">

<p>åˆ°æ­¤æˆ‘ä»¬<strong>çš„ç™»å½•åŠŸèƒ½å®ç°å®Œæ¯•</strong>ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªå¾ˆå¤§çš„<strong>é—®é¢˜</strong>ï¼Œæµè§ˆå™¨çš„urlæš´éœ²äº†ç”¨æˆ·çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œè¿™åœ¨å®é™…å¼€å‘ä¸­å¯æ˜¯é‡å¤§çš„æ¼æ´ï¼Œ<strong>æ³„éœ²äº†ç”¨æˆ·ä¿¡æ¯</strong>ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ç¼–å†™ä¸€ä¸ªæ˜ å°„</p>
<p>æˆ‘ä»¬åœ¨è‡ªå®šä¹‰çš„é…ç½®ç±»MyMvcConfigä¸­åŠ ä¸€å¥ä»£ç </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">registry.addViewController(<span class="string">&quot;/main.html&quot;</span>).setViewName(<span class="string">&quot;dashboard&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå°±æ˜¯è®¿é—®&#x2F;main.htmlé¡µé¢å°±è·³è½¬åˆ°dashboardé¡µé¢</p>
<p>ç„¶åæˆ‘ä»¬ç¨ç¨ä¿®æ”¹ä¸€ä¸‹LoginControllerï¼Œå½“ç™»å½•æˆåŠŸæ—¶é‡å®šå‘åˆ°main.htmlé¡µé¢ï¼Œä¹Ÿå°±è·³è½¬åˆ°äº†dashboardé¡µé¢</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/user/login&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">login</span><span class="params">(<span class="meta">@RequestParam(&quot;username&quot;)</span> String username, <span class="meta">@RequestParam(&quot;password&quot;)</span> String password, Model model)</span> &#123;</span><br><span class="line">        <span class="comment">//å¦‚æœç”¨æˆ·åå’Œå¯†ç æ­£ç¡®</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;xiaowu&quot;</span>.equals(username) &amp;&amp; <span class="string">&quot;xiaowu&quot;</span>.equals(password))</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/main.html&quot;</span>;<span class="comment">//é‡å®šå‘åˆ°main.htmlé¡µé¢,ä¹Ÿå°±æ˜¯è·³è½¬åˆ°dashboardé¡µé¢</span></span><br><span class="line">            <span class="comment">//å¦‚æœç”¨æˆ·åæˆ–è€…å¯†ç ä¸æ­£ç¡®</span></span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            model.addAttribute(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;ç”¨æˆ·åæˆ–è€…å¯†ç é”™è¯¯&quot;</span>);<span class="comment">//æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;<span class="comment">//è·³è½¬åˆ°é¦–é¡µ</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å†æ¬¡é‡å¯æµ‹è¯•ï¼Œè¾“å…¥æ­£ç¡®çš„ç”¨æˆ·åå’Œå¯†ç ç™»é™†æˆåŠŸåï¼Œæµè§ˆå™¨ä¸å†æºå¸¦æ³„éœ²ä¿¡æ¯</p>
<img src="/2023/11/05/springboot/1689062363572-9b4bc444-5096-4e7c-88cb-fdd48999c749.png" class title="img">

<p><strong>ç¬¬äºŒç§æ–¹æ³•ï¼ˆä¹Ÿå¯ä»¥ç”¨postè¯·æ±‚æ¥ï¼Œ<strong><strong>ä¸æ¨è</strong></strong>ï¼‰</strong></p>
<p><strong>å»indexé¡µé¢ç»™formè¡¨å•æ·»åŠ postè¯·æ±‚</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">&quot;form-signin&quot;</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/user/login&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span> </span><br><span class="line">  //è¿™é‡Œé¢çš„æ‰€æœ‰è¡¨å•æ ‡ç­¾éƒ½éœ€è¦åŠ ä¸Šä¸€ä¸ªnameå±æ€§    </span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>controllerå±‚å°±ä¸éœ€è¦ç”¨é‡å®šå‘ï¼Œå·¥å…·ç±»ä¹Ÿå¯ä»¥ä¸ç”¨è®¾ç½®è§†å›¾</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/user/login&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">login</span><span class="params">(<span class="meta">@RequestParam(&quot;username&quot;)</span> String username, <span class="meta">@RequestParam(&quot;password&quot;)</span> String password, Model model)</span> &#123;</span><br><span class="line">        <span class="comment">//å¦‚æœç”¨æˆ·åå’Œå¯†ç æ­£ç¡®</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;xiaowu&quot;</span>.equals(username) &amp;&amp; <span class="string">&quot;xiaowu&quot;</span>.equals(password))</span><br><span class="line">            <span class="keyword">return</span><span class="string">&quot;dashboard&quot;</span>;</span><br><span class="line">          <span class="comment">/* return &quot;redirect:/main.html&quot;;//é‡å®šå‘åˆ°main.htmlé¡µé¢,ä¹Ÿå°±æ˜¯è·³è½¬åˆ°dashboardé¡µé¢*/</span></span><br><span class="line">            <span class="comment">//å¦‚æœç”¨æˆ·åæˆ–è€…å¯†ç ä¸æ­£ç¡®</span></span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            model.addAttribute(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;ç”¨æˆ·åæˆ–è€…å¯†ç é”™è¯¯&quot;</span>);<span class="comment">//æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;<span class="comment">//è·³è½¬åˆ°é¦–é¡µ</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>postè¯·æ±‚ä¸ä¼šæš´éœ²åœ°å€ï¼Œä½†æ˜¯ä¸Šé¢çš„æ–¹æ³•æ¯”è¾ƒæ¨è</strong></p>
<img src="/2023/11/05/springboot/1689063155549-947299be-69b5-4ca8-ba5a-4ac28a54d6b7.png" class title="img">

<p>ä½†æ˜¯è¿™åˆå‡ºç°äº†<strong>æ–°çš„é—®é¢˜</strong>ï¼Œæ— è®ºç™»ä¸ç™»é™†ï¼Œæˆ‘ä»¬è®¿é—®localhost&#x2F;main.htmléƒ½ä¼šè·³è½¬åˆ°dashboardçš„é¡µé¢ï¼Œè¿™å°±å¼•å…¥äº†æ¥ä¸‹æ¥çš„æ‹¦æˆªå™¨</p>
<h2 id="ï¼ˆäº”ï¼‰ç™»å½•æ‹¦æˆªå™¨"><a href="#ï¼ˆäº”ï¼‰ç™»å½•æ‹¦æˆªå™¨" class="headerlink" title="ï¼ˆäº”ï¼‰ç™»å½•æ‹¦æˆªå™¨"></a>ï¼ˆäº”ï¼‰ç™»å½•æ‹¦æˆªå™¨</h2><p>ä¸ºäº†è§£å†³ä¸Šè¿°é—ç•™çš„é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰ä¸€ä¸ªæ‹¦æˆªå™¨ï¼›</p>
<p>åœ¨configç›®å½•ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªç™»å½•æ‹¦æˆªå™¨ç±»LoginHandlerInterceptor</p>
<p><strong>ç”¨æˆ·ç™»å½•æˆåŠŸåï¼Œåå°ä¼šå¾—åˆ°ç”¨æˆ·ä¿¡æ¯ï¼›å¦‚æœæ²¡æœ‰ç™»å½•ï¼Œåˆ™ä¸ä¼šæœ‰ä»»ä½•çš„ç”¨æˆ·ä¿¡æ¯ï¼›</strong></p>
<p>æˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨è¿™ä¸€ç‚¹é€šè¿‡<strong>æ‹¦æˆªå™¨è¿›è¡Œæ‹¦æˆª</strong>ï¼š</p>
<ul>
<li>å½“ç”¨æˆ·ç™»å½•æ—¶å°†ç”¨æˆ·ä¿¡æ¯å­˜å…¥sessionä¸­ï¼Œè®¿é—®é¡µé¢æ—¶é¦–å…ˆåˆ¤æ–­sessionä¸­æœ‰æ²¡æœ‰ç”¨æˆ·çš„ä¿¡æ¯</li>
<li>å¦‚æœæ²¡æœ‰ï¼Œæ‹¦æˆªå™¨è¿›è¡Œæ‹¦æˆªï¼›</li>
<li>å¦‚æœæœ‰ï¼Œæ‹¦æˆªå™¨æ”¾è¡Œ</li>
</ul>
<p>å› æ­¤æˆ‘ä»¬é¦–å…ˆåœ¨LoginControllerä¸­å½“ç”¨æˆ·ç™»å½•æˆåŠŸåï¼Œå­˜å…¥ç”¨æˆ·ä¿¡æ¯åˆ°sessionä¸­</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/user/login&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">login</span><span class="params">(<span class="meta">@RequestParam(&quot;username&quot;)</span> String username, <span class="meta">@RequestParam(&quot;password&quot;)</span> String password, Model model, HttpSession session)</span> &#123;</span><br><span class="line">        <span class="comment">//å¦‚æœç”¨æˆ·åå’Œå¯†ç æ­£ç¡®</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;xiaowu&quot;</span>.equals(username) &amp;&amp; <span class="string">&quot;xiaowu&quot;</span>.equals(password)) &#123;</span><br><span class="line">            session.setAttribute(<span class="string">&quot;LoginUser&quot;</span>, username);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;redirect:/main.html&quot;</span>;<span class="comment">//é‡å®šå‘åˆ°main.htmlé¡µé¢,ä¹Ÿå°±æ˜¯è·³è½¬åˆ°dashboardé¡µé¢</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å¦‚æœç”¨æˆ·åæˆ–è€…å¯†ç ä¸æ­£ç¡®</span></span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            model.addAttribute(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;ç”¨æˆ·åæˆ–è€…å¯†ç é”™è¯¯&quot;</span>);<span class="comment">//æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;<span class="comment">//è·³è½¬åˆ°é¦–é¡µ</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åå†åœ¨å®ç°è‡ªå®šä¹‰çš„ç™»å½•æ‹¦æˆªå™¨ï¼Œç»§æ‰¿HandlerInterceptoræ¥å£</p>
<ul>
<li>å…¶ä¸­è·å–å­˜å…¥çš„sessionè¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œåˆ™æ”¾è¡Œï¼›</li>
<li>å¦‚æœä¸ºç©ºï¼Œåˆ™è¿”å›é”™è¯¯æ¶ˆæ¯ï¼Œå¹¶ä¸”è¿”å›åˆ°é¦–é¡µï¼Œä¸æ”¾è¡Œã€‚</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.Interceptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰æ‹¦æˆªå™¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginHandlerInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//ç”¨æˆ·ç™»å½•æˆåŠŸå,åº”è¯¥æœ‰è‡ªå·±çš„session</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession().getAttribute(<span class="string">&quot;LoginUser&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (session == <span class="literal">null</span>) &#123;<span class="comment">//æœªç™»å½•ï¼Œè¿”å›ç™»å½•é¡µé¢</span></span><br><span class="line">            request.setAttribute(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;æƒé™ä¸å¤Ÿ,è¯·å…ˆç™»å½•&quot;</span>);</span><br><span class="line">            request.getRequestDispatcher(<span class="string">&quot;/index.html&quot;</span>).forward(request, response);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//ç™»å½•ï¼Œæ”¾è¡Œ</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åé…ç½®åˆ°beanä¸­æ³¨å†Œï¼Œåœ¨MyMvcConfigé…ç½®ç±»ä¸­ï¼Œé‡å†™å…³äºæ‹¦æˆªå™¨çš„æ–¹æ³•ï¼Œæ·»åŠ æˆ‘ä»¬è‡ªå®šä¹‰çš„æ‹¦æˆªå™¨ï¼Œæ³¨æ„å±è”½é™æ€èµ„æºåŠä¸»é¡µä»¥åŠç›¸å…³è¯·æ±‚çš„æ‹¦æˆª</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">    <span class="comment">// æ³¨å†Œæ‹¦æˆªå™¨ï¼ŒåŠæ‹¦æˆªè¯·æ±‚å’Œè¦å‰”é™¤å“ªäº›è¯·æ±‚!</span></span><br><span class="line">    <span class="comment">// æˆ‘ä»¬è¿˜éœ€è¦è¿‡æ»¤é™æ€èµ„æºæ–‡ä»¶ï¼Œå¦åˆ™æ ·å¼æ˜¾ç¤ºä¸å‡ºæ¥</span></span><br><span class="line">    registry.addInterceptor(<span class="keyword">new</span> <span class="title class_">LoginHandlerInterceptor</span>())</span><br><span class="line">            .addPathPatterns(<span class="string">&quot;/**&quot;</span>)</span><br><span class="line">            .excludePathPatterns(<span class="string">&quot;/index.html&quot;</span>, <span class="string">&quot;/&quot;</span>, <span class="string">&quot;/user/login&quot;</span>, <span class="string">&quot;/css/**&quot;</span>, <span class="string">&quot;/js/**&quot;</span>, <span class="string">&quot;/img/**&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åé‡å¯ä¸»ç¨‹åºè¿›è¡Œæµ‹è¯•ï¼Œç›´æ¥è®¿é—®<a href="http://localhost:8080/main.html">http://localhost:8080/main.html</a></p>
<img src="/2023/11/05/springboot/1689145800256-58ebe1c3-8a5b-4d75-8415-c5afec1526d4.png" class title="img">

<p>æç¤ºæƒé™ä¸å¤Ÿï¼Œè¯·å…ˆç™»å½•ï¼Œæˆ‘ä»¬ç™»å½•ä¸€ä¸‹</p>
<img src="/2023/11/05/springboot/1689147197148-ab2f7bd0-7205-4b36-b2b4-de6b80257980.png" class title="img">

<p>è¿›å…¥åˆ°dashboardé¡µé¢</p>
<p>å¦‚æœæˆ‘ä»¬å†ç›´æ¥é‡æ–°è®¿é—®<a href="http://localhost:8080/main.html%EF%BC%8C%E4%B9%9F%E5%8F%AF%E4%BB%A5%E7%9B%B4%E6%8E%A5%E7%9B%B4%E6%8E%A5%E8%BF%9B%E5%85%A5%E5%88%B0dashboard%E9%A1%B5%E9%9D%A2%EF%BC%8C%E8%BF%99%E6%98%AF%E5%9B%A0%E4%B8%BAsession%E9%87%8C%E9%9D%A2%E5%AD%98%E5%85%A5%E4%BA%86%E7%94%A8%E6%88%B7%E7%9A%84%E4%BF%A1%E6%81%AF%EF%BC%8C%E6%8B%A6%E6%88%AA%E5%99%A8%E6%94%BE%E8%A1%8C%E9%80%9A%E8%BF%87">http://localhost:8080/main.htmlï¼Œä¹Ÿå¯ä»¥ç›´æ¥ç›´æ¥è¿›å…¥åˆ°dashboardé¡µé¢ï¼Œè¿™æ˜¯å› ä¸ºsessioné‡Œé¢å­˜å…¥äº†ç”¨æˆ·çš„ä¿¡æ¯ï¼Œæ‹¦æˆªå™¨æ”¾è¡Œé€šè¿‡</a></p>
<h2 id="ï¼ˆå…­ï¼‰å±•ç¤ºå‘˜å·¥ä¿¡æ¯â€”â€”æŸ¥"><a href="#ï¼ˆå…­ï¼‰å±•ç¤ºå‘˜å·¥ä¿¡æ¯â€”â€”æŸ¥" class="headerlink" title="ï¼ˆå…­ï¼‰å±•ç¤ºå‘˜å·¥ä¿¡æ¯â€”â€”æŸ¥"></a>ï¼ˆå…­ï¼‰å±•ç¤ºå‘˜å·¥ä¿¡æ¯â€”â€”æŸ¥</h2><h3 id="1-å®ç°Customersè§†å›¾è·³è½¬"><a href="#1-å®ç°Customersè§†å›¾è·³è½¬" class="headerlink" title="1. å®ç°Customersè§†å›¾è·³è½¬"></a>1. å®ç°Customersè§†å›¾è·³è½¬</h3><p>ç›®æ ‡ï¼šç‚¹å‡»dashboard.htmlé¡µé¢ä¸­çš„Customerså±•ç¤ºè·³è½¬åˆ°list.htmlé¡µé¢æ˜¾ç¤ºæ‰€æœ‰å‘˜å·¥ä¿¡æ¯</p>
<img src="/2023/11/05/springboot/1689148932757-07287fd1-9c23-4b6c-89da-ec3510137d76.png" class title="img">

<p>å› æ­¤ï¼Œæˆ‘ä»¬é¦–å…ˆç»™dashboard.htmlé¡µé¢ä¸­Customerséƒ¨åˆ†æ ‡ç­¾æ·»åŠ hrefå±æ€§ï¼Œå®ç°ç‚¹å‡»è¯¥æ ‡ç­¾è¯·æ±‚&#x2F;empsè·¯å¾„è·³è½¬åˆ°list.htmlå±•ç¤ºæ‰€æœ‰çš„å‘˜å·¥ä¿¡æ¯</p>
<img src="/2023/11/05/springboot/1689149184159-39bdad85-9b04-4d74-b163-a847cbeec5f6.png" class title="img">

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;nav-link&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/emps&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;24&quot;</span> <span class="attr">height</span>=<span class="string">&quot;24&quot;</span> <span class="attr">viewBox</span>=<span class="string">&quot;0 0 24 24&quot;</span></span></span><br><span class="line"><span class="tag">             <span class="attr">fill</span>=<span class="string">&quot;none&quot;</span> <span class="attr">stroke</span>=<span class="string">&quot;currentColor&quot;</span> <span class="attr">stroke-width</span>=<span class="string">&quot;2&quot;</span> <span class="attr">stroke-linecap</span>=<span class="string">&quot;round&quot;</span></span></span><br><span class="line"><span class="tag">             <span class="attr">stroke-linejoin</span>=<span class="string">&quot;round&quot;</span> <span class="attr">class</span>=<span class="string">&quot;feather feather-users&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">circle</span> <span class="attr">cx</span>=<span class="string">&quot;9&quot;</span> <span class="attr">cy</span>=<span class="string">&quot;7&quot;</span> <span class="attr">r</span>=<span class="string">&quot;4&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">circle</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M23 21v-2a4 4 0 0 0-3-3.87&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M16 3.13a4 4 0 0 1 0 7.75&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">        Customers</span><br><span class="line">    <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>åŒæ ·ä¿®æ”¹list.htmlå¯¹åº”è¯¥çš„ä»£ç ä¸ºä¸Šè¿°ä»£ç </p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689149259950-fa428603-968c-4ee7-b915-89e6efaed6f3.png" alt="img"></p>
<p>æˆ‘ä»¬åœ¨templatesç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªåŒ…empï¼Œç”¨æ¥æ”¾æ‰€æœ‰å…³äºå‘˜å·¥ä¿¡æ¯çš„é¡µé¢ï¼Œæˆ‘ä»¬å°†list.htmlé¡µé¢ç§»å…¥è¯¥åŒ…ä¸­</p>
<img src="/2023/11/05/springboot/1689149694680-5f664f81-a1db-4bbe-889c-910cff39c60a.png" class title="img">

<p>ç„¶åç¼–å†™è¯·æ±‚å¯¹åº”çš„controllerï¼Œå¤„ç†&#x2F;empsè¯·æ±‚ï¼Œåœ¨controlleråŒ…ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªEmployeeControllerç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.wu.dao.EmployeeDao;</span><br><span class="line"><span class="keyword">import</span> com.wu.pojo.Employee;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Collection;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmployeeController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EmployeeDao employeeDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/emps&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">list</span><span class="params">(Model model)</span> &#123;</span><br><span class="line">        Collection&lt;Employee&gt; employees = employeeDao.getALL();</span><br><span class="line">        model.addAttribute(<span class="string">&quot;employees&quot;</span>,employees);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;emp/list&quot;</span>;<span class="comment">//è¿”å›åˆ°listé¡µé¢</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åæˆ‘ä»¬é‡å¯ä¸»ç¨‹åºè¿›è¡Œæµ‹è¯•ï¼Œç™»å½•åˆ°dashboardé¡µé¢ï¼Œå†ç‚¹å‡»Customersï¼ŒæˆåŠŸè·³è½¬åˆ°&#x2F;emps</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689149963629-17c0f0da-4d3a-46e8-8632-a6ded8466efd.png" alt="img"></p>
<p><strong>ä½†æ˜¯æœ‰äº›é—®é¢˜</strong>ï¼š</p>
<ol>
<li>æˆ‘ä»¬ç‚¹å‡»äº†Customersåï¼Œå®ƒåº”è¯¥å¤„äºé«˜äº®çŠ¶æ€ï¼Œä½†æ˜¯è¿™é‡Œç‚¹å‡»åè¿˜æ˜¯æ™®é€šçš„æ ·å­ï¼Œé«˜äº®è¿˜æ˜¯åœ¨Dashboardä¸Š</li>
<li>list.htmlå’Œdashboard.htmlé¡µé¢çš„ä¾§è¾¹æ å’Œé¡¶éƒ¨æ æ˜¯ç›¸åŒçš„ï¼Œå¯ä»¥æŠ½å–å‡ºæ¥</li>
</ol>
<h3 id="2-æå–é¡µé¢å…¬å…±éƒ¨åˆ†"><a href="#2-æå–é¡µé¢å…¬å…±éƒ¨åˆ†" class="headerlink" title="2. æå–é¡µé¢å…¬å…±éƒ¨åˆ†"></a>2. æå–é¡µé¢å…¬å…±éƒ¨åˆ†</h3><p>åœ¨templatesç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªcommonsåŒ…ï¼Œå…¶ä¸­æ–°å»ºcommons.htmlç”¨æ¥æ”¾ç½®å…¬å…±é¡µé¢ä»£ç </p>
<img src="/2023/11/05/springboot/1689150025782-0fa1668d-3dd7-49d6-9d5e-42dd8904ab7a.png" class title="img">

<p>åˆ©ç”¨th:fragmentæ ‡ç­¾æŠ½å–å…¬å…±éƒ¨åˆ†ï¼ˆé¡¶éƒ¨å¯¼èˆªæ å’Œä¾§è¾¹æ ï¼‰</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">&lt;!--é¡¶éƒ¨å¯¼èˆªæ ,åˆ©ç”¨th:fragmentæå–å‡ºæ¥,å‘½åä¸ºtopbar--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">&quot;navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0&quot;</span> <span class="attr">th:fragment</span>=<span class="string">&quot;topbar&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;navbar-brand col-sm-3 col-md-2 mr-0&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://getbootstrap.com/docs/4.0/examples/dashboard/#&quot;</span>&gt;</span>Company</span><br><span class="line">        name<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;form-control form-control-dark w-100&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Search&quot;</span> <span class="attr">aria-label</span>=<span class="string">&quot;Search&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;navbar-nav px-3&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item text-nowrap&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;nav-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://getbootstrap.com/docs/4.0/examples/dashboard/#&quot;</span>&gt;</span>Sign out<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">&lt;!--ä¾§è¾¹æ ,åˆ©ç”¨th:fragmentæå–å‡ºæ¥,å‘½åä¸ºsidebar--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">&quot;col-md-2 d-none d-md-block bg-light sidebar&quot;</span> <span class="attr">th:fragment</span>=<span class="string">&quot;siderbar&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sidebar-sticky&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav flex-column&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;nav-link active&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://getbootstrap.com/docs/4.0/examples/dashboard/#&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;24&quot;</span> <span class="attr">height</span>=<span class="string">&quot;24&quot;</span> <span class="attr">viewBox</span>=<span class="string">&quot;0 0 24 24&quot;</span></span></span><br><span class="line"><span class="tag">                         <span class="attr">fill</span>=<span class="string">&quot;none&quot;</span> <span class="attr">stroke</span>=<span class="string">&quot;currentColor&quot;</span> <span class="attr">stroke-width</span>=<span class="string">&quot;2&quot;</span> <span class="attr">stroke-linecap</span>=<span class="string">&quot;round&quot;</span></span></span><br><span class="line"><span class="tag">                         <span class="attr">stroke-linejoin</span>=<span class="string">&quot;round&quot;</span> <span class="attr">class</span>=<span class="string">&quot;feather feather-home&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">polyline</span> <span class="attr">points</span>=<span class="string">&quot;9 22 9 12 15 12 15 22&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">polyline</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">                    Dashboard <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;sr-only&quot;</span>&gt;</span>(current)<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;nav-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://getbootstrap.com/docs/4.0/examples/dashboard/#&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;24&quot;</span> <span class="attr">height</span>=<span class="string">&quot;24&quot;</span> <span class="attr">viewBox</span>=<span class="string">&quot;0 0 24 24&quot;</span></span></span><br><span class="line"><span class="tag">                         <span class="attr">fill</span>=<span class="string">&quot;none&quot;</span> <span class="attr">stroke</span>=<span class="string">&quot;currentColor&quot;</span> <span class="attr">stroke-width</span>=<span class="string">&quot;2&quot;</span> <span class="attr">stroke-linecap</span>=<span class="string">&quot;round&quot;</span></span></span><br><span class="line"><span class="tag">                         <span class="attr">stroke-linejoin</span>=<span class="string">&quot;round&quot;</span> <span class="attr">class</span>=<span class="string">&quot;feather feather-file&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">polyline</span> <span class="attr">points</span>=<span class="string">&quot;13 2 13 9 20 9&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">polyline</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">                    Orders</span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;nav-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://getbootstrap.com/docs/4.0/examples/dashboard/#&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;24&quot;</span> <span class="attr">height</span>=<span class="string">&quot;24&quot;</span> <span class="attr">viewBox</span>=<span class="string">&quot;0 0 24 24&quot;</span></span></span><br><span class="line"><span class="tag">                         <span class="attr">fill</span>=<span class="string">&quot;none&quot;</span> <span class="attr">stroke</span>=<span class="string">&quot;currentColor&quot;</span> <span class="attr">stroke-width</span>=<span class="string">&quot;2&quot;</span> <span class="attr">stroke-linecap</span>=<span class="string">&quot;round&quot;</span></span></span><br><span class="line"><span class="tag">                         <span class="attr">stroke-linejoin</span>=<span class="string">&quot;round&quot;</span> <span class="attr">class</span>=<span class="string">&quot;feather feather-shopping-cart&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">circle</span> <span class="attr">cx</span>=<span class="string">&quot;9&quot;</span> <span class="attr">cy</span>=<span class="string">&quot;21&quot;</span> <span class="attr">r</span>=<span class="string">&quot;1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">circle</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">circle</span> <span class="attr">cx</span>=<span class="string">&quot;20&quot;</span> <span class="attr">cy</span>=<span class="string">&quot;21&quot;</span> <span class="attr">r</span>=<span class="string">&quot;1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">circle</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">                    Products</span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;nav-link&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/emps&#125;&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;24&quot;</span> <span class="attr">height</span>=<span class="string">&quot;24&quot;</span> <span class="attr">viewBox</span>=<span class="string">&quot;0 0 24 24&quot;</span></span></span><br><span class="line"><span class="tag">                         <span class="attr">fill</span>=<span class="string">&quot;none&quot;</span> <span class="attr">stroke</span>=<span class="string">&quot;currentColor&quot;</span> <span class="attr">stroke-width</span>=<span class="string">&quot;2&quot;</span> <span class="attr">stroke-linecap</span>=<span class="string">&quot;round&quot;</span></span></span><br><span class="line"><span class="tag">                         <span class="attr">stroke-linejoin</span>=<span class="string">&quot;round&quot;</span> <span class="attr">class</span>=<span class="string">&quot;feather feather-users&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">circle</span> <span class="attr">cx</span>=<span class="string">&quot;9&quot;</span> <span class="attr">cy</span>=<span class="string">&quot;7&quot;</span> <span class="attr">r</span>=<span class="string">&quot;4&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">circle</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M23 21v-2a4 4 0 0 0-3-3.87&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M16 3.13a4 4 0 0 1 0 7.75&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">                    Customers</span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;nav-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://getbootstrap.com/docs/4.0/examples/dashboard/#&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;24&quot;</span> <span class="attr">height</span>=<span class="string">&quot;24&quot;</span> <span class="attr">viewBox</span>=<span class="string">&quot;0 0 24 24&quot;</span></span></span><br><span class="line"><span class="tag">                         <span class="attr">fill</span>=<span class="string">&quot;none&quot;</span> <span class="attr">stroke</span>=<span class="string">&quot;currentColor&quot;</span> <span class="attr">stroke-width</span>=<span class="string">&quot;2&quot;</span> <span class="attr">stroke-linecap</span>=<span class="string">&quot;round&quot;</span></span></span><br><span class="line"><span class="tag">                         <span class="attr">stroke-linejoin</span>=<span class="string">&quot;round&quot;</span> <span class="attr">class</span>=<span class="string">&quot;feather feather-bar-chart-2&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">line</span> <span class="attr">x1</span>=<span class="string">&quot;18&quot;</span> <span class="attr">y1</span>=<span class="string">&quot;20&quot;</span> <span class="attr">x2</span>=<span class="string">&quot;18&quot;</span> <span class="attr">y2</span>=<span class="string">&quot;10&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">line</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">line</span> <span class="attr">x1</span>=<span class="string">&quot;12&quot;</span> <span class="attr">y1</span>=<span class="string">&quot;20&quot;</span> <span class="attr">x2</span>=<span class="string">&quot;12&quot;</span> <span class="attr">y2</span>=<span class="string">&quot;4&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">line</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">line</span> <span class="attr">x1</span>=<span class="string">&quot;6&quot;</span> <span class="attr">y1</span>=<span class="string">&quot;20&quot;</span> <span class="attr">x2</span>=<span class="string">&quot;6&quot;</span> <span class="attr">y2</span>=<span class="string">&quot;14&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">line</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">                    Reports</span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;nav-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://getbootstrap.com/docs/4.0/examples/dashboard/#&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;24&quot;</span> <span class="attr">height</span>=<span class="string">&quot;24&quot;</span> <span class="attr">viewBox</span>=<span class="string">&quot;0 0 24 24&quot;</span></span></span><br><span class="line"><span class="tag">                         <span class="attr">fill</span>=<span class="string">&quot;none&quot;</span> <span class="attr">stroke</span>=<span class="string">&quot;currentColor&quot;</span> <span class="attr">stroke-width</span>=<span class="string">&quot;2&quot;</span> <span class="attr">stroke-linecap</span>=<span class="string">&quot;round&quot;</span></span></span><br><span class="line"><span class="tag">                         <span class="attr">stroke-linejoin</span>=<span class="string">&quot;round&quot;</span> <span class="attr">class</span>=<span class="string">&quot;feather feather-layers&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">polygon</span> <span class="attr">points</span>=<span class="string">&quot;12 2 2 7 12 12 22 7 12 2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">polygon</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">polyline</span> <span class="attr">points</span>=<span class="string">&quot;2 17 12 22 22 17&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">polyline</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">polyline</span> <span class="attr">points</span>=<span class="string">&quot;2 12 12 17 22 12&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">polyline</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">                    Integrations</span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">h6</span> <span class="attr">class</span>=<span class="string">&quot;sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>Saved reports<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;d-flex align-items-center text-muted&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">href</span>=<span class="string">&quot;http://getbootstrap.com/docs/4.0/examples/dashboard/#&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;24&quot;</span> <span class="attr">height</span>=<span class="string">&quot;24&quot;</span> <span class="attr">viewBox</span>=<span class="string">&quot;0 0 24 24&quot;</span> <span class="attr">fill</span>=<span class="string">&quot;none&quot;</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">stroke</span>=<span class="string">&quot;currentColor&quot;</span> <span class="attr">stroke-width</span>=<span class="string">&quot;2&quot;</span> <span class="attr">stroke-linecap</span>=<span class="string">&quot;round&quot;</span> <span class="attr">stroke-linejoin</span>=<span class="string">&quot;round&quot;</span></span></span><br><span class="line"><span class="tag">                     <span class="attr">class</span>=<span class="string">&quot;feather feather-plus-circle&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">circle</span> <span class="attr">cx</span>=<span class="string">&quot;12&quot;</span> <span class="attr">cy</span>=<span class="string">&quot;12&quot;</span> <span class="attr">r</span>=<span class="string">&quot;10&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">circle</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">line</span> <span class="attr">x1</span>=<span class="string">&quot;12&quot;</span> <span class="attr">y1</span>=<span class="string">&quot;8&quot;</span> <span class="attr">x2</span>=<span class="string">&quot;12&quot;</span> <span class="attr">y2</span>=<span class="string">&quot;16&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">line</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">line</span> <span class="attr">x1</span>=<span class="string">&quot;8&quot;</span> <span class="attr">y1</span>=<span class="string">&quot;12&quot;</span> <span class="attr">x2</span>=<span class="string">&quot;16&quot;</span> <span class="attr">y2</span>=<span class="string">&quot;12&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">line</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">h6</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;nav flex-column mb-2&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;nav-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://getbootstrap.com/docs/4.0/examples/dashboard/#&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;24&quot;</span> <span class="attr">height</span>=<span class="string">&quot;24&quot;</span> <span class="attr">viewBox</span>=<span class="string">&quot;0 0 24 24&quot;</span></span></span><br><span class="line"><span class="tag">                         <span class="attr">fill</span>=<span class="string">&quot;none&quot;</span> <span class="attr">stroke</span>=<span class="string">&quot;currentColor&quot;</span> <span class="attr">stroke-width</span>=<span class="string">&quot;2&quot;</span> <span class="attr">stroke-linecap</span>=<span class="string">&quot;round&quot;</span></span></span><br><span class="line"><span class="tag">                         <span class="attr">stroke-linejoin</span>=<span class="string">&quot;round&quot;</span> <span class="attr">class</span>=<span class="string">&quot;feather feather-file-text&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">polyline</span> <span class="attr">points</span>=<span class="string">&quot;14 2 14 8 20 8&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">polyline</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">line</span> <span class="attr">x1</span>=<span class="string">&quot;16&quot;</span> <span class="attr">y1</span>=<span class="string">&quot;13&quot;</span> <span class="attr">x2</span>=<span class="string">&quot;8&quot;</span> <span class="attr">y2</span>=<span class="string">&quot;13&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">line</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">line</span> <span class="attr">x1</span>=<span class="string">&quot;16&quot;</span> <span class="attr">y1</span>=<span class="string">&quot;17&quot;</span> <span class="attr">x2</span>=<span class="string">&quot;8&quot;</span> <span class="attr">y2</span>=<span class="string">&quot;17&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">line</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">polyline</span> <span class="attr">points</span>=<span class="string">&quot;10 9 9 9 8 9&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">polyline</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">                    Current month</span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;nav-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://getbootstrap.com/docs/4.0/examples/dashboard/#&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;24&quot;</span> <span class="attr">height</span>=<span class="string">&quot;24&quot;</span> <span class="attr">viewBox</span>=<span class="string">&quot;0 0 24 24&quot;</span></span></span><br><span class="line"><span class="tag">                         <span class="attr">fill</span>=<span class="string">&quot;none&quot;</span> <span class="attr">stroke</span>=<span class="string">&quot;currentColor&quot;</span> <span class="attr">stroke-width</span>=<span class="string">&quot;2&quot;</span> <span class="attr">stroke-linecap</span>=<span class="string">&quot;round&quot;</span></span></span><br><span class="line"><span class="tag">                         <span class="attr">stroke-linejoin</span>=<span class="string">&quot;round&quot;</span> <span class="attr">class</span>=<span class="string">&quot;feather feather-file-text&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">polyline</span> <span class="attr">points</span>=<span class="string">&quot;14 2 14 8 20 8&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">polyline</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">line</span> <span class="attr">x1</span>=<span class="string">&quot;16&quot;</span> <span class="attr">y1</span>=<span class="string">&quot;13&quot;</span> <span class="attr">x2</span>=<span class="string">&quot;8&quot;</span> <span class="attr">y2</span>=<span class="string">&quot;13&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">line</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">line</span> <span class="attr">x1</span>=<span class="string">&quot;16&quot;</span> <span class="attr">y1</span>=<span class="string">&quot;17&quot;</span> <span class="attr">x2</span>=<span class="string">&quot;8&quot;</span> <span class="attr">y2</span>=<span class="string">&quot;17&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">line</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">polyline</span> <span class="attr">points</span>=<span class="string">&quot;10 9 9 9 8 9&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">polyline</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">                    Last quarter</span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;nav-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://getbootstrap.com/docs/4.0/examples/dashboard/#&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;24&quot;</span> <span class="attr">height</span>=<span class="string">&quot;24&quot;</span> <span class="attr">viewBox</span>=<span class="string">&quot;0 0 24 24&quot;</span></span></span><br><span class="line"><span class="tag">                         <span class="attr">fill</span>=<span class="string">&quot;none&quot;</span> <span class="attr">stroke</span>=<span class="string">&quot;currentColor&quot;</span> <span class="attr">stroke-width</span>=<span class="string">&quot;2&quot;</span> <span class="attr">stroke-linecap</span>=<span class="string">&quot;round&quot;</span></span></span><br><span class="line"><span class="tag">                         <span class="attr">stroke-linejoin</span>=<span class="string">&quot;round&quot;</span> <span class="attr">class</span>=<span class="string">&quot;feather feather-file-text&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">polyline</span> <span class="attr">points</span>=<span class="string">&quot;14 2 14 8 20 8&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">polyline</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">line</span> <span class="attr">x1</span>=<span class="string">&quot;16&quot;</span> <span class="attr">y1</span>=<span class="string">&quot;13&quot;</span> <span class="attr">x2</span>=<span class="string">&quot;8&quot;</span> <span class="attr">y2</span>=<span class="string">&quot;13&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">line</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">line</span> <span class="attr">x1</span>=<span class="string">&quot;16&quot;</span> <span class="attr">y1</span>=<span class="string">&quot;17&quot;</span> <span class="attr">x2</span>=<span class="string">&quot;8&quot;</span> <span class="attr">y2</span>=<span class="string">&quot;17&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">line</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">polyline</span> <span class="attr">points</span>=<span class="string">&quot;10 9 9 9 8 9&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">polyline</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">                    Social engagement</span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;nav-item&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;nav-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://getbootstrap.com/docs/4.0/examples/dashboard/#&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;24&quot;</span> <span class="attr">height</span>=<span class="string">&quot;24&quot;</span> <span class="attr">viewBox</span>=<span class="string">&quot;0 0 24 24&quot;</span></span></span><br><span class="line"><span class="tag">                         <span class="attr">fill</span>=<span class="string">&quot;none&quot;</span> <span class="attr">stroke</span>=<span class="string">&quot;currentColor&quot;</span> <span class="attr">stroke-width</span>=<span class="string">&quot;2&quot;</span> <span class="attr">stroke-linecap</span>=<span class="string">&quot;round&quot;</span></span></span><br><span class="line"><span class="tag">                         <span class="attr">stroke-linejoin</span>=<span class="string">&quot;round&quot;</span> <span class="attr">class</span>=<span class="string">&quot;feather feather-file-text&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">path</span> <span class="attr">d</span>=<span class="string">&quot;M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">polyline</span> <span class="attr">points</span>=<span class="string">&quot;14 2 14 8 20 8&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">polyline</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">line</span> <span class="attr">x1</span>=<span class="string">&quot;16&quot;</span> <span class="attr">y1</span>=<span class="string">&quot;13&quot;</span> <span class="attr">x2</span>=<span class="string">&quot;8&quot;</span> <span class="attr">y2</span>=<span class="string">&quot;13&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">line</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">line</span> <span class="attr">x1</span>=<span class="string">&quot;16&quot;</span> <span class="attr">y1</span>=<span class="string">&quot;17&quot;</span> <span class="attr">x2</span>=<span class="string">&quot;8&quot;</span> <span class="attr">y2</span>=<span class="string">&quot;17&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">line</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">polyline</span> <span class="attr">points</span>=<span class="string">&quot;10 9 9 9 8 9&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">polyline</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">                    Year-end sale</span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ç„¶ååˆ é™¤dashboard.htmlå’Œlist.htmlä¸­é¡¶éƒ¨å¯¼èˆªæ å’Œä¾§è¾¹æ çš„ä»£ç </p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689150578276-0d3dc994-3e71-4662-ace5-3aec07c9ee8f.png" alt="img"></p>
<p>æˆ‘ä»¬å†æ¬¡é‡å¯ä¸»ç¨‹åºæµ‹è¯•ä¸€ä¸‹ï¼Œç™»é™†æˆåŠŸåï¼Œå¯ä»¥çœ‹åˆ°å·²ç»æ²¡æœ‰äº†é¡¶éƒ¨å¯¼èˆªæ å’Œä¾§è¾¹æ </p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689150662162-228c5b74-2dbf-48ac-8bfc-a4e7a0b89c30.png" alt="img"></p>
<p>è¿™æ˜¯å› ä¸ºæˆ‘ä»¬åˆ é™¤äº†å…¬å…±éƒ¨åˆ†ï¼Œè¿˜æ²¡æœ‰å¼•å…¥ï¼Œæˆ‘ä»¬åˆ†åˆ«åœ¨dashboard.htmlå’Œlist.htmlåˆ é™¤çš„éƒ¨åˆ†æ’å…¥æå–å‡ºæ¥çš„å…¬å…±éƒ¨åˆ†topbarå’Œsidebar</p>
<!--é¡¶éƒ¨å¯¼èˆªæ -->

<div th:replace="~{commons/commons::topbar}" }></div>

<!--ä¾§è¾¹æ -->

<div th:replace="~{commons/commons::siderbar}"></div>

<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689150749891-8234aef7-16df-4365-80f2-aa1d417ca92f.png" alt="img"></p>
<p>å†æ¬¡é‡å¯ä¸»ç¨‹åºè¿›è¡Œæµ‹è¯•ï¼Œç™»é™†æˆåŠŸåï¼ŒæˆåŠŸçœ‹åˆ°ä¾§è¾¹æ å’Œé¡¶éƒ¨æ ï¼Œä»£è¡¨æˆ‘ä»¬æ’å…¥æˆåŠŸ</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689150868995-439e6ac4-80a4-442f-b0c1-dbdd1b34d902.png" alt="img"></p>
<h3 id="3-ç‚¹å‡»é«˜äº®å¤„ç†"><a href="#3-ç‚¹å‡»é«˜äº®å¤„ç†" class="headerlink" title="3. ç‚¹å‡»é«˜äº®å¤„ç†"></a>3. ç‚¹å‡»é«˜äº®å¤„ç†</h3><p>åœ¨commons.htmlï¼Œé¡µé¢ä¸­ï¼Œä½¿é«˜äº®çš„ä»£ç æ˜¯class&#x3D;â€nav-link activeâ€å±æ€§</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689151615000-8a9fb58b-f3cb-4381-8660-908fd989043a.png" alt="img"></p>
<p>æˆ‘ä»¬å¯ä»¥ä¼ é€’å‚æ•°åˆ¤æ–­ç‚¹å‡»äº†å“ªä¸ªæ ‡ç­¾å®ç°ç›¸åº”çš„é«˜äº®</p>
<p>é¦–å…ˆåœ¨dashboard.htmlçš„ä¾§è¾¹æ æ ‡ç­¾ä¼ é€’å‚æ•°activeä¸ºdashboard.html</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689151272979-9f51ee85-bf84-4bfe-8833-4d81938c3a55.png" alt="img"></p>
<!--ä¾§è¾¹æ -->

<div th:replace="~{commons/commons::siderbar(active='dashboard.html')}"></div>

<p>åŒæ ·åœ¨list.htmlçš„ä¾§è¾¹æ æ ‡ç­¾ä¼ é€’å‚æ•°activeä¸ºlist.html</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689151701338-8bd61d83-0de5-4bc4-8a7f-7c204b1be4c3.png" alt="img"></p>
<!--ä¾§è¾¹æ -->

<div th:replace="~{commons/commons::siderbar(active='list.html')}"></div>

<p>ç„¶åæˆ‘ä»¬åœ¨å…¬å…±é¡µé¢commons.htmlç›¸åº”æ ‡ç­¾éƒ¨åˆ†åˆ©ç”¨<a href="https://so.csdn.net/so/search?q=thymeleaf&spm=1001.2101.3001.7020">thymeleaf</a>æ¥æ”¶å‚æ•°activeï¼Œåˆ©ç”¨ä¸‰å…ƒè¿ç®—ç¬¦åˆ¤æ–­å†³å®šæ˜¯å¦é«˜äº®</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689169960337-b174f391-b61f-4c2e-b6c0-e00f71cee921.png" alt="img"></p>
<p>å†æ¬¡é‡å¯ä¸»ç¨‹åºæµ‹è¯•ï¼Œç™»å½•æˆåŠŸåï¼Œé¦–å…ˆDashboardé«˜äº®</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689170037107-d9c941cc-19a4-4df8-8df0-ee54012adf74.png" alt="img"></p>
<p>å†ç‚¹å‡»Customersï¼ŒCustomersé«˜äº®ï¼ŒæˆåŠŸ</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689170054420-6cdea688-ef78-4380-bde7-5d6cf64871dd.png" alt="img"></p>
<h3 id="4-æ˜¾ç¤ºå‘˜å·¥ä¿¡æ¯"><a href="#4-æ˜¾ç¤ºå‘˜å·¥ä¿¡æ¯" class="headerlink" title="4. æ˜¾ç¤ºå‘˜å·¥ä¿¡æ¯"></a>4. æ˜¾ç¤ºå‘˜å·¥ä¿¡æ¯</h3><p>ä¿®æ”¹list.htmlé¡µé¢ï¼Œæ˜¾ç¤ºæˆ‘ä»¬è‡ªå·±çš„æ•°æ®å€¼</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689495820128-5d5620ee-a42b-4117-932f-9d686a25c147.png" alt="img"></p>
<p>ä¿®æ”¹å®Œæˆåï¼Œé‡å¯ä¸»ç¨‹åºï¼Œç™»å½•å®ŒæˆåæŸ¥çœ‹æ‰€æœ‰å‘˜å·¥ä¿¡æ¯ï¼ŒæˆåŠŸæ˜¾ç¤º</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689205403955-fe99bcf3-2241-47a1-9c6c-10accef146fb.png" alt="img"></p>
<p>æ¥ä¸‹æ¥ä¿®æ”¹ä¸€ä¸‹æ€§åˆ«çš„æ˜¾ç¤ºå’Œdateçš„æ˜¾ç¤ºï¼Œå¹¶æ·»åŠ ç¼–è¾‘å’Œåˆ é™¤ä¸¤ä¸ªæ ‡ç­¾ï¼Œä¸ºåç»­åšå‡†å¤‡</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>id<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>lastName<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>email<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>gender<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>department<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>birth<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>æ“ä½œ<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span> <span class="attr">th:each</span>=<span class="string">&quot;emp:$&#123;emps&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;emp.getId()&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;emp.getLastName()&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;emp.getEmail()&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;emp.getGender()==0?&#x27;å¥³&#x27;:&#x27;ç”·&#x27;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;emp.getDepartment().getDepartmentName()&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;#dates.format(emp.getBirth(),&#x27;yyyy-MM-dd HH:mm:ss&#x27;)&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-sm btn-primary&quot;</span>&gt;</span>ç¼–è¾‘<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-sm btn-danger&quot;</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å†æ¬¡é‡å¯ä¸»ç¨‹åºæµ‹è¯•ï¼ŒæˆåŠŸ</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689148093225-20e6d4a4-f0d2-4210-b464-f2be5ebf36f3.png" alt="img"></p>
<h2 id="ï¼ˆä¸ƒï¼‰å¢åŠ å‘˜å·¥å®ç°â€”â€”å¢"><a href="#ï¼ˆä¸ƒï¼‰å¢åŠ å‘˜å·¥å®ç°â€”â€”å¢" class="headerlink" title="ï¼ˆä¸ƒï¼‰å¢åŠ å‘˜å·¥å®ç°â€”â€”å¢"></a>ï¼ˆä¸ƒï¼‰å¢åŠ å‘˜å·¥å®ç°â€”â€”å¢</h2><h3 id="1-listé¡µé¢å¢åŠ æ·»åŠ å‘˜å·¥æŒ‰é’®"><a href="#1-listé¡µé¢å¢åŠ æ·»åŠ å‘˜å·¥æŒ‰é’®" class="headerlink" title="1. listé¡µé¢å¢åŠ æ·»åŠ å‘˜å·¥æŒ‰é’®"></a>1. listé¡µé¢å¢åŠ æ·»åŠ å‘˜å·¥æŒ‰é’®</h3><p>é¦–å…ˆåœ¨list.htmlé¡µé¢å¢æ·»ä¸€ä¸ªå¢åŠ å‘˜å·¥æŒ‰é’®ï¼Œç‚¹å‡»è¯¥æŒ‰é’®æ—¶å‘èµ·ä¸€ä¸ªè¯·æ±‚&#x2F;add</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689148139138-712d2614-61be-428c-a31d-de8b344625cf.png" alt="img"></p>
<h2><a class="btn btn-sm btn-success" th:href="@{/add}">æ·»åŠ å‘˜å·¥</a></h2>

<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689148155335-710161c2-a755-478a-b1c7-14ac9a8e6200.png" alt="img"></p>
<p>ç„¶åç¼–å†™å¯¹åº”çš„controllerï¼Œå¤„ç†ç‚¹å‡»æ·»åŠ å‘˜å·¥çš„è¯·æ±‚</p>
<p>è¿™é‡Œé€šè¿‡getæ–¹å¼æäº¤è¯·æ±‚ï¼Œåœ¨EmployeeControllerä¸­æ·»åŠ ä¸€ä¸ªæ–¹æ³•addç”¨æ¥å¤„ç†listé¡µé¢ç‚¹å‡»æäº¤æŒ‰é’®çš„æ“ä½œï¼Œè¿”å›åˆ°add.htmlæ·»åŠ å‘˜å·¥é¡µé¢ï¼Œæˆ‘ä»¬å³å°†åˆ›å»º</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/add&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">add</span><span class="params">(Model model)</span> &#123;</span><br><span class="line">        <span class="comment">//æŸ¥å‡ºæ‰€æœ‰çš„éƒ¨é—¨ä¿¡æ¯,æ·»åŠ åˆ°departmentsä¸­,ç”¨äºå‰ç«¯æ¥æ”¶</span></span><br><span class="line">        Collection&lt;Department&gt; departments = DepartmentDao.getDepartments();</span><br><span class="line">        model.addAttribute(<span class="string">&quot;departments&quot;</span>,departments);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;emp/add&quot;</span>;<span class="comment">//è¿”å›åˆ°æ·»åŠ å‘˜å·¥é¡µé¢</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-åˆ›å»ºæ·»åŠ å‘˜å·¥é¡µé¢add"><a href="#2-åˆ›å»ºæ·»åŠ å‘˜å·¥é¡µé¢add" class="headerlink" title="2. åˆ›å»ºæ·»åŠ å‘˜å·¥é¡µé¢add"></a>2. åˆ›å»ºæ·»åŠ å‘˜å·¥é¡µé¢add</h3><p>åœ¨templates&#x2F;empä¸‹æ–°å»ºä¸€ä¸ªadd.html</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689207277126-7f745f12-4e9d-48c8-813a-7f8a085bbaa9.png" alt="img"></p>
<p>æˆ‘ä»¬å¤åˆ¶list.htmlä¸­çš„å†…å®¹ï¼Œä¿®æ”¹å…¶ä¸­è¡¨æ ¼ä¸ºï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>LastName<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;lastName&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;lastname:zsr&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>Email<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;email:xxxxx@qq.com&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>Gender<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-check form-check-inline&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;form-check-input&quot;</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;form-check-label&quot;</span>&gt;</span>ç”·<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-check form-check-inline&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">class</span>=<span class="string">&quot;form-check-input&quot;</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;form-check-label&quot;</span>&gt;</span>å¥³<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>department<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ³¨æ„è¿™é‡Œçš„nameæ˜¯department.idï¼Œå› ä¸ºä¼ å…¥çš„å‚æ•°ä¸ºid--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">select</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">name</span>=<span class="string">&quot;department.id&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">th:each</span>=<span class="string">&quot;department:$&#123;departments&#125;&quot;</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;department.getDepartmentName()&#125;&quot;</span> <span class="attr">th:value</span>=<span class="string">&quot;$&#123;department.getId()&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span>Birth<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--springbooté»˜è®¤çš„æ—¥æœŸæ ¼å¼ä¸ºyy/MM/dd--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;birth&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;birth:yyyy/MM/dd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>æ·»åŠ <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬é‡å¯ä¸»ç¨‹åºçœ‹çœ‹</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689207734788-b0a3159e-faaf-4955-a562-bf839b81a668.png" alt="img"></p>
<p>ç‚¹å‡»æ·»åŠ å‘˜å·¥ï¼ŒæˆåŠŸè·³è½¬åˆ°add.htmlé¡µé¢</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689207746205-bdbfee04-810c-4d47-84e1-daa94ea47797.png" alt="img"></p>
<p>ä¸‹æ‹‰æ¡†ä¸­çš„å†…å®¹ä¸åº”è¯¥æ˜¯1ã€2ã€3ã€4ã€5ï¼›åº”è¯¥æ˜¯æ‰€æœ‰çš„éƒ¨é—¨åï¼Œæˆ‘ä»¬éå†å¾—åˆ°</p>
<!--å…¶ä¸­th:valueç”¨æ¥è¡¨ç¤ºéƒ¨é—¨çš„id,æˆ‘ä»¬å®é™…ä¼ å…¥çš„å€¼ä¸ºid-->

<option th:each="department:${departments}" th:text="${department.getDepartmentName()}" th:value="${department.getId()}"></option>

<p>é‡å¯æµ‹è¯•ï¼ŒæˆåŠŸæ˜¾ç¤ºæ‰€æœ‰éƒ¨é—¨</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689148258109-1a8f0fd0-5ff3-412e-9af0-6542196c29cc.png" alt="img"></p>
<p>åˆ°æ­¤ï¼Œæ·»åŠ å‘˜å·¥é¡µé¢ç¼–å†™å®Œæˆ</p>
<h3 id="3-addé¡µé¢æ·»åŠ å‘˜å·¥è¯·æ±‚"><a href="#3-addé¡µé¢æ·»åŠ å‘˜å·¥è¯·æ±‚" class="headerlink" title="3. addé¡µé¢æ·»åŠ å‘˜å·¥è¯·æ±‚"></a>3. addé¡µé¢æ·»åŠ å‘˜å·¥è¯·æ±‚</h3><p>åœ¨add.htmlé¡µé¢ï¼Œå½“æˆ‘ä»¬å¡«å†™å®Œä¿¡æ¯ï¼Œç‚¹å‡»æ·»åŠ æŒ‰é’®ï¼Œåº”è¯¥å®Œæˆæ·»åŠ è¿”å›åˆ°listé¡µé¢ï¼Œå±•ç¤ºæ–°çš„å‘˜å·¥ä¿¡æ¯ï¼›å› æ­¤åœ¨add.htmlç‚¹å‡»æ·»åŠ æŒ‰é’®çš„ä¸€ç¬é—´ï¼Œæˆ‘ä»¬åŒæ ·å‘èµ·ä¸€ä¸ªè¯·æ±‚&#x2F;addï¼Œä¸ä¸Šè¿°æäº¤æŒ‰é’®å‘å‡ºçš„è¯·æ±‚è·¯å¾„ä¸€æ ·ï¼Œä½†è¿™é‡Œå‘å‡ºçš„æ˜¯postè¯·æ±‚</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689148630445-abe2f211-7336-4c9c-8128-f19803dfc3fd.png" alt="img"></p>
<p>ç„¶åç¼–å†™å¯¹åº”çš„controllerï¼ŒåŒæ ·åœ¨EmployeeControllerä¸­æ·»åŠ ä¸€ä¸ªæ–¹æ³•addEmpç”¨æ¥å¤„ç†ç‚¹å‡»æ·»åŠ æŒ‰é’®çš„æ“ä½œ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/add&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">addEmp</span><span class="params">(Employee employee)</span> &#123;</span><br><span class="line">       System.out.println(employee);</span><br><span class="line">       employeeDao.save(employee);<span class="comment">//æ·»åŠ ä¸€ä¸ªå‘˜å·¥</span></span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;redirect:/emps&quot;</span>;<span class="comment">//é‡å®šå‘åˆ°/emps,åˆ·æ–°åˆ—è¡¨,è¿”å›åˆ°listé¡µé¢</span></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬é‡å¯ä¸»ç¨‹åºï¼Œè¿›è¡Œæµ‹è¯•ï¼Œè¿›å…¥æ·»åŠ é¡µé¢ï¼Œå¡«å†™ç›¸å…³ä¿¡æ¯ï¼Œæ³¨æ„æ—¥æœŸæ ¼å¼é»˜è®¤ä¸ºyyyy&#x2F;MM&#x2F;dd</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689208570062-41d5fbb1-2ecb-419e-9022-a0442b51a977.png" alt="img"></p>
<p>ç„¶åç‚¹å‡»æ·»åŠ æŒ‰é’®ï¼ŒæˆåŠŸå®ç°æ·»åŠ å‘˜å·¥</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689227966399-4326c44e-b71d-4a21-86a5-a5f5be51581a.png" alt="img"></p>
<h2 id="ï¼ˆå…«ï¼‰ä¿®æ”¹å‘˜å·¥ä¿¡æ¯â€”â€”æ”¹"><a href="#ï¼ˆå…«ï¼‰ä¿®æ”¹å‘˜å·¥ä¿¡æ¯â€”â€”æ”¹" class="headerlink" title="ï¼ˆå…«ï¼‰ä¿®æ”¹å‘˜å·¥ä¿¡æ¯â€”â€”æ”¹"></a>ï¼ˆå…«ï¼‰ä¿®æ”¹å‘˜å·¥ä¿¡æ¯â€”â€”æ”¹</h2><h3 id="1-listé¡µé¢ç¼–è¾‘æŒ‰é’®å¢æ·»è¯·æ±‚"><a href="#1-listé¡µé¢ç¼–è¾‘æŒ‰é’®å¢æ·»è¯·æ±‚" class="headerlink" title="1. listé¡µé¢ç¼–è¾‘æŒ‰é’®å¢æ·»è¯·æ±‚"></a>1. listé¡µé¢ç¼–è¾‘æŒ‰é’®å¢æ·»è¯·æ±‚</h3><p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689216662204-53ef3f13-ca14-4324-9859-2811a3890451.png" alt="img"></p>
<p>å½“æˆ‘ä»¬ç‚¹å‡»ç¼–è¾‘æ ‡ç­¾æ—¶ï¼Œåº”è¯¥è·³è½¬åˆ°ç¼–è¾‘é¡µé¢edit.htmlï¼ˆæˆ‘ä»¬å³å°†åˆ›å»ºï¼‰è¿›è¡Œç¼–è¾‘</p>
<p>å› æ­¤é¦–å…ˆå°†list.htmlé¡µé¢çš„ç¼–è¾‘æ ‡ç­¾æ·»åŠ hrefå±æ€§ï¼Œå®ç°ç‚¹å‡»è¯·æ±‚&#x2F;edit&#x2F;idå·åˆ°ç¼–è¾‘é¡µé¢</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-sm btn-primary&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/edit/&#123;id&#125;(id=$&#123;emp.getId()&#125;)&#125;&quot;</span>&gt;</span>ç¼–è¾‘<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689216813658-06911620-a207-4f8c-b758-1e7feef0f311.png" alt="img"></p>
<p>ç„¶åç¼–å†™å¯¹åº”çš„controllerï¼Œåœ¨EmployeeControllerä¸­æ·»åŠ ä¸€ä¸ªæ–¹æ³•editç”¨æ¥å¤„ç†listé¡µé¢ç‚¹å‡»ç¼–è¾‘æŒ‰é’®çš„æ“ä½œï¼Œè¿”å›åˆ°edit.htmlç¼–è¾‘å‘˜å·¥é¡µé¢ï¼Œæˆ‘ä»¬å³å°†åˆ›å»º</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//restfulé£æ ¼æ¥æ”¶å‚æ•°</span></span><br><span class="line">  <span class="meta">@RequestMapping(&quot;/edit/&#123;id&#125;&quot;)</span></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">edit</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> <span class="type">int</span> id, Model model)</span> &#123;</span><br><span class="line">      <span class="comment">//æŸ¥è¯¢æŒ‡å®šidçš„å‘˜å·¥,æ·»åŠ åˆ°empByIDä¸­,ç”¨äºå‰ç«¯æ¥æ”¶</span></span><br><span class="line">      <span class="type">Employee</span> <span class="variable">employeeByID</span> <span class="operator">=</span> employeeDao.getEmployeeById(id);</span><br><span class="line">      model.addAttribute(<span class="string">&quot;empByID&quot;</span>, employeeByID);</span><br><span class="line">      <span class="comment">//æŸ¥å‡ºæ‰€æœ‰çš„éƒ¨é—¨ä¿¡æ¯,æ·»åŠ åˆ°departmentsä¸­,ç”¨äºå‰ç«¯æ¥æ”¶</span></span><br><span class="line">      Collection&lt;Department&gt; departments = DepartmentDao.getDepartments();</span><br><span class="line">      model.addAttribute(<span class="string">&quot;departments&quot;</span>, departments);</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&quot;/emp/edit&quot;</span>;<span class="comment">//è¿”å›åˆ°ç¼–è¾‘å‘˜å·¥é¡µé¢</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-åˆ›å»ºç¼–è¾‘å‘˜å·¥é¡µé¢edit"><a href="#2-åˆ›å»ºç¼–è¾‘å‘˜å·¥é¡µé¢edit" class="headerlink" title="2. åˆ›å»ºç¼–è¾‘å‘˜å·¥é¡µé¢edit"></a>2. åˆ›å»ºç¼–è¾‘å‘˜å·¥é¡µé¢edit</h3><p>åœ¨templates&#x2F;empä¸‹æ–°å»ºä¸€ä¸ªedit.html</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689226779137-ef7994d0-3cbc-4d81-80e7-497605b35e08.png" alt="img"></p>
<p>å¤åˆ¶add.htmlä¸­çš„ä»£ç ï¼Œç¨ä½œä¿®æ”¹</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">main</span> <span class="attr">role</span>=<span class="string">&quot;main&quot;</span> <span class="attr">class</span>=<span class="string">&quot;col-md-9 ml-sm-auto col-lg-10 pt-3 px-4&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/edit&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">th:value</span>=<span class="string">&quot;$&#123;empByID.getId()&#125;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span>&gt;</span>LastName<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">th:value</span>=<span class="string">&quot;$&#123;empByID.getLastName()&#125;&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;lastName&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span></span></span><br><span class="line"><span class="tag">                           <span class="attr">placeholder</span>=<span class="string">&quot;lastname:zsr&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span>&gt;</span>Email<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">th:value</span>=<span class="string">&quot;$&#123;empByID.getEmail()&#125;&quot;</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span></span></span><br><span class="line"><span class="tag">                           <span class="attr">placeholder</span>=<span class="string">&quot;email:xxxxx@qq.com&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span>&gt;</span>Gender<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-check form-check-inline&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">th:checked</span>=<span class="string">&quot;$&#123;empByID.getGender()==1&#125;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-check-input&quot;</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span></span></span><br><span class="line"><span class="tag">                               <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;form-check-label&quot;</span>&gt;</span>ç”·<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-check form-check-inline&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">th:checked</span>=<span class="string">&quot;$&#123;empByID.getGender()==0&#125;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-check-input&quot;</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span></span></span><br><span class="line"><span class="tag">                               <span class="attr">name</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;form-check-label&quot;</span>&gt;</span>å¥³<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span>&gt;</span>department<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--æ³¨æ„è¿™é‡Œçš„nameæ˜¯department.idï¼Œå› ä¸ºä¼ å…¥çš„å‚æ•°ä¸ºid--&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">select</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">name</span>=<span class="string">&quot;department.id&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">option</span> <span class="attr">th:selected</span>=<span class="string">&quot;$&#123;department.getId()==empByID.department.getId()&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                                <span class="attr">th:each</span>=<span class="string">&quot;department:$&#123;departments&#125;&quot;</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;department.getDepartmentName()&#125;&quot;</span></span></span><br><span class="line"><span class="tag">                                <span class="attr">th:value</span>=<span class="string">&quot;$&#123;department.getId()&#125;&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">label</span>&gt;</span>Birth<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!--springbooté»˜è®¤çš„æ—¥æœŸæ ¼å¼ä¸ºyy/MM/dd--&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">th:value</span>=<span class="string">&quot;$&#123;#dates.format(empByID.getBirth(),&#x27;yyyy/MM/dd&#x27;)&#125;&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;birth&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span></span></span><br><span class="line"><span class="tag">                           <span class="attr">placeholder</span>=<span class="string">&quot;birth:yy/MM/dd&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>ä¿®æ”¹<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨ä¸»ç¨‹åºæµ‹è¯•ï¼Œç‚¹å‡»ç¼–è¾‘1å·ç”¨æˆ·</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689226908248-606a6199-73cc-441e-a23b-f4d129f3369b.png" alt="img"></p>
<p>æˆåŠŸè·³è½¬åˆ°edit.htmlï¼Œä¸”æ‰€é€‰ç”¨æˆ·ä¿¡æ¯æ­£ç¡®<img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689226858086-da1e9769-fc88-4436-adc7-31f5fb571838.png" alt="img"></p>
<p>ä½†æ˜¯æ—¥æœŸçš„æ ¼å¼ä¸å¤ªæ­£ç¡®ï¼Œæˆ‘ä»¬è§„å®šä¸€ä¸‹æ˜¾ç¤ºçš„æ—¥æœŸæ ¼å¼</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--springbooté»˜è®¤çš„æ—¥æœŸæ ¼å¼ä¸ºyy/MM/dd--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">th:value</span>=<span class="string">&quot;$&#123;#dates.format(empByID.getDate(),&#x27;yyyy/MM/dd&#x27;)&#125;&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;birth&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;birth:yy/MM/dd&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689640422545-a8af1842-dbcf-4004-9bcb-f880dc628665.png" alt="img"></p>
<p>è®¾ç½®springbootçš„é»˜è®¤æ—¶é—´æ ¼å¼</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æ—¶é—´æ—¥æœŸæ ¼å¼åŒ–</span></span><br><span class="line"><span class="attr">spring.mvc.format.date</span>=<span class="string">yyyy-MM-dd</span></span><br></pre></td></tr></table></figure>

<h3 id="3-edité¡µé¢ç¼–è¾‘å®Œæˆæäº¤è¯·æ±‚"><a href="#3-edité¡µé¢ç¼–è¾‘å®Œæˆæäº¤è¯·æ±‚" class="headerlink" title="3. edité¡µé¢ç¼–è¾‘å®Œæˆæäº¤è¯·æ±‚"></a>3. edité¡µé¢ç¼–è¾‘å®Œæˆæäº¤è¯·æ±‚</h3><p>åœ¨edit.htmlç‚¹å‡»ä¿®æ”¹æŒ‰é’®çš„ä¸€ç¬é—´ï¼Œæˆ‘ä»¬éœ€è¦è¿”å›åˆ°listé¡µé¢ï¼Œæ›´æ–°å‘˜å·¥ä¿¡æ¯ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æ·»åŠ hrefå±æ€§ï¼Œå®ç°ç‚¹å‡»æŒ‰é’®æ—¶å‘èµ·ä¸€ä¸ªè¯·æ±‚&#x2F;edit</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689227160552-1b3fa3c5-8812-4ae9-bbe1-fa5a5f843226.png" alt="img"></p>
<p>ç„¶åç¼–å†™å¯¹åº”çš„controllerï¼Œå¤„ç†ç‚¹å‡»ä¿®æ”¹æŒ‰é’®çš„è¯·æ±‚</p>
<p>åŒæ ·åœ¨EmployeeControllerä¸­æ·»åŠ ä¸€ä¸ªæ–¹æ³•EditEmpç”¨æ¥å¤„ç†edité¡µé¢ç‚¹å‡»æ·»åŠ çš„æ“ä½œ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/edit&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">EditEmp</span><span class="params">(Employee employee)</span> &#123;</span><br><span class="line">        employeeDao.save(employee);<span class="comment">//æ·»åŠ ä¸€ä¸ªå‘˜å·¥</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/emps&quot;</span>;<span class="comment">//æ·»åŠ å®Œæˆé‡å®šå‘åˆ°/emps,åˆ·æ–°åˆ—è¡¨</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶åæŒ‡å®šä¿®æ”¹äººçš„id</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span> <span class="attr">th:value</span>=<span class="string">&quot;$&#123;empByID.getId()&#125;&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689227266834-5c64dcab-17bb-4f66-aebb-c3f714985772.png" alt="img"></p>
<p>é‡å¯æµ‹è¯•ï¼ŒåŒæ ·ä¿®æ”¹1å·ç”¨æˆ·åç§°ä¸ºxiaowu</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689227331660-870be5da-61e4-4361-b10d-c20a1a0dbf46.png" alt="img"></p>
<p>ç„¶åç‚¹å‡»ä¿®æ”¹</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689227357800-5470aed6-0e41-42fe-a0ae-a64ad176bc1a.png" alt="img"></p>
<p>æˆåŠŸä¿®æ”¹å¹¶è¿”å›åˆ°list.html</p>
<h2 id="ï¼ˆä¹ï¼‰åˆ é™¤å‘˜å·¥ä¿¡æ¯â€”â€”åˆ "><a href="#ï¼ˆä¹ï¼‰åˆ é™¤å‘˜å·¥ä¿¡æ¯â€”â€”åˆ " class="headerlink" title="ï¼ˆä¹ï¼‰åˆ é™¤å‘˜å·¥ä¿¡æ¯â€”â€”åˆ "></a>ï¼ˆä¹ï¼‰åˆ é™¤å‘˜å·¥ä¿¡æ¯â€”â€”åˆ </h2><p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689227393855-da05d4f5-ef9e-484a-879f-e82c3bf0ddea.png" alt="img"></p>
<p>å½“æˆ‘ä»¬ç‚¹å‡»åˆ é™¤æ ‡ç­¾æ—¶ï¼Œåº”è¯¥å‘èµ·ä¸€ä¸ªè¯·æ±‚ï¼Œåˆ é™¤æŒ‡å®šçš„ç”¨æˆ·ï¼Œç„¶åé‡æ–°è¿”å›åˆ°listé¡µé¢æ˜¾ç¤ºå‘˜å·¥æ•°æ®</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-sm btn-success&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/delete/&#123;id&#125;(id=$&#123;emp.getId()&#125;)&#125;&quot;</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689227493764-44a44830-aa0b-4ccc-9e1c-2656fc93488b.png" alt="img"></p>
<p>ç„¶åç¼–å†™å¯¹åº”çš„controllerï¼Œå¤„ç†ç‚¹å‡»åˆ é™¤æŒ‰é’®çš„è¯·æ±‚ï¼Œåˆ é™¤æŒ‡å®šå‘˜å·¥ï¼Œé‡å®šå‘åˆ°&#x2F;empsè¯·æ±‚ï¼Œæ›´æ–°å‘˜å·¥ä¿¡æ¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/delete/&#123;id&#125;&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">delete</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Integer id)</span> &#123;</span><br><span class="line">       employeeDao.delete(id);</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;redirect:/emps&quot;</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>é‡å¯æµ‹è¯•ï¼Œç‚¹å‡»åˆ é™¤æŒ‰é’®å³å¯åˆ é™¤æŒ‡å®šå‘˜å·¥</p>
<h2 id="ï¼ˆåï¼‰404é¡µé¢å®šåˆ¶"><a href="#ï¼ˆåï¼‰404é¡µé¢å®šåˆ¶" class="headerlink" title="ï¼ˆåï¼‰404é¡µé¢å®šåˆ¶"></a>ï¼ˆåï¼‰404é¡µé¢å®šåˆ¶</h2><p>åªéœ€è¦åœ¨templatesç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªerroråŒ…ï¼Œç„¶åå°†404.htmlæ”¾å…¥å…¶ä¸­ï¼ŒæŠ¥é”™SpringBootå°±ä¼šè‡ªåŠ¨æ‰¾åˆ°è¿™ä¸ªé¡µé¢</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689227570990-bb3912a2-9fa2-461b-b895-e1eb51ff6353.png" alt="img"></p>
<p>æˆ‘ä»¬å¯ä»¥å¯åŠ¨ç¨‹åºæµ‹è¯•ï¼Œéšä¾¿è®¿é—®ä¸€ä¸ªä¸å­˜åœ¨çš„é¡µé¢</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689227597893-445e4d6f-d64c-46b9-8705-878e773d529e.png" alt="img"></p>
<p>å‡ºç°çš„404é¡µé¢å³æ˜¯æˆ‘ä»¬è‡ªå·±çš„404.html</p>
<h2 id="ï¼ˆåä¸€ï¼‰æ³¨é”€æ“ä½œ"><a href="#ï¼ˆåä¸€ï¼‰æ³¨é”€æ“ä½œ" class="headerlink" title="ï¼ˆåä¸€ï¼‰æ³¨é”€æ“ä½œ"></a>ï¼ˆåä¸€ï¼‰æ³¨é”€æ“ä½œ</h2><p>åœ¨æˆ‘ä»¬æå–å‡ºæ¥çš„å…¬å…±commonsé¡µé¢ï¼Œé¡¶éƒ¨å¯¼èˆªæ å¤„ä¸­çš„æ ‡ç­¾æ·»åŠ hrefå±æ€§ï¼Œå®ç°ç‚¹å‡»å‘èµ·è¯·æ±‚&#x2F;user&#x2F;logout</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689227689001-e134f6b7-4f69-41ad-bd58-8e9c347d8e37.png" alt="img"></p>
<p>ç„¶åç¼–å†™å¯¹åº”çš„controllerï¼Œå¤„ç†ç‚¹å‡»æ³¨é”€æ ‡ç­¾çš„è¯·æ±‚ï¼Œåœ¨LoginControllerä¸­ç¼–å†™å¯¹åº”çš„æ–¹æ³•ï¼Œæ¸…é™¤sessionï¼Œå¹¶é‡å®šå‘åˆ°é¦–é¡µ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/user/logout&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">logout</span><span class="params">(HttpSession session)</span> &#123;</span><br><span class="line">    session.invalidate();</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;redirect:/index.html&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é‡å¯æµ‹è¯•ï¼Œç™»å½•æˆåŠŸåï¼Œç‚¹å‡»Sign outå³å¯é€€å‡ºåˆ°é¦–é¡µ</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689227740204-829f5fff-0801-480d-9485-6d3d5cd711e8.png" alt="img"></p>
<p>å‘ç°å›åˆ°ç™»å½•é¡µé¢</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689227761205-61e19634-25fa-49e1-9de0-c3b15a2b9d11.png" alt="img"></p>
<h4 id="bugï¼š"><a href="#bugï¼š" class="headerlink" title="bugï¼š"></a>bugï¼š</h4><p>å½“æˆ‘ä»¬ç™»å½•è¿›å»è¿›å…¥ä¸»é¡µé¢çš„æ—¶å€™ï¼Œä¼šå‘ç°æˆ‘ä»¬çš„ä¸»é¡µçš„ç»Ÿè®¡è¡¨æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689170037107-d9c941cc-19a4-4df8-8df0-ee54012adf74.png" alt="img"></p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<p>åŸå› ï¼šé€šè¿‡æ§åˆ¶å°å‘ç°æˆ‘ä»¬æ‰¾ä¸åˆ°å¯¹åº”çš„jsæ–‡ä»¶</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689236217738-81724c8f-2aee-4edf-9afb-9b9c0eb25154.png" alt="img"></p>
<p>çº æ­£ï¼š</p>
<p>ä¿®æ”¹adshaboard.html  ç”¨tyhæ¥è·å–æˆ‘ä»¬æ ·å¼èµ„æº</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689236417709-69869415-f19a-4962-bf9a-b7351be1b0db.png" alt="img"></p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689236543397-aab06fed-4c98-419b-808d-cd65e7e2e029.png" alt="img"></p>
<p><strong>ä½†æ˜¯ç›®å‰è¿˜æœ‰è¿™é—®é¢˜ï¼ˆé—®é¢˜ä¸å¤§ï¼‰</strong></p>
<p>DevTools failed to load source map: Could not load content for <a href="http://localhost:8080/css/bootstrap.min.css.map">http://localhost:8080/css/bootstrap.min.css.map</a>: HTTP é”™è¯¯: çŠ¶æ€ä»£ç  404ï¼Œnet::ERR_HTTP_RESPONSE_CODE_FAILURE</p>
<h1 id="è‡ªå®šä¹‰starter"><a href="#è‡ªå®šä¹‰starter" class="headerlink" title="è‡ªå®šä¹‰starter"></a>è‡ªå®šä¹‰starter</h1><p><a href="https://mp.weixin.qq.com/s/2eB2uT088BvzaqRULezdsw">https://mp.weixin.qq.com/s/2eB2uT088BvzaqRULezdsw</a></p>
<h1 id="æ•´åˆJDBC"><a href="#æ•´åˆJDBC" class="headerlink" title="æ•´åˆJDBC"></a>æ•´åˆJDBC</h1><h2 id="SpringDataç®€ä»‹"><a href="#SpringDataç®€ä»‹" class="headerlink" title="SpringDataç®€ä»‹"></a>SpringDataç®€ä»‹</h2><p>å¯¹äºæ•°æ®è®¿é—®å±‚ï¼Œæ— è®ºæ˜¯ SQL(å…³ç³»å‹æ•°æ®åº“) è¿˜æ˜¯ NOSQL(éå…³ç³»å‹æ•°æ®åº“)ï¼ŒSpring Boot åº•å±‚éƒ½æ˜¯é‡‡ç”¨ Spring Data çš„æ–¹å¼è¿›è¡Œç»Ÿä¸€å¤„ç†ã€‚</p>
<p>Spring Boot åº•å±‚éƒ½æ˜¯é‡‡ç”¨ Spring Data çš„æ–¹å¼è¿›è¡Œç»Ÿä¸€å¤„ç†å„ç§æ•°æ®åº“ï¼ŒSpring Data ä¹Ÿæ˜¯ Spring ä¸­ä¸ Spring Bootã€Spring Cloud ç­‰é½åçš„çŸ¥åé¡¹ç›®ã€‚</p>
<p>Sping Data å®˜ç½‘ï¼š<a href="https://spring.io/projects/spring-data">https://spring.io/projects/spring-data</a></p>
<p>æ•°æ®åº“ç›¸å…³çš„å¯åŠ¨å™¨ ï¼šå¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š</p>
<p><a href="https://docs.spring.io/spring-boot/docs/2.2.5.RELEASE/reference/htmlsingle/#using-boot-starter">https://docs.spring.io/spring-boot/docs/2.2.5.RELEASE/reference/htmlsingle/#using-boot-starter</a></p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1689237050011-a325fdb4-15fd-4101-8c5e-363ce71c6015.png" alt="img"></p>
<h2 id="å‚æ•°"><a href="#å‚æ•°" class="headerlink" title="å‚æ•°"></a>å‚æ•°</h2><p><strong>rl****æ•°æ®åº“çš„jdbcè¿æ¥åœ°å€ã€‚ä¸€èˆ¬ä¸ºè¿æ¥oracle&#x2F;mysqlã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</strong>mysql : jdbc:mysql:&#x2F;&#x2F;ip:port&#x2F;dbname?option1&amp;option2&amp;â€¦oracle : jdbc:oracle:thin:@ip:port:oracle_sidusernameç™»å½•æ•°æ®åº“çš„ç”¨æˆ·åpasswordç™»å½•æ•°æ®åº“çš„ç”¨æˆ·å¯†ç initialSizeå¯åŠ¨ç¨‹åºæ—¶ï¼Œåœ¨è¿æ¥æ± ä¸­åˆå§‹åŒ–å¤šå°‘ä¸ªè¿æ¥10-50å·²è¶³å¤ŸmaxActiveè¿æ¥æ± ä¸­æœ€å¤šæ”¯æŒå¤šå°‘ä¸ªæ´»åŠ¨ä¼šè¯maxWaitç¨‹åºå‘è¿æ¥æ± ä¸­è¯·æ±‚è¿æ¥æ—¶,è¶…è¿‡maxWaitçš„å€¼åï¼Œè®¤ä¸ºæœ¬æ¬¡è¯·æ±‚å¤±è´¥ï¼Œå³è¿æ¥æ± 100æ²¡æœ‰å¯ç”¨è¿æ¥ï¼Œå•ä½æ¯«ç§’ï¼Œè®¾ç½®-1æ—¶è¡¨ç¤ºæ— é™ç­‰å¾…minEvictableIdleTimeMillisæ± ä¸­æŸä¸ªè¿æ¥çš„ç©ºé—²æ—¶é•¿è¾¾åˆ° N æ¯«ç§’å, è¿æ¥æ± åœ¨ä¸‹æ¬¡æ£€æŸ¥ç©ºé—²è¿æ¥æ—¶ï¼Œå°†è§è¯´æ˜éƒ¨åˆ†å›æ”¶è¯¥è¿æ¥,è¦å°äºé˜²ç«å¢™è¶…æ—¶è®¾ç½®net.netfilter.nf_conntrack_tcp_timeout_establishedçš„è®¾ç½®timeBetweenEvictionRunsMillisæ£€æŸ¥ç©ºé—²è¿æ¥çš„é¢‘ç‡ï¼Œå•ä½æ¯«ç§’, éæ­£æ•´æ•°æ—¶è¡¨ç¤ºä¸è¿›è¡Œæ£€æŸ¥keepAliveç¨‹åºæ²¡æœ‰closeè¿æ¥ä¸”ç©ºé—²æ—¶é•¿è¶…è¿‡ minEvictableIdleTimeMillis,åˆ™ä¼šæ‰§trueè¡ŒvalidationQueryæŒ‡å®šçš„SQL,ä»¥ä¿è¯è¯¥ç¨‹åºè¿æ¥ä¸ä¼šæ± killæ‰,å…¶èŒƒå›´ä¸è¶…è¿‡minIdleæŒ‡å®šçš„è¿æ¥ä¸ªæ•°ã€‚minIdleå›æ”¶ç©ºé—²è¿æ¥æ—¶ï¼Œå°†ä¿è¯è‡³å°‘æœ‰minIdleä¸ªè¿æ¥.ä¸initialSizeç›¸åŒremoveAbandonedè¦æ±‚ç¨‹åºä»æ± ä¸­getåˆ°è¿æ¥å, N ç§’åå¿…é¡»close,å¦åˆ™druid ä¼šå¼ºåˆ¶å›æ”¶è¯¥false,å½“å‘ç°ç¨‹åºæœ‰æœªè¿æ¥,ä¸ç®¡è¯¥è¿æ¥ä¸­æ˜¯æ´»åŠ¨è¿˜æ˜¯ç©ºé—², ä»¥é˜²æ­¢è¿›ç¨‹ä¸ä¼šè¿›è¡Œcloseè€Œéœ¸å è¿æ¥ã€‚æ­£å¸¸closeè¿æ¥æ—¶è®¾ç½®ä¸ºtrueremoveAbandonedTimeoutè®¾ç½®druid å¼ºåˆ¶å›æ”¶è¿æ¥çš„æ—¶é™ï¼Œå½“ç¨‹åºä»æ± ä¸­getåˆ°è¿æ¥å¼€å§‹ç®—èµ·ï¼Œè¶…è¿‡æ­¤åº”å¤§äºä¸šåŠ¡è¿è¡Œæœ€é•¿æ—¶é—´å€¼åï¼Œdruidå°†å¼ºåˆ¶å›æ”¶è¯¥è¿æ¥ï¼Œå•ä½ç§’ã€‚logAbandonedå½“druidå¼ºåˆ¶å›æ”¶è¿æ¥åï¼Œæ˜¯å¦å°†stack trace è®°å½•åˆ°æ—¥å¿—ä¸­<br> truetestWhileIdleå½“ç¨‹åºè¯·æ±‚è¿æ¥ï¼Œæ± åœ¨åˆ†é…è¿æ¥æ—¶ï¼Œæ˜¯å¦å…ˆæ£€æŸ¥è¯¥è¿æ¥æ˜¯å¦æœ‰æ•ˆã€‚(é«˜æ•ˆ)truevalidationQueryæ£€æŸ¥æ± ä¸­çš„è¿æ¥æ˜¯å¦ä»å¯ç”¨çš„ SQL è¯­å¥,druiä¼šè¿æ¥åˆ°æ•°æ®åº“æ‰§è¡Œè¯¥SQL, å¦‚æœæ­£å¸¸è¿”å›ï¼Œåˆ™è¡¨ç¤ºè¿æ¥å¯ç”¨ï¼Œå¦åˆ™è¡¨ç¤ºè¿æ¥ä¸å¯ç”¨testOnBorrowç¨‹åº <strong>ç”³è¯·</strong> è¿æ¥æ—¶,è¿›è¡Œè¿æ¥æœ‰æ•ˆæ€§æ£€æŸ¥ï¼ˆä½æ•ˆï¼Œå½±å“æ€§èƒ½ï¼‰falsetestOnReturnç¨‹åº <strong>è¿”è¿˜</strong> è¿æ¥æ—¶,è¿›è¡Œè¿æ¥æœ‰æ•ˆæ€§æ£€æŸ¥ï¼ˆä½æ•ˆï¼Œå½±å“æ€§èƒ½ï¼‰falsepoolPreparedStatementsç¼“å­˜é€šè¿‡ä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•å‘èµ·çš„SQL:truepublic PreparedStatement prepareStatement(String sql) public PreparedStatement prepareStatement(String sql,int resultSetType, int resultSetConcurrency)maxPoolPrepareStatementPerConnectionSizeæ¯ä¸ªè¿æ¥æœ€å¤šç¼“å­˜å¤šå°‘ä¸ªSQL20filtersè¿™é‡Œé…ç½®çš„æ˜¯æ’ä»¶,å¸¸ç”¨çš„æ’ä»¶æœ‰:stat,wall,slf4jç›‘æ§ç»Ÿè®¡: filter:statæ—¥å¿—ç›‘æ§: filter:log4j æˆ–è€… slf4jé˜²å¾¡SQLæ³¨å…¥: filter:wallè¿æ¥å±æ€§ã€‚æ¯”å¦‚è®¾ç½®ä¸€äº›è¿æ¥æ± ç»Ÿè®¡æ–¹é¢çš„é…ç½®ã€‚connectPropertiesè¿æ¥å±æ€§ã€‚æ¯”å¦‚è®¾ç½®ä¸€äº›è¿æ¥æ± ç»Ÿè®¡æ–¹é¢çš„é…ç½®ã€‚druid.stat.mergeSql&#x3D;true;druid.stat.slowSqlMillis&#x3D;5000æ¯”å¦‚è®¾ç½®ä¸€äº›æ•°æ®åº“è¿æ¥å±æ€§:</p>
<h2 id="å†™é…ç½®JDBCæ–‡ä»¶ï¼Œapplication-xml"><a href="#å†™é…ç½®JDBCæ–‡ä»¶ï¼Œapplication-xml" class="headerlink" title="å†™é…ç½®JDBCæ–‡ä»¶ï¼Œapplication.xml"></a>å†™é…ç½®JDBCæ–‡ä»¶ï¼Œapplication.xml</h2><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/mybatis?useSSL=true&amp;userUniceode=true&amp;characterEncoding=utf8</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.springboot04date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SpringBoot04DateApplicationTests</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired(required = false)</span></span><br><span class="line">            <span class="comment">//æ³¨å…¥æ•°æ®</span></span><br><span class="line">    DataSource dataSource;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        <span class="comment">//æŸ¥çœ‹é»˜è®¤çš„æ•°æ®æº</span></span><br><span class="line">        System.out.println(dataSource.getClass());<span class="comment">//class com.zaxxer.hikari.HikariDataSource</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–æ•°æ®åº“è¿æ¥</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> dataSource.getConnection();</span><br><span class="line">        <span class="comment">//Template</span></span><br><span class="line">        <span class="comment">//CURDè±†å­SpringBootä¸­å°è£…å¥½äº†ï¼Œæ‹¿æ¥å³ç”¨</span></span><br><span class="line"></span><br><span class="line">        System.out.println(connection);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å…³é—­</span></span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬æ¥å…¨å±€æœç´¢ä¸€ä¸‹ï¼Œæ‰¾åˆ°æ•°æ®æºçš„æ‰€æœ‰è‡ªåŠ¨é…ç½®éƒ½åœ¨ ï¼šDataSourceAutoConfigurationæ–‡ä»¶ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Conditional(&#123;DataSourceAutoConfiguration.PooledDataSourceCondition.class&#125;)</span></span><br><span class="line">    <span class="meta">@ConditionalOnMissingBean(&#123;DataSource.class, XADataSource.class&#125;)</span></span><br><span class="line">    <span class="meta">@Import(&#123;Hikari.class, Tomcat.class, Dbcp2.class, OracleUcp.class, Generic.class, DataSourceJmxConfiguration.class&#125;)</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">PooledDataSourceConfiguration</span> &#123;</span><br><span class="line">        <span class="keyword">protected</span> <span class="title function_">PooledDataSourceConfiguration</span><span class="params">()</span> &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œå¯¼å…¥çš„ç±»éƒ½åœ¨ DataSourceConfiguration é…ç½®ç±»ä¸‹ï¼Œå¯ä»¥çœ‹å‡º Spring Boot 2.2.5 é»˜è®¤ä½¿ç”¨HikariDataSource æ•°æ®æºï¼Œè€Œä»¥å‰ç‰ˆæœ¬ï¼Œå¦‚ Spring Boot 1.5 é»˜è®¤ä½¿ç”¨ org.apache.tomcat.jdbc.pool.DataSource ä½œä¸ºæ•°æ®æºï¼›<br> <strong>HikariDataSource å·ç§° Java WEB å½“å‰é€Ÿåº¦æœ€å¿«çš„æ•°æ®æºï¼Œç›¸æ¯”äºä¼ ç»Ÿçš„ C3P0 ã€DBCPã€Tomcat jdbc ç­‰è¿æ¥æ± æ›´åŠ ä¼˜ç§€ï¼›</strong></p>
<p><strong>å¯ä»¥ä½¿ç”¨ spring.datasource.type æŒ‡å®šè‡ªå®šä¹‰çš„æ•°æ®æºç±»å‹ï¼Œå€¼ä¸º è¦ä½¿ç”¨çš„è¿æ¥æ± å®ç°çš„å®Œå…¨é™å®šåã€‚</strong>å…³äºæ•°æ®æºæˆ‘ä»¬å¹¶ä¸åšä»‹ç»ï¼Œæœ‰äº†æ•°æ®åº“è¿æ¥ï¼Œæ˜¾ç„¶å°±å¯ä»¥ CRUD æ“ä½œæ•°æ®åº“äº†ã€‚ä½†æ˜¯æˆ‘ä»¬éœ€è¦å…ˆäº†è§£ä¸€ä¸ªå¯¹è±¡ JdbcTemplate</p>
<h2 id="JDBCTemplate"><a href="#JDBCTemplate" class="headerlink" title="JDBCTemplate"></a>JDBCTemplate</h2><p>1ã€æœ‰äº†æ•°æ®æº(com.zaxxer.hikari.HikariDataSource)ï¼Œç„¶åå¯ä»¥æ‹¿åˆ°æ•°æ®åº“è¿æ¥(java.sql.Connection)ï¼Œæœ‰äº†è¿æ¥ï¼Œå°±å¯ä»¥ä½¿ç”¨åŸç”Ÿçš„ JDBC è¯­å¥æ¥æ“ä½œæ•°æ®åº“ï¼›2ã€å³ä½¿ä¸ä½¿ç”¨ç¬¬ä¸‰æ–¹ç¬¬æ•°æ®åº“æ“ä½œæ¡†æ¶ï¼Œå¦‚ MyBatisç­‰ï¼ŒSpring æœ¬èº«ä¹Ÿå¯¹åŸç”Ÿçš„JDBC åšäº†è½»é‡çº§çš„å°è£…ï¼Œå³JdbcTemplateã€‚</p>
<p>3ã€æ•°æ®åº“æ“ä½œçš„æ‰€æœ‰ CRUD æ–¹æ³•éƒ½åœ¨ JdbcTemplate ä¸­ã€‚</p>
<p>4ã€Spring Boot ä¸ä»…æä¾›äº†é»˜è®¤çš„æ•°æ®æºï¼ŒåŒæ—¶é»˜è®¤å·²ç»é…ç½®å¥½äº† JdbcTemplate æ”¾åœ¨äº†å®¹å™¨ä¸­ï¼Œç¨‹åºå‘˜åªéœ€è‡ªå·±æ³¨å…¥å³å¯ä½¿ç”¨</p>
<p>5ã€JdbcTemplate çš„è‡ªåŠ¨é…ç½®æ˜¯ä¾èµ– org.springframework.boot.autoconfigure.jdbc åŒ…ä¸‹çš„ JdbcTemplateConfiguration ç±»</p>
<p><strong>JdbcTemplateä¸»è¦æä¾›ä»¥ä¸‹å‡ ç±»æ–¹æ³•ï¼š</strong></p>
<ul>
<li>executeæ–¹æ³•ï¼šå¯ä»¥ç”¨äºæ‰§è¡Œä»»ä½•SQLè¯­å¥ï¼Œä¸€èˆ¬ç”¨äºæ‰§è¡ŒDDLè¯­å¥ï¼›</li>
<li>updateæ–¹æ³•åŠbatchUpdateæ–¹æ³•ï¼šupdateæ–¹æ³•ç”¨äºæ‰§è¡Œæ–°å¢ã€ä¿®æ”¹ã€åˆ é™¤ç­‰è¯­å¥ï¼›batchUpdateæ–¹æ³•ç”¨äºæ‰§è¡Œæ‰¹å¤„ç†ç›¸å…³è¯­å¥ï¼›</li>
<li>queryæ–¹æ³•åŠqueryForXXXæ–¹æ³•ï¼šç”¨äºæ‰§è¡ŒæŸ¥è¯¢ç›¸å…³è¯­å¥ï¼›</li>
<li>callæ–¹æ³•ï¼šç”¨äºæ‰§è¡Œå­˜å‚¨è¿‡ç¨‹ã€å‡½æ•°ç›¸å…³è¯­å¥ã€‚</li>
</ul>
<h3 id="æµ‹è¯•CRUD"><a href="#æµ‹è¯•CRUD" class="headerlink" title="æµ‹è¯•CRUD"></a>æµ‹è¯•CRUD</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.springboot04date.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.jdbc.core.JdbcTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    JdbcTemplate jdbcTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æŸ¥è¯¢æ•°æ®åº“çš„æ‰€æœ‰ä¿¡æ¯</span></span><br><span class="line">    <span class="comment">//æ²¡æœ‰å®ä½“ç±»ï¼Œæ•°æ®åº“ä¸­çš„ä¸œè¥¿å¦‚ä½•è·å–</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/userList&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Map&lt;String,Object&gt;&gt; <span class="title function_">userList</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from user&quot;</span>;</span><br><span class="line">        List&lt;Map&lt;String,Object&gt;&gt; List_map= jdbcTemplate.queryForList(sql); <span class="comment">//æŸ¥è¯¢</span></span><br><span class="line">        <span class="keyword">return</span> List_map;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/ADD&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">addUser</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into user(id,name,pwd) values(6,&#x27;xioa&#x27;,&#x27;1234567&#x27;)&quot;</span>;</span><br><span class="line">        jdbcTemplate.update(sql);</span><br><span class="line">        <span class="keyword">return</span>  <span class="string">&quot;update-ok&quot;</span>;</span><br><span class="line">        <span class="comment">//è‡ªåŠ¨æäº¤äº†äº‹åŠ¡</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/update/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">update</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> <span class="type">int</span> id)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update user set name = ? ,pwd= ?where id =&quot;</span>+id;</span><br><span class="line">        <span class="comment">//å°è£…</span></span><br><span class="line">        Object[] objects = <span class="keyword">new</span> <span class="title class_">Object</span>[<span class="number">2</span>];</span><br><span class="line">        objects[<span class="number">0</span>] = <span class="string">&quot;qq&quot;</span>;</span><br><span class="line">        objects[<span class="number">1</span>] = <span class="string">&quot;12345678&quot;</span>;</span><br><span class="line">        jdbcTemplate.update(sql,objects);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;update-ok2&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/delete/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">delete</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> <span class="type">int</span> id)</span>&#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;delete from user where id = ?&quot;</span>;</span><br><span class="line">        jdbcTemplate.update(sql,id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;delet-ok&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="é›†æˆDruid"><a href="#é›†æˆDruid" class="headerlink" title="é›†æˆDruid"></a>é›†æˆDruid</h1><h2 id="Druidç®€ä»‹"><a href="#Druidç®€ä»‹" class="headerlink" title="Druidç®€ä»‹"></a>Druidç®€ä»‹</h2><p>Javaç¨‹åºå¾ˆå¤§ä¸€éƒ¨åˆ†è¦æ“ä½œæ•°æ®åº“ï¼Œä¸ºäº†æé«˜æ€§èƒ½æ“ä½œæ•°æ®åº“çš„æ—¶å€™ï¼Œåˆä¸å¾—ä¸ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± ã€‚</p>
<p>Druid æ˜¯é˜¿é‡Œå·´å·´å¼€æºå¹³å°ä¸Šä¸€ä¸ªæ•°æ®åº“è¿æ¥æ± å®ç°ï¼Œç»“åˆäº† C3P0ã€DBCP ç­‰ DB æ± çš„ä¼˜ç‚¹ï¼ŒåŒæ—¶åŠ å…¥äº†æ—¥å¿—ç›‘æ§ã€‚</p>
<p>Druid å¯ä»¥å¾ˆå¥½çš„ç›‘æ§ DB æ± è¿æ¥å’Œ SQL çš„æ‰§è¡Œæƒ…å†µï¼Œå¤©ç”Ÿå°±æ˜¯é’ˆå¯¹ç›‘æ§è€Œç”Ÿçš„ DB è¿æ¥æ± ã€‚</p>
<p>Druidå·²ç»åœ¨é˜¿é‡Œå·´å·´éƒ¨ç½²äº†è¶…è¿‡600ä¸ªåº”ç”¨ï¼Œç»è¿‡ä¸€å¹´å¤šç”Ÿäº§ç¯å¢ƒå¤§è§„æ¨¡éƒ¨ç½²çš„ä¸¥è‹›è€ƒéªŒã€‚</p>
<p>Spring Boot 2.0 ä»¥ä¸Šé»˜è®¤ä½¿ç”¨ Hikari æ•°æ®æºï¼Œå¯ä»¥è¯´ Hikari ä¸ Driud éƒ½æ˜¯å½“å‰ Java Web ä¸Šæœ€ä¼˜ç§€çš„æ•°æ®æºï¼Œæˆ‘ä»¬æ¥é‡ç‚¹ä»‹ç» Spring Boot å¦‚ä½•é›†æˆ Druid æ•°æ®æºï¼Œå¦‚ä½•å®ç°æ•°æ®åº“ç›‘æ§ã€‚</p>
<p>Githubåœ°å€ï¼š<a href="https://github.com/alibaba/druid/">https://github.com/alibaba/druid/</a></p>
<p><strong>com.alibaba.druid.pool.DruidDataSource åŸºæœ¬é…ç½®å‚æ•°å¦‚ä¸‹ï¼š</strong></p>
<h2 id="å‚æ•°è¯¦è§£"><a href="#å‚æ•°è¯¦è§£" class="headerlink" title="å‚æ•°è¯¦è§£"></a>å‚æ•°è¯¦è§£</h2><p><a href="https://blog.csdn.net/yzh_1346983557/article/details/88547234?utm_medium=distribute.pc_aggpage_search_result.none-task-blog-2~aggregatepage~first_rank_ecpm_v1~rank_v31_ecpm-8-88547234.pc_agg_new_rank&utm_term=druiddatasource%E9%85%8D%E7%BD%AE%E8%AF%A6%E8%A7%A3&spm=1000.2123.3001.4430"><strong>DruidDataSourceçš„ä½¿ç”¨ã€é…ç½®</strong></a></p>
<p><a href="https://mp.weixin.qq.com/s/wVAGOP1JdXZi5DMEsX1Aug"><strong>https://mp.weixin.qq.com/s/wVAGOP1JdXZi5DMEsX1Aug</strong></a></p>
<h2 id="é…ç½®æ•°æ®æº"><a href="#é…ç½®æ•°æ®æº" class="headerlink" title="é…ç½®æ•°æ®æº"></a>é…ç½®æ•°æ®æº</h2><p>1ã€æ·»åŠ ä¸Š Druid æ•°æ®æºä¾èµ–ã€‚</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.23<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2ã€å»é…ç½®Druidï¼Œé…ç½®è‡ªå®šä¹‰çš„æ•°æ®æº</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/mybatis?useSSL=true&amp;userUniceode=true&amp;characterEncoding=utf8</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br></pre></td></tr></table></figure>

<p>3ã€æ¥ä¸‹æ¥å°±å¯ä»¥è®¾ç½®æ•°æ®æºè¿æ¥åˆå§‹åŒ–å¤§å°ã€æœ€å¤§è¿æ¥æ•°ã€ç­‰å¾…æ—¶é—´ã€æœ€å°è¿æ¥æ•° ç­‰è®¾ç½®é¡¹ï¼›å¯ä»¥æŸ¥çœ‹æºç </p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#Spring Boot é»˜è®¤æ˜¯ä¸æ³¨å…¥è¿™äº›å±æ€§å€¼çš„ï¼Œéœ€è¦è‡ªå·±ç»‘å®š</span></span><br><span class="line"><span class="comment">#druid æ•°æ®æºä¸“æœ‰é…ç½®</span></span><br><span class="line"><span class="attr">initialSize:</span> <span class="number">5</span></span><br><span class="line"><span class="attr">minIdle:</span> <span class="number">5</span></span><br><span class="line"><span class="attr">maxActive:</span> <span class="number">20</span></span><br><span class="line"><span class="attr">maxWait:</span> <span class="number">60000</span></span><br><span class="line"><span class="attr">timeBetweenEvictionRunsMillis:</span> <span class="number">60000</span></span><br><span class="line"><span class="attr">minEvictableIdleTimeMillis:</span> <span class="number">300000</span></span><br><span class="line"><span class="attr">validationQuery:</span> <span class="string">SELECT</span> <span class="number">1</span> <span class="string">FROM</span> <span class="string">DUAL</span></span><br><span class="line"><span class="attr">testWhileIdle:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">testOnBorrow:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">testOnReturn:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">poolPreparedStatements:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#é…ç½®ç›‘æ§ç»Ÿè®¡æ‹¦æˆªçš„filtersï¼Œstat:ç›‘æ§ç»Ÿè®¡ã€log4jï¼šæ—¥å¿—è®°å½•ã€wallï¼šé˜²å¾¡sqlæ³¨å…¥</span></span><br><span class="line"><span class="comment">#å¦‚æœå…è®¸æ—¶æŠ¥é”™  java.lang.ClassNotFoundException: org.apache.log4j.Priority</span></span><br><span class="line"><span class="comment">#åˆ™å¯¼å…¥ log4j ä¾èµ–å³å¯ï¼ŒMaven åœ°å€ï¼šhttps://mvnrepository.com/artifact/log4j/log4j</span></span><br><span class="line"><span class="attr">filters:</span></span><br><span class="line"> <span class="attr">commons-log.connection-logger-name:</span> <span class="string">stat,wall,log4j</span></span><br><span class="line"><span class="attr">maxPoolPreparedStatementPerConnectionSize:</span> <span class="number">20</span></span><br><span class="line"><span class="attr">useGlobalDataSourceStat:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">connectionProperties:</span> <span class="string">druid.stat.mergeSql=true;druid.stat.slowSqlMillis=500</span></span><br></pre></td></tr></table></figure>

<p>4ã€å› ä¸ºDruidä¸­åŒ…å«log4jæ‰€ä»¥éœ€è¦å¯¼å…¥ä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>5ã€ç°åœ¨éœ€è¦ç¨‹åºå‘˜è‡ªå·±ä¸º DruidDataSource ç»‘å®šå…¨å±€é…ç½®æ–‡ä»¶ä¸­çš„å‚æ•°ï¼Œå†æ·»åŠ åˆ°å®¹å™¨ä¸­ï¼Œè€Œä¸å†ä½¿ç”¨ Spring Boot çš„è‡ªåŠ¨ç”Ÿæˆäº†ï¼›æˆ‘ä»¬éœ€è¦ è‡ªå·±æ·»åŠ  DruidDataSource ç»„ä»¶åˆ°å®¹å™¨ä¸­ï¼Œå¹¶ç»‘å®šå±æ€§</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DruidConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConfigurationProperties(prefix = &quot;spring.datasource&quot;)</span></span><br><span class="line">    <span class="comment">//ç»‘å®šåˆ°application.xmlæ–‡ä»¶ä¸­ ç”Ÿæ•ˆ</span></span><br><span class="line">    <span class="keyword">public</span> DataSource <span class="title function_">druidDateSource</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>6ã€Druidå…·æœ‰çœ‹ç›‘æ§åŠŸèƒ½ï¼Œå¯ä»¥æ–¹ä¾¿ç”¨æˆ·åœ¨webç«¯çœ‹è§åå°çš„æ“ä½œï¼Œé…ç½®åå°ç›‘æ§å’Œè¿‡æ»¤å™¨</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.springboot04date.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.druid.pool.DruidDataSource;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.druid.support.http.StatViewServlet;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.druid.support.http.WebStatFilter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.web.servlet.FilterRegistrationBean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.web.servlet.ServletRegistrationBean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DruidConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConfigurationProperties(prefix = &quot;spring.datasource&quot;)</span></span><br><span class="line">    <span class="comment">//ç»‘å®šåˆ°application.xmlæ–‡ä»¶ä¸­ ç”Ÿæ•ˆ</span></span><br><span class="line">    <span class="keyword">public</span> DataSource <span class="title function_">druidDateSource</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å› ä¸ºiSpringBootå†…ç½®äº†servletå®¹å™¨ï¼Œæ‰€æœ‰æ²¡æœ‰web.xml,æ›¿ä»£æ–¹æ³•ã€ï¼šServletRegistrationBean</span></span><br><span class="line">    <span class="comment">//åå°ç›‘æ§åŠŸèƒ½</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ServletRegistrationBean <span class="title function_">statViewServlet</span><span class="params">()</span>&#123;</span><br><span class="line">        ServletRegistrationBean&lt;StatViewServlet&gt; bean = <span class="keyword">new</span> <span class="title class_">ServletRegistrationBean</span>&lt;&gt;(<span class="keyword">new</span> <span class="title class_">StatViewServlet</span>(), <span class="string">&quot;/druid/*&quot;</span>);<span class="comment">//è®¿é—®è¿™ä¸ªå°±å¯ä»¥è¿›å…¥åå°ç›‘æ§é¡µé¢ï¼Œå†™æ­»çš„</span></span><br><span class="line">        <span class="comment">//åå°éœ€è¦æœ‰äººç™»å½•</span></span><br><span class="line">        <span class="comment">//è´¦å·å¯†ç é…ç½®ä¹Ÿæ˜¯æ­»çš„</span></span><br><span class="line">        HashMap&lt;String,String&gt; initParameters = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">//å¢åŠ é…ç½®</span></span><br><span class="line">        initParameters.put(<span class="string">&quot;loginUsername&quot;</span>,<span class="string">&quot;admin&quot;</span>);</span><br><span class="line">        initParameters.put(<span class="string">&quot;loginPassword&quot;</span>,<span class="string">&quot;123456&quot;</span>);<span class="comment">//keyæ˜¯å›ºå®šçš„</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//å…è®¸è°èƒ½è®¿é—®</span></span><br><span class="line">        initParameters.put(<span class="string">&quot;allow&quot;</span>,<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">        bean.setInitParameters(initParameters);<span class="comment">//è®¾ç½®åˆå§‹åŒ–å‚æ•°</span></span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//filteråå°è¿‡æ»¤</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> FilterRegistrationBean <span class="title function_">webServletFilter</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">FilterRegistrationBean</span> <span class="variable">bean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FilterRegistrationBean</span>();</span><br><span class="line">        bean.setFilter(<span class="keyword">new</span> <span class="title class_">WebStatFilter</span>());</span><br><span class="line">        <span class="comment">//å¯ä»¥è¿‡æ»¤å“ªäº›è¯·æ±‚</span></span><br><span class="line">        HashMap&lt;String,String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;exclusions&quot;</span>,<span class="string">&quot;*.js,*.css,/druid/*&quot;</span>);<span class="comment">//è¿™äº›ä¸œè¥¿ä¸è¿›è¡Œç»Ÿè®¡</span></span><br><span class="line">        bean.setInitParameters(map);</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="æ•´åˆMybatis"><a href="#æ•´åˆMybatis" class="headerlink" title="æ•´åˆMybatis"></a>æ•´åˆMybatis</h1><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="http://mybatis.org/spring-boot-starter/mybatis-spring-boot-autoconfigure/">http://mybatis.org/spring-boot-starter/mybatis-spring-boot-autoconfigure/</a></p>
<p>Mavenä»“åº“åœ°å€ï¼š<a href="https://mvnrepository.com/artifact/org.mybatis.spring.boot/mybatis-spring-boot-starter/2.1.3">Maven Repository: org.mybatis.spring.boot Â» mybatis-spring-boot-starter Â» 2.1.3 (mvnrepository.com)</a></p>
<h2 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h2><h3 id="1-å¯¼å…¥ä¾èµ–"><a href="#1-å¯¼å…¥ä¾èµ–" class="headerlink" title="1.å¯¼å…¥ä¾èµ–"></a>1.å¯¼å…¥ä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis.spring.boot/mybatis-spring-boot-starter --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-è¿æ¥æ•°æ®åº“"><a href="#2-è¿æ¥æ•°æ®åº“" class="headerlink" title="2.è¿æ¥æ•°æ®åº“"></a>2.è¿æ¥æ•°æ®åº“</h3><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">spring.datasource.password</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/mybatis?userUnicode=true&amp;useSSL=true&amp;characterEncoding=utf8</span></span><br><span class="line"><span class="attr">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br></pre></td></tr></table></figure>

<h3 id="3-æµ‹è¯•æ˜¯å¦è¿æ¥æˆåŠŸ"><a href="#3-æµ‹è¯•æ˜¯å¦è¿æ¥æˆåŠŸ" class="headerlink" title="3.æµ‹è¯•æ˜¯å¦è¿æ¥æˆåŠŸ"></a>3.æµ‹è¯•æ˜¯å¦è¿æ¥æˆåŠŸ</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.springboot05mybatis;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SpringBoot05MybatisApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    DataSource dataSource;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        System.out.println(dataSource.getClass());</span><br><span class="line">        System.out.println(dataSource.getConnection());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-å¯¼å…¥lombok"><a href="#4-å¯¼å…¥lombok" class="headerlink" title="4.å¯¼å…¥lombok"></a>4.å¯¼å…¥lombok</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="5-å®ä½“ç±»"><a href="#5-å®ä½“ç±»" class="headerlink" title="5.å®ä½“ç±»"></a>5.å®ä½“ç±»</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.springboot05mybatis.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String pwd;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-mapper"><a href="#6-mapper" class="headerlink" title="6.mapper"></a>6.mapper</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.springboot05mybatis.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.wu.springboot05mybatis.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿™ä¸ªå®ä½“ç±»æ—¢éœ€è¦å…·æœ‰å¢åˆ æ”¹æŸ¥çš„åŠŸèƒ½åˆéœ€è¦æ³¨å†Œåˆ°springä¸­æ‰˜ç®¡æ‰€æœ‰éœ€è¦Repositoryå’Œmapper</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="meta">@Repository</span> <span class="comment">//Daoå±‚</span></span><br><span class="line"><span class="comment">//è¿™ä¸ªæ³¨è§£ä»£è¡¨äº†è¿™æ˜¯ä¸€ä¸ªmybatisçš„mapperæ¥å£</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">    List&lt;User&gt; <span class="title function_">queryUserList</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    User <span class="title function_">queryUserById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">updateUser</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">addUser</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="title function_">deleteUser</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-mapper-xml"><a href="#7-mapper-xml" class="headerlink" title="7.mapper.xml"></a>7.mapper.xml</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.wu.springboot05mybatis.mapper.UserMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryUserList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">        select * from user</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryUserById&quot;</span>  <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>  <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">        select * from user where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;User&quot;</span> &gt;</span></span><br><span class="line">        update user set name=#&#123;name&#125;,pwd=#&#123;pwd&#125; where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;User&quot;</span>&gt;</span></span><br><span class="line">        insert into user(id,name,pwd) values (#&#123;id&#125;,#&#123;name&#125;,#&#123;pwd&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">        delete from user where id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="8-æ•´åˆmybatisï¼Œè®©springå¯ä»¥è¯†åˆ«mappper"><a href="#8-æ•´åˆmybatisï¼Œè®©springå¯ä»¥è¯†åˆ«mappper" class="headerlink" title="8.æ•´åˆmybatisï¼Œè®©springå¯ä»¥è¯†åˆ«mappper"></a>8.æ•´åˆmybatisï¼Œè®©springå¯ä»¥è¯†åˆ«mappper</h3><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">spring.datasource.password</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/mybatis?userUnicode=true&amp;useSSL=true&amp;characterEncoding=utf8</span></span><br><span class="line"><span class="attr">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#æ•´åˆMybatis</span></span><br><span class="line"><span class="comment">#è®©springè¯†åˆ«åˆ°mapperæ–‡ä»¶</span></span><br><span class="line"><span class="attr">mybatis.type-aliases-package</span>=<span class="string">com.wu.springboot05mybatis.pojo</span></span><br><span class="line"><span class="attr">mybatis.mapper-locations</span>=<span class="string">classpath:mybatis/mapper/*.xml</span></span><br></pre></td></tr></table></figure>

<h3 id="9-ç¼–å†™controlleræµ‹è¯•"><a href="#9-ç¼–å†™controlleræµ‹è¯•" class="headerlink" title="9.ç¼–å†™controlleræµ‹è¯•"></a>9.ç¼–å†™controlleræµ‹è¯•</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.wu.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> com.wu.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/query&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">queryUserList</span><span class="params">()</span>&#123;</span><br><span class="line">        List&lt;User&gt; users = userMapper.queryUserList();</span><br><span class="line">        <span class="keyword">for</span> (User user : users)&#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> users;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/ById/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">queryUserById</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> <span class="type">int</span> id)</span>&#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.queryUserById(id);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">        <span class="keyword">return</span> user;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/update&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">updateUser</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">4</span>,<span class="string">&quot;xiaowu&quot;</span>,<span class="string">&quot;xiaowu&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (userMapper.updateUser(user)!=<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;false&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="SpringSecurity"><a href="#SpringSecurity" class="headerlink" title="SpringSecurity"></a>SpringSecurity</h1><p><a href="https://mp.weixin.qq.com/s/FLdC-24_pP8l5D-i7kEwcg">https://mp.weixin.qq.com/s/FLdC-24_pP8l5D-i7kEwcg</a></p>
<p>shiroã€SpringSecurityï¼šå¾ˆåƒï¼Œé™¤äº†ç±»ä¸ä¸€æ ·</p>
<p>é¦–å…ˆå¯¼å…¥éœ€è¦çš„é™æ€èµ„æºï¼š</p>
<p>é“¾æ¥ï¼š<a href="https://pan.baidu.com/s/1oB9-VKrN4tzh61MtdW5Dow">https://pan.baidu.com/s/1oB9-VKrN4tzh61MtdW5Dow</a><br>æå–ç ï¼šclsq</p>
<h2 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1 ç®€ä»‹"></a>1 ç®€ä»‹</h2><ul>
<li>SpringSecurityæ˜¯Springbootåº•å±‚å®‰å…¨æ¨¡å—é»˜è®¤çš„æŠ€æœ¯é€‰å‹ï¼Œå®ƒå¯ä»¥å®ç°å¼ºå¤§çš„Webå®‰å…¨æœºåˆ¶ï¼Œåªéœ€è¦å°‘æ•°çš„spring-bootâ€“spring-securityä¾èµ–ï¼Œè¿›è¡Œå°‘é‡çš„é…ç½®ï¼Œå°±å¯ä»¥å®ç°</li>
<li>SpringBootä¸­çš„SpringSecurityä¾èµ–ï¼š</li>
<li>åŠŸèƒ½æƒé™ã€è®¿é—®æƒé™ã€èœå•æƒé™â€¦ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿‡æ»¤å™¨ï¼Œæ‹¦æˆªå™¨éœ€è¦å†™å¤§é‡çš„åŸç”Ÿä»£ç ï¼Œè¿™æ ·å¾ˆä¸æ–¹ä¾¿</li>
<li>æ‰€ä»¥åœ¨ç½‘å€è®¾è®¡ä¹‹åˆï¼Œå°±åº”è¯¥è€ƒè™‘åˆ°æƒé™éªŒè¯çš„å®‰å…¨é—®é¢˜ï¼Œå…¶ä¸­Shiroã€SpringSecurityä½¿ç”¨å¾ˆå¤š</li>
</ul>
<h2 id="2-å¯¼å…¥ä¾èµ–"><a href="#2-å¯¼å…¥ä¾èµ–" class="headerlink" title="2.å¯¼å…¥ä¾èµ–"></a>2.å¯¼å…¥ä¾èµ–</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--SpringSecurity --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- thymeleaf --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è®°ä½å‡ ä¸ªç±» ï¼š</p>
<ul>
<li>WebSecurityConfigurerAdapter:è‡ªå®šä¹‰Securityç­–ç•¥</li>
<li>AuthenticationManagerBuilder:è‡ªå®šä¹‰è®¤è¯ç­–ç•¥</li>
<li>@EnableWebSecurityï¼šå¼€å¯WebSecurityæ¨¡å¼</li>
</ul>
<p>ä¸¤ä¸ªå•è¯ï¼šenæ˜¯è®¤è¯ï¼Œoræ˜¯æƒé™</p>
<ul>
<li>è®¤è¯æ–¹å¼ï¼šAuthentication</li>
<li>æƒé™ï¼šAuthorization</li>
</ul>
<h2 id="3-é…ç½®SecurityConfigure"><a href="#3-é…ç½®SecurityConfigure" class="headerlink" title="3.é…ç½®SecurityConfigure"></a>3.é…ç½®SecurityConfigure</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.builders.HttpSecurity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@EnableWebSecurity</span> <span class="comment">//EnableXXX èµ·å¯åŠ¨æŸæœåŠ¡</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SecurityConfig</span> <span class="keyword">extends</span> <span class="title class_">WebSecurityConfigurerAdapter</span> &#123;<span class="comment">//ç»§æ‰¿é‡å†™å®ç°Securityæˆæƒè®¤è¯æ–¹æ³•</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="built_in">super</span>.configure(http);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-é…ç½®Controllerå±‚"><a href="#4-é…ç½®Controllerå±‚" class="headerlink" title="4.é…ç½®Controllerå±‚"></a>4.é…ç½®Controllerå±‚</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RouterController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&#123;&quot;/&quot;,&quot;/index&quot;&#125;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">index</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/toLogin&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toLogin</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;views/login&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¯ä»¥å®ç°å…¬ç”¨</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/level1/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">level</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> <span class="type">int</span> id)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;views/level1/&quot;</span> +id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/level2/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">level2</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> <span class="type">int</span> id)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;views/level2/&quot;</span> +id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/level3/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">level3</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> <span class="type">int</span> id)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;views/level3/&quot;</span> +id;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5-è®¤è¯å’Œæˆæƒ"><a href="#5-è®¤è¯å’Œæˆæƒ" class="headerlink" title="5.è®¤è¯å’Œæˆæƒ"></a>5.è®¤è¯å’Œæˆæƒ</h2><h3 id="1-æˆæƒ"><a href="#1-æˆæƒ" class="headerlink" title="1.æˆæƒ"></a>1.æˆæƒ</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@EnableWebSecurity</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SecurityConfig</span> <span class="keyword">extends</span> <span class="title class_">WebSecurityConfigurerAdapter</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="comment">//æˆæƒ</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//é¦–é¡µæ‰€æœ‰äººå¯ä»¥è®¿é—®ï¼Œä½†æ˜¯åŠŸèƒ½é¡µåªæœ‰å¯¹åº”æœ‰æƒé™çš„äººæ‰èƒ½è®¿é—®</span></span><br><span class="line">        <span class="comment">//é“¾å¼ç¼–ç¨‹</span></span><br><span class="line">        <span class="comment">//è¯·æ±‚æˆæƒçš„è§„åˆ™</span></span><br><span class="line">        http.authorizeRequests().antMatchers(<span class="string">&quot;/&quot;</span>).permitAll()</span><br><span class="line">                .antMatchers(<span class="string">&quot;/level1/**&quot;</span>).hasRole(<span class="string">&quot;vip1&quot;</span>)</span><br><span class="line">                .antMatchers(<span class="string">&quot;/level2/**&quot;</span>).hasRole(<span class="string">&quot;vip2&quot;</span>)</span><br><span class="line">                .antMatchers(<span class="string">&quot;/level3/**&quot;</span>).hasRole(<span class="string">&quot;vip3&quot;</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ä¸€ä¸‹ï¼šå‘ç°é™¤äº†é¦–é¡µéƒ½è¿›ä¸å»äº†ï¼å› ä¸ºæˆ‘ä»¬ç›®å‰æ²¡æœ‰ç™»å½•çš„è§’è‰²ï¼Œå› ä¸ºè¯·æ±‚éœ€è¦ç™»å½•çš„è§’è‰²æ‹¥æœ‰å¯¹åº”çš„æƒé™æ‰å¯ä»¥ï¼</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1690015667596-65884487-d2ec-44f6-afe7-8ac958c78c44.png" alt="img"></p>
<p>åœ¨configure()æ–¹æ³•ä¸­åŠ å…¥ä»¥ä¸‹é…ç½®ï¼Œå¼€å¯è‡ªåŠ¨é…ç½®çš„ç™»å½•åŠŸèƒ½ï¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¼€å¯è‡ªåŠ¨é…ç½®çš„ç™»å½•åŠŸèƒ½</span></span><br><span class="line">http.formLogin();</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•å‘ç°æ²¡æœ‰æƒé™çš„æ—¶å€™ï¼Œä¼šè·³è½¬åˆ°ç™»å½•çš„é¡µé¢ï¼š</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1690016304946-5825e47d-a556-4535-8aff-ca8d825a41fe.png" alt="img"></p>
<h3 id="2-è®¤è¯"><a href="#2-è®¤è¯" class="headerlink" title="2.è®¤è¯"></a>2.è®¤è¯</h3><p>æŸ¥çœ‹åˆšæ‰ç™»å½•é¡µçš„æ³¨é‡Šä¿¡æ¯ï¼›</p>
<p>æˆ‘ä»¬å¯ä»¥å®šä¹‰è®¤è¯è§„åˆ™ï¼Œé‡å†™configure(AuthenticationManagerBuilder auth)æ–¹æ³•</p>
<p>ä¹Ÿå¯ä»¥å»jdbcä¸­å»å–</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å®šä¹‰è®¤è¯è§„åˆ™</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">configure</span><span class="params">(AuthenticationManagerBuilder auth)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">   </span><br><span class="line">   <span class="comment">//åœ¨å†…å­˜ä¸­å®šä¹‰ï¼Œä¹Ÿå¯ä»¥åœ¨jdbcä¸­å»æ‹¿....</span></span><br><span class="line">   auth.inMemoryAuthentication()</span><br><span class="line">          .withUser(<span class="string">&quot;xiaowu&quot;</span>).password(<span class="string">&quot;xiaowu&quot;</span>).roles(<span class="string">&quot;vip2&quot;</span>,<span class="string">&quot;vip3&quot;</span>)</span><br><span class="line">          .and()</span><br><span class="line">          .withUser(<span class="string">&quot;root&quot;</span>).password(<span class="string">&quot;root&quot;</span>).roles(<span class="string">&quot;vip1&quot;</span>,<span class="string">&quot;vip2&quot;</span>,<span class="string">&quot;vip3&quot;</span>)</span><br><span class="line">          .and()</span><br><span class="line">          .withUser(<span class="string">&quot;guest&quot;</span>).password(<span class="string">&quot;123456&quot;</span>).roles(<span class="string">&quot;vip1&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™äº›è´¦å·ç™»å½•è¿›è¡Œæµ‹è¯•ï¼å‘ç°ä¼šæŠ¥é”™ï¼</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1690016854433-fcc7d8c1-868a-4b13-bcab-d659f73317f6.png" alt="img"></p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1690016833510-3fa8f555-dabc-464b-ab28-789b93cf7614.png" alt="img"></p>
<p>åŸå› ï¼Œæˆ‘ä»¬è¦å°†å‰ç«¯ä¼ è¿‡æ¥çš„å¯†ç è¿›è¡ŒæŸç§æ–¹å¼åŠ å¯†ï¼Œå¦åˆ™å°±æ— æ³•ç™»å½•ï¼Œä¿®æ”¹ä»£ç </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è®¤è¯</span></span><br><span class="line">    <span class="comment">//å¯†ç ç¼–ç   PasswordEncoder</span></span><br><span class="line">    <span class="comment">//åœ¨SpringSecurity5ä¸­,æ–°å¢äº†è®¸å¤šåŠ å¯†æ–¹å¼</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">configure</span><span class="params">(AuthenticationManagerBuilder auth)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//è¿™äº›æ•°æ®åº”è¯¥ä»æ•°æ®åº“ä¸­è¯»</span></span><br><span class="line">        auth.inMemoryAuthentication().passwordEncoder(<span class="keyword">new</span> <span class="title class_">BCryptPasswordEncoder</span>())</span><br><span class="line">                .withUser(<span class="string">&quot;xiaowu&quot;</span>).password(<span class="keyword">new</span> <span class="title class_">BCryptPasswordEncoder</span>().encode(<span class="string">&quot;xiaowu&quot;</span>)).roles(<span class="string">&quot;vip2&quot;</span>,<span class="string">&quot;vip3&quot;</span>)</span><br><span class="line">                .and()</span><br><span class="line">                .withUser(<span class="string">&quot;root&quot;</span>).password(<span class="keyword">new</span> <span class="title class_">BCryptPasswordEncoder</span>().encode(<span class="string">&quot;root&quot;</span>)).roles(<span class="string">&quot;vip1&quot;</span>,<span class="string">&quot;vip2&quot;</span>,<span class="string">&quot;vip3&quot;</span>)</span><br><span class="line">                .and()</span><br><span class="line">                .withUser(<span class="string">&quot;guest&quot;</span>).password(<span class="keyword">new</span> <span class="title class_">BCryptPasswordEncoder</span>().encode(<span class="string">&quot;123456&quot;</span>)).roles(<span class="string">&quot;vip1&quot;</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>å†™ä¸€ä¸ªç±»ç»§æ‰¿WebSecurityConfigurerAdapterï¼Œä½¿ç”¨@EnableWebSecurityå¼€å¯webå®‰å…¨æœåŠ¡</p>
<ul>
<li>åœ°å€æˆæƒï¼šä½¿ç”¨HttpSecurity security</li>
<li>è´¦æˆ·è®¤è¯å’Œç»™äºˆæƒé™ï¼šä½¿ç”¨AuthenticationManagerBuilder builder</li>
<li>SpringSecurity5 ä»¥åé»˜è®¤éœ€è¦å¯†ç åŠ å¯†æ–¹å¼ï¼Œæ¨èä½¿ç”¨passwordEncoder(new BCryptPasswordEncoder())</li>
</ul>
<h2 id="6-æ³¨é”€ä»¥åŠæ§åˆ¶æƒé™"><a href="#6-æ³¨é”€ä»¥åŠæ§åˆ¶æƒé™" class="headerlink" title="6.æ³¨é”€ä»¥åŠæ§åˆ¶æƒé™"></a>6.æ³¨é”€ä»¥åŠæ§åˆ¶æƒé™</h2><h3 id="1-å®šåˆ¶ç™»å½•"><a href="#1-å®šåˆ¶ç™»å½•" class="headerlink" title="1. å®šåˆ¶ç™»å½•"></a>1. å®šåˆ¶ç™»å½•</h3><ul>
<li>å¼€å¯ç™»å½•åŠŸèƒ½ï¼šformLogin()ï¼ŒSpringbooté»˜è®¤è‡ªå¸¦ä¸€ä¸ªç™»å½•é¡µ&#x2F;loginå®šåˆ¶çœ‹ä¸‹é¢</li>
</ul>
<p>ç°åœ¨è¿™ä¸ªç™»å½•é¡µé¢éƒ½æ˜¯spring security é»˜è®¤çš„ï¼Œæ€ä¹ˆæ ·å¯ä»¥ä½¿ç”¨æˆ‘ä»¬è‡ªå·±å†™çš„Loginç•Œé¢å‘¢ï¼Ÿ</p>
<p>1ã€åœ¨åˆšæ‰çš„ç™»å½•é¡µé…ç½®åé¢æŒ‡å®š loginpage()</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//loginPage()ä½œç”¨ï¼šæŒ‡å®šæˆ‘ä»¬ç™»å½•é¡µé¢è¯·æ±‚åœ°å€ä¸º&quot;/toLogin&quot; (å‰ç«¯è¡¨å•æäº¤å¿…é¡»æ˜¯è¿™ä¸ªåœ°å€ï¼Œä¸ç„¶ä¼š404)</span></span><br><span class="line">http.formLogin().loginPage(<span class="string">&quot;/toLogin&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>2ã€ç„¶åindexé¡µé¢çš„ç™»å½•åœ°å€ç»‘å®šæˆ‘ä»¬controlleråœ°å€</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/toLogin&#125;&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;address card icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> ç™»å½•</span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>3ã€æˆ‘ä»¬ç™»å½•ï¼Œéœ€è¦å°†è¿™äº›ä¿¡æ¯å‘é€åˆ°å“ªé‡Œï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦é…ç½®ï¼Œlogin.html é…ç½®æäº¤è¯·æ±‚åŠæ–¹å¼ï¼Œæ–¹å¼å¿…é¡»ä¸ºpost:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">//åˆšå¥½å¯¹åº” http.formLogin().loginPage(&quot;/toLogin&quot;);</span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/toLogin&#125;&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å›¾ç¤ºè§£æï¼š</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1690075508996-83a0c166-8717-4e20-baba-924c4987b329.png" alt="img"></p>
<p>4ã€è¿™ä¸ªè¯·æ±‚æäº¤ä¸Šæ¥ï¼Œæˆ‘ä»¬è¿˜éœ€è¦éªŒè¯å¤„ç†ï¼Œæ€ä¹ˆåšå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹formLogin()æ–¹æ³•çš„æºç ï¼æˆ‘ä»¬é…ç½®æ¥æ”¶ç™»å½•çš„ç”¨æˆ·åå’Œå¯†ç çš„å‚æ•°ï¼</p>
<p>ä¾‹å­ï¼šæ¯”å¦‚ä¸‹åˆ—å°±ä¼šå‡ºç°æŠ¥é”™ï¼š</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1690075640318-24062872-8c0b-4b9d-bafb-2425df7d77b1.png" alt="img"></p>
<p>è¿™æ—¶å°±éœ€è¦å»configä¸­è®¾ç½®ä¸€ä¸‹ï¼Œå°†å¯¹åº”çš„å­—æ®µè¿›è¡Œè¿æ¥</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">http.formLogin().usernameParameter(<span class="string">&quot;name&quot;</span>).passwordParameter(<span class="string">&quot;pwd&quot;</span>).loginPage(<span class="string">&quot;/toLogin&quot;</span>);</span><br></pre></td></tr></table></figure>

<p><strong>5ã€å¦‚æœæˆ‘ä»¬å‰ç«¯è¡¨å•è¯·æ±‚åœ°å€ä¸ºè‡ªå®šä¹‰</strong></p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1690097509985-eabe3524-1cde-47e1-9435-eb1fdf997f6f.png" alt="img"></p>
<p>æ·»åŠ loginProcessingUrl()æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//loginProcessingUrl(&quot;/xiaowu&quot;)ï¼šæŒ‡å®šäº†ç™»å½•è¡¨å•æäº¤çš„ URL ä¸º &quot;/xiaowu&quot;ï¼Œå³ç”¨æˆ·åœ¨ç™»å½•è¡¨å•ä¸­è¾“å…¥ç”¨æˆ·åå’Œå¯†ç åï¼Œæäº¤è¡¨å•æ—¶ä¼šå‘é€ POST è¯·æ±‚åˆ°è¯¥ URL è¿›è¡Œç™»å½•å¤„ç†ã€‚</span></span><br><span class="line">http.formLogin().loginPage(<span class="string">&quot;/toLogin&quot;</span>).loginProcessingUrl(<span class="string">&quot;/xiaowu&quot;</span>).usernameParameter(<span class="string">&quot;name&quot;</span>).passwordParameter(<span class="string">&quot;pwd&quot;</span>);</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼š</strong></p>
<p><strong>1ã€çœ‹æºç å°±å¯ä»¥çŸ¥é“ï¼ŒloginPageçš„é»˜è®¤å€¼æ˜¯(â€œ&#x2F;loginâ€)ï¼Œè€ŒloginProcessingUrlçš„é»˜è®¤å€¼æ˜¯loginPageçš„å€¼</strong></p>
<p><strong>2ã€loginPage()å’ŒloginProcessingUrl()å…¶ä¸­ä¸€ä¸ªå’Œå‰ç«¯è¡¨å•åœ°å€ä¸€è‡´éƒ½å¯ä»¥å®ç°</strong></p>
<p><strong>ä¸¾ä¸ªä¾‹å­ï¼š</strong></p>
<ul>
<li>http.formLogin().loginPage(â€œ&#x2F;toLoginâ€)å’Œå‰ç«¯åœ°å€ä¸€æ ·ï¼ŒæˆåŠŸ</li>
<li>http.formLogin().loginProcessingUrl(â€œ&#x2F;toLoginâ€) ä¹Ÿä¸€æ ·æˆåŠŸ</li>
</ul>
<p><strong>3ã€&#x2F;&#x2F;loginPage(â€œ&#x2F;toLoginâ€)ï¼šæŒ‡å®šäº†ç™»å½•é¡µé¢çš„è·¯å¾„ä¸º â€œ&#x2F;toLoginâ€ï¼Œå³ç”¨æˆ·è®¿é—®è¯¥è·¯å¾„æ—¶ä¼šæ˜¾ç¤ºç™»å½•é¡µé¢ã€‚</strong></p>
<p>â€‹      <strong>&#x2F;&#x2F;loginProcessingUrl(â€œ&#x2F;loginâ€)ï¼šæŒ‡å®šäº†ç™»å½•è¡¨å•æäº¤çš„ URL ä¸º â€œ&#x2F;loginâ€ï¼Œå³ç”¨æˆ·åœ¨ç™»å½•è¡¨å•ä¸­è¾“å…¥ç”¨æˆ·åå’Œå¯†ç åï¼Œæäº¤è¡¨å•æ—¶ä¼šå‘é€ POST è¯·æ±‚åˆ°è¯¥ URL è¿›è¡Œç™»å½•å¤„ç†ã€‚</strong></p>
<p><strong>4ã€å¦‚æœä¸¤ä¸ªæ–¹æ³•éƒ½å†™äº†çš„è¯ï¼Œé‚£ä¹ˆå‰ç«¯è¯·æ±‚åœ°å€è¦å’ŒloginProcessingUrlåœ°å€ä¸€æ ·ï¼Œå¦åˆ™ä¼š404æ‰¾ä¸åˆ°ï¼Œå› ä¸ºloginProcessingUrlæ˜¯ä¸“é—¨å¤„ç†è¡¨å•è¯·æ±‚çš„ï¼Œè€Œæ­¤æ—¶loginPageä½œç”¨ä¸å¤§äº†ï¼ˆé™¤éæœ‰å¤šä¸ªç™»å½•è¯·æ±‚ï¼Œè¿™æ ·å¯ä»¥æŒ‡å®šæ˜¯å“ªä¸ªï¼‰</strong></p>
<p><strong>5ã€ä¸ºä»€ä¹ˆæˆ‘ä»¬ç™»å½•é¡µé¢çš„åœ°å€ä¸ä¼šèµ°controllerå±‚ï¼Œè€Œæ˜¯è·‘åˆ°SecurityConfigç±»é‡Œï¼Ÿ</strong></p>
<p>è¿™æ˜¯å› ä¸º Spring Security æ˜¯ä¸€ä¸ªåŸºäºè¿‡æ»¤å™¨ï¼ˆFilterï¼‰çš„å®‰å…¨æ¡†æ¶ï¼Œå®ƒé€šè¿‡æ‹¦æˆªè¯·æ±‚å¹¶è¿›è¡Œå®‰å…¨éªŒè¯æ¥ä¿æŠ¤åº”ç”¨ç¨‹åºã€‚</p>
<p>6ã€åœ¨ç™»å½•é¡µå¢åŠ è®°ä½æˆ‘çš„é€‰æ‹©æ¡†</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;field&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;remember&quot;</span>&gt;</span> è®°ä½æˆ‘</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">http.rememberMe().rememberMeParameter(&quot;remember&quot;);</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1690075768203-e2330c89-5013-4008-9aab-2459b0ae219d.png" alt="img"></p>
<h3 id="2-æ³¨é”€"><a href="#2-æ³¨é”€" class="headerlink" title="2. æ³¨é”€"></a>2. æ³¨é”€</h3><ul>
<li>springbootè‡ªå¸¦æ³¨é”€é¡µï¼š&#x2F;logout</li>
<li>æ³¨é”€æˆåŠŸåè·³è½¬åˆ°&#x2F;æ§åˆ¶å™¨</li>
</ul>
<p>1.å¼€å¯è‡ªåŠ¨é…ç½®çš„æ³¨é”€çš„åŠŸèƒ½</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">   <span class="comment">//....</span></span><br><span class="line">   <span class="comment">//å¼€å¯è‡ªåŠ¨é…ç½®çš„æ³¨é”€çš„åŠŸèƒ½</span></span><br><span class="line">   <span class="comment">// /logout æ³¨é”€è¯·æ±‚</span></span><br><span class="line">   http.logout();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.æˆ‘ä»¬åœ¨å‰ç«¯ï¼Œå¢åŠ ä¸€ä¸ªæ³¨é”€çš„æŒ‰é’®ï¼Œindex.html å¯¼èˆªæ ä¸­</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/logout&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;sign-out icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> æ³¨é”€</span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1690071539519-7ecdfc04-4b21-4acf-bfb0-039b1a191461.png" alt="img"></p>
<p>æˆ‘ä»¬å¯ä»¥å»æµ‹è¯•ä¸€ä¸‹ï¼Œç™»å½•æˆåŠŸåç‚¹å‡»æ³¨é”€ï¼Œå‘ç°æ³¨é”€å®Œæ¯•ä¼šè·³è½¬åˆ°ç™»å½•é¡µé¢ï¼</p>
<p>ä½†æ˜¯ï¼Œæˆ‘ä»¬æƒ³è®©ä»–æ³¨é”€æˆåŠŸåï¼Œä¾æ—§å¯ä»¥è·³è½¬åˆ°é¦–é¡µï¼Œè¯¥æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// .logoutSuccessUrl(&quot;/&quot;); æ³¨é”€æˆåŠŸæ¥åˆ°é¦–é¡µ</span></span><br><span class="line">http.logout().logoutSuccessUrl(<span class="string">&quot;/&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ï¼Œæ³¨é”€å®Œæ¯•åï¼Œå‘ç°è·³è½¬åˆ°é¦–é¡µOK</p>
<h3 id="3-è®°ä½æˆ‘"><a href="#3-è®°ä½æˆ‘" class="headerlink" title="3. è®°ä½æˆ‘"></a>3. è®°ä½æˆ‘</h3><ul>
<li>æœ¬è´¨å°±æ˜¯å­˜ä¸€ä¸ªcookiesï¼Œé»˜è®¤ä¿å­˜2å‘¨</li>
</ul>
<p>ç°åœ¨çš„æƒ…å†µï¼Œæˆ‘ä»¬åªè¦ç™»å½•ä¹‹åï¼Œå…³é—­æµè§ˆå™¨ï¼Œå†ç™»å½•ï¼Œå°±ä¼šè®©æˆ‘ä»¬é‡æ–°ç™»å½•ï¼Œä½†æ˜¯å¾ˆå¤šç½‘ç«™çš„æƒ…å†µï¼Œå°±æ˜¯æœ‰ä¸€ä¸ªè®°ä½å¯†ç çš„åŠŸèƒ½ï¼Œè¿™ä¸ªè¯¥å¦‚ä½•å®ç°å‘¢ï¼Ÿå¾ˆç®€å•</p>
<p>1ã€å¼€å¯è®°ä½æˆ‘åŠŸèƒ½</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å®šåˆ¶è¯·æ±‚çš„æˆæƒè§„åˆ™</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">   <span class="comment">//è®°ä½æˆ‘</span></span><br><span class="line">   http.rememberMe();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2ã€æˆ‘ä»¬å†æ¬¡å¯åŠ¨é¡¹ç›®æµ‹è¯•ä¸€ä¸‹ï¼Œå‘ç°ç™»å½•é¡µå¤šäº†ä¸€ä¸ªè®°ä½æˆ‘åŠŸèƒ½ï¼Œæˆ‘ä»¬ç™»å½•ä¹‹åå…³é—­ æµè§ˆå™¨ï¼Œç„¶åé‡æ–°æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼Œå‘ç°ç”¨æˆ·ä¾æ—§å­˜åœ¨ï¼</p>
<p><strong>å®ç°åŸç†åœ¨æµè§ˆå™¨åŠ äº†cookie</strong></p>
<p>æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æµè§ˆå™¨çš„cookie</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1690075211312-cacbfa3b-9257-4d0c-aad2-01b15dde041c.png" alt="img"></p>
<p>3ã€æˆ‘ä»¬ç‚¹å‡»æ³¨é”€çš„æ—¶å€™ï¼Œå¯ä»¥å‘ç°ï¼Œspring security å¸®æˆ‘ä»¬è‡ªåŠ¨åˆ é™¤äº†è¿™ä¸ª cookie</p>
<p>4ã€ç»“è®ºï¼šç™»å½•æˆåŠŸåï¼Œå°†cookieå‘é€ç»™æµè§ˆå™¨ä¿å­˜ï¼Œä»¥åç™»å½•å¸¦ä¸Šè¿™ä¸ªcookieï¼Œåªè¦é€šè¿‡æ£€æŸ¥å°±å¯ä»¥å…ç™»å½•äº†ã€‚å¦‚æœç‚¹å‡»æ³¨é”€ï¼Œåˆ™ä¼šåˆ é™¤è¿™ä¸ªcookieï¼Œå…·ä½“çš„åŸç†æˆ‘ä»¬åœ¨JavaWebé˜¶æ®µéƒ½è®²è¿‡äº†ï¼Œè¿™é‡Œå°±ä¸åœ¨å¤šè¯´äº†ï¼</p>
<h3 id="4-ç™»å½•ç”¨æˆ·æƒé™æ˜¾ç¤ºé¡µé¢"><a href="#4-ç™»å½•ç”¨æˆ·æƒé™æ˜¾ç¤ºé¡µé¢" class="headerlink" title="4. ç™»å½•ç”¨æˆ·æƒé™æ˜¾ç¤ºé¡µé¢"></a>4. ç™»å½•ç”¨æˆ·æƒé™æ˜¾ç¤ºé¡µé¢</h3><p>æˆ‘ä»¬ç°åœ¨åˆæ¥ä¸€ä¸ªéœ€æ±‚ï¼šç”¨æˆ·æ²¡æœ‰ç™»å½•çš„æ—¶å€™ï¼Œå¯¼èˆªæ ä¸Šåªæ˜¾ç¤ºç™»å½•æŒ‰é’®ï¼Œç”¨æˆ·ç™»å½•ä¹‹åï¼Œå¯¼èˆªæ å¯ä»¥æ˜¾ç¤ºç™»å½•çš„ç”¨æˆ·ä¿¡æ¯åŠæ³¨é”€æŒ‰é’®ï¼è¿˜æœ‰å°±æ˜¯ï¼Œæ¯”å¦‚xiaowuè¿™ä¸ªç”¨æˆ·ï¼Œå®ƒåªæœ‰ vip2ï¼Œvip3åŠŸèƒ½ï¼Œé‚£ä¹ˆç™»å½•åˆ™åªæ˜¾ç¤ºè¿™ä¸¤ä¸ªåŠŸèƒ½ï¼Œè€Œvip1çš„åŠŸèƒ½èœå•ä¸æ˜¾ç¤ºï¼è¿™ä¸ªå°±æ˜¯çœŸå®çš„ç½‘ç«™æƒ…å†µäº†ï¼è¯¥å¦‚ä½•åšå‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬éœ€è¦ç»“åˆthymeleafä¸­çš„ä¸€äº›åŠŸèƒ½</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">sec:authorize</span>=<span class="string">&quot;!isAuthenticated()&quot;</span>&gt;</span> æœªç™»å½•æ˜¾ç¤º</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">sec:authorize</span>=<span class="string">&quot;isAuthenticated()&quot;</span>&gt;</span> ä»¥ç™»é™†æ˜¾ç¤º</span><br></pre></td></tr></table></figure>

<p>å¯¼å…¥thymeleafå’Œsecurityç»“åˆçš„Mavenä¾èµ–ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.thymeleaf.extras/thymeleaf-extras-springsecurity4 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.thymeleaf.extras<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf-extras-springsecurity5<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.4.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹æˆ‘ä»¬çš„ å‰ç«¯é¡µé¢</p>
<p>å¯¼å…¥å‘½åç©ºé—´</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">xmlns:sec=&quot;http://www.thymeleaf.org/thymeleaf-extras-springsecurity5&quot;</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹å¯¼èˆªæ ï¼Œå¢åŠ è®¤è¯åˆ¤æ–­</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;right menu&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¦‚æœæœªç™»å½• æ˜¾ç¤ºç™»é™†æŒ‰é’®ï¼Œå¦‚æœä»¥ç™»å½•ï¼Œæ˜¾ç¤ºç”¨æˆ·åå’Œæ³¨é”€æŒ‰é’®--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æœªç™»å½•--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¦‚æœæœªç™»å½•ï¼Œå°±æ˜¾ç¤ºç™»å½•æŒ‰é’®--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">sec:authorize</span>=<span class="string">&quot;!isAuthenticated()&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/toLogin&#125;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;address card icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> ç™»å½•</span><br><span class="line">        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å¦‚æœç™»å½•ï¼Œå°±æ˜¾ç¤ºç”¨æˆ·åå’Œæ³¨é”€--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">sec:authorize</span>=<span class="string">&quot;isAuthenticated()&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/logout&#125;&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--ä»æˆæƒé‚£é‡Œè·å–name--&gt;</span></span><br><span class="line">            ç”¨æˆ·åï¼š<span class="tag">&lt;<span class="name">span</span> <span class="attr">sec:authentication</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            è§’è‰²ï¼š<span class="tag">&lt;<span class="name">span</span> <span class="attr">sec:authentication</span>=<span class="string">&quot;principal.authorities&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">sec:authorize</span>=<span class="string">&quot;isAuthenticated()&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ³¨é”€--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/logout&#125;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;sign-out icon&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> æ³¨é”€</span><br><span class="line">        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>é‡å¯æµ‹è¯•ï¼Œæˆ‘ä»¬å¯ä»¥ç™»å½•è¯•è¯•çœ‹ï¼Œç™»å½•æˆåŠŸåç¡®å®ï¼Œæ˜¾ç¤ºäº†æˆ‘ä»¬æƒ³è¦çš„é¡µé¢ï¼›</p>
<p>å¦‚æœæ³¨é”€404äº†ï¼Œå°±æ˜¯å› ä¸ºå®ƒé»˜è®¤é˜²æ­¢csrfè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼Œå› ä¸ºä¼šäº§ç”Ÿå®‰å…¨é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¯·æ±‚æ”¹ä¸ºpostè¡¨å•æäº¤ï¼Œæˆ–è€…åœ¨spring securityä¸­å…³é—­csrfåŠŸèƒ½ï¼›æˆ‘ä»¬è¯•è¯•ï¼šåœ¨ é…ç½®ä¸­å¢åŠ  http.csrf().disable();</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">http.csrf().disable();<span class="comment">//å…³é—­csrfåŠŸèƒ½:è·¨ç«™è¯·æ±‚ä¼ªé€ ,é»˜è®¤åªèƒ½é€šè¿‡postæ–¹å¼æäº¤logoutè¯·æ±‚</span></span><br></pre></td></tr></table></figure>

<p>åˆ°ç›®å‰ä¸ºæ­¢å·²è¿‘å®ç°äº†æƒé™çš„è®¿é—®èµ„æºä¸åŒï¼Œæ¥ä¸‹æ¥è¿˜æƒ³å®ç°å¯¹ä¸åŒç”¨æˆ·çš„é¡µé¢æ˜¾ç¤ºå†…å®¹ä¸åŒï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">å…³é”®ä»£ç ï¼šsec:authorize=&quot;hasRole()&quot; //åˆ¤æ–­å½“å‰çš„æƒé™æ˜¯å¦æœ‰è¿™ä¸ªæƒé™ç›´æ¥åŠ åœ¨æƒ³è¦è®¾ç½®æƒé™çš„æ ‡ç­¾å†…å³å¯</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1690074372381-1fb2af9c-5b1b-42ad-9323-7cc5cbb2e9cd.png" alt="img"><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1690074499489-895b94fc-f913-48c4-98dd-d09f278aab5a.png" alt="img"></p>
<p><strong>é—®é¢˜****ï¼šæˆ‘ä»¬å› ä¸ºè®¾ç½®äº†æƒé™ï¼Œæ‰€ä»¥åœ¨æœªç™»å½•çš„æƒ…å†µä¸‹ä¸»é¡µé¢æ˜¯æ²¡æœ‰å†…å®¹ï¼Œå¿…é¡»ç™»å½•ï¼Œä½†æ˜¯å› ä¸ºæˆ‘ä»¬è®¾ç½®äº†ç™»å½•å»çš„æ˜¯æˆ‘ä»¬è‡ªå·±çš„loginé¡µé¢(ä¹‹å‰çš„ç™»å½•æ˜¯åœ¨ç‚¹å‡»æ²¡æœ‰æƒé™çš„é¡µé¢è‡ªå·±è·³è½¬çš„)çš„tologinæ–¹æ³•é»˜è®¤æäº¤æ–¹æ³•æ˜¯</strong></p>
<p><strong>@{&#x2F;usr&#x2F;login}ï¼Œæ”¹æˆ</strong>**@{&#x2F;login}**<strong>å°±è¡Œ</strong></p>
<p><strong>æ–¹æ³•äºŒï¼šæˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥åœ¨åœ°å€æ è¾“å…¥&#x2F;loginä¹Ÿèƒ½è¿›</strong></p>
<p><strong>ç¬”è®°é¡ºåºï¼šæ³¨é”€â€”&gt;å½“å‰å°ç»“â€”&gt;è®°ä½æˆ‘â€”&gt;å®šåˆ¶ç™»å½•é¡µé¢</strong></p>
<h1 id="æ•´åˆShiro"><a href="#æ•´åˆShiro" class="headerlink" title="æ•´åˆShiro"></a>æ•´åˆShiro</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p>shiroå®˜ç½‘ï¼š<a href="http://shiro.apache.org/%EF%BC%8C%E7%94%A8Idea%E8%A7%82%E7%9C%8B%E5%AE%98%E6%96%B9Quickstart%E6%BA%90%E7%A0%81%EF%BC%8C%E9%85%8D%E7%BD%AE%E8%BF%90%E8%A1%8C%E4%B8%80%E9%81%8D">http://shiro.apache.org/ï¼Œç”¨Ideaè§‚çœ‹å®˜æ–¹Quickstartæºç ï¼Œé…ç½®è¿è¡Œä¸€é</a></p>
<p>æ ¸å¿ƒä¸‰å¤§å¯¹è±¡ï¼šç”¨æˆ·Subject, ç®¡ç†ç”¨æˆ·SecurityManager, è¿æ¥æ•°æ®Realms</p>
<ul>
<li>Subjectï¼šå³â€œå½“å‰æ“ä½œç”¨æˆ·â€ã€‚ä½†æ˜¯ï¼Œåœ¨Shiroä¸­ï¼ŒSubjectè¿™ä¸€æ¦‚å¿µå¹¶ä¸ä»…ä»…æŒ‡äººï¼Œä¹Ÿå¯ä»¥æ˜¯ç¬¬ä¸‰æ–¹è¿›ç¨‹ã€åå°å¸æˆ·ï¼ˆDaemon Accountï¼‰æˆ–å…¶ä»–ç±»ä¼¼äº‹ç‰©ã€‚å®ƒä»…ä»…æ„å‘³ç€â€œå½“å‰è·Ÿè½¯ä»¶äº¤äº’çš„ä¸œè¥¿â€ã€‚</li>
<li>SecurityManagerï¼šå®ƒæ˜¯Shiroæ¡†æ¶çš„æ ¸å¿ƒï¼Œå…¸å‹çš„Facadeæ¨¡å¼ï¼ŒShiroé€šè¿‡SecurityManageræ¥ç®¡ç†å†…éƒ¨ç»„ä»¶å®ä¾‹ï¼Œå¹¶é€šè¿‡å®ƒæ¥æä¾›å®‰å…¨ç®¡ç†çš„å„ç§æœåŠ¡ã€‚</li>
<li>Realmï¼š Realmå……å½“äº†Shiroä¸åº”ç”¨å®‰å…¨æ•°æ®é—´çš„â€œæ¡¥æ¢â€æˆ–è€…â€œè¿æ¥å™¨â€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“å¯¹ç”¨æˆ·æ‰§è¡Œè®¤è¯ï¼ˆç™»å½•ï¼‰å’Œæˆæƒï¼ˆè®¿é—®æ§åˆ¶ï¼‰éªŒè¯æ—¶ï¼ŒShiroä¼šä»åº”ç”¨é…ç½®çš„Realmä¸­æŸ¥æ‰¾ç”¨æˆ·åŠå…¶æƒé™ä¿¡æ¯ã€‚ä»è¿™ä¸ªæ„ä¹‰ä¸Šè®²ï¼ŒRealmå®è´¨ä¸Šæ˜¯ä¸€ä¸ªå®‰å…¨ç›¸å…³çš„DAOï¼šå®ƒå°è£…äº†æ•°æ®æºçš„è¿æ¥ç»†èŠ‚ï¼Œå¹¶åœ¨éœ€è¦æ—¶å°†ç›¸å…³æ•°æ®æä¾›ç»™Shiroã€‚å½“é…ç½®Shiroæ—¶ï¼Œä½ å¿…é¡»è‡³å°‘æŒ‡å®šä¸€ä¸ªRealmï¼Œç”¨äºè®¤è¯å’Œï¼ˆæˆ–ï¼‰æˆæƒã€‚é…ç½®å¤šä¸ªRealmæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯è‡³å°‘éœ€è¦ä¸€ä¸ªã€‚</li>
</ul>
<h3 id="åŠŸèƒ½"><a href="#åŠŸèƒ½" class="headerlink" title="åŠŸèƒ½"></a>åŠŸèƒ½</h3><p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692605658265-2735b8ca-a484-47db-98d5-fdfedafbf6bf.png" alt="img"></p>
<p>Authenticationï¼šèº«ä»½è®¤è¯&#x2F;ç™»å½•ï¼ŒéªŒè¯ç”¨æˆ·æ˜¯ä¸æ˜¯æ‹¥æœ‰ç›¸åº”çš„èº«ä»½ï¼›</p>
<p>Authorizationï¼šæˆæƒï¼Œå³æƒé™éªŒè¯ï¼ŒéªŒè¯æŸä¸ªå·²è®¤è¯çš„ç”¨æˆ·æ˜¯å¦æ‹¥æœ‰æŸä¸ªæƒé™ï¼›å³åˆ¤æ–­ç”¨æˆ·æ˜¯å¦èƒ½åšäº‹æƒ…ï¼Œå¸¸è§çš„å¦‚ï¼šéªŒè¯æŸä¸ªç”¨æˆ·æ˜¯å¦æ‹¥æœ‰æŸä¸ªè§’è‰²ã€‚æˆ–è€…ç»†ç²’åº¦çš„éªŒè¯æŸä¸ªç”¨æˆ·å¯¹æŸä¸ªèµ„æºæ˜¯å¦å…·æœ‰æŸä¸ªæƒé™ï¼›</p>
<p>Session Managerï¼šä¼šè¯ç®¡ç†ï¼Œå³ç”¨æˆ·ç™»å½•åå°±æ˜¯ä¸€æ¬¡ä¼šè¯ï¼Œåœ¨æ²¡æœ‰é€€å‡ºä¹‹å‰ï¼Œå®ƒçš„æ‰€æœ‰ä¿¡æ¯éƒ½åœ¨ä¼šè¯ä¸­ï¼›ä¼šè¯å¯ä»¥æ˜¯æ™®é€šJavaSEç¯å¢ƒçš„ï¼Œä¹Ÿå¯ä»¥æ˜¯å¦‚Webç¯å¢ƒçš„ï¼›</p>
<p>Cryptographyï¼šåŠ å¯†ï¼Œä¿æŠ¤æ•°æ®çš„å®‰å…¨æ€§ï¼Œå¦‚å¯†ç åŠ å¯†å­˜å‚¨åˆ°æ•°æ®åº“ï¼Œè€Œä¸æ˜¯æ˜æ–‡å­˜å‚¨ï¼›</p>
<p>Web Supportï¼šWebæ”¯æŒï¼Œå¯ä»¥éå¸¸å®¹æ˜“çš„é›†æˆåˆ°Webç¯å¢ƒï¼›</p>
<p>Cachingï¼šç¼“å­˜ï¼Œæ¯”å¦‚ç”¨æˆ·ç™»å½•åï¼Œå…¶ç”¨æˆ·ä¿¡æ¯ã€æ‹¥æœ‰çš„è§’è‰²&#x2F;æƒé™ä¸å¿…æ¯æ¬¡å»æŸ¥ï¼Œè¿™æ ·å¯ä»¥æé«˜æ•ˆç‡ï¼›</p>
<p>Concurrencyï¼šshiroæ”¯æŒå¤šçº¿ç¨‹åº”ç”¨çš„å¹¶å‘éªŒè¯ï¼Œå³å¦‚åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­å¼€å¯å¦ä¸€ä¸ªçº¿ç¨‹ï¼Œèƒ½æŠŠæƒé™è‡ªåŠ¨ä¼ æ’­è¿‡å»ï¼›</p>
<p>Testingï¼šæä¾›æµ‹è¯•æ”¯æŒï¼›</p>
<p>Run Asï¼šå…è®¸ä¸€ä¸ªç”¨æˆ·å‡è£…ä¸ºå¦ä¸€ä¸ªç”¨æˆ·ï¼ˆå¦‚æœä»–ä»¬å…è®¸ï¼‰çš„èº«ä»½è¿›è¡Œè®¿é—®ï¼›</p>
<p>Remember Meï¼šè®°ä½æˆ‘ï¼Œè¿™ä¸ªæ˜¯éå¸¸å¸¸è§çš„åŠŸèƒ½ï¼Œå³ä¸€æ¬¡ç™»å½•åï¼Œä¸‹æ¬¡å†æ¥çš„è¯ä¸ç”¨ç™»å½•äº†ã€‚</p>
<h3 id="ä»å¤–éƒ¨çœ‹"><a href="#ä»å¤–éƒ¨çœ‹" class="headerlink" title="ä»å¤–éƒ¨çœ‹"></a>ä»å¤–éƒ¨çœ‹</h3><p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692605684800-e31f0233-b20c-4993-9823-c0a5ec0ca1da.png" alt="img"></p>
<p>åº”ç”¨ä»£ç ç›´æ¥äº¤äº’çš„å¯¹è±¡æ˜¯Subjectï¼Œä¹Ÿå°±æ˜¯è¯´Shiroçš„å¯¹å¤–APIæ ¸å¿ƒå°±æ˜¯Subjectï¼›å…¶æ¯ä¸ªAPIçš„å«ä¹‰ï¼š</p>
<p> Subjectï¼šä¸»ä½“ï¼Œä»£è¡¨äº†å½“å‰â€œç”¨æˆ·â€ï¼Œè¿™ä¸ªç”¨æˆ·ä¸ä¸€å®šæ˜¯ä¸€ä¸ªå…·ä½“çš„äººï¼Œä¸å½“å‰åº”ç”¨äº¤äº’çš„ä»»ä½•ä¸œè¥¿éƒ½æ˜¯Subjectï¼Œå¦‚ç½‘ç»œçˆ¬è™«ï¼Œæœºå™¨äººç­‰ï¼›å³ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µï¼›æ‰€æœ‰Subjectéƒ½ç»‘å®šåˆ°SecurityManagerï¼Œä¸Subjectçš„æ‰€æœ‰äº¤äº’éƒ½ä¼šå§”æ‰˜ç»™SecurityManagerï¼›å¯ä»¥æŠŠSubjectè®¤ä¸ºæ˜¯ä¸€ä¸ªé—¨é¢ï¼›SecurityManageræ‰æ˜¯å®é™…çš„æ‰§è¡Œè€…ï¼›</p>
<p> SecurityManagerï¼šå®‰å…¨ç®¡ç†å™¨ï¼›å³æ‰€æœ‰ä¸å®‰å…¨æœ‰å…³çš„æ“ä½œéƒ½ä¼šä¸SecurityManageräº¤äº’ï¼›ä¸”å®ƒç®¡ç†ç€æ‰€æœ‰Subjectï¼›å¯ä»¥çœ‹å‡ºå®ƒæ˜¯Shiroçš„æ ¸å¿ƒï¼Œå®ƒè´Ÿè´£ä¸åè¾¹ä»‹ç»çš„å…¶ä»–ç»„ä»¶è¿›è¡Œäº¤äº’ï¼Œå¦‚æœå­¦ä¹ è¿‡SpringMVCï¼Œä½ å¯ä»¥æŠŠå®ƒçœ‹æˆDispatcherServletå‰ç«¯æ§åˆ¶å™¨ï¼›</p>
<p> Realmï¼šåŸŸï¼ŒShiroä»ä»Realmè·å–å®‰å…¨æ•°æ®ï¼ˆå¦‚ç”¨æˆ·ã€è§’è‰²ã€æƒé™ï¼‰ï¼Œå°±æ˜¯è¯´SecurityManagerè¦éªŒè¯ç”¨æˆ·èº«ä»½ï¼Œé‚£ä¹ˆå®ƒéœ€è¦ä»Realmè·å–ç›¸åº”çš„ç”¨æˆ·è¿›è¡Œæ¯”è¾ƒä»¥ç¡®å®šç”¨æˆ·èº«ä»½æ˜¯å¦åˆæ³•ï¼›ä¹Ÿéœ€è¦ä»Realmå¾—åˆ°ç”¨æˆ·ç›¸åº”çš„è§’è‰²&#x2F;æƒé™è¿›è¡ŒéªŒè¯ç”¨æˆ·æ˜¯å¦èƒ½è¿›è¡Œæ“ä½œï¼›å¯ä»¥æŠŠRealmçœ‹æˆDataSourceï¼Œå³å®‰å…¨æ•°æ®æºã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´å¯¹äºæˆ‘ä»¬è€Œè¨€ï¼Œæœ€ç®€å•çš„ä¸€ä¸ªShiroåº”ç”¨ï¼š</p>
<ol>
<li>åº”ç”¨ä»£ç é€šè¿‡Subjectæ¥è¿›è¡Œè®¤è¯å’Œæˆæƒï¼Œè€ŒSubjectåˆå§”æ‰˜ç»™SecurityManagerï¼›</li>
<li>æˆ‘ä»¬éœ€è¦ç»™Shiroçš„SecurityManageræ³¨å…¥Realmï¼Œä»è€Œè®©SecurityManagerèƒ½å¾—åˆ°åˆæ³•çš„ç”¨æˆ·åŠå…¶æƒé™è¿›è¡Œåˆ¤æ–­ã€‚</li>
</ol>
<p>ä»ä»¥ä¸Šä¹Ÿå¯ä»¥çœ‹å‡ºï¼ŒShiroä¸æä¾›ç»´æŠ¤ç”¨æˆ·&#x2F;æƒé™ï¼Œè€Œæ˜¯é€šè¿‡Realmè®©å¼€å‘äººå‘˜è‡ªå·±æ³¨å…¥</p>
<h3 id="å¤–éƒ¨æ¶æ„"><a href="#å¤–éƒ¨æ¶æ„" class="headerlink" title="å¤–éƒ¨æ¶æ„"></a>å¤–éƒ¨æ¶æ„</h3><p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692605715678-6b517015-9f1a-43c8-ae3d-ace2576dabe7.png" alt="img"></p>
<p>Subjectï¼šä¸»ä½“ï¼Œå¯ä»¥çœ‹åˆ°ä¸»ä½“å¯ä»¥æ˜¯ä»»ä½•å¯ä»¥ä¸åº”ç”¨äº¤äº’çš„â€œç”¨æˆ·â€ï¼›</p>
<p>SecurityManagerï¼šç›¸å½“äºSpringMVCä¸­çš„DispatcherServletæˆ–è€…Struts2ä¸­çš„FilterDispatcherï¼›æ˜¯Shiroçš„å¿ƒè„ï¼›æ‰€æœ‰å…·ä½“çš„äº¤äº’éƒ½é€šè¿‡SecurityManagerè¿›è¡Œæ§åˆ¶ï¼›å®ƒç®¡ç†ç€æ‰€æœ‰Subjectã€ä¸”è´Ÿè´£è¿›è¡Œè®¤è¯å’Œæˆæƒã€åŠä¼šè¯ã€ç¼“å­˜çš„ç®¡ç†ã€‚</p>
<p>Authenticatorï¼šè®¤è¯å™¨ï¼Œè´Ÿè´£ä¸»ä½“è®¤è¯çš„ï¼Œè¿™æ˜¯ä¸€ä¸ªæ‰©å±•ç‚¹ï¼Œå¦‚æœç”¨æˆ·è§‰å¾—Shiroé»˜è®¤çš„ä¸å¥½ï¼Œå¯ä»¥è‡ªå®šä¹‰å®ç°ï¼›å…¶éœ€è¦è®¤è¯ç­–ç•¥ï¼ˆAuthentication Strategyï¼‰ï¼Œå³ä»€ä¹ˆæƒ…å†µä¸‹ç®—ç”¨æˆ·è®¤è¯é€šè¿‡äº†ï¼›</p>
<p>Authrizerï¼šæˆæƒå™¨ï¼Œæˆ–è€…è®¿é—®æ§åˆ¶å™¨ï¼Œç”¨æ¥å†³å®šä¸»ä½“æ˜¯å¦æœ‰æƒé™è¿›è¡Œç›¸åº”çš„æ“ä½œï¼›å³æ§åˆ¶ç€ç”¨æˆ·èƒ½è®¿é—®åº”ç”¨ä¸­çš„å“ªäº›åŠŸèƒ½ï¼›</p>
<p>Realmï¼šå¯ä»¥æœ‰1ä¸ªæˆ–å¤šä¸ªRealmï¼Œå¯ä»¥è®¤ä¸ºæ˜¯å®‰å…¨å®ä½“æ•°æ®æºï¼Œå³ç”¨äºè·å–å®‰å…¨å®ä½“çš„ï¼›å¯ä»¥æ˜¯JDBCå®ç°ï¼Œä¹Ÿå¯ä»¥æ˜¯LDAPå®ç°ï¼Œæˆ–è€…å†…å­˜å®ç°ç­‰ç­‰ï¼›ç”±ç”¨æˆ·æä¾›ï¼›æ³¨æ„ï¼šShiroä¸çŸ¥é“ä½ çš„ç”¨æˆ·&#x2F;æƒé™å­˜å‚¨åœ¨å“ªåŠä»¥ä½•ç§æ ¼å¼å­˜å‚¨ï¼›æ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬åœ¨åº”ç”¨ä¸­éƒ½éœ€è¦å®ç°è‡ªå·±çš„Realmï¼›</p>
<p>SessionManagerï¼šå¦‚æœå†™è¿‡Servletå°±åº”è¯¥çŸ¥é“Sessionçš„æ¦‚å¿µï¼ŒSessionå‘¢éœ€è¦æœ‰äººå»ç®¡ç†å®ƒçš„ç”Ÿå‘½å‘¨æœŸï¼Œè¿™ä¸ªç»„ä»¶å°±æ˜¯SessionManagerï¼›è€ŒShiroå¹¶ä¸ä»…ä»…å¯ä»¥ç”¨åœ¨Webç¯å¢ƒï¼Œä¹Ÿå¯ä»¥ç”¨åœ¨å¦‚æ™®é€šçš„JavaSEç¯å¢ƒã€EJBç­‰ç¯å¢ƒï¼›æ‰€æœ‰å‘¢ï¼ŒShiroå°±æŠ½è±¡äº†ä¸€ä¸ªè‡ªå·±çš„Sessionæ¥ç®¡ç†ä¸»ä½“ä¸åº”ç”¨ä¹‹é—´äº¤äº’çš„æ•°æ®ï¼›è¿™æ ·çš„è¯ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨Webç¯å¢ƒç”¨ï¼Œåˆšå¼€å§‹æ˜¯ä¸€å°WebæœåŠ¡å™¨ï¼›æ¥ç€åˆä¸Šäº†å°EJBæœåŠ¡å™¨ï¼›è¿™æ—¶æƒ³æŠŠä¸¤å°æœåŠ¡å™¨çš„ä¼šè¯æ•°æ®æ”¾åˆ°ä¸€ä¸ªåœ°æ–¹ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥å®ç°è‡ªå·±çš„åˆ†å¸ƒå¼ä¼šè¯ï¼ˆå¦‚æŠŠæ•°æ®æ”¾åˆ°MemcachedæœåŠ¡å™¨ï¼‰ï¼›</p>
<p>SessionDAOï¼šDAOå¤§å®¶éƒ½ç”¨è¿‡ï¼Œæ•°æ®è®¿é—®å¯¹è±¡ï¼Œç”¨äºä¼šè¯çš„CRUDï¼Œæ¯”å¦‚æˆ‘ä»¬æƒ³æŠŠSessionä¿å­˜åˆ°æ•°æ®åº“ï¼Œé‚£ä¹ˆå¯ä»¥å®ç°è‡ªå·±çš„SessionDAOï¼Œé€šè¿‡å¦‚JDBCå†™åˆ°æ•°æ®åº“ï¼›æ¯”å¦‚æƒ³æŠŠSessionæ”¾åˆ°Memcachedä¸­ï¼Œå¯ä»¥å®ç°è‡ªå·±çš„Memcached SessionDAOï¼›å¦å¤–SessionDAOä¸­å¯ä»¥ä½¿ç”¨Cacheè¿›è¡Œç¼“å­˜ï¼Œä»¥æé«˜æ€§èƒ½ï¼›</p>
<p>CacheManagerï¼šç¼“å­˜æ§åˆ¶å™¨ï¼Œæ¥ç®¡ç†å¦‚ç”¨æˆ·ã€è§’è‰²ã€æƒé™ç­‰çš„ç¼“å­˜çš„ï¼›å› ä¸ºè¿™äº›æ•°æ®åŸºæœ¬ä¸Šå¾ˆå°‘å»æ”¹å˜ï¼Œæ”¾åˆ°ç¼“å­˜ä¸­åå¯ä»¥æé«˜è®¿é—®çš„æ€§èƒ½</p>
<p>Cryptographyï¼šå¯†ç æ¨¡å—ï¼ŒShiroæé«˜äº†ä¸€äº›å¸¸è§çš„åŠ å¯†ç»„ä»¶ç”¨äºå¦‚å¯†ç åŠ å¯†&#x2F;è§£å¯†çš„</p>
<h3 id="è®¤è¯æµç¨‹"><a href="#è®¤è¯æµç¨‹" class="headerlink" title="è®¤è¯æµç¨‹"></a>è®¤è¯æµç¨‹</h3><p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692605738822-9038494c-5035-4afc-ab2b-249264a569f4.png" alt="img"></p>
<p><strong>ç”¨æˆ·</strong> æäº¤ <strong>èº«ä»½ä¿¡æ¯ã€å‡­è¯ä¿¡æ¯</strong> å°è£…æˆ <strong>ä»¤ç‰Œ</strong> äº¤ç”± <strong>å®‰å…¨ç®¡ç†å™¨</strong> è®¤è¯</p>
<h2 id="quickstart-å¿«é€Ÿå…¥é—¨"><a href="#quickstart-å¿«é€Ÿå…¥é—¨" class="headerlink" title="quickstart(å¿«é€Ÿå…¥é—¨)"></a>quickstart(å¿«é€Ÿå…¥é—¨)</h2><p>å°†æ¡ˆä¾‹æ‹·è´ï¼š</p>
<p>æŒ‰ç…§å®˜ç½‘æç¤ºæ‰¾åˆ° å¿«é€Ÿå…¥é—¨æ¡ˆä¾‹</p>
<p>GitHubåœ°å€ï¼šshiro&#x2F;samples&#x2F;quickstart&#x2F;</p>
<p>ä»GitHub çš„æ–‡ä»¶ä¸­å¯ä»¥çœ‹å‡ºè¿™ä¸ªå¿«é€Ÿå…¥é—¨æ¡ˆä¾‹æ˜¯ä¸€ä¸ª Maven é¡¹ç›®</p>
<p>1.æ–°å»ºä¸€ä¸ª Maven å·¥ç¨‹ï¼Œåˆ é™¤å…¶ src ç›®å½•ï¼Œå°†å…¶ä½œä¸ºçˆ¶å·¥ç¨‹</p>
<p>2.åœ¨çˆ¶å·¥ç¨‹ä¸­æ–°å»ºä¸€ä¸ª Maven æ¨¡å—</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692605371730-4ac69dd7-dec4-433f-bf0c-6b1a75ea0b07.png" alt="img"></p>
<p>1.å¯¼å…¥ä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.shiro/shiro-core --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.slf4j/jcl-over-slf4j --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jcl-over-slf4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.21<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">       <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-log4j12 --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.21<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">       <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2.é…é¥°shiro.ini</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">[users]</span></span><br><span class="line"><span class="comment"># user &#x27;root&#x27; with password &#x27;secret&#x27; and the &#x27;admin&#x27; role</span></span><br><span class="line"><span class="attr">root</span> = <span class="string">secret, admin</span></span><br><span class="line"><span class="comment"># user &#x27;guest&#x27; with the password &#x27;guest&#x27; and the &#x27;guest&#x27; role</span></span><br><span class="line"><span class="attr">guest</span> = <span class="string">guest, guest</span></span><br><span class="line"><span class="comment"># user &#x27;presidentskroob&#x27; with password &#x27;12345&#x27; (&quot;That&#x27;s the same combination on</span></span><br><span class="line"><span class="comment"># my luggage!!!&quot; ;)), and role &#x27;president&#x27;</span></span><br><span class="line"><span class="attr">presidentskroob</span> = <span class="string">12345, president</span></span><br><span class="line"><span class="comment"># user &#x27;darkhelmet&#x27; with password &#x27;ludicrousspeed&#x27; and roles &#x27;darklord&#x27; and &#x27;schwartz&#x27;</span></span><br><span class="line"><span class="attr">darkhelmet</span> = <span class="string">ludicrousspeed, darklord, schwartz</span></span><br><span class="line"><span class="comment"># user &#x27;lonestarr&#x27; with password &#x27;vespa&#x27; and roles &#x27;goodguy&#x27; and &#x27;schwartz&#x27;</span></span><br><span class="line"><span class="attr">lonestarr</span> = <span class="string">vespa, goodguy, schwartz</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Roles with assigned permissions</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Each line conforms to the format defined in the</span></span><br><span class="line"><span class="comment"># org.apache.shiro.realm.text.TextConfigurationRealm#setRoleDefinitions JavaDoc</span></span><br><span class="line"><span class="comment"># -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="attr">[roles]</span></span><br><span class="line"><span class="comment"># &#x27;admin&#x27; role has all permissions, indicated by the wildcard &#x27;*&#x27;</span></span><br><span class="line"><span class="attr">admin</span> = <span class="string">*</span></span><br><span class="line"><span class="comment"># The &#x27;schwartz&#x27; role can do anything (*) with any lightsaber:</span></span><br><span class="line"><span class="attr">schwartz</span> = <span class="string">lightsaber:*</span></span><br><span class="line"><span class="comment"># The &#x27;goodguy&#x27; role is allowed to &#x27;drive&#x27; (action) the winnebago (type) with</span></span><br><span class="line"><span class="comment"># license plate &#x27;eagle5&#x27; (instance specific id)</span></span><br><span class="line"><span class="attr">goodguy</span> = <span class="string">winnebago:drive:eagle5</span></span><br></pre></td></tr></table></figure>

<p>okéœ€è¦ä¸‹è½½iniæ’ä»¶ï¼Œå¦‚æœåœ¨settingä¸­æ— æ³•ä¸‹è½½ï¼Œå°±å»å®˜ç½‘ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„ç„¶åå¯¼å…¥</p>
<p>[è§£å†³IDEAæ— æ³•ä½¿ç”¨.iniæ–‡ä»¶](<a href="https://blog.csdn.net/qq_43521797/article/details/115473267#:~:text=%E8%A7%A3%E5%86%B3">https://blog.csdn.net/qq_43521797/article/details/115473267#:~:text=è§£å†³</a> 1.ä¸‹è½½ ini4Idea æ’ä»¶ï¼Œä½¿IDEAæ”¯æŒ ini,æ–‡ä»¶ è®¾ç½®ï¼šFileâ€”-settingsâ€”-pluginsâ€”-æœç´¢ Ini å®‰è£…å®Œæˆé‡å¯å³å¯ï¼ 2.å¦‚æœé‡å¯åè¿˜ä¸å¥½ä½¿ï¼Œéœ€è¦æ‰‹åŠ¨æ·»åŠ ä¸€ä¸‹ï¼)</p>
<h3 id="iniæ’ä»¶å®‰è£…å’Œé…ç½®"><a href="#iniæ’ä»¶å®‰è£…å’Œé…ç½®" class="headerlink" title="iniæ’ä»¶å®‰è£…å’Œé…ç½®"></a>iniæ’ä»¶å®‰è£…å’Œé…ç½®</h3><p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692606025093-b1020850-36fd-4d3b-98aa-aa25046bc717.png" alt="img"></p>
<p>3.log4j</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">log4j.rootLogger</span>=<span class="string">INFO, stdout</span></span><br><span class="line"></span><br><span class="line"><span class="attr">log4j.appender.stdout</span>=<span class="string">org.apache.log4j.ConsoleAppender</span></span><br><span class="line"><span class="attr">log4j.appender.stdout.layout</span>=<span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="attr">log4j.appender.stdout.layout.ConversionPattern</span>=<span class="string">%d %p [%c] - %m %n</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># General Apache libraries</span></span><br><span class="line"><span class="attr">log4j.logger.org.apache</span>=<span class="string">WARN</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># Spring</span></span><br><span class="line"><span class="attr">log4j.logger.org.springframework</span>=<span class="string">WARN</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># Default Shiro logging</span></span><br><span class="line"><span class="attr">log4j.logger.org.apache.shiro</span>=<span class="string">INFO</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># Disable verbose logging</span></span><br><span class="line"><span class="attr">log4j.logger.org.apache.shiro.util.ThreadContext</span>=<span class="string">WARN</span></span><br><span class="line"><span class="attr">log4j.logger.org.apache.shiro.cache.ehcache.EhCache</span>=<span class="string">WARN</span></span><br></pre></td></tr></table></figure>

<p>4.quickstart</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.shiro.SecurityUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.*;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.config.IniSecurityManagerFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.mgt.DefaultSecurityManager;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.realm.text.IniRealm;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.session.Session;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.Subject;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.util.Factory;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@ClassName</span> Quickstart</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> GuoSheng</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2021/4/20  17:28</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Quickstart</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">transient</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(Quickstart.class);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// The easiest way to create a Shiro SecurityManager with configured</span></span><br><span class="line">        <span class="comment">// realms, users, roles and permissions is to use the simple INI config.</span></span><br><span class="line">        <span class="comment">// We&#x27;ll do that by using a factory that can ingest a .ini file and</span></span><br><span class="line">        <span class="comment">// return a SecurityManager instance:</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// Use the shiro.ini file at the root of the classpath</span></span><br><span class="line">        <span class="comment">// (file: and url: prefixes load from files and urls respectively):</span></span><br><span class="line">        DefaultSecurityManager defaultSecurityManager=<span class="keyword">new</span> <span class="title class_">DefaultSecurityManager</span>();</span><br><span class="line">        IniRealm iniRealm=<span class="keyword">new</span> <span class="title class_">IniRealm</span>(<span class="string">&quot;classpath:shiro.ini&quot;</span>);</span><br><span class="line">        defaultSecurityManager.setRealm(iniRealm);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">// for this simple example quickstart, make the SecurityManager</span></span><br><span class="line">        <span class="comment">// accessible as a JVM singleton.  Most applications wouldn&#x27;t do this</span></span><br><span class="line">        <span class="comment">// and instead rely on their container configuration or web.xml for</span></span><br><span class="line">        <span class="comment">// webapps.  That is outside the scope of this simple quickstart, so</span></span><br><span class="line">        <span class="comment">// we&#x27;ll just do the bare minimum so you can continue to get a feel</span></span><br><span class="line">        <span class="comment">// for things.</span></span><br><span class="line">        SecurityUtils.setSecurityManager(defaultSecurityManager);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Now that a simple Shiro environment is set up, let&#x27;s see what you can do:</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// get the currently executing user:</span></span><br><span class="line">        <span class="type">Subject</span> <span class="variable">currentUser</span> <span class="operator">=</span> SecurityUtils.getSubject();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Do some stuff with a Session (no need for a web or EJB container!!!)</span></span><br><span class="line">        <span class="type">Session</span> <span class="variable">session</span> <span class="operator">=</span> currentUser.getSession();</span><br><span class="line">        session.setAttribute(<span class="string">&quot;someKey&quot;</span>, <span class="string">&quot;aValue&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> (String) session.getAttribute(<span class="string">&quot;someKey&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (value.equals(<span class="string">&quot;aValue&quot;</span>)) &#123;</span><br><span class="line">            log.info(<span class="string">&quot;Retrieved the correct value! [&quot;</span> + value + <span class="string">&quot;]&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// let&#x27;s login the current user so we can check against roles and permissions:</span></span><br><span class="line">        <span class="keyword">if</span> (!currentUser.isAuthenticated()) &#123;</span><br><span class="line">            <span class="type">UsernamePasswordToken</span> <span class="variable">token</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UsernamePasswordToken</span>(<span class="string">&quot;lonestarr&quot;</span>, <span class="string">&quot;vespa&quot;</span>);</span><br><span class="line">            token.setRememberMe(<span class="literal">true</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                currentUser.login(token);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (UnknownAccountException uae) &#123;</span><br><span class="line">                log.info(<span class="string">&quot;There is no user with username of &quot;</span> + token.getPrincipal());</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IncorrectCredentialsException ice) &#123;</span><br><span class="line">                log.info(<span class="string">&quot;Password for account &quot;</span> + token.getPrincipal() + <span class="string">&quot; was incorrect!&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (LockedAccountException lae) &#123;</span><br><span class="line">                log.info(<span class="string">&quot;The account for username &quot;</span> + token.getPrincipal() + <span class="string">&quot; is locked.  &quot;</span> +</span><br><span class="line">                        <span class="string">&quot;Please contact your administrator to unlock it.&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// ... catch more exceptions here (maybe custom ones specific to your application?</span></span><br><span class="line">            <span class="keyword">catch</span> (AuthenticationException ae) &#123;</span><br><span class="line">                <span class="comment">//unexpected condition?  error?</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//say who they are:</span></span><br><span class="line">        <span class="comment">//print their identifying principal (in this case, a username):</span></span><br><span class="line">        log.info(<span class="string">&quot;User [&quot;</span> + currentUser.getPrincipal() + <span class="string">&quot;] logged in successfully.&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//test a role:</span></span><br><span class="line">        <span class="keyword">if</span> (currentUser.hasRole(<span class="string">&quot;schwartz&quot;</span>)) &#123;</span><br><span class="line">            log.info(<span class="string">&quot;May the Schwartz be with you!&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            log.info(<span class="string">&quot;Hello, mere mortal.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//test a typed permission (not instance-level)</span></span><br><span class="line">        <span class="keyword">if</span> (currentUser.isPermitted(<span class="string">&quot;lightsaber:wield&quot;</span>)) &#123;</span><br><span class="line">            log.info(<span class="string">&quot;You may use a lightsaber ring.  Use it wisely.&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            log.info(<span class="string">&quot;Sorry, lightsaber rings are for schwartz masters only.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//a (very powerful) Instance Level permission:</span></span><br><span class="line">        <span class="keyword">if</span> (currentUser.isPermitted(<span class="string">&quot;winnebago:drive:eagle5&quot;</span>)) &#123;</span><br><span class="line">            log.info(<span class="string">&quot;You are permitted to &#x27;drive&#x27; the winnebago with license plate (id) &#x27;eagle5&#x27;.  &quot;</span> +</span><br><span class="line">                    <span class="string">&quot;Here are the keys - have fun!&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            log.info(<span class="string">&quot;Sorry, you aren&#x27;t allowed to drive the &#x27;eagle5&#x27; winnebago!&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//all done - log out!</span></span><br><span class="line">        currentUser.logout();</span><br><span class="line"></span><br><span class="line">        System.exit(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é—®é¢˜ï¼š</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692607049278-8ee757d0-fb28-4cbe-873b-6596d1acbdb3.png" alt="img"></p>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692607077528-6f710d69-08a5-43db-ba82-7a3a9cc6857f.png" alt="img"></p>
<p>æ‰§è¡Œä¸€ä¸‹mainæ–¹æ³•ï¼š</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692607110998-51849089-2c67-45e8-b5fe-8e0cca21418f.png" alt="img"></p>
<p>Spring Secutrityä¹Ÿæœ‰çš„æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é€šè¿‡ SecurityUtils è·å–å½“å‰æ‰§è¡Œçš„ç”¨æˆ· Subject</span></span><br><span class="line"><span class="type">Subject</span> <span class="variable">currentUser</span> <span class="operator">=</span> SecurityUtils.getSubject();</span><br><span class="line"><span class="comment">// é€šè¿‡ å½“å‰ç”¨æˆ·æ‹¿åˆ° Session,shiroçš„session</span></span><br><span class="line"><span class="type">Session</span> <span class="variable">session</span> <span class="operator">=</span> currentUser.getSession();</span><br><span class="line"><span class="comment">//åˆ¤æ–­ç”¨æˆ·æ˜¯å¦è¢«è®¤è¯</span></span><br><span class="line">currentUser.isAuthenticated()</span><br><span class="line"><span class="comment">//æ‰“å°å…¶æ ‡è¯†ä¸»ä½“</span></span><br><span class="line">currentUser.getPrincipal()</span><br><span class="line"><span class="comment">//è®¾ç½®è§’è‰²</span></span><br><span class="line">currentUser.hasRole(<span class="string">&quot;schwartz&quot;</span>)</span><br><span class="line"><span class="comment">//è®¾ç½®ç”¨æˆ·æˆæƒ</span></span><br><span class="line">currentUser.isPermitted(<span class="string">&quot;lightsaber:wield&quot;</span>)</span><br><span class="line"><span class="comment">//æ³¨é”€</span></span><br><span class="line">currentUser.logout();</span><br></pre></td></tr></table></figure>

<h2 id="SpringBooté›†æˆ"><a href="#SpringBooté›†æˆ" class="headerlink" title="SpringBooté›†æˆ"></a>SpringBooté›†æˆ</h2><ol>
<li>åœ¨åˆšåˆšçš„çˆ¶é¡¹ç›®ä¸­æ–°å»ºä¸€ä¸ª springboot æ¨¡å—</li>
<li>å¯¼å…¥ SpringBoot å’Œ Shiro æ•´åˆåŒ…çš„ä¾èµ–</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--SpringBoot å’Œ Shiro æ•´åˆåŒ…--&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.shiro/shiro-spring-boot-web-starter --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-spring-boot-web-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä¸‹é¢æ˜¯ç¼–å†™é…ç½®æ–‡ä»¶</p>
<p>Shiro ä¸‰å¤§è¦ç´ </p>
<p>subject -&gt; ShiroFilterFactoryBean â€”-å½“å‰ç”¨æˆ·</p>
<p>securityManager -&gt; DefaultWebSecurityManager â€”-ç®¡ç†æ‰€æœ‰ç”¨æˆ·</p>
<p>Realm</p>
<p>å®é™…æ“ä½œä¸­å¯¹è±¡åˆ›å»ºçš„é¡ºåº ï¼š realm -&gt; securityManager -&gt; subject â€”-è¿æ¥æ•°æ®</p>
<p>3.åˆ›å»ºconfigæ–‡ä»¶ï¼Œç¼–å†™UserRealm.javaç»§æ‰¿AuthorizingRealmå¹¶å®ç°æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserRealm</span> <span class="keyword">extends</span> <span class="title class_">AuthorizingRealm</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æˆæƒ</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> AuthorizationInfo <span class="title function_">doGetAuthorizationInfo</span><span class="params">(PrincipalCollection principalCollection)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ‰§è¡Œäº†æˆæƒæ–¹æ³•&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¤è¯</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> AuthenticationInfo <span class="title function_">doGetAuthenticationInfo</span><span class="params">(AuthenticationToken authenticationToken)</span> <span class="keyword">throws</span> AuthenticationException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ‰§è¡Œäº†è®¤è¯æ–¹æ³•&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥ä¸¤ä¸ªæ–¹æ³•çš„åŠŸèƒ½ä¸»è¦å®ç°äº†æˆæƒå’Œè®¤è¯ï¼Œæˆ‘ä»¬æ·»åŠ ä¸¤ä¸ªè¾“å‡ºä¸€ä¼šçœ‹çœ‹æ•ˆæœ</p>
<p>4.åœ¨Configæ–‡ä»¶å¤¹ä¸‹ç¼–å†™ShiroConfig.javaæ–‡ä»¶ï¼Œå°†ä¸‰å¤§Beanæ³¨å…¥åˆ°springä¸­</p>
<p>â‘ æ ¹æ®å‰é¢æä¾›çš„é¡ºåºï¼Œå…ˆç¼–å†™realmç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//1ï¼šåˆ›å»ºrealmå¯¹è±¡ï¼Œéœ€è¦è‡ªå®šä¹‰</span></span><br><span class="line"><span class="meta">@Bean(name = &quot;userRealm&quot;)</span></span><br><span class="line"><span class="keyword">public</span> UserRealm <span class="title function_">userRealm</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">UserRealm</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>â‘¡åˆ›å»ºç”¨æˆ·ç®¡ç†ï¼Œè¿™é‡Œéœ€è¦ç”¨åˆ°å‰é¢åˆ›å»ºçš„realmï¼Œå› æ­¤åœ¨realmä¹‹åè¿›è¡Œç¼–å†™</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//2ï¼šåˆ›å»ºç®¡ç†ç”¨æˆ·éœ€è¦ç”¨åˆ°</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> DefaultWebSecurityManager <span class="title function_">defaultWebSecurityManager</span><span class="params">(<span class="meta">@Qualifier(&quot;userRealm&quot;)</span> UserRealm userRealm)</span>&#123;</span><br><span class="line">    <span class="type">DefaultWebSecurityManager</span> <span class="variable">securityManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultWebSecurityManager</span>();</span><br><span class="line">    securityManager.setRealm(userRealm);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> securityManager;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å›¾ç¤ºè§£æï¼š</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692608790396-f76c3b4d-3e22-4260-a67a-557d0208ab4a.png" alt="img"></p>
<p>â‘¢åˆ›å»ºsubjectï¼Œéœ€è¦ä¼ å…¥ä¸€ä¸ªsecurityManagerï¼Œå› æ­¤æœ€åè¿›è¡Œç¼–å†™ï¼ˆæ˜¯ä¸æ˜¯å¾ˆåƒå¥—å¨ƒï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> ShiroFilterFactoryBean <span class="title function_">shiroFilterFactoryBean</span><span class="params">(<span class="meta">@Qualifier(&quot;defaultWebSecurityManager&quot;)</span> DefaultWebSecurityManager securityManager)</span>&#123;</span><br><span class="line">    <span class="type">ShiroFilterFactoryBean</span> <span class="variable">subject</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ShiroFilterFactoryBean</span>();</span><br><span class="line">    <span class="comment">//è®¾ç½®å®‰å…¨ç®¡ç†å™¨</span></span><br><span class="line">    bean.setSecurityManager(securityManager);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> subject;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ­å»ºç®€å•æµ‹è¯•ç¯å¢ƒ"><a href="#æ­å»ºç®€å•æµ‹è¯•ç¯å¢ƒ" class="headerlink" title="æ­å»ºç®€å•æµ‹è¯•ç¯å¢ƒ"></a>æ­å»ºç®€å•æµ‹è¯•ç¯å¢ƒ</h3><ol>
<li>æ–°å»ºä¸€ä¸ªç™»å½•é¡µé¢</li>
<li>æ–°å»ºä¸€ä¸ªé¦–é¡µ<br>é¦–é¡µä¸Šæœ‰ä¸‰ä¸ªé“¾æ¥ï¼Œä¸€ä¸ªç™»å½•ï¼Œä¸€ä¸ªå¢åŠ ç”¨æˆ·ï¼Œä¸€ä¸ªåˆ é™¤ç”¨æˆ·</li>
<li>æ–°å»ºä¸€ä¸ªå¢åŠ ç”¨æˆ·é¡µé¢</li>
<li>æ–°å»ºä¸€ä¸ªåˆ é™¤ç”¨æˆ·é¡µé¢</li>
<li>ç¼–å†™å¯¹åº”çš„ Controller</li>
</ol>
<h3 id="å®ç°ç™»å½•æ‹¦æˆª"><a href="#å®ç°ç™»å½•æ‹¦æˆª" class="headerlink" title="å®ç°ç™»å½•æ‹¦æˆª"></a>å®ç°ç™»å½•æ‹¦æˆª</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">    <span class="comment">//æ·»åŠ shiroçš„å†…ç½®è¿‡æ»¤å™¨</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     anon:æ— éœ€è®¤è¯å°±å¯ä»¥è®¿é—®</span></span><br><span class="line"><span class="comment">     authc:å¿…é¡»è®¤è¯æ‰å¯è®¿é—®</span></span><br><span class="line"><span class="comment">     userï¼šå¿…é¡»æ‹¥æœ‰   è®°ä½æˆ‘æ‰èƒ½ç”¨</span></span><br><span class="line"><span class="comment">     permsï¼šæ‹¥æœ‰å¯¹æŸä¸ªèµ„æºçš„æƒé™æ‰èƒ½è®¿é—®</span></span><br><span class="line"><span class="comment">     role:æ‹¥æœ‰æŸä¸ªè§’è‰²æƒé™æ‰èƒ½è®¿é—®</span></span><br><span class="line"><span class="comment">    **/</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> ShiroFilterFactoryBean <span class="title function_">shiroFilterFactoryBean</span><span class="params">(<span class="meta">@Qualifier(&quot;defaultWebSecurityManager&quot;)</span> DefaultWebSecurityManager securityManager)</span>&#123;</span><br><span class="line">    <span class="type">ShiroFilterFactoryBean</span> <span class="variable">bean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ShiroFilterFactoryBean</span>();</span><br><span class="line">    <span class="comment">//è®¾ç½®å®‰å…¨ç®¡ç†å™¨</span></span><br><span class="line">    bean.setSecurityManager(securityManager);</span><br><span class="line"></span><br><span class="line">    Map&lt;String, String&gt; filterMap =<span class="keyword">new</span> <span class="title class_">LinkedHashMap</span>&lt;String,String&gt;();</span><br><span class="line"></span><br><span class="line">    filterMap.put(<span class="string">&quot;/user/add&quot;</span>,<span class="string">&quot;anon&quot;</span>);<span class="comment">//è¡¨ç¤º/user/addè¿™ä¸ªè¯·æ±‚æ‰€æœ‰äººå¯ä»¥è®¿é—®</span></span><br><span class="line"></span><br><span class="line">    filterMap.put(<span class="string">&quot;/user/update&quot;</span>,<span class="string">&quot;authc&quot;</span>);<span class="comment">//è¡¨ç¤º/user/updateè¿™ä¸ªè¯·æ±‚åªæœ‰ç™»å½•åå¯ä»¥è®¿é—®</span></span><br><span class="line"></span><br><span class="line">    bean.setLoginUrl(<span class="string">&quot;/toLogin&quot;</span>);</span><br><span class="line"></span><br><span class="line">    bean.setFilterChainDefinitionMap(filterMap);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> bean;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å›¾ç¤ºè§£æï¼š</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692608939217-a46526fb-8b1b-4c26-84b6-dfef4a0c8aed.png" alt="img"></p>
<p>å½“ç„¶åœ¨æ‹¦æˆªè¯·æ±‚ä¸­ä¹Ÿæ”¯æŒé€šé…ç¬¦ï¼šå¦‚æ‹¦æˆªæŒ‡å®š&#x2F;userä¸‹çš„æ‰€æœ‰è¯·æ±‚ï¼š&#x2F;user&#x2F;*</p>
<h3 id="å®ç°ç”¨æˆ·è®¤è¯"><a href="#å®ç°ç”¨æˆ·è®¤è¯" class="headerlink" title="å®ç°ç”¨æˆ·è®¤è¯"></a>å®ç°ç”¨æˆ·è®¤è¯</h3><p>å®ç°ç”¨æˆ·è®¤è¯éœ€è¦å»realmç±»çš„è®¤è¯æ–¹æ³•ä¸­å»é…ç½®</p>
<p>è¿™é‡Œæˆ‘ä»¬å…ˆæŠŠç”¨æˆ·åå’Œå¯†ç å†™æ­»ï¼Œå®é™…ä¸­æ˜¯è¦å»æ•°æ®åº“ä¸­å»å–çš„</p>
<p>å»åˆ°UserRealm.javaä¸­</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> AuthenticationInfo <span class="title function_">doGetAuthenticationInfo</span><span class="params">(AuthenticationToken token)</span> <span class="keyword">throws</span> AuthenticationException &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;æ‰§è¡Œäº†è®¤è¯æ–¹æ³•&quot;</span>);</span><br><span class="line"></span><br><span class="line">    String name=<span class="string">&quot;xiaowu&quot;</span>;</span><br><span class="line">    String password=<span class="string">&quot;xiaowu&quot;</span>;</span><br><span class="line">    <span class="type">UsernamePasswordToken</span> <span class="variable">userToken</span> <span class="operator">=</span> (UsernamePasswordToken)token;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!userToken.getUsername().equals(name))&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SimpleAuthenticationInfo</span>(<span class="string">&quot;&quot;</span>,password,<span class="string">&quot;&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¼–å†™Controllerä¸­çš„ç™»å½•æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/login&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">login</span><span class="params">(<span class="meta">@RequestParam(&quot;username&quot;)</span> String username,<span class="meta">@RequestParam(&quot;password&quot;)</span> String password,Model model)</span> &#123;</span><br><span class="line">    <span class="comment">//è·å–å½“å‰çš„ç”¨æˆ·</span></span><br><span class="line">    <span class="type">Subject</span> <span class="variable">subject</span> <span class="operator">=</span> SecurityUtils.getSubject();</span><br><span class="line">    <span class="comment">//å°è£…ç”¨æˆ·çš„ç™»å½•æ•°æ®</span></span><br><span class="line">    <span class="type">UsernamePasswordToken</span> <span class="variable">token</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UsernamePasswordToken</span>(username, password);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        subject.login(token);<span class="comment">//æ‰§è¡Œç™»å½•çš„æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰å¼‚å¸¸</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (UnknownAccountException e) &#123;</span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;ç”¨æˆ·åé”™è¯¯&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;login&quot;</span>;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IncorrectCredentialsException e) &#123;</span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;å¯†ç é”™è¯¯&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;login&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å›¾ç¤ºè§£æï¼š</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692609125519-eb2d7076-16ea-4185-8799-1825a6aa76b7.png" alt="img"></p>
<h3 id="Shiroæ•´åˆMybatis"><a href="#Shiroæ•´åˆMybatis" class="headerlink" title="Shiroæ•´åˆMybatis"></a>Shiroæ•´åˆMybatis</h3><p>1.é¦–å…ˆå¯¼å…¥éœ€è¦çš„æ‰€æœ‰çš„mavemä¾èµ–</p>
<p>â‘ mysql-connect â‘¡druid â‘¢log4j â‘£mybtis-spring-boot-starter</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.21<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2.ç¼–å†™é…ç½®æ–‡ä»¶application.propertiesæˆ–è€…application.yaml</p>
<p>3.ç¼–å†™guoæ–‡ä»¶ä¸‹çš„pojoï¼Œcontrollerï¼Œserviceï¼Œmapperæ–‡ä»¶å¤¹å‚è€ƒå‰é¢çš„springbootæ•´åˆmybatisä»£ç å“¦ï¼</p>
<p>æ•´åˆå®Œæ¯•çš„æ–‡ä»¶ç›®å½•ï¼š</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692664870118-1720af0e-ca15-41cb-b0dd-26867fd46c1c.png" alt="img"></p>
<p>åœ¨mapperä¸­æ·»åŠ äº†ä¸€ä¸ªqueryUserByNameçš„æ–¹æ³•ï¼š</p>
<p>æ•´åˆå®Œæ¯•åå…ˆå»æµ‹è¯•ç±»ä¸­è¿›è¡Œæµ‹è¯•ï¼š</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692665335536-3b0e4efa-0fa4-468c-9ad0-b187861902fc.png" alt="img"></p>
<p>æµ‹è¯•ç»“æœ:</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692665445193-eb01f961-9090-4050-b50a-b113d1580bf7.png" alt="img"></p>
<p>okåˆ°ç›®å‰ä¸ºæ­¢æ•´åˆå®Œæ¯•ï¼Œæ²¡æœ‰é—®é¢˜ï¼Œä¸šåŠ¡éƒ½æ˜¯æ­£å¸¸çš„æ¥ä¸‹æ¥å»ä¹‹å‰çš„ç”¨æˆ·è®¤è¯æŠŠä¹‹å‰å†™æ­»çš„ç”¨æˆ·æ”¹ä¸ºæ•°æ®åº“ä¸­çš„ç”¨æˆ·</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> AuthenticationInfo <span class="title function_">doGetAuthenticationInfo</span><span class="params">(AuthenticationToken token)</span> <span class="keyword">throws</span> AuthenticationException &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;æ‰§è¡Œäº†è®¤è¯æ–¹æ³•&quot;</span>);</span><br><span class="line">    <span class="type">UsernamePasswordToken</span> <span class="variable">userToken</span> <span class="operator">=</span> (UsernamePasswordToken)token;</span><br><span class="line"></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.queryUserByName(userToken.getUsername());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(user==<span class="literal">null</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SimpleAuthenticationInfo</span>(<span class="string">&quot;&quot;</span>,user.getPwd(),<span class="string">&quot;&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æˆæƒåŠŸèƒ½çš„å®ç°"><a href="#æˆæƒåŠŸèƒ½çš„å®ç°" class="headerlink" title="æˆæƒåŠŸèƒ½çš„å®ç°"></a>æˆæƒåŠŸèƒ½çš„å®ç°</h3><p>å»åˆ°ShiroConfig.javaä¸­,æ·»åŠ ä»£ç ï¼Œæ³¨æ„è¦æ·»åŠ åœ¨ï¼ˆé¡ºåºï¼‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">filterMap.put(<span class="string">&quot;/user/add&quot;</span>,<span class="string">&quot;perms[user:add]&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>ä¹‹åæˆ‘ä»¬æ‰§è¡Œä¸€ä¸‹å‘ç°ç™»é™†åaddæ ‡ç­¾ä¹Ÿæ— æƒè®¿é—®</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692666622354-27a1e0b1-a4ed-41d8-99a1-6a275983add3.png" alt="img"></p>
<p>å½“ç„¶æ­£å¸¸çš„æ˜¯è¦è®¿é—®æ— æƒé™é¡µé¢çš„</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å»UserRealmä¸­ç»™æ·»åŠ æƒé™,æ³¨æ„ä¸è¦å¯¼é”™ç±»SimpleAuthorizationInfo</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> AuthorizationInfo <span class="title function_">doGetAuthorizationInfo</span><span class="params">(PrincipalCollection principalCollection)</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;æ‰§è¡Œäº†æˆæƒæ–¹æ³•&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">SimpleAuthorizationInfo</span> <span class="variable">info</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleAuthorizationInfo</span>();</span><br><span class="line"></span><br><span class="line">    info.addStringPermission(<span class="string">&quot;user:add&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> info;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692666708929-63571b84-2e4f-4be7-b5e8-c270ed10afcb.png" alt="img"></p>
<p>è¯¶ï¼Œæ¥ä¸‹æ¥æ‰€æœ‰ç”¨æˆ·å°±éƒ½æœ‰è¿™ä¸ªæƒé™äº†</p>
<p>ä½†æ˜¯ä¸æƒ³è®©æ‰€æœ‰ç”¨æˆ·éƒ½æœ‰æŸä¸ªæƒé™è¦æ€ä¹ˆå®ç°å‘¢ï¼Ÿ</p>
<p>é¦–å…ˆå…ˆå»æ•°æ®è¡¨ä¸­æ·»åŠ ä¸€ä¸ªæƒé™å­—æ®µ</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692666759403-c54a9468-2784-4bc0-9462-5abeab43863d.png" alt="img"></p>
<p>ç´§æ¥ç€å»pojoä¸­æ·»åŠ å­—æ®µï¼Œå†å»æ‰‹åŠ¨æ·»åŠ ä¸€äº›ç”¨æˆ·çš„æƒé™</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692666803337-b0a3321c-82b4-4f6a-a780-dd8a492ef3fd.png" alt="img"></p>
<p>okæ•°æ®å±‚å®Œæ¯•ï¼Œæ¥ä¸‹æ¥è¦æ€è€ƒï¼Œæˆ‘ä»¬æƒ³è¦è·å–åˆ°ç”¨æˆ·çš„æƒé™ï¼Œä½†æ˜¯è·å–ç”¨æˆ·æ˜¯åœ¨åˆšåˆšè®¤è¯ä¸­é€šè¿‡userserviceè·å–çš„ï¼Œ<br>åœ¨è®¤è¯é‡Œé¢æŸ¥åˆ°çš„ä¸œè¥¿æˆ‘ä»¬æ€ä¹ˆæ”¾åˆ°æˆæƒä¸­å»å‘¢ï¼Ÿ</p>
<p>æƒ³åˆ°äº†ä¸¤ä¸ªï¼šâ‘ session â‘¡ç”¨æˆ·å½“å‰å¯¹è±¡çš„å±æ€§æ¥å–getæ–¹æ³•æˆ–ï¼ˆç‚¹å±æ€§ï¼‰</p>
<p>æˆ‘ä»¬åœ¨è®¤è¯ä¸­ï¼Œæœ€ånewäº†ä¸€ä¸ªSimpleAuthenticationInfoçš„å½“å‰è®¤è¯å¯¹è±¡ï¼Œä¹‹å‰é‡Œé¢è¦ä¼ é€’ä¸‰ä¸ªå‚æ•°åˆ†åˆ«ä¸ºï¼šï¼ˆèµ„æºï¼Œå¯†ç ï¼ŒrealmNameï¼‰</p>
<p>æˆ‘ä»¬æŠŠè·å–åˆ°çš„userä¼ å…¥åˆ°èµ„æºä¸­å»ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SimpleAuthenticationInfo</span>(user,user.getPwd(),<span class="string">&quot;&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·ä¸€æ¥ï¼Œuserè¿™ä¸ªèµ„æºå°±ä¼ é€’åˆ°äº†å½“å‰ç”¨æˆ·subjectæ•´ä½“èµ„æºä¸­ï¼Œé€šè¿‡å½“å‰subjectè·å–èµ„æºæ¥è·å–åˆ°è¿™ä¸ªuser</p>
<p>æ‰€ä»¥åœ¨æˆæƒçš„åŠŸèƒ½ä¸­è¦å…ˆè·å–subjectå½“å‰ç”¨æˆ·</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Subject</span> <span class="variable">subject</span> <span class="operator">=</span> SecurityUtils.getSubject();</span><br></pre></td></tr></table></figure>

<p>ç„¶åé€šè¿‡subjectè·å–åˆ°èµ„æº</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">User</span> <span class="variable">currentUser</span> <span class="operator">=</span> (User) subject.getPrincipal();</span><br></pre></td></tr></table></figure>

<p>å†ç»™å½“å‰ç”¨æˆ·æ·»åŠ userä¸­å¯¹åº”çš„æƒé™å,æ³¨æ„æ–¹æ³•åæ˜¯addStringPermissionæƒé™</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">info.addStringPermission(currentUser.getPerms());</span><br></pre></td></tr></table></figure>

<p>æœ€åè¿”å›å½“å‰æƒé™info</p>
<p>æ•´ä½“æˆæƒä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æˆæƒ</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> AuthorizationInfo <span class="title function_">doGetAuthorizationInfo</span><span class="params">(PrincipalCollection principalCollection)</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;æ‰§è¡Œäº†æˆæƒæ–¹æ³•&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">SimpleAuthorizationInfo</span> <span class="variable">info</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleAuthorizationInfo</span>();</span><br><span class="line"></span><br><span class="line">    <span class="type">Subject</span> <span class="variable">subject</span> <span class="operator">=</span> SecurityUtils.getSubject();</span><br><span class="line"></span><br><span class="line">    <span class="type">User</span> <span class="variable">currentUser</span> <span class="operator">=</span> (User) subject.getPrincipal();</span><br><span class="line">    <span class="comment">//è®¾ç½®å½“å‰ç”¨æˆ·çš„æƒé™</span></span><br><span class="line">    info.addStringPermission(currentUser.getPerms());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> info;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é€€å‡ºåŠŸèƒ½å°±å’Œä¹‹å‰securityçš„logoutä¸€æ ·ï¼Œè®¾ç½®ä¸€ä¸‹é€€å‡ºçš„è·¯å¾„å°±å¯</p>
<p>å¥½ç°åœ¨åŸºæœ¬éœ€æ±‚éƒ½å®Œäº†ï¼Œä½†æ˜¯æƒ³å’Œä¹‹å‰securityä¸€æ ·å®ç°æ²¡æœ‰æƒé™çš„å°±ä¸è¦æ˜¾ç¤ºï¼Œå°±éœ€è¦å’Œthymeleafç»“åˆ</p>
<h3 id="Shiroå’Œthymeleafæ•´åˆ"><a href="#Shiroå’Œthymeleafæ•´åˆ" class="headerlink" title="Shiroå’Œthymeleafæ•´åˆ"></a>Shiroå’Œthymeleafæ•´åˆ</h3><p>é¦–å…ˆè¦å¯¼å…¥shrioå’Œthymeleafç»“åˆçš„ä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.github.theborakompanioni/thymeleaf-extras-shiro --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.theborakompanioni<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf-extras-shiro<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>okæ¥ä¸‹æ¥å°±è¦å»å‰ç«¯é¡µé¢ç¼–å†™æ ‡ç­¾äº†ï¼Œä¹‹å‰åœ¨securityä¸­ç”¨åˆ°çš„æ˜¯secï¼Œè¿™é‡Œç”¨çš„shiroï¼Œå½“ç„¶ä¹Ÿè¦å¯¼å…¥å‘½åç©ºé—´</p>
<p>ä¸‹é¢æ˜¯spring-securityçš„å‘½åç©ºé—´</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">xmlns:sec=&quot;http://www.thymeleaf.org/thymeleaf-extras-springsecurity5&quot;</span><br></pre></td></tr></table></figure>

<p>shiroçš„ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">xmlns:shiro=&quot;http://www.thymeleaf.org/thymeleaf-extras-shiro&quot;</span><br></pre></td></tr></table></figure>

<p>å‰ç«¯ä»£ç ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;msg&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/toLogin&#125;&quot;</span>&gt;</span>ç™»å½•<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">shiro:hasPermission</span>=<span class="string">&quot;user:add&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/user/add&#125;&quot;</span>&gt;</span>add<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">shiro:hasPermission</span>=<span class="string">&quot;user:update&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/user/update&#125;&quot;</span>&gt;</span>update<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è§£é‡Šä¸€ä¸‹å°±æ˜¯åˆ¤æ–­ä¸€ä¸‹å½“å‰çš„ç”¨æˆ·æ˜¯å¦æœ‰å½“å‰çš„æƒé™ï¼Œå¦‚æœæœ‰åˆ™æ˜¾ç¤ºï¼Œæ²¡æœ‰ä¸æ˜¾ç¤º</p>
<p>ç™»å½•æŒ‰é’®æ— æƒé™æ—¶æ˜¾ç¤ºï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç¬¬ä¸€ç§æ–¹æ³• --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">shiro:notAuthenticated</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/toLogin&#125;&quot;</span>&gt;</span>ç™»å½•<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ç¬¬äºŒç§æ–¹æ³• --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--shiro:guestä¸ºåˆ¤æ–­æ˜¯å¦ä¸º æœªè®¤è¯çš„ç”¨æˆ·ï¼Œæ˜¯åˆ™æ˜¾ç¤ºä¸‹é¢çš„ï¼Œä¸æ˜¯åˆ™ä¸æ˜¾ç¤º--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">shiro:guest</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/toLogin&#125;&quot;</span>&gt;</span>ç™»å½•<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">shiro:guest</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="æ•´åˆå…¨éƒ¨ä»£ç "><a href="#æ•´åˆå…¨éƒ¨ä»£ç " class="headerlink" title="æ•´åˆå…¨éƒ¨ä»£ç "></a>æ•´åˆå…¨éƒ¨ä»£ç </h2><h3 id="1-å¯¼å…¥ä¾èµ–-1"><a href="#1-å¯¼å…¥ä¾èµ–-1" class="headerlink" title="1.å¯¼å…¥ä¾èµ–"></a>1.å¯¼å…¥ä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--æ•´åˆshiro</span></span><br><span class="line"><span class="comment">    Subject:ç”¨æˆ·</span></span><br><span class="line"><span class="comment">    SecurityManager:ç®¡ç†æ‰€æœ‰ç”¨æˆ·</span></span><br><span class="line"><span class="comment">    Realm:è¿æ¥æ•°æ®</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">  </span><br><span class="line">    <span class="comment">&lt;!--mysqlé©±åŠ¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--log4j--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--druid--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ•´åˆmybatis--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--lombok--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.24<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- shiroæ•´åˆthymeleaf --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.theborakompanioni<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>thymeleaf-extras-shiro<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--shiroæ•´åˆspringåŒ…--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.shiro<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>shiro-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--thymeleaf--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-ç¼–å†™é…ç½®æ–‡ä»¶application"><a href="#2-ç¼–å†™é…ç½®æ–‡ä»¶application" class="headerlink" title="2.ç¼–å†™é…ç½®æ–‡ä»¶application"></a>2.ç¼–å†™é…ç½®æ–‡ä»¶application</h3><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/mybatis?useSSL=true&amp;userUniceode=true&amp;characterEncoding=utf8</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#Spring Boot é»˜è®¤æ˜¯ä¸æ³¨å…¥è¿™äº›å±æ€§å€¼çš„ï¼Œéœ€è¦è‡ªå·±ç»‘å®š</span></span><br><span class="line">    <span class="comment">#druid æ•°æ®æºä¸“æœ‰é…ç½®</span></span><br><span class="line">    <span class="attr">initialSize:</span> <span class="number">5</span></span><br><span class="line">    <span class="attr">minIdle:</span> <span class="number">5</span></span><br><span class="line">    <span class="attr">maxActive:</span> <span class="number">20</span></span><br><span class="line">    <span class="attr">maxWait:</span> <span class="number">60000</span></span><br><span class="line">    <span class="attr">timeBetweenEvictionRunsMillis:</span> <span class="number">60000</span></span><br><span class="line">    <span class="attr">minEvictableIdleTimeMillis:</span> <span class="number">300000</span></span><br><span class="line">    <span class="attr">validationQuery:</span> <span class="string">SELECT</span> <span class="number">1</span> <span class="string">FROM</span> <span class="string">DUAL</span></span><br><span class="line">    <span class="attr">testWhileIdle:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">testOnBorrow:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">testOnReturn:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">poolPreparedStatements:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#é…ç½®ç›‘æ§ç»Ÿè®¡æ‹¦æˆªçš„filtersï¼Œstat:ç›‘æ§ç»Ÿè®¡ã€log4jï¼šæ—¥å¿—è®°å½•ã€wallï¼šé˜²å¾¡sqlæ³¨å…¥</span></span><br><span class="line">    <span class="comment">#å¦‚æœå…è®¸æ—¶æŠ¥é”™  java.lang.ClassNotFoundException: org.apache.log4j.Priority</span></span><br><span class="line">    <span class="comment">#åˆ™å¯¼å…¥ log4j ä¾èµ–å³å¯ï¼ŒMaven åœ°å€ï¼šhttps://mvnrepository.com/artifact/log4j/log4j</span></span><br><span class="line">    <span class="attr">filters:</span></span><br><span class="line">      <span class="attr">commons-log.connection-logger-name:</span> <span class="string">stat,wall,log4j</span></span><br><span class="line">    <span class="attr">maxPoolPreparedStatementPerConnectionSize:</span> <span class="number">20</span></span><br><span class="line">    <span class="attr">useGlobalDataSourceStat:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">connectionProperties:</span> <span class="string">druid.stat.mergeSql=true;druid.stat.slowSqlMillis=500</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mapper/*.xml</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.wu.pojo</span></span><br></pre></td></tr></table></figure>

<h3 id="3-è¿æ¥æ•°æ®åº“åç¼–å†™å®ä½“ç±»"><a href="#3-è¿æ¥æ•°æ®åº“åç¼–å†™å®ä½“ç±»" class="headerlink" title="3.è¿æ¥æ•°æ®åº“åç¼–å†™å®ä½“ç±»"></a>3.è¿æ¥æ•°æ®åº“åç¼–å†™å®ä½“ç±»</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String pwd;</span><br><span class="line">    <span class="keyword">private</span> String perms;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-mapper"><a href="#4-mapper" class="headerlink" title="4.mapper"></a>4.mapper</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.wu.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">queryUserByName</span><span class="params">(String name)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>@Mapperï¼šè¿™ä¸ªæ³¨è§£ä¼šäº§ç”Ÿå“åº”çš„å®ç°ç±»</li>
<li>@Repositoryï¼šç”¨åœ¨Daoå±‚ä¸Šçš„æ³¨å†Œbeanï¼Œ<strong>è¿™æ˜¯å› ä¸ºè¯¥æ³¨è§£çš„ä½œç”¨ä¸åªæ˜¯å°†ç±»è¯†åˆ«ä¸ºBeanï¼ŒåŒæ—¶å®ƒè¿˜èƒ½å°†æ‰€æ ‡æ³¨çš„ç±»ä¸­æŠ›å‡ºçš„æ•°æ®è®¿é—®å¼‚å¸¸å°è£…ä¸º Spring çš„æ•°æ®è®¿é—®å¼‚å¸¸ç±»å‹ã€‚ Springæœ¬èº«æä¾›äº†ä¸€ä¸ªä¸°å¯Œçš„å¹¶ä¸”æ˜¯ä¸å…·ä½“çš„æ•°æ®è®¿é—®æŠ€æœ¯æ— å…³çš„æ•°æ®è®¿é—®å¼‚å¸¸ç»“æ„ï¼Œç”¨äºå°è£…ä¸åŒçš„æŒä¹…å±‚æ¡†æ¶æŠ›å‡ºçš„å¼‚å¸¸ï¼Œä½¿å¾—å¼‚å¸¸ç‹¬ç«‹äºåº•å±‚çš„æ¡†æ¶ã€‚</strong></li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.wu.mapper.UserMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryUserByName&quot;</span>  <span class="attr">resultType</span>=<span class="string">&quot;User&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;String&quot;</span>&gt;</span></span><br><span class="line">        select * from user where name=#&#123;name&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="5-serviceå±‚"><a href="#5-serviceå±‚" class="headerlink" title="5.serviceå±‚"></a>5.serviceå±‚</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.wu.pojo.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">queryUserByName</span><span class="params">(String name)</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">package</span> com.wu.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.wu.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> com.wu.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    UserMapper userMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">queryUserByName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userMapper.queryUserByName(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>@Serviceæ˜¯Serviceå±‚ç»„ä»¶</li>
</ul>
<h3 id="6-Controller"><a href="#6-Controller" class="headerlink" title="6.Controller"></a>6.Controller</h3><p>å®ç°è·³è½¬</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.SecurityUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.IncorrectCredentialsException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.LockedAccountException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.UnknownAccountException;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.UsernamePasswordToken;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.Subject;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ModelAttribute;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.jws.WebParam;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(value = &#123;&quot;/&quot;,&quot;/test&quot;&#125;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toindex</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/user/add&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">add</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;a&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;user/add&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/user/update&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">update</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;user/update&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/toLogin&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toLogin</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;login&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/login&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">login</span><span class="params">(String username, String password, Model model)</span>&#123;</span><br><span class="line">        <span class="comment">//è·å¾—å½“å‰çš„ç”¨æˆ·</span></span><br><span class="line">        <span class="type">Subject</span> <span class="variable">subject</span> <span class="operator">=</span> SecurityUtils.getSubject();</span><br><span class="line">        <span class="comment">//å°è£…ç”¨æˆ·çš„ç™»é™†æ•°æ®</span></span><br><span class="line">        <span class="type">UsernamePasswordToken</span> <span class="variable">token</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UsernamePasswordToken</span>(username, password);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            subject.login(token);<span class="comment">//æ‰§è¡Œç™»é™†æ–¹æ³•</span></span><br><span class="line">            <span class="comment">//ä½†ä¼šç™»é™†æˆåŠŸçš„ç•Œé¢</span></span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;index&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (UnknownAccountException uae) &#123;</span><br><span class="line">            model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;ç”¨æˆ·åå¼‚å¸¸&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;login&quot;</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IncorrectCredentialsException ice) &#123;</span><br><span class="line">          model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;å¯†ç ä¸å­˜åœ¨&quot;</span>);</span><br><span class="line">          <span class="keyword">return</span> <span class="string">&quot;login&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/noauth&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">unauthorized</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;æœªç»æˆæƒ,é™æ­¢è®¿é—®æ­¤é¡µé¢&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-ç•Œé¢html"><a href="#7-ç•Œé¢html" class="headerlink" title="7.ç•Œé¢html"></a>7.ç•Œé¢html</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">xmlns:shiro</span>=<span class="string">&quot;https://www.thymeleaf.org/thymeleaf-extras-shiro&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>showpage<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--guestæ ‡ç­¾(ä¸@RequiresGuestå¯¹åº”),éªŒè¯ç”¨æˆ·æ²¡æœ‰ç™»å½•è®¤è¯æˆ–è¢«è®°ä½è¿‡ï¼ŒéªŒè¯æ˜¯å¦æ˜¯ä¸€ä¸ªguestçš„è¯·æ±‚--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">shiro:guest</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/toLogin&#125;&quot;</span>&gt;</span>ç™»å½•<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">shiro:hasPermission</span>=<span class="string">&quot;user:add&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/user/add&#125;&quot;</span>&gt;</span>add<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">shiro:hasPermission</span>=<span class="string">&quot;user:update&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">th:href</span>=<span class="string">&quot;@&#123;/user/update&#125;&quot;</span>&gt;</span>update<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span> <span class="attr">xmlns:th</span>=<span class="string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>login<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>ç™»é™†<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">th:text</span>=<span class="string">&quot;$&#123;msg&#125;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color: red&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">th:action</span>=<span class="string">&quot;@&#123;/login&#125;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>ç”¨æˆ·åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span> =<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>å¯†ç ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span> =<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="8-shiroé…ç½®"><a href="#8-shiroé…ç½®" class="headerlink" title="8.shiroé…ç½®"></a>8.shiroé…ç½®</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> at.pollux.thymeleaf.shiro.dialect.ShiroDialect;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.spring.web.ShiroFilterFactoryBean;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.web.mgt.DefaultWebSecurityManager;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.LinkedHashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">shiroConfig</span> &#123;</span><br><span class="line">    <span class="comment">//3:ShrioFilterBean å·¥å‚å¯¹è±¡    </span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ShiroFilterFactoryBean <span class="title function_">getShiroFilterFactoryBean</span><span class="params">(<span class="meta">@Qualifier(&quot;SecurityManager&quot;)</span> DefaultWebSecurityManager defaultWebSecurityManager)</span> &#123;</span><br><span class="line">        <span class="type">ShiroFilterFactoryBean</span> <span class="variable">bean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ShiroFilterFactoryBean</span>();</span><br><span class="line">        <span class="comment">//é…ç½®å®‰å…¨ç®¡ç†å™¨</span></span><br><span class="line">        bean.setSecurityManager(defaultWebSecurityManager());</span><br><span class="line">        <span class="comment">//æ¡ä»¶shiroå†…ç½®è¿‡æ»¤å™¨</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        anonï¼šæ— éœ€è®¤è¯å°±å¯ä»¥è®¿é—®</span></span><br><span class="line"><span class="comment">        authcï¼šå¿…é¡»è®¤è¯äº†æ‰èƒ½è®¿é—®</span></span><br><span class="line"><span class="comment">        user: å¿…é¡»æ‹¥æœ‰è®°ä½æˆ‘æ‰èƒ½è®¿é—®</span></span><br><span class="line"><span class="comment">        permsï¼šæ‹¥æœ‰å¯¹æŸä¸ªèµ„æºçš„æƒé™</span></span><br><span class="line"><span class="comment">        roleï¼šæ‹¥æœ‰æŸä¸ªè§’è‰²æƒé™æ‰èƒ½è®¿é—®</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Map&lt;String, String&gt; filterMap = <span class="keyword">new</span> <span class="title class_">LinkedHashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        filterMap.put(&quot;/user/add&quot;,&quot;anon&quot;);</span></span><br><span class="line"><span class="comment">        filterMap.put(&quot;/user/update&quot;,&quot;authc&quot;);</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="comment">//æˆæƒ,æ²¡æœ‰æˆæƒçš„è¯ä¼šè·³è½¬åˆ°æœªæˆæƒé¡µé¢</span></span><br><span class="line">        <span class="comment">//å¿…é¡»å¸¦æœ‰userï¼šaddæ‰æœ‰æƒé™</span></span><br><span class="line">        filterMap.put(<span class="string">&quot;/user/add&quot;</span>,<span class="string">&quot;perms[user:add]&quot;</span>);</span><br><span class="line">        filterMap.put(<span class="string">&quot;/user/update&quot;</span>,<span class="string">&quot;perms[user:update]&quot;</span>);</span><br><span class="line">        <span class="comment">//ç™»å½•è®¤è¯</span></span><br><span class="line">        <span class="comment">//è®¾ç½®æƒé™</span></span><br><span class="line">        filterMap.put(<span class="string">&quot;/user/*&quot;</span>,<span class="string">&quot;authc&quot;</span>);</span><br><span class="line"></span><br><span class="line">        bean.setFilterChainDefinitionMap(filterMap);</span><br><span class="line">        <span class="comment">//ç™»é™†æ‹¦æˆªï¼Œè®¾ç½®ç™»å½•è¯·æ±‚</span></span><br><span class="line">        bean.setLoginUrl(<span class="string">&quot;/toLogin&quot;</span>);</span><br><span class="line">        <span class="comment">//æ—¶é—´éåˆ¶æœªæˆæƒé¡µé¢</span></span><br><span class="line">        bean.setUnauthorizedUrl(<span class="string">&quot;/noauth&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//2:DefaulWebSecurityManger   </span></span><br><span class="line">    <span class="meta">@Bean(name = &quot;SecurityManager&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> DefaultWebSecurityManager <span class="title function_">defaultWebSecurityManager</span><span class="params">(<span class="meta">@Qualifier(&quot;userRealm&quot;)</span> UserRealm userRealm)</span> &#123;</span><br><span class="line">        <span class="type">DefaultWebSecurityManager</span> <span class="variable">SecurityManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultWebSecurityManager</span>();</span><br><span class="line">        <span class="comment">//ç»‘å®šRealm</span></span><br><span class="line">        SecurityManager.setRealm(userRealm);</span><br><span class="line">        <span class="keyword">return</span> SecurityManager;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1:åˆ›å»ºrealmå¯¹è±¡ - éœ€è¦è‡ªå®šä¹‰  </span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> UserRealm <span class="title function_">userRealm</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">UserRealm</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="comment">//æ•´åˆShiroDialect ç”¨æ¥æ•´åˆshiroå’Œthymeleaf</span></span><br><span class="line">    <span class="keyword">public</span> ShiroDialect <span class="title function_">getShiroDialect</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ShiroDialect</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>1 åˆ›å»ºXXXrealmå¯¹è±¡ï¼Œæ³¨å†Œè¿›ç»„ä»¶</p>
</li>
<li><p>2 è·å–å®‰å…¨ç®¡ç†å™¨DefaultWebSecurityManagerï¼Œè®¾ç½®xxxRealm</p>
</li>
<li><p>3 è·å–ShiroFilterFactoryBean</p>
</li>
<li><ul>
<li>åˆ›å»ºShiroFilterFactoryBeanï¼Œè®¾ç½®å®‰å…¨ç®¡ç†å™¨setSecurityManager</li>
<li>LinkedMapå­˜å‚¨urlå’Œæƒé™å¯¹åº”ï¼ŒsetFilterChainDefinitionMap(map);</li>
<li>æŒ‡å®šç™»å½•æ˜ å°„ï¼šsetLoginUrl</li>
</ul>
</li>
</ul>
<h3 id="9-Realm"><a href="#9-Realm" class="headerlink" title="9.Realm"></a>9.Realm</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.wu.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.wu.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.apache.catalina.security.SecurityUtil;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.SecurityUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authc.*;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authz.AuthorizationInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.authz.SimpleAuthorizationInfo;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.realm.AuthorizingRealm;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.PrincipalCollection;</span><br><span class="line"><span class="keyword">import</span> org.apache.shiro.subject.Subject;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰Realmdå¯¹è±¡</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserRealm</span> <span class="keyword">extends</span> <span class="title class_">AuthorizingRealm</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æˆæƒ</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> AuthorizationInfo <span class="title function_">doGetAuthorizationInfo</span><span class="params">(PrincipalCollection principalCollection)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ‰§è¡Œäº†æˆæƒ&quot;</span>);</span><br><span class="line">        <span class="type">SimpleAuthorizationInfo</span> <span class="variable">info</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleAuthorizationInfo</span>();</span><br><span class="line">         <span class="comment">//è‡ªå®šä¹‰ç”¨æˆ·æƒé™</span></span><br><span class="line">       <span class="comment">/* info.addStringPermission(&quot;user:add&quot;);*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ‹¿åˆ°å½“å‰ç™»å½•çš„å¯¹è±¡</span></span><br><span class="line">        <span class="type">Subject</span> <span class="variable">subject</span> <span class="operator">=</span> SecurityUtils.getSubject();</span><br><span class="line">        <span class="type">User</span> <span class="variable">curUser</span> <span class="operator">=</span> (User)subject.getPrincipal();<span class="comment">//å–å‡ºuser</span></span><br><span class="line">        <span class="comment">//è®¾ç½®å½“å‰ç”¨æˆ·çš„æƒé™</span></span><br><span class="line">        info.addStringPermission(curUser.getPerms());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> info;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¤è¯</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> AuthenticationInfo <span class="title function_">doGetAuthenticationInfo</span><span class="params">(AuthenticationToken token)</span> <span class="keyword">throws</span> AuthenticationException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ‰§è¡Œäº†è®¤è¯&quot;</span>);</span><br><span class="line">         <span class="comment">/* //æ¨¡æ‹Ÿæ•°æ®åº“çš„ç”¨æˆ·åå’Œå¯†ç </span></span><br><span class="line"><span class="comment">        String username=&quot;xiaowu&quot;;</span></span><br><span class="line"><span class="comment">        String password=&quot;xiaowu&quot;;*/</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//ç”¨æˆ·åå’Œ å¯†ç </span></span><br><span class="line">        <span class="comment">//è¿æ¥çœŸå®çš„æ•°æ®</span></span><br><span class="line">        <span class="type">UsernamePasswordToken</span> <span class="variable">usertoken</span> <span class="operator">=</span> (UsernamePasswordToken) token;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.queryByName(usertoken.getUsername());</span><br><span class="line">        <span class="keyword">if</span> (user == <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;<span class="comment">//æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">        &#125;</span><br><span class="line">         <span class="comment">/* //åˆ¤æ–­è´¦æˆ·</span></span><br><span class="line"><span class="comment">        if (!userToken.getUsername().equals(username)) &#123;</span></span><br><span class="line"><span class="comment">            return null;//æŠ›å‡ºå¼‚å¸¸ UnknownAccountException</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ¤æ–­å¯†ç ï¼ˆshiro å¯¹äºå¯†ç è®¤è¯æ¥è¯´æ˜¯ä¿å¯†çš„ï¼Œæ‰€ä»¥ä¸éœ€è¦ä½ åˆ¤æ–­ï¼‰</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SimpleAccount</span>(user,user.getPwd(),<span class="string">&quot;&quot;</span>);<span class="comment">//ä¸€ä¸ªç®€å•çš„è´¦æˆ·</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>ç±»ç»§æ‰¿extends AuthorizingRealm</p>
</li>
<li><p>å…ˆè®¤è¯AuthenticationInfo</p>
</li>
<li><ul>
<li>ShiroConfigä¸­çš„é…ç½®çš„ç™»å½•æ˜ å°„èµ°è¿™é‡Œï¼Œæäº¤è¡¨å•å°è£…æˆä¸€ä¸ªtokenï¼Œé€šè¿‡tokenä¸­çš„ä¿¡æ¯èµ°æ•°æ®åº“æŸ¥è¯¢æ•°æ®åº“æŸ¥å‡ºç”¨æˆ·åæ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨å°±è¿›è¡Œå¯†ç éªŒè¯</li>
<li>new SimpleAuthenticationInfo(currentUser, currentUser.getPwd(), â€œâ€);ï¼šç¬¬ä¸€ä¸ªå½¢å‚ä¼ é€’æŸ¥è¯¢å‡ºç”¨æˆ·ä½œä¸ºsubjectï¼Œè¿™ä¸ªsubjectç­‰å¾…AuthorizationInfoä½¿ç”¨ï¼›ç¬¬äºŒä¸ªå‚æ•°æ˜¯ç”¨æˆ·å¯†ç ï¼›ç¬¬ä¸‰ä¸ªå‚æ•°realmName</li>
</ul>
</li>
<li><p>åæˆæƒAuthorizationInfo</p>
</li>
<li><ul>
<li>ShiroConfigçš„Mapé…ç½®çš„Urlè¢«æ‹¦æˆªèµ°è¿™é‡Œï¼Œåˆ›å»ºç®€å•çš„æˆæƒä¿¡æ¯ new SimpleAuthorizationInfo()</li>
<li>AuthenticationInfoæœ€åç¬¬ä¸€å‚æ•°ä¼ é€’è¿‡æ¥subjectè·å–å½“å‰ç”¨æˆ·ï¼Œå†è·å–æƒé™ï¼Œå°è£…è¿›ç®€å•æˆæƒä¿¡æ¯ï¼Œå®Œæˆç®€å•æƒé™è®¾ç½®</li>
</ul>
</li>
</ul>
<h1 id="Swagger"><a href="#Swagger" class="headerlink" title="Swagger"></a>Swagger</h1><p>å­¦ä¹ ç›®æ ‡ï¼š</p>
<ul>
<li>äº†è§£Swaggerçš„æ¦‚å¿µåŠä½œç”¨</li>
<li>æŒæ¡åœ¨é¡¹ç›®ä¸­é›†æˆSwaggerè‡ªåŠ¨ç”ŸæˆAPIæ–‡æ¡£</li>
</ul>
<h2 id="Swaggerç®€ä»‹"><a href="#Swaggerç®€ä»‹" class="headerlink" title="Swaggerç®€ä»‹"></a>Swaggerç®€ä»‹</h2><p><strong>å‰åç«¯åˆ†ç¦»</strong></p>
<ul>
<li>å‰ç«¯ -&gt; å‰ç«¯æ§åˆ¶å±‚ã€è§†å›¾å±‚</li>
<li>åç«¯ -&gt; åç«¯æ§åˆ¶å±‚ã€æœåŠ¡å±‚ã€æ•°æ®è®¿é—®å±‚</li>
<li>å‰åç«¯é€šè¿‡APIè¿›è¡Œäº¤äº’</li>
<li>å‰åç«¯ç›¸å¯¹ç‹¬ç«‹ï¼Œä¸”æ¾è€¦åˆ</li>
</ul>
<p><strong>äº§ç”Ÿçš„é—®é¢˜</strong></p>
<ul>
<li>å‰åç«¯é›†æˆï¼Œå‰ç«¯æˆ–è€…åç«¯æ— æ³•åšåˆ°â€œåŠæ—¶åå•†ï¼Œå°½æ—©è§£å†³â€ï¼Œæœ€ç»ˆå¯¼è‡´é—®é¢˜é›†ä¸­çˆ†å‘</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong></p>
<ul>
<li>é¦–å…ˆå®šä¹‰schema [ è®¡åˆ’çš„æçº² ]ï¼Œå¹¶å®æ—¶è·Ÿè¸ªæœ€æ–°çš„APIï¼Œé™ä½é›†æˆé£é™©</li>
<li>æ—©äº›å¹´åˆ¶å®šwordè®¡åˆ’æ–‡æ¡£</li>
<li>å‰åç«¯åˆ†ç¦»ï¼šå‰ç«¯æµ‹è¯•åç«¯æ¥å£ï¼špostman<br>åç«¯æä¾›æ¥å£ï¼Œéœ€è¦å®æ—¶æ›´æ–°æœ€æ–°çš„æ¶ˆæ¯åŠæ”¹åŠ¨ï¼</li>
</ul>
<p><strong>Swagger</strong></p>
<ul>
<li>å·ç§°ä¸–ç•Œä¸Šæœ€æµè¡Œçš„APIæ¡†æ¶</li>
<li>Restful Api æ–‡æ¡£åœ¨çº¿è‡ªåŠ¨ç”Ÿæˆå™¨ &#x3D;&gt; <strong>API æ–‡æ¡£ ä¸API å®šä¹‰åŒæ­¥æ›´æ–°</strong></li>
<li>ç›´æ¥è¿è¡Œï¼Œåœ¨çº¿æµ‹è¯•APIæ¥å£ï¼ˆå…¶å®å°±æ˜¯controller requsetmappingï¼‰</li>
<li>æ”¯æŒå¤šç§è¯­è¨€ ï¼ˆå¦‚ï¼šJavaï¼ŒPHPç­‰ï¼‰</li>
<li>å®˜ç½‘ï¼š<a href="https://swagger.io/">https://swagger.io/</a></li>
</ul>
<h2 id="Springbooté›†æˆSwagger"><a href="#Springbooté›†æˆSwagger" class="headerlink" title="Springbooté›†æˆSwagger"></a>Springbooté›†æˆSwagger</h2><p><strong>SpringBooté›†æˆSwagger</strong> &#x3D;&gt; <strong>springfox</strong>ï¼Œä¸¤ä¸ªjaråŒ…</p>
<ul>
<li><strong>Springfox-swagger2</strong></li>
<li>swagger-springmvc</li>
</ul>
<p><strong>ä½¿ç”¨Swagger</strong></p>
<p>è¦æ±‚ï¼šjdk 1.8 + å¦åˆ™swagger2æ— æ³•è¿è¡Œ</p>
<p>æ­¥éª¤ï¼š</p>
<p>1ã€æ–°å»ºä¸€ä¸ªSpringBoot-webé¡¹ç›®</p>
<p>2ã€æ·»åŠ Mavenä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/io.springfox/springfox-swagger2 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/io.springfox/springfox-swagger-ui --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.springfox<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springfox-swagger-ui<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>3ã€ç¼–å†™HelloControllerï¼Œæµ‹è¯•ç¡®ä¿è¿è¡ŒæˆåŠŸï¼</p>
<p>4ã€è¦ä½¿ç”¨Swaggerï¼Œæˆ‘ä»¬éœ€è¦ç¼–å†™ä¸€ä¸ªé…ç½®ç±»-SwaggerConfigæ¥é…ç½® Swagger</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span> <span class="comment">//é…ç½®ç±»</span></span><br><span class="line"><span class="meta">@EnableSwagger2</span><span class="comment">// å¼€å¯Swagger2çš„è‡ªåŠ¨é…ç½®</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SwaggerConfig</span> &#123;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5ã€è®¿é—®æµ‹è¯• ï¼š<a href="http://localhost:8080/swagger-ui.html">http://localhost:8080/swagger-ui.html</a> ï¼Œå¯ä»¥çœ‹åˆ°swaggerçš„ç•Œé¢ï¼›</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692693635083-7f1cee37-9da2-450c-bbe1-5a7a6d797c16.png" alt="img"></p>
<h3 id="é…ç½®Swagger"><a href="#é…ç½®Swagger" class="headerlink" title="é…ç½®Swagger"></a>é…ç½®Swagger</h3><p>1ã€Swaggerå®ä¾‹Beanæ˜¯Docketï¼Œæ‰€ä»¥é€šè¿‡é…ç½®Docketå®ä¾‹æ¥é…ç½®Swagger,é€šè¿‡Docketå¯¹è±¡æ¥ç®¡äº†åŸæ¥é»˜è®¤çš„é…ç½®</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span> <span class="comment">//é…ç½®docketä»¥é…ç½®Swaggerå…·ä½“å‚æ•°</span></span><br><span class="line"><span class="keyword">public</span> Docket <span class="title function_">docket</span><span class="params">()</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2ã€å¯ä»¥é€šè¿‡apiInfo()å±æ€§é…ç½®æ–‡æ¡£ä¿¡æ¯</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//é…ç½®æ–‡æ¡£ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">private</span> ApiInfo <span class="title function_">apiInfo</span><span class="params">()</span> &#123;</span><br><span class="line">   <span class="type">Contact</span> <span class="variable">contact</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Contact</span>(<span class="string">&quot;è”ç³»äººåå­—&quot;</span>, <span class="string">&quot;http://xxx.xxx.com/è”ç³»äººè®¿é—®é“¾æ¥&quot;</span>, <span class="string">&quot;è”ç³»äººé‚®ç®±&quot;</span>);</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ApiInfo</span>(</span><br><span class="line">           <span class="string">&quot;Swaggerå­¦ä¹ &quot;</span>, <span class="comment">// æ ‡é¢˜</span></span><br><span class="line">           <span class="string">&quot;å­¦ä¹ æ¼”ç¤ºå¦‚ä½•é…ç½®Swagger&quot;</span>, <span class="comment">// æè¿°</span></span><br><span class="line">           <span class="string">&quot;v1.0&quot;</span>, <span class="comment">// ç‰ˆæœ¬</span></span><br><span class="line">           <span class="string">&quot;http://terms.service.url/ç»„ç»‡é“¾æ¥&quot;</span>, <span class="comment">// ç»„ç»‡é“¾æ¥</span></span><br><span class="line">           contact, <span class="comment">// è”ç³»äººä¿¡æ¯</span></span><br><span class="line">           <span class="string">&quot;Apach 2.0 è®¸å¯&quot;</span>, <span class="comment">// è®¸å¯</span></span><br><span class="line">           <span class="string">&quot;è®¸å¯é“¾æ¥&quot;</span>, <span class="comment">// è®¸å¯è¿æ¥</span></span><br><span class="line">           <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;()<span class="comment">// æ‰©å±•</span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3ã€Docket å®ä¾‹å…³è”ä¸Š apiInfo()</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> Docket <span class="title function_">docket</span><span class="params">()</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2).apiInfo(apiInfo());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692693963210-fb7f9aaf-c351-492c-8298-b94da1a3ec44.png" alt="img"></p>
<h3 id="é…ç½®æ‰«ææ¥å£"><a href="#é…ç½®æ‰«ææ¥å£" class="headerlink" title="é…ç½®æ‰«ææ¥å£"></a>é…ç½®æ‰«ææ¥å£</h3><p>1ã€æ„å»ºDocketæ—¶é€šè¿‡select()æ–¹æ³•é…ç½®æ€ä¹ˆæ‰«ææ¥å£ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> Docket <span class="title function_">docket</span><span class="params">()</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2)</span><br><span class="line">      .apiInfo(apiInfo())</span><br><span class="line">      .select()<span class="comment">// é€šè¿‡.select()æ–¹æ³•ï¼Œå»é…ç½®æ‰«ææ¥å£,RequestHandlerSelectorsé…ç½®å¦‚ä½•æ‰«ææ¥å£</span></span><br><span class="line">      .apis(RequestHandlerSelectors.basePackage(<span class="string">&quot;com.wu.controller&quot;</span>))</span><br><span class="line">      .build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2ã€é‡å¯é¡¹ç›®æµ‹è¯•ï¼Œç”±äºæˆ‘ä»¬é…ç½®æ ¹æ®åŒ…çš„è·¯å¾„æ‰«ææ¥å£ï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½çœ‹åˆ°ä¸€ä¸ªç±»</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692694224308-1e3d3ca1-14e9-4083-bf16-418f5fa07cb1.png" alt="img"></p>
<p>3ã€é™¤äº†é€šè¿‡åŒ…è·¯å¾„é…ç½®æ‰«ææ¥å£å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡é…ç½®å…¶ä»–æ–¹å¼æ‰«ææ¥å£ï¼Œè¿™é‡Œæ³¨é‡Šä¸€ä¸‹æ‰€æœ‰çš„é…ç½®æ–¹å¼ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">any() <span class="comment">// æ‰«ææ‰€æœ‰ï¼Œé¡¹ç›®ä¸­çš„æ‰€æœ‰æ¥å£éƒ½ä¼šè¢«æ‰«æåˆ°</span></span><br><span class="line">none() <span class="comment">// ä¸æ‰«ææ¥å£</span></span><br><span class="line"><span class="comment">// é€šè¿‡æ–¹æ³•ä¸Šçš„æ³¨è§£æ‰«æï¼Œå¦‚withMethodAnnotation(GetMapping.class)åªæ‰«ægetè¯·æ±‚</span></span><br><span class="line">withMethodAnnotation(<span class="keyword">final</span> Class&lt;? <span class="keyword">extends</span> <span class="title class_">Annotation</span>&gt; annotation)</span><br><span class="line"><span class="comment">// é€šè¿‡ç±»ä¸Šçš„æ³¨è§£æ‰«æï¼Œå¦‚.withClassAnnotation(Controller.class)åªæ‰«ææœ‰controlleræ³¨è§£çš„ç±»ä¸­çš„æ¥å£</span></span><br><span class="line">withClassAnnotation(<span class="keyword">final</span> Class&lt;? <span class="keyword">extends</span> <span class="title class_">Annotation</span>&gt; annotation)</span><br><span class="line">basePackage(<span class="keyword">final</span> String basePackage) <span class="comment">// æ ¹æ®åŒ…è·¯å¾„æ‰«ææ¥å£</span></span><br><span class="line">paths(PathSelectors.ant(<span class="string">&quot;/guo/**&quot;</span>))  <span class="comment">//è¿‡æ»¤ä»€ä¹ˆè·¯å¾„ï¼šè¿‡æ»¤/guoä¸‹çš„æ‰€æœ‰è·¯å¾„</span></span><br></pre></td></tr></table></figure>

<p>4ã€é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é…ç½®æ¥å£æ‰«æè¿‡æ»¤ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> Docket <span class="title function_">docket</span><span class="params">()</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2)</span><br><span class="line">      .apiInfo(apiInfo())</span><br><span class="line">      .select()<span class="comment">// é€šè¿‡.select()æ–¹æ³•ï¼Œå»é…ç½®æ‰«ææ¥å£,RequestHandlerSelectorsé…ç½®å¦‚ä½•æ‰«ææ¥å£</span></span><br><span class="line">      .apis(RequestHandlerSelectors.basePackage(<span class="string">&quot;com.wu.controller&quot;</span>))</span><br><span class="line">       <span class="comment">// é…ç½®å¦‚ä½•é€šè¿‡pathè¿‡æ»¤,å³è¿™é‡Œåªæ‰«æè¯·æ±‚ä»¥/wuå¼€å¤´çš„æ¥å£</span></span><br><span class="line">      .paths(PathSelectors.ant(<span class="string">&quot;/wu/**&quot;</span>))</span><br><span class="line">      .build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5ã€è¿™é‡Œçš„å¯é€‰å€¼æœ‰</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">any() <span class="comment">// ä»»ä½•è¯·æ±‚éƒ½æ‰«æ</span></span><br><span class="line">none() <span class="comment">// ä»»ä½•è¯·æ±‚éƒ½ä¸æ‰«æ</span></span><br><span class="line">regex(<span class="keyword">final</span> String pathRegex) <span class="comment">// é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼æ§åˆ¶</span></span><br><span class="line">ant(<span class="keyword">final</span> String antPattern) <span class="comment">// é€šè¿‡ant()æ§åˆ¶</span></span><br></pre></td></tr></table></figure>

<h3 id="é…ç½®Swaggerå¼€å…³"><a href="#é…ç½®Swaggerå¼€å…³" class="headerlink" title="é…ç½®Swaggerå¼€å…³"></a>é…ç½®Swaggerå¼€å…³</h3><p>å¯ä»¥æŒ‡å®šç›¸åº”çš„ç¯å¢ƒæ˜¯å¦å¼€å¯swaggeråŠŸèƒ½</p>
<p>1ã€é€šè¿‡enable()æ–¹æ³•é…ç½®æ˜¯å¦å¯ç”¨swaggerï¼Œå¦‚æœæ˜¯falseï¼Œswaggerå°†ä¸èƒ½åœ¨æµè§ˆå™¨ä¸­è®¿é—®äº†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> Docket <span class="title function_">docket</span><span class="params">()</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2)</span><br><span class="line">      .apiInfo(apiInfo())</span><br><span class="line">      .enable(<span class="literal">false</span>) <span class="comment">//é…ç½®æ˜¯å¦å¯ç”¨Swaggerï¼Œå¦‚æœæ˜¯falseï¼Œåœ¨æµè§ˆå™¨å°†æ— æ³•è®¿é—®</span></span><br><span class="line">      .select()<span class="comment">// é€šè¿‡.select()æ–¹æ³•ï¼Œå»é…ç½®æ‰«ææ¥å£,RequestHandlerSelectorsé…ç½®å¦‚ä½•æ‰«ææ¥å£</span></span><br><span class="line">      .apis(RequestHandlerSelectors.basePackage(<span class="string">&quot;com.wu.controller&quot;</span>))</span><br><span class="line">       <span class="comment">// é…ç½®å¦‚ä½•é€šè¿‡pathè¿‡æ»¤,å³è¿™é‡Œåªæ‰«æè¯·æ±‚ä»¥/wuå¼€å¤´çš„æ¥å£</span></span><br><span class="line">      .paths(PathSelectors.ant(<span class="string">&quot;/wu/**&quot;</span>))</span><br><span class="line">      .build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2ã€å¦‚ä½•åŠ¨æ€é…ç½®å½“é¡¹ç›®å¤„äºtestã€devç¯å¢ƒæ—¶æ˜¾ç¤ºswaggerï¼Œå¤„äºprodæ—¶ä¸æ˜¾ç¤ºï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> Docket <span class="title function_">docket</span><span class="params">(Environment environment)</span> &#123;</span><br><span class="line">   <span class="comment">// è®¾ç½®è¦æ˜¾ç¤ºswaggerçš„ç¯å¢ƒ</span></span><br><span class="line">   <span class="type">Profiles</span> <span class="variable">of</span> <span class="operator">=</span> Profiles.of(<span class="string">&quot;dev&quot;</span>, <span class="string">&quot;test&quot;</span>);</span><br><span class="line">   <span class="comment">// åˆ¤æ–­å½“å‰æ˜¯å¦å¤„äºè¯¥ç¯å¢ƒ</span></span><br><span class="line">   <span class="comment">// é€šè¿‡ enable() æ¥æ”¶æ­¤å‚æ•°åˆ¤æ–­æ˜¯å¦è¦æ˜¾ç¤º</span></span><br><span class="line">   <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> environment.acceptsProfiles(of);</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2)</span><br><span class="line">      .apiInfo(apiInfo())</span><br><span class="line">      .enable(flag) <span class="comment">//é…ç½®æ˜¯å¦å¯ç”¨Swaggerï¼Œå¦‚æœæ˜¯falseï¼Œåœ¨æµè§ˆå™¨å°†æ— æ³•è®¿é—®</span></span><br><span class="line">      .select()<span class="comment">// é€šè¿‡.select()æ–¹æ³•ï¼Œå»é…ç½®æ‰«ææ¥å£,RequestHandlerSelectorsé…ç½®å¦‚ä½•æ‰«ææ¥å£</span></span><br><span class="line">      .apis(RequestHandlerSelectors.basePackage(<span class="string">&quot;com.wu.controller&quot;</span>))</span><br><span class="line">       <span class="comment">// é…ç½®å¦‚ä½•é€šè¿‡pathè¿‡æ»¤,å³è¿™é‡Œåªæ‰«æè¯·æ±‚ä»¥/wuå¼€å¤´çš„æ¥å£</span></span><br><span class="line">      .paths(PathSelectors.ant(<span class="string">&quot;/wu/**&quot;</span>))</span><br><span class="line">      .build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3ã€å¯ä»¥åœ¨é¡¹ç›®ä¸­å¢åŠ ä¸€ä¸ªdevå’Œprodçš„é…ç½®æ–‡ä»¶æŸ¥çœ‹æ•ˆæœï¼</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692695903601-13b0defb-03eb-4efd-b70a-6416a0543a84.png" alt="img"></p>
<h3 id="é…ç½®APIåˆ†ç»„"><a href="#é…ç½®APIåˆ†ç»„" class="headerlink" title="é…ç½®APIåˆ†ç»„"></a>é…ç½®APIåˆ†ç»„</h3><p>1ã€å¦‚æœæ²¡æœ‰é…ç½®åˆ†ç»„ï¼Œé»˜è®¤æ˜¯defaultã€‚é€šè¿‡groupName()æ–¹æ³•å³å¯é…ç½®åˆ†ç»„ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> Docket <span class="title function_">docket</span><span class="params">(Environment environment)</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2).apiInfo(apiInfo())</span><br><span class="line">      .groupName(<span class="string">&quot;xiaowu&quot;</span>) <span class="comment">// é…ç½®åˆ†ç»„</span></span><br><span class="line">       <span class="comment">// çœç•¥é…ç½®....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2ã€é‡å¯é¡¹ç›®æŸ¥çœ‹åˆ†ç»„</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692694754530-d942039f-4b0b-499a-bae0-3175c6e85f10.png" alt="img"></p>
<p>3ã€å¦‚ä½•é…ç½®å¤šä¸ªåˆ†ç»„ï¼Ÿé…ç½®å¤šä¸ªåˆ†ç»„åªéœ€è¦é…ç½®å¤šä¸ªdocketå³å¯ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> Docket <span class="title function_">docket1</span><span class="params">()</span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2).groupName(<span class="string">&quot;xiaowu1&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> Docket <span class="title function_">docket2</span><span class="params">()</span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2).groupName(<span class="string">&quot;xiaowu2&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> Docket <span class="title function_">docket3</span><span class="params">()</span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2).groupName(<span class="string">&quot;xiaowu3&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4ã€é‡å¯é¡¹ç›®æŸ¥çœ‹å³å¯</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692694859821-122adafa-ee1a-499b-94e6-6d25941b6c42.png" alt="img"></p>
<h3 id="å®ä½“é…ç½®"><a href="#å®ä½“é…ç½®" class="headerlink" title="å®ä½“é…ç½®"></a>å®ä½“é…ç½®</h3><p>1ã€æ–°å»ºä¸€ä¸ªå®ä½“ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ApiModel(&quot;ç”¨æˆ·å®ä½“&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">   <span class="meta">@ApiModelProperty(&quot;ç”¨æˆ·å&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String username;</span><br><span class="line">   <span class="meta">@ApiModelProperty(&quot;å¯†ç &quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2ã€åªè¦è¿™ä¸ªå®ä½“åœ¨<strong>è¯·æ±‚æ¥å£</strong>çš„è¿”å›å€¼ä¸Šï¼ˆå³ä½¿æ˜¯æ³›å‹ï¼‰ï¼Œéƒ½èƒ½æ˜ å°„åˆ°å®ä½“é¡¹ä¸­ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/User&quot;)</span></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">User</span><span class="params">()</span>&#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3ã€é‡å¯æŸ¥çœ‹æµ‹è¯•</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692752849525-d13f58c0-7bbd-46c6-9ccb-03931b651f4d.png" alt="img"></p>
<p>æ³¨ï¼šå¹¶ä¸æ˜¯å› ä¸º@ApiModelè¿™ä¸ªæ³¨è§£è®©å®ä½“æ˜¾ç¤ºåœ¨è¿™é‡Œäº†ï¼Œè€Œæ˜¯åªè¦å‡ºç°åœ¨æ¥å£æ–¹æ³•çš„è¿”å›å€¼ä¸Šçš„å®ä½“éƒ½ä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œï¼Œè€Œ@ApiModelå’Œ@ApiModelPropertyè¿™ä¸¤ä¸ªæ³¨è§£åªæ˜¯ä¸ºå®ä½“æ·»åŠ æ³¨é‡Šçš„ã€‚</p>
<p>@ApiModelä¸ºç±»æ·»åŠ æ³¨é‡Š</p>
<p>@ApiModelPropertyä¸ºç±»å±æ€§æ·»åŠ æ³¨é‡Š</p>
<h2 id="å¸¸ç”¨æ³¨è§£"><a href="#å¸¸ç”¨æ³¨è§£" class="headerlink" title="å¸¸ç”¨æ³¨è§£"></a>å¸¸ç”¨æ³¨è§£</h2><p>Swaggerçš„æ‰€æœ‰æ³¨è§£å®šä¹‰åœ¨io.swagger.annotationsåŒ…ä¸‹</p>
<p>ä¸‹é¢åˆ—ä¸€äº›ç»å¸¸ç”¨åˆ°çš„ï¼Œæœªåˆ—ä¸¾å‡ºæ¥çš„å¯ä»¥å¦è¡ŒæŸ¥é˜…è¯´æ˜ï¼š</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692696006083-cea4958a-c26a-42ac-80c1-18ca2c325b24.png" alt="img"></p>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ç»™è¯·æ±‚çš„æ¥å£é…ç½®ä¸€äº›æ³¨é‡Š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ApiOperation(&quot;è¿™æ˜¯ä¸€ä¸ªæ¥å£&quot;)</span></span><br><span class="line"><span class="meta">@PostMapping(&quot;/Test&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">Test</span><span class="params">(<span class="meta">@ApiParam(&quot;è¿™ä¸ªåå­—ä¼šè¢«è¿”å›&quot;)</span>String username)</span>&#123;</span><br><span class="line">   <span class="keyword">return</span> username;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// @Api(tag=&quot;xxx&quot;)ä½œç”¨äºæ¨¡å—(ç±»)ä¸Šï¼Œ@ApiOpration(&quot;xxx&quot;)ä½œç”¨äºæ–¹æ³•ä¸Š</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ ·çš„è¯ï¼Œå¯ä»¥ç»™ä¸€äº›æ¯”è¾ƒéš¾ç†è§£çš„å±æ€§æˆ–è€…æ¥å£ï¼Œå¢åŠ ä¸€äº›é…ç½®ä¿¡æ¯ï¼Œè®©äººæ›´å®¹æ˜“é˜…è¯»ï¼</p>
<p>ç›¸è¾ƒäºä¼ ç»Ÿçš„Postmanæˆ–Curlæ–¹å¼æµ‹è¯•æ¥å£ï¼Œä½¿ç”¨swaggerç®€ç›´å°±æ˜¯å‚»ç“œå¼æ“ä½œï¼Œä¸éœ€è¦é¢å¤–è¯´æ˜æ–‡æ¡£(å†™å¾—å¥½æœ¬èº«å°±æ˜¯æ–‡æ¡£)è€Œä¸”æ›´ä¸å®¹æ˜“å‡ºé”™ï¼Œåªéœ€è¦å½•å…¥æ•°æ®ç„¶åç‚¹å‡»Executeï¼Œå¦‚æœå†é…åˆè‡ªåŠ¨åŒ–æ¡†æ¶ï¼Œå¯ä»¥è¯´åŸºæœ¬å°±ä¸éœ€è¦äººä¸ºæ“ä½œäº†ã€‚</p>
<p>Swaggeræ˜¯ä¸ªä¼˜ç§€çš„å·¥å…·ï¼Œç°åœ¨å›½å†…å·²ç»æœ‰å¾ˆå¤šçš„ä¸­å°å‹äº’è”ç½‘å…¬å¸éƒ½åœ¨ä½¿ç”¨å®ƒï¼Œç›¸è¾ƒäºä¼ ç»Ÿçš„è¦å…ˆå‡ºWordæ¥å£æ–‡æ¡£å†æµ‹è¯•çš„æ–¹å¼ï¼Œæ˜¾ç„¶è¿™æ ·ä¹Ÿæ›´ç¬¦åˆç°åœ¨çš„å¿«é€Ÿè¿­ä»£å¼€å‘è¡Œæƒ…ã€‚å½“ç„¶äº†ï¼Œæé†’ä¸‹å¤§å®¶åœ¨æ­£å¼ç¯å¢ƒè¦è®°å¾—å…³é—­Swaggerï¼Œä¸€æ¥å‡ºäºå®‰å…¨è€ƒè™‘äºŒæ¥ä¹Ÿå¯ä»¥èŠ‚çœè¿è¡Œæ—¶å†…å­˜ã€‚</p>
<p>æ€»ç»“ï¼š</p>
<p>â‘ ç»™swaggerä¸­æ·»åŠ æ³¨é‡Š<br>â‘¡ä¿®æ”¹é¡µé¢çš„æ ‡é¢˜ç­‰å†…å®¹<br>â‘¢ç®€å•çš„æ“ä½œä¸€äº›è¯·æ±‚æµ‹è¯•</p>
<h2 id="å…¨éƒ¨ä»£ç "><a href="#å…¨éƒ¨ä»£ç " class="headerlink" title="å…¨éƒ¨ä»£ç "></a>å…¨éƒ¨ä»£ç </h2><h3 id="Config"><a href="#Config" class="headerlink" title="Config"></a>Config</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.env.Environment;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.env.Profiles;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.builders.RequestHandlerSelectors;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.service.ApiInfo;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.service.Contact;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.spi.DocumentationType;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.spring.web.plugins.Docket;</span><br><span class="line"><span class="keyword">import</span> springfox.documentation.swagger2.annotations.EnableSwagger2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">//å¼€å¯Swagger2</span></span><br><span class="line"><span class="meta">@EnableSwagger2</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SwaggerConfig</span> &#123;</span><br><span class="line">    <span class="comment">//é…ç½®Swaggerçš„Docketçš„beanå®ä¾‹</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Docket <span class="title function_">docket</span><span class="params">(Environment environment)</span> &#123;</span><br><span class="line">        <span class="type">Profiles</span> <span class="variable">profiles</span> <span class="operator">=</span> Profiles.of(<span class="string">&quot;dev&quot;</span>);<span class="comment">//è®¾ç½®å¯ä»¥ä½¿ç”¨swaggerçš„ç¯å¢ƒ</span></span><br><span class="line">        <span class="comment">//è·å–ç¯å¢ƒ</span></span><br><span class="line">        <span class="comment">//é€šè¿‡environment.acceptsProfilesåˆ¤æ–­æ˜¯å¦å‡ºæ¥è‡ªå·±è®¾å®šçš„ç¯å¢ƒ</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> environment.acceptsProfiles(profiles);<span class="comment">//è·å¾—ç›‘å¬çš„å¯¹è±¡</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Docket</span>(DocumentationType.SWAGGER_2)</span><br><span class="line">                .apiInfo(apiInfo())</span><br><span class="line">                .enable(flag)</span><br><span class="line">                .groupName(<span class="string">&quot;xiaowu&quot;</span>) <span class="comment">// é…ç½®åˆ†ç»„</span></span><br><span class="line">                .select()<span class="comment">// é€šè¿‡.select()æ–¹æ³•ï¼Œå»é…ç½®æ‰«ææ¥å£,RequestHandlerSelectorsé…ç½®å¦‚ä½•æ‰«ææ¥å£</span></span><br><span class="line">                .apis(RequestHandlerSelectors.basePackage(<span class="string">&quot;com.wu.controller&quot;</span>))</span><br><span class="line">                <span class="comment">/*.paths(PathSelectors.ant(&quot;/wu/**&quot;))//è¿‡æ»¤è·¯å¾„*/</span></span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//é…ç½®Swaggerä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">private</span> ApiInfo <span class="title function_">apiInfo</span><span class="params">()</span>&#123;</span><br><span class="line">          <span class="comment">//ä½œè€…ä¿¡æ¯</span></span><br><span class="line">            <span class="type">Contact</span> <span class="variable">contact</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Contact</span>(<span class="string">&quot;xiaowu&quot;</span>,<span class="string">&quot;http://localhost:8080/&quot;</span>,<span class="string">&quot;2796189414@qq.com&quot;</span>);</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ApiInfo</span>(</span><br><span class="line">                 <span class="string">&quot;xiaowuçš„APIæ–‡æ¡£&quot;</span></span><br><span class="line">                  , <span class="string">&quot;baby no money&quot;</span></span><br><span class="line">                  , <span class="string">&quot;v1.0&quot;</span></span><br><span class="line">                  , <span class="string">&quot;http://localhost:8080/&quot;</span></span><br><span class="line">                  , contact</span><br><span class="line">                  , <span class="string">&quot;Apache 2.0&quot;</span></span><br><span class="line">                  , <span class="string">&quot;https://www.apache.org/licenses/LICENSE-2.0&quot;</span></span><br><span class="line">                  , <span class="keyword">new</span> <span class="title class_">ArrayList</span>()</span><br><span class="line">          );</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Controller"><a href="#Controller" class="headerlink" title="Controller"></a>Controller</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.wu.pojo.User;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.Api;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiOperation;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Api(tags = &quot;ç”¨æˆ·ç›¸å…³&quot;)</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line">    <span class="meta">@GetMapping(value = &quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åªè¦æˆ‘ä»¬çš„æ¥å£ä¸­ï¼Œè¿”å›å€¼å­˜åœ¨å®ä½“ç±»ï¼Œä»–å°±ä¼šè¢«æ‰«æåˆ°Swaggerä¸­</span></span><br><span class="line">    <span class="meta">@PostMapping(value = &quot;/User&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">User</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Operationæ¥å£,ä¸æ˜¯æ”¾åœ¨ç±»ä¸Šçš„ï¼Œæ˜¯æ–¹æ³•</span></span><br><span class="line">    <span class="meta">@ApiOperation(&quot;è¿™æ˜¯æ¥å£Test&quot;)</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/Test&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">Test</span><span class="params">(<span class="meta">@ApiParam(&quot;ç”¨æˆ·å&quot;)</span> String username)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Test&quot;</span>+ username;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Pojo"><a href="#Pojo" class="headerlink" title="Pojo"></a>Pojo</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModel;</span><br><span class="line"><span class="keyword">import</span> io.swagger.annotations.ApiModelProperty;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ApiModel(&quot;ç”¨æˆ·å®ä½“&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;ç”¨æˆ·å&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String username;</span><br><span class="line">    <span class="meta">@ApiModelProperty(&quot;å¯†ç &quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä¸‰ä¸ªé…ç½®æ–‡ä»¶"><a href="#ä¸‰ä¸ªé…ç½®æ–‡ä»¶" class="headerlink" title="ä¸‰ä¸ªé…ç½®æ–‡ä»¶"></a>ä¸‰ä¸ªé…ç½®æ–‡ä»¶</h3><h4 id="1-application-properties"><a href="#1-application-properties" class="headerlink" title="1.application.properties"></a>1.application.properties</h4><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring.profiles.active</span>=<span class="string">dev</span></span><br></pre></td></tr></table></figure>

<h4 id="2-application-dev-properties"><a href="#2-application-dev-properties" class="headerlink" title="2.application-dev.properties"></a>2.application-dev.properties</h4><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="string">8081</span></span><br></pre></td></tr></table></figure>

<h4 id="3-application-prod-properties"><a href="#3-application-prod-properties" class="headerlink" title="3.application-prod.properties"></a>3.application-prod.properties</h4><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="string">8082</span></span><br></pre></td></tr></table></figure>

<h1 id="ä»»åŠ¡"><a href="#ä»»åŠ¡" class="headerlink" title="ä»»åŠ¡"></a>ä»»åŠ¡</h1><h2 id="å¼‚æ­¥ä»»åŠ¡"><a href="#å¼‚æ­¥ä»»åŠ¡" class="headerlink" title="å¼‚æ­¥ä»»åŠ¡"></a>å¼‚æ­¥ä»»åŠ¡</h2><p>æ‰€è°“å¼‚æ­¥ï¼Œåœ¨æŸäº›åŠŸèƒ½å®ç°æ—¶å¯èƒ½è¦èŠ±è´¹ä¸€å®šçš„æ—¶é—´ï¼Œä½†æ˜¯ä¸ºäº†ä¸å½±å“å®¢æˆ·ç«¯çš„ä½“éªŒï¼Œé€‰æ‹©å¼‚æ­¥æ‰§è¡Œ</p>
<p>æ¡ˆä¾‹ï¼š</p>
<p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªserviceï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AsyncService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ•°æ®æ­£åœ¨ä¼ è¾“...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Controller:</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AsyncController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    AsyncService asyncService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/async&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">async</span><span class="params">()</span>&#123;</span><br><span class="line">        asyncService.hello();</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·åœ¨æ‰§è¡Œ&#x2F;asyncè¯·æ±‚æ—¶ï¼Œç½‘ç«™ä¼šå»¶æ—¶ä¸‰ç§’å†æ˜¾ç¤ºokï¼Œåå°æ•°æ®ä¹Ÿä¼šä¸‰ç§’åæ˜¾ç¤ºæ•°æ®æ­£åœ¨ä¼ è¾“</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692779015037-ff91c812-5802-46bb-a628-83ea0895b199.png" alt="img"></p>
<p>ç°åœ¨æƒ³è¦åšåˆ°å‰ç«¯å¿«é€Ÿå“åº”æˆ‘ä»¬çš„é¡µé¢ï¼Œåå°å»æ…¢æ…¢çš„ä¼ è¾“æ•°æ®ï¼Œå°±è¦ç”¨åˆ°springbootè‡ªå¸¦çš„åŠŸ</p>
<p>â‘ æƒ³åŠæ³•å‘Šè¯‰springæˆ‘ä»¬çš„å¼‚æ­¥æ–¹æ³•æ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥è¦åœ¨æ–¹æ³•ä¸Šæ·»åŠ æ³¨è§£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Async</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(<span class="string">&quot;æ•°æ®æ­£åœ¨ä¼ è¾“...&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>â‘¡å»springbootä¸»ç¨‹åºä¸­å¼€å¯å¼‚æ­¥æ³¨è§£åŠŸèƒ½</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@EnableAsync</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SwaggerDemoApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(SwaggerDemoApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é‡å¯å³å¯</p>
<h2 id="é‚®ä»¶ä»»åŠ¡"><a href="#é‚®ä»¶ä»»åŠ¡" class="headerlink" title="é‚®ä»¶ä»»åŠ¡"></a>é‚®ä»¶ä»»åŠ¡</h2><p>é‚®ä»¶å‘é€ï¼Œåœ¨æˆ‘ä»¬çš„æ—¥å¸¸å¼€å‘ä¸­ï¼Œä¹Ÿéå¸¸çš„å¤šï¼ŒSpringbootä¹Ÿå¸®æˆ‘ä»¬åšäº†æ”¯æŒ</p>
<ul>
<li>é‚®ä»¶å‘é€éœ€è¦å¼•å…¥spring-boot-start-mail</li>
<li>SpringBoot è‡ªåŠ¨é…ç½®MailSenderAutoConfiguration</li>
<li>å®šä¹‰MailPropertieså†…å®¹ï¼Œé…ç½®åœ¨application.ymlä¸­</li>
<li>è‡ªåŠ¨è£…é…JavaMailSender</li>
<li>æµ‹è¯•é‚®ä»¶å‘é€</li>
</ul>
<p><strong>æµ‹è¯•ï¼š</strong></p>
<p>1ã€å¼•å…¥pomä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-mail<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>çœ‹å®ƒå¼•å…¥çš„ä¾èµ–ï¼Œå¯ä»¥çœ‹åˆ° jakarta.mail</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.sun.mail<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jakarta.mail<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2ã€æŸ¥çœ‹è‡ªåŠ¨é…ç½®ç±»ï¼šMailSenderAutoConfiguration</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692779198007-d117a88f-8efb-4862-9d24-b9f355685d51.png" alt="img"></p>
<p>okæˆ‘ä»¬ç‚¹è¿›å»ï¼Œçœ‹åˆ°é‡Œé¢å­˜åœ¨beanï¼ŒJavaMailSenderImpl</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692779210655-936500d0-ab94-45b9-a73f-22b163abd447.png" alt="img"></p>
<p>ç„¶åæˆ‘ä»¬å»çœ‹ä¸‹é…ç½®æ–‡ä»¶</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties(</span></span><br><span class="line"><span class="meta">   prefix = &quot;spring.mail&quot;</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MailProperties</span> &#123;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Charset DEFAULT_CHARSET;</span><br><span class="line">   <span class="keyword">private</span> String host;</span><br><span class="line">   <span class="keyword">private</span> Integer port;</span><br><span class="line">   <span class="keyword">private</span> String username;</span><br><span class="line">   <span class="keyword">private</span> String password;</span><br><span class="line">   <span class="keyword">private</span> <span class="type">String</span> <span class="variable">protocol</span> <span class="operator">=</span> <span class="string">&quot;smtp&quot;</span>;</span><br><span class="line">   <span class="keyword">private</span> Charset defaultEncoding;</span><br><span class="line">   <span class="keyword">private</span> Map&lt;String, String&gt; properties;</span><br><span class="line">   <span class="keyword">private</span> String jndiName;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3ã€é…ç½®æ–‡ä»¶ï¼š</p>
<p>spring.mail.username&#x3D;ä½ çš„é‚®ç®±</p>
<p>spring.mail.password&#x3D;ä½ çš„é‚®ç®±æˆæƒç </p>
<p>spring.mail.host&#x3D;smtp.163.com</p>
<p># qqéœ€è¦é…ç½®sslï¼Œå…¶ä»–é‚®ç®±ä¸éœ€è¦</p>
<p>spring.mail.properties.mail.smtp.ssl.enable&#x3D;true</p>
<p>é¦–å…ˆä½ éœ€è¦å»é‚®ç®±ç½‘ç«™å¼€å¯POP3&#x2F;SMTP</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692779276048-9ba1c187-c69a-44af-9e45-626bcbf636e3.png" alt="img"></p>
<p>4ã€Springå•å…ƒæµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SwaggerDemoApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    JavaMailSenderImpl mailSender;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//é‚®ä»¶è®¾ç½®1ï¼šä¸€ä¸ªç®€å•çš„é‚®ä»¶</span></span><br><span class="line">        <span class="type">SimpleMailMessage</span> <span class="variable">message</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleMailMessage</span>();</span><br><span class="line">        message.setSubject(<span class="string">&quot;è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•é‚®ä»¶å‘é€æ ‡é¢˜&quot;</span>);</span><br><span class="line">        message.setText(<span class="string">&quot;è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•é‚®ä»¶å‘é€å†…å®¹&quot;</span>);</span><br><span class="line"></span><br><span class="line">        mailMessage.setTo(<span class="string">&quot;2796189414@qq.com&quot;</span>);</span><br><span class="line">        mailMessage.setFrom(<span class="string">&quot;2796189414@qq.com&quot;</span>);</span><br><span class="line">        mailSender.send(message);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å‘é€ä¸€ä¸ªè¾ƒä¸ºå¤æ‚çš„é‚®ä»¶ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">contextLoads2</span><span class="params">()</span> <span class="keyword">throws</span> MessagingException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä¸€å°å¤æ‚çš„é‚®ä»¶</span></span><br><span class="line">        <span class="type">MimeMessage</span> <span class="variable">mimeMessage</span> <span class="operator">=</span> mailSender.createMimeMessage();</span><br><span class="line">        <span class="comment">//ç»„è£…</span></span><br><span class="line">        <span class="type">MimeMessageHelper</span> <span class="variable">helper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MimeMessageHelper</span>(mimeMessage, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ­£æ–‡</span></span><br><span class="line">        helper.setSubject(<span class="string">&quot;xiaowuä½ å¥½~&quot;</span>);</span><br><span class="line">        helper.setText(<span class="string">&quot;&lt;p style=&#x27;color:red&#x27;&gt;xiaowuä½ å°Šå˜Ÿå¥½å¸…ï¼ï¼ï¼&lt;/p&gt;&quot;</span>,<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//é™„ä»¶</span></span><br><span class="line">        helper.addAttachment(<span class="string">&quot;1.png&quot;</span>,<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;C:\\Users\\27961\\Pictures\\Screenshots\\2.png&quot;</span>));</span><br><span class="line">        helper.addAttachment(<span class="string">&quot;2.png&quot;</span>,<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;C:\\Users\\27961\\Pictures\\Screenshots\\3.png&quot;</span>));</span><br><span class="line"></span><br><span class="line">        helper.setTo(<span class="string">&quot;2796189414@qq.com&quot;</span>);</span><br><span class="line">        helper.setFrom(<span class="string">&quot;2796189414@qq.com&quot;</span>);</span><br><span class="line"></span><br><span class="line">        mailSender.send(mimeMessage);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>æŸ¥çœ‹é‚®ç®±ï¼Œé‚®ä»¶æ¥æ”¶æˆåŠŸï¼</p>
<p>æˆ‘ä»¬åªéœ€è¦ä½¿ç”¨Thymeleafè¿›è¡Œå‰åç«¯ç»“åˆå³å¯å¼€å‘è‡ªå·±ç½‘ç«™é‚®ä»¶æ”¶å‘åŠŸèƒ½äº†ï¼</p>
<h2 id="å®šæ—¶ä»»åŠ¡"><a href="#å®šæ—¶ä»»åŠ¡" class="headerlink" title="å®šæ—¶ä»»åŠ¡"></a>å®šæ—¶ä»»åŠ¡</h2><p>é¡¹ç›®å¼€å‘ä¸­ç»å¸¸éœ€è¦æ‰§è¡Œä¸€äº›å®šæ—¶ä»»åŠ¡ï¼Œæ¯”å¦‚éœ€è¦åœ¨æ¯å¤©å‡Œæ™¨çš„æ—¶å€™ï¼Œåˆ†æä¸€æ¬¡å‰ä¸€å¤©çš„æ—¥å¿—ä¿¡æ¯ï¼ŒSpringä¸ºæˆ‘ä»¬æä¾›äº†å¼‚æ­¥æ‰§è¡Œä»»åŠ¡è°ƒåº¦çš„æ–¹å¼ï¼Œæä¾›äº†ä¸¤ä¸ªæ¥å£ã€‚</p>
<ul>
<li>TaskExecutoræ¥å£</li>
<li>TaskScheduleræ¥å£</li>
</ul>
<p>ä¸¤ä¸ªæ³¨è§£ï¼š</p>
<ul>
<li>@EnableScheduling</li>
<li>@Scheduled</li>
</ul>
<p><strong>cronè¡¨è¾¾å¼ï¼š</strong></p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692779492463-2ae1c231-6e01-4a2c-b44f-fb4df2593199.png" alt="img"></p>
<p><strong>æµ‹è¯•æ­¥éª¤ï¼š</strong></p>
<p>1ã€åˆ›å»ºä¸€ä¸ªScheduledService</p>
<p>æˆ‘ä»¬é‡Œé¢å­˜åœ¨ä¸€ä¸ªhelloæ–¹æ³•ï¼Œä»–éœ€è¦å®šæ—¶æ‰§è¡Œï¼Œæ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ScheduledService</span> &#123;</span><br><span class="line">   </span><br><span class="line">   <span class="comment">//ç§’   åˆ†   æ—¶     æ—¥   æœˆ   å‘¨å‡ </span></span><br><span class="line">   <span class="comment">//0 * * * * MON-FRI</span></span><br><span class="line">   <span class="comment">//æ³¨æ„cronè¡¨è¾¾å¼çš„ç”¨æ³•ï¼›</span></span><br><span class="line">   <span class="meta">@Scheduled(cron = &quot;0 * * * * 0-7&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hello</span><span class="params">()</span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;hello.....&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2ã€è¿™é‡Œå†™å®Œå®šæ—¶ä»»åŠ¡ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä¸»ç¨‹åºä¸Šå¢åŠ @EnableScheduling å¼€å¯å®šæ—¶ä»»åŠ¡åŠŸèƒ½</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@EnableAsync</span> <span class="comment">//å¼€å¯å¼‚æ­¥æ³¨è§£åŠŸèƒ½</span></span><br><span class="line"><span class="meta">@EnableScheduling</span> <span class="comment">//å¼€å¯åŸºäºæ³¨è§£çš„å®šæ—¶ä»»åŠ¡</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringbootTaskApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">       SpringApplication.run(SpringbootTaskApplication.class, args);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3ã€æˆ‘ä»¬æ¥è¯¦ç»†äº†è§£ä¸‹cronè¡¨è¾¾å¼ï¼›</p>
<p><a href="http://www.bejson.com/othertools/cron/4%E3%80%81%E5%B8%B8%E7%94%A8%E7%9A%84%E8%A1%A8%E8%BE%BE%E5%BC%8F">http://www.bejson.com/othertools/cron/4ã€å¸¸ç”¨çš„è¡¨è¾¾å¼</a></p>
<p>4.å¸¸ç”¨è¡¨è¾¾å¼</p>
<figure class="highlight latex"><table><tr><td class="code"><pre><span class="line">ï¼ˆ1ï¼‰0/2 * * * * ?   è¡¨ç¤ºæ¯2ç§’ æ‰§è¡Œä»»åŠ¡</span><br><span class="line">ï¼ˆ1ï¼‰0 0/2 * * * ?   è¡¨ç¤ºæ¯2åˆ†é’Ÿ æ‰§è¡Œä»»åŠ¡</span><br><span class="line">ï¼ˆ1ï¼‰0 0 2 1 * ?   è¡¨ç¤ºåœ¨æ¯æœˆçš„1æ—¥çš„å‡Œæ™¨2ç‚¹è°ƒæ•´ä»»åŠ¡</span><br><span class="line">ï¼ˆ2ï¼‰0 15 10 ? * MON-FRI   è¡¨ç¤ºå‘¨ä¸€åˆ°å‘¨äº”æ¯å¤©ä¸Šåˆ10:15æ‰§è¡Œä½œä¸š</span><br><span class="line">ï¼ˆ3ï¼‰0 15 10 ? 6L 2002-2006   è¡¨ç¤º2002-2006å¹´çš„æ¯ä¸ªæœˆçš„æœ€åä¸€ä¸ªæ˜ŸæœŸäº”ä¸Šåˆ10:15æ‰§è¡Œä½œ</span><br><span class="line">ï¼ˆ4ï¼‰0 0 10,14,16 * * ?   æ¯å¤©ä¸Šåˆ10ç‚¹ï¼Œä¸‹åˆ2ç‚¹ï¼Œ4ç‚¹</span><br><span class="line">ï¼ˆ5ï¼‰0 0/30 9-17 * * ?   æœä¹æ™šäº”å·¥ä½œæ—¶é—´å†…æ¯åŠå°æ—¶</span><br><span class="line">ï¼ˆ6ï¼‰0 0 12 ? * WED   è¡¨ç¤ºæ¯ä¸ªæ˜ŸæœŸä¸‰ä¸­åˆ12ç‚¹</span><br><span class="line">ï¼ˆ7ï¼‰0 0 12 * * ?   æ¯å¤©ä¸­åˆ12ç‚¹è§¦å‘</span><br><span class="line">ï¼ˆ8ï¼‰0 15 10 ? * *   æ¯å¤©ä¸Šåˆ10:15è§¦å‘</span><br><span class="line">ï¼ˆ9ï¼‰0 15 10 * * ?     æ¯å¤©ä¸Šåˆ10:15è§¦å‘</span><br><span class="line">ï¼ˆ10ï¼‰0 15 10 * * ?   æ¯å¤©ä¸Šåˆ10:15è§¦å‘</span><br><span class="line">ï¼ˆ11ï¼‰0 15 10 * * ? 2005   2005å¹´çš„æ¯å¤©ä¸Šåˆ10:15è§¦å‘</span><br><span class="line">ï¼ˆ12ï¼‰0 * 14 * * ?     åœ¨æ¯å¤©ä¸‹åˆ2ç‚¹åˆ°ä¸‹åˆ2:59æœŸé—´çš„æ¯1åˆ†é’Ÿè§¦å‘</span><br><span class="line">ï¼ˆ13ï¼‰0 0/5 14 * * ?   åœ¨æ¯å¤©ä¸‹åˆ2ç‚¹åˆ°ä¸‹åˆ2:55æœŸé—´çš„æ¯5åˆ†é’Ÿè§¦å‘</span><br><span class="line">ï¼ˆ14ï¼‰0 0/5 14,18 * * ?     åœ¨æ¯å¤©ä¸‹åˆ2ç‚¹åˆ°2:55æœŸé—´å’Œä¸‹åˆ6ç‚¹åˆ°6:55æœŸé—´çš„æ¯5åˆ†é’Ÿè§¦å‘</span><br><span class="line">ï¼ˆ15ï¼‰0 0-5 14 * * ?   åœ¨æ¯å¤©ä¸‹åˆ2ç‚¹åˆ°ä¸‹åˆ2:05æœŸé—´çš„æ¯1åˆ†é’Ÿè§¦å‘</span><br><span class="line">ï¼ˆ16ï¼‰0 10,44 14 ? 3 WED   æ¯å¹´ä¸‰æœˆçš„æ˜ŸæœŸä¸‰çš„ä¸‹åˆ2:10å’Œ2:44è§¦å‘</span><br><span class="line">ï¼ˆ17ï¼‰0 15 10 ? * MON-FRI   å‘¨ä¸€è‡³å‘¨äº”çš„ä¸Šåˆ10:15è§¦å‘</span><br><span class="line">ï¼ˆ18ï¼‰0 15 10 15 * ?   æ¯æœˆ15æ—¥ä¸Šåˆ10:15è§¦å‘</span><br><span class="line">ï¼ˆ19ï¼‰0 15 10 L * ?   æ¯æœˆæœ€åä¸€æ—¥çš„ä¸Šåˆ10:15è§¦å‘</span><br><span class="line">ï¼ˆ20ï¼‰0 15 10 ? * 6L   æ¯æœˆçš„æœ€åä¸€ä¸ªæ˜ŸæœŸäº”ä¸Šåˆ10:15è§¦å‘</span><br><span class="line">ï¼ˆ21ï¼‰0 15 10 ? * 6L 2002-2005   2002å¹´è‡³2005å¹´çš„æ¯æœˆçš„æœ€åä¸€ä¸ªæ˜ŸæœŸäº”ä¸Šåˆ10:15è§¦å‘</span><br><span class="line">ï¼ˆ22ï¼‰0 15 10 ? * 6<span class="params">#3</span>   æ¯æœˆçš„ç¬¬ä¸‰ä¸ªæ˜ŸæœŸäº”ä¸Šåˆ10:15è§¦å‘</span><br></pre></td></tr></table></figure>

<h1 id="SpringBootæ•´åˆReadis"><a href="#SpringBootæ•´åˆReadis" class="headerlink" title="SpringBootæ•´åˆReadis"></a>SpringBootæ•´åˆReadis</h1><h2 id="1-æ¦‚è¿°"><a href="#1-æ¦‚è¿°" class="headerlink" title="1. æ¦‚è¿°"></a>1. æ¦‚è¿°</h2><h3 id="1-1-SpringData"><a href="#1-1-SpringData" class="headerlink" title="1.1 SpringData"></a>1.1 SpringData</h3><p>pringBoot æ“ä½œæ•°æ®éƒ½æ˜¯ä½¿ç”¨ â€”â€”SpringData</p>
<p>ä»¥ä¸‹æ˜¯ Spring å®˜ç½‘ä¸­æè¿°çš„ SpringData å¯ä»¥æ•´åˆçš„æ•°æ®æº</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692776222150-058edd9e-a305-48a4-ac98-5d90791eed80.png" alt="img"></p>
<p>å¯ä»¥å‘ç° Spring Data Redis</p>
<h3 id="1-2-lettuce"><a href="#1-2-lettuce" class="headerlink" title="1.2 lettuce"></a>1.2 lettuce</h3><p>åœ¨ SpringBoot 2.X ä¹‹åï¼ŒåŸæ¥çš„ Jedis è¢«æ›¿æ¢ä¸ºäº† lettuce</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692776273188-159396b1-8341-4b0b-8c25-77e6e7b8e7b6.png" alt="img"></p>
<p><strong>Jedis å’Œ lettuce åŒºåˆ«</strong></p>
<p>Jedis ï¼šé‡‡ç”¨çš„æ˜¯ç›´è¿çš„æœåŠ¡ï¼Œå¦‚æœæœ‰å¤šä¸ªçº¿ç¨‹æ“ä½œçš„è¯æ˜¯ä¸å®‰å…¨çš„ï¼Œå°±éœ€è¦ä½¿ç”¨ Jedis Pool è¿æ¥æ± å–è§£å†³ã€‚é—®é¢˜å°±ä¼šæ¯”è¾ƒå¤šã€‚</p>
<p>lettuce ï¼šåº•å±‚é‡‡ç”¨ Netty ï¼Œå®ä¾‹å¯ä»¥åœ¨å¤šä¸ªçº¿ç¨‹ä¸­å…±äº«ï¼Œä¸å­˜åœ¨çº¿ç¨‹ä¸å®‰å…¨çš„æƒ…å†µã€‚å¯ä»¥å‡å°‘çº¿ç¨‹æ•°æ®äº†ï¼Œæ€§èƒ½æ›´é«˜ã€‚</p>
<h2 id="2-éƒ¨åˆ†æºç "><a href="#2-éƒ¨åˆ†æºç " class="headerlink" title="2. éƒ¨åˆ†æºç "></a>2. éƒ¨åˆ†<a href="https://so.csdn.net/so/search?q=%E6%BA%90%E7%A0%81&spm=1001.2101.3001.7020">æºç </a></h2><h3 id="2-1-è‡ªåŠ¨é…ç½®"><a href="#2-1-è‡ªåŠ¨é…ç½®" class="headerlink" title="2.1 è‡ªåŠ¨é…ç½®"></a>2.1 è‡ªåŠ¨é…ç½®</h3><ol>
<li>æ‰¾åˆ° spring.factoriesspring-boot-autoconfigure-2.3.4.RELEASE.jar â†’ META-INF â†’ spring.factories</li>
<li>åœ¨ spring.factories ä¸­æœç´¢ redis</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692776383054-d976625a-9bee-4658-800c-6a3e1f6a6616.png" alt="img"></p>
<p>å¯ä»¥å¾—å‡ºé…ç½® Redisï¼Œåªéœ€è¦é…ç½® RedisAutoConfiguration å³å¯</p>
<ol>
<li>ç‚¹è¿› RedisAutoConfiguration</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692776512982-51dbf71b-5c41-4b03-8a95-ef9f305d20c3.png" alt="img"></p>
<ol>
<li>ç‚¹è¿› RedisProperties</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692776537729-f0526715-4b5a-4236-ae96-75aa5ee6c50e.png" alt="img"></p>
<ol>
<li>å›åˆ° RedisAutoConfigurationï¼Œè§‚å¯Ÿå®ƒåšäº†ä»€ä¹ˆ</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692776560584-19615552-bdf9-40d0-8024-b4de214c6c34.png" alt="img"></p>
<h3 id="2-2-Jedis-pool-ä¸ç”Ÿæ•ˆ"><a href="#2-2-Jedis-pool-ä¸ç”Ÿæ•ˆ" class="headerlink" title="2.2 Jedis.pool ä¸ç”Ÿæ•ˆ"></a>2.2 Jedis.pool ä¸ç”Ÿæ•ˆ</h3><ol>
<li>åœ¨ RedisAutoConfiguration ç±»ä¸­çš„ RedisTemplate æ–¹æ³•éœ€è¦ä¼ é€’ä¸€ä¸ª RedisConnectionFactory å‚æ•°ã€‚ç‚¹è¿›è¿™ä¸ªå‚æ•°</li>
<li>è¿™æ˜¯ä¸€ä¸ªç»“æ„ï¼ŒæŸ¥çœ‹å®ç°ç±»</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692776589020-90025d76-8144-4103-b8ad-6456353fc10a.png" alt="img"></p>
<ol>
<li>æŸ¥çœ‹ Jedis çš„å®ç°ç±»ï¼Œä¸‹è½½æºç </li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692776629553-62900198-c06a-4b99-bd2a-1d472b986433.png" alt="img"></p>
<p>ä¼šå‘ç° ï¼Œè¿™ä¸ªç±»ä¸­å¾ˆå¤šæ²¡æœ‰å®ç°çš„åœ°æ–¹ã€‚æ‰€ä»¥ Jedis Pool ä¸å¯ä»¥</p>
<ol>
<li>æŸ¥çœ‹ Lettuce çš„å®ç°ç±»</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692776675589-47f1b177-348b-402b-9e66-8b5b2faa5f1e.png" alt="img"></p>
<p>æ²¡é—®é¢˜</p>
<ul>
<li>è¿™ä¹Ÿè¯´æ˜ SpringBoot æ›´æ¨èä½¿ç”¨ Lettuce</li>
</ul>
<h2 id="3-ä½¿ç”¨"><a href="#3-ä½¿ç”¨" class="headerlink" title="3. ä½¿ç”¨"></a>3. ä½¿ç”¨</h2><ol>
<li>æ–°å»ºä¸€ä¸ª SpringBoot é¡¹ç›®ï¼Œå‹¾é€‰ä¸Šä»¥ä¸‹</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692776835818-500563ea-e83f-4213-8a7f-01d1a6803f58.png" alt="img"></p>
<ol>
<li>ç›¸å…³ä¾èµ–</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>é…ç½®è¿æ¥ï¼Œapplication.yml</li>
</ol>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># é…ç½® Redis</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="number">192.168</span><span class="number">.142</span><span class="number">.120</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">6379</span></span><br></pre></td></tr></table></figure>

<ol>
<li>æµ‹è¯•</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¿™å°±æ˜¯ä¹‹å‰ RedisAutoConfiguration æºç ä¸­çš„ Bean</span></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> RedisTemplate redisTemplate;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="comment">/** redisTemplate æ“ä½œä¸åŒçš„æ•°æ®ç±»å‹ï¼ŒAPI å’Œ Redis ä¸­çš„æ˜¯ä¸€æ ·çš„</span></span><br><span class="line"><span class="comment">	 * opsForValue ç±»ä¼¼äº Redis ä¸­çš„ String</span></span><br><span class="line"><span class="comment">	 * opsForList ç±»ä¼¼äº Redis ä¸­çš„ List</span></span><br><span class="line"><span class="comment">	 * opsForSet ç±»ä¼¼äº Redis ä¸­çš„ Set</span></span><br><span class="line"><span class="comment">	 * opsForHash ç±»ä¼¼äº Redis ä¸­çš„ Hash</span></span><br><span class="line"><span class="comment">	 * opsForZSet ç±»ä¼¼äº Redis ä¸­çš„ ZSet</span></span><br><span class="line"><span class="comment">	 * opsForGeo ç±»ä¼¼äº Redis ä¸­çš„ Geospatial</span></span><br><span class="line"><span class="comment">	 * opsForHyperLogLog ç±»ä¼¼äº Redis ä¸­çš„ HyperLogLog</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// é™¤äº†åŸºæœ¬çš„æ“ä½œï¼Œå¸¸ç”¨çš„å‘½ä»¤éƒ½å¯ä»¥ç›´æ¥é€šè¿‡redisTemplateæ“ä½œï¼Œæ¯”å¦‚äº‹åŠ¡â€¦â€¦</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// å’Œæ•°æ®åº“ç›¸å…³çš„æ“ä½œéƒ½éœ€è¦é€šè¿‡è¿æ¥æ“ä½œ</span></span><br><span class="line">	<span class="comment">//RedisConnection connection = redisTemplate.getConnectionFactory().getConnection();</span></span><br><span class="line">	<span class="comment">//connection.flushDb();</span></span><br><span class="line"></span><br><span class="line">	redisTemplate.opsForValue().set(<span class="string">&quot;key&quot;</span>, <span class="string">&quot;å‘µå‘µ&quot;</span>);</span><br><span class="line">	System.out.println(redisTemplate.opsForValue().get(<span class="string">&quot;key&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-åºåˆ—åŒ–"><a href="#4-åºåˆ—åŒ–" class="headerlink" title="4.åºåˆ—åŒ–"></a>4.åºåˆ—åŒ–</h2><h3 id="4-1-ä¸ºä»€ä¹ˆè¦åºåˆ—åŒ–"><a href="#4-1-ä¸ºä»€ä¹ˆè¦åºåˆ—åŒ–" class="headerlink" title="4.1 ä¸ºä»€ä¹ˆè¦åºåˆ—åŒ–"></a>4.1 ä¸ºä»€ä¹ˆè¦åºåˆ—åŒ–</h3><ol>
<li>æ–°å»ºä¸€ä¸ªå®ä½“ç±»</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="comment">// å®ä½“ç±»åºåˆ—åŒ–åœ¨åé¢åŠ ä¸Š implements Serializable </span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>ç¼–å†™æµ‹è¯•ç±»ï¼Œå…ˆä¸åºåˆ—åŒ–</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line">	<span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;åœ†&quot;</span>,<span class="string">&quot;20&quot;</span>);</span><br><span class="line">	<span class="comment">// ä½¿ç”¨ JSON åºåˆ—åŒ–</span></span><br><span class="line">	<span class="comment">//String s = new ObjectMapper().writeValueAsString(user);</span></span><br><span class="line">	<span class="comment">// è¿™é‡Œç›´æ¥ä¼ å…¥ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">	redisTemplate.opsForValue().set(<span class="string">&quot;user&quot;</span>, user);</span><br><span class="line">	System.out.println(redisTemplate.opsForValue().get(<span class="string">&quot;user&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>æ‰§è¡Œç»“æœ</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692777320798-f66bf6ad-21bb-4931-8789-8545fea1806d.png" alt="img"></p>
<p>å¦‚æœåºåˆ—åŒ–å°±ä¸ä¼šæŠ¥é”™</p>
<ul>
<li>æ‰€ä»¥ä¸€èˆ¬å®ä½“ç±»éƒ½è¦åºåˆ—åŒ–</li>
</ul>
<h3 id="4-2-ä¸ºä»€ä¹ˆè¦è‡ªå®šä¹‰åºåˆ—åŒ–"><a href="#4-2-ä¸ºä»€ä¹ˆè¦è‡ªå®šä¹‰åºåˆ—åŒ–" class="headerlink" title="4.2 ä¸ºä»€ä¹ˆè¦è‡ªå®šä¹‰åºåˆ—åŒ–"></a>4.2 ä¸ºä»€ä¹ˆè¦è‡ªå®šä¹‰åºåˆ—åŒ–</h3><p>æ‰§è¡Œ <strong>3. ä½¿ç”¨</strong> ä¸­çš„é‚£ä¸ªæµ‹è¯•ç±»ï¼Œå‘æ•°æ®åº“ä¸­æ’å…¥äº†ä¸€ä¸ªä¸­æ–‡å­—ç¬¦ä¸²ï¼Œè™½ç„¶åœ¨ Java ç«¯å¯ä»¥çœ‹åˆ°è¿”å›äº†ä¸­æ–‡ï¼Œä½†æ˜¯åœ¨ Redis ä¸­æŸ¥çœ‹æ˜¯ä¸€ä¸²ä¹±ç ã€‚</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692778315338-ac0f15d1-b4f7-41a2-8a02-693694e2595e.png" alt="img"></p>
<p>è§£å†³è¿™ä¸ªé—®é¢˜å°±éœ€è¦ä¿®æ”¹é»˜è®¤çš„åºåˆ—åŒ–è§„åˆ™ã€‚</p>
<h3 id="4-2-æºç "><a href="#4-2-æºç " class="headerlink" title="4.2 æºç "></a>4.2 æºç </h3><ol>
<li>åœ¨ RedisAutoConfiguration ç±»çš„ redisTemplate æ–¹æ³•ä¸­ç”¨åˆ°äº†ä¸€ä¸ª RedisTemplate çš„å¯¹è±¡</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692778498063-294e0b1b-917a-4f85-85a4-0d076d02a956.png" alt="img"></p>
<ol>
<li>ç‚¹è¿› RedisTemplate</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692778522068-fa022d52-c8e6-43ad-b28b-316aa8269036.png" alt="img"></p>
<ol>
<li>æŸ¥çœ‹è¿™äº›åºåˆ—åŒ–å¯¹è±¡åœ¨å“ªèµ‹å€¼çš„</li>
</ol>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692778547312-0904046e-4458-4459-a911-16b2fb682fc8.png" alt="img"></p>
<ul>
<li>ä½†æˆ‘ä»¬éœ€è¦çš„æ˜¯ JSON åºåˆ—åŒ–ï¼Œæ‰€ä»¥å°±éœ€è¦è‡ªå®šä¹‰ä¸€ä¸ªé…ç½®ç±»</li>
</ul>
<h3 id="4-3-ä½¿ç”¨"><a href="#4-3-ä½¿ç”¨" class="headerlink" title="4.3 ä½¿ç”¨"></a>4.3 ä½¿ç”¨</h3><ul>
<li>redisTemplate æ¨¡æ¿</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedisConfig</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  ç¼–å†™è‡ªå®šä¹‰çš„ redisTemplate</span></span><br><span class="line"><span class="comment">     *  è¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒå›ºå®šçš„æ¨¡æ¿</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;all&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> RedisTemplate&lt;String, Object&gt; <span class="title function_">redisTemplate</span><span class="params">(RedisConnectionFactory redisConnectionFactory)</span> <span class="keyword">throws</span> UnknownHostException &#123;</span><br><span class="line">        <span class="comment">// ä¸ºäº†å¼€å‘æ–¹ä¾¿ï¼Œç›´æ¥ä½¿ç”¨&lt;String, Object&gt;</span></span><br><span class="line">        RedisTemplate&lt;String, Object&gt; template = <span class="keyword">new</span> <span class="title class_">RedisTemplate</span>();</span><br><span class="line">        template.setConnectionFactory(redisConnectionFactory);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Json é…ç½®åºåˆ—åŒ–</span></span><br><span class="line">        <span class="comment">// ä½¿ç”¨ jackson è§£æä»»æ„çš„å¯¹è±¡</span></span><br><span class="line">        Jackson2JsonRedisSerializer&lt;Object&gt; jackson2JsonRedisSerializer = <span class="keyword">new</span> <span class="title class_">Jackson2JsonRedisSerializer</span>&lt;&gt;(Object.class);</span><br><span class="line">        <span class="comment">// ä½¿ç”¨ objectMapper è¿›è¡Œè½¬ä¹‰</span></span><br><span class="line">        <span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line">        objectMapper.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);</span><br><span class="line">        objectMapper.activateDefaultTyping(LaissezFaireSubTypeValidator.instance, ObjectMapper.DefaultTyping.NON_FINAL);</span><br><span class="line">        jackson2JsonRedisSerializer.setObjectMapper(objectMapper);</span><br><span class="line">        <span class="comment">// String çš„åºåˆ—åŒ–</span></span><br><span class="line">        <span class="type">StringRedisSerializer</span> <span class="variable">stringRedisSerializer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringRedisSerializer</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// key é‡‡ç”¨ String çš„åºåˆ—åŒ–æ–¹å¼</span></span><br><span class="line">        template.setKeySerializer(stringRedisSerializer);</span><br><span class="line">        <span class="comment">// Hash çš„ key é‡‡ç”¨ String çš„åºåˆ—åŒ–æ–¹å¼</span></span><br><span class="line">        template.setHashKeySerializer(stringRedisSerializer);</span><br><span class="line">        <span class="comment">// value é‡‡ç”¨ jackson çš„åºåˆ—åŒ–æ–¹å¼</span></span><br><span class="line">        template.setValueSerializer(jackson2JsonRedisSerializer);</span><br><span class="line">        <span class="comment">// Hash çš„ value é‡‡ç”¨ jackson çš„åºåˆ—åŒ–æ–¹å¼</span></span><br><span class="line">        template.setHashValueSerializer(jackson2JsonRedisSerializer);</span><br><span class="line">        <span class="comment">// æŠŠæ‰€æœ‰çš„é…ç½® set è¿› template</span></span><br><span class="line">        template.afterPropertiesSet();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> template;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ¸…ç©ºä¸€ä¸‹æ•°æ®åº“</p>
<p>å†æ¬¡æ‰§è¡Œä¹‹å‰é‚£ä¸ªæ’å…¥ User å¯¹è±¡çš„æµ‹è¯•ç±»</p>
<p>å‘ç°æ‰§è¡ŒæˆåŠŸï¼Œæ²¡æœ‰æŠ¥é”™ï¼Œå¹¶ä¸”åœ¨ Redis ä¸­ä¹Ÿæ²¡æœ‰è½¬ä¹‰å­—ç¬¦äº†</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692778625316-5f6a1dad-fb2b-41c2-8df3-185c40e06f68.png" alt="img"></p>
<ul>
<li>ä½†æ˜¯å»è·å–è¿™ä¸ªå¯¹è±¡æˆ–è€…ä¸­æ–‡å­—ç¬¦ä¸²çš„æ—¶å€™è¿˜æ˜¯ä¼šæ˜¾ç¤ºè½¬ä¹‰å­—ç¬¦ï¼Œæ€ä¹ˆè§£å†³ï¼Ÿ</li>
</ul>
<p>åªéœ€è¦åœ¨å¯åŠ¨ Redis å®¢æˆ·ç«¯çš„æ—¶å€™åŠ ä¸Š â€“raw å³å¯</p>
<p>redis-cli â€“raw -p 6379</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692778661043-7afe48be-0a1a-4918-be53-defc5307e8af.png" alt="img"></p>
<h2 id="å·¥å…·ç±»"><a href="#å·¥å…·ç±»" class="headerlink" title="å·¥å…·ç±»"></a>å·¥å…·ç±»</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">RedisUtil</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate&lt;String, Object&gt; redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// =============================common============================</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŒ‡å®šç¼“å­˜å¤±æ•ˆæ—¶é—´</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key  é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> time æ—¶é—´(ç§’)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">expire</span><span class="params">(String key, <span class="type">long</span> time)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (time &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                redisTemplate.expire(key, time, TimeUnit.SECONDS);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®key è·å–è¿‡æœŸæ—¶é—´</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key é”® ä¸èƒ½ä¸ºnull</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æ—¶é—´(ç§’) è¿”å›0ä»£è¡¨ä¸ºæ°¸ä¹…æœ‰æ•ˆ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">getExpire</span><span class="params">(String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.getExpire(key, TimeUnit.SECONDS);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ¤æ–­keyæ˜¯å¦å­˜åœ¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> true å­˜åœ¨ falseä¸å­˜åœ¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasKey</span><span class="params">(String key)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.hasKey(key);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤ç¼“å­˜</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key å¯ä»¥ä¼ ä¸€ä¸ªå€¼ æˆ–å¤šä¸ª</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">del</span><span class="params">(String... key)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (key != <span class="literal">null</span> &amp;&amp; key.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (key.length == <span class="number">1</span>) &#123;</span><br><span class="line">                redisTemplate.delete(key[<span class="number">0</span>]);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                redisTemplate.delete(CollectionUtils.arrayToList(key));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ============================String=============================</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ™®é€šç¼“å­˜è·å–</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">get</span><span class="params">(String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> key == <span class="literal">null</span> ? <span class="literal">null</span> : redisTemplate.opsForValue().get(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ™®é€šç¼“å­˜æ”¾å…¥</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> trueæˆåŠŸ falseå¤±è´¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">set</span><span class="params">(String key, Object value)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForValue().set(key, value);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ™®é€šç¼“å­˜æ”¾å…¥å¹¶è®¾ç½®æ—¶é—´</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> time  æ—¶é—´(ç§’) timeè¦å¤§äº0 å¦‚æœtimeå°äºç­‰äº0 å°†è®¾ç½®æ— é™æœŸ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> trueæˆåŠŸ false å¤±è´¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">set</span><span class="params">(String key, Object value, <span class="type">long</span> time)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (time &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                redisTemplate.opsForValue().set(key, value, time, TimeUnit.SECONDS);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                set(key, value);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€’å¢</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> delta è¦å¢åŠ å‡ (å¤§äº0)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">incr</span><span class="params">(String key, <span class="type">long</span> delta)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (delta &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;é€’å¢å› å­å¿…é¡»å¤§äº0&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForValue().increment(key, delta);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€’å‡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> delta è¦å‡å°‘å‡ (å°äº0)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">decr</span><span class="params">(String key, <span class="type">long</span> delta)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (delta &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;é€’å‡å› å­å¿…é¡»å¤§äº0&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForValue().increment(key, -delta);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ================================Map=================================</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * HashGet</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key  é”® ä¸èƒ½ä¸ºnull</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> item é¡¹ ä¸èƒ½ä¸ºnull</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">hget</span><span class="params">(String key, String item)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForHash().get(key, item);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–hashKeyå¯¹åº”çš„æ‰€æœ‰é”®å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> å¯¹åº”çš„å¤šä¸ªé”®å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Map&lt;Object, Object&gt; <span class="title function_">hmget</span><span class="params">(String key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForHash().entries(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * HashSet</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> map å¯¹åº”å¤šä¸ªé”®å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hmset</span><span class="params">(String key, Map&lt;String, Object&gt; map)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForHash().putAll(key, map);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * HashSet å¹¶è®¾ç½®æ—¶é—´</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key  é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> map  å¯¹åº”å¤šä¸ªé”®å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> time æ—¶é—´(ç§’)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> trueæˆåŠŸ falseå¤±è´¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hmset</span><span class="params">(String key, Map&lt;String, Object&gt; map, <span class="type">long</span> time)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForHash().putAll(key, map);</span><br><span class="line">            <span class="keyword">if</span> (time &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                expire(key, time);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘ä¸€å¼ hashè¡¨ä¸­æ”¾å…¥æ•°æ®,å¦‚æœä¸å­˜åœ¨å°†åˆ›å»º</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> item  é¡¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> true æˆåŠŸ falseå¤±è´¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hset</span><span class="params">(String key, String item, Object value)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForHash().put(key, item, value);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å‘ä¸€å¼ hashè¡¨ä¸­æ”¾å…¥æ•°æ®,å¦‚æœä¸å­˜åœ¨å°†åˆ›å»º</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> item  é¡¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> time  æ—¶é—´(ç§’) æ³¨æ„:å¦‚æœå·²å­˜åœ¨çš„hashè¡¨æœ‰æ—¶é—´,è¿™é‡Œå°†ä¼šæ›¿æ¢åŸæœ‰çš„æ—¶é—´</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> true æˆåŠŸ falseå¤±è´¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hset</span><span class="params">(String key, String item, Object value, <span class="type">long</span> time)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForHash().put(key, item, value);</span><br><span class="line">            <span class="keyword">if</span> (time &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                expire(key, time);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤hashè¡¨ä¸­çš„å€¼</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key  é”® ä¸èƒ½ä¸ºnull</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> item é¡¹ å¯ä»¥ä½¿å¤šä¸ª ä¸èƒ½ä¸ºnull</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">hdel</span><span class="params">(String key, Object... item)</span> &#123;</span><br><span class="line">        redisTemplate.opsForHash().delete(key, item);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ¤æ–­hashè¡¨ä¸­æ˜¯å¦æœ‰è¯¥é¡¹çš„å€¼</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key  é”® ä¸èƒ½ä¸ºnull</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> item é¡¹ ä¸èƒ½ä¸ºnull</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> true å­˜åœ¨ falseä¸å­˜åœ¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hHasKey</span><span class="params">(String key, String item)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForHash().hasKey(key, item);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * hashé€’å¢ å¦‚æœä¸å­˜åœ¨,å°±ä¼šåˆ›å»ºä¸€ä¸ª å¹¶æŠŠæ–°å¢åçš„å€¼è¿”å›</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key  é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> item é¡¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> by   è¦å¢åŠ å‡ (å¤§äº0)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">hincr</span><span class="params">(String key, String item, <span class="type">double</span> by)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForHash().increment(key, item, by);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * hashé€’å‡</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key  é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> item é¡¹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> by   è¦å‡å°‘è®°(å°äº0)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">hdecr</span><span class="params">(String key, String item, <span class="type">double</span> by)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> redisTemplate.opsForHash().increment(key, item, -by);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ============================set=============================</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®keyè·å–Setä¸­çš„æ‰€æœ‰å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key é”®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Set&lt;Object&gt; <span class="title function_">sGet</span><span class="params">(String key)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForSet().members(key);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®valueä»ä¸€ä¸ªsetä¸­æŸ¥è¯¢,æ˜¯å¦å­˜åœ¨</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> true å­˜åœ¨ falseä¸å­˜åœ¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">sHasKey</span><span class="params">(String key, Object value)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForSet().isMember(key, value);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†æ•°æ®æ”¾å…¥setç¼“å­˜</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key    é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> values å€¼ å¯ä»¥æ˜¯å¤šä¸ª</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æˆåŠŸä¸ªæ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">sSet</span><span class="params">(String key, Object... values)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForSet().add(key, values);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†setæ•°æ®æ”¾å…¥ç¼“å­˜</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key    é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> time   æ—¶é—´(ç§’)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> values å€¼ å¯ä»¥æ˜¯å¤šä¸ª</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> æˆåŠŸä¸ªæ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">sSetAndTime</span><span class="params">(String key, <span class="type">long</span> time, Object... values)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> redisTemplate.opsForSet().add(key, values);</span><br><span class="line">            <span class="keyword">if</span> (time &gt; <span class="number">0</span>)</span><br><span class="line">                expire(key, time);</span><br><span class="line">            <span class="keyword">return</span> count;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–setç¼“å­˜çš„é•¿åº¦</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key é”®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">sGetSetSize</span><span class="params">(String key)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForSet().size(key);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç§»é™¤å€¼ä¸ºvalueçš„</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key    é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> values å€¼ å¯ä»¥æ˜¯å¤šä¸ª</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ç§»é™¤çš„ä¸ªæ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">setRemove</span><span class="params">(String key, Object... values)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> redisTemplate.opsForSet().remove(key, values);</span><br><span class="line">            <span class="keyword">return</span> count;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ===============================list=================================</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–listç¼“å­˜çš„å†…å®¹</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> start å¼€å§‹</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> end   ç»“æŸ 0 åˆ° -1ä»£è¡¨æ‰€æœ‰å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Object&gt; <span class="title function_">lGet</span><span class="params">(String key, <span class="type">long</span> start, <span class="type">long</span> end)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForList().range(key, start, end);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–listç¼“å­˜çš„é•¿åº¦</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key é”®</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">lGetListSize</span><span class="params">(String key)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForList().size(key);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€šè¿‡ç´¢å¼• è·å–listä¸­çš„å€¼</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> index ç´¢å¼• index&gt;=0æ—¶ï¼Œ 0 è¡¨å¤´ï¼Œ1 ç¬¬äºŒä¸ªå…ƒç´ ï¼Œä¾æ¬¡ç±»æ¨ï¼›index&lt;0æ—¶ï¼Œ-1ï¼Œè¡¨å°¾ï¼Œ-2å€’æ•°ç¬¬äºŒä¸ªå…ƒç´ ï¼Œä¾æ¬¡ç±»æ¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">lGetIndex</span><span class="params">(String key, <span class="type">long</span> index)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> redisTemplate.opsForList().index(key, index);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†listæ”¾å…¥ç¼“å­˜</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">lSet</span><span class="params">(String key, Object value)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForList().rightPush(key, value);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†listæ”¾å…¥ç¼“å­˜</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> time  æ—¶é—´(ç§’)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">lSet</span><span class="params">(String key, Object value, <span class="type">long</span> time)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForList().rightPush(key, value);</span><br><span class="line">            <span class="keyword">if</span> (time &gt; <span class="number">0</span>)</span><br><span class="line">                expire(key, time);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†listæ”¾å…¥ç¼“å­˜</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">lSet</span><span class="params">(String key, List&lt;Object&gt; value)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForList().rightPushAll(key, value);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†listæ”¾å…¥ç¼“å­˜</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> time  æ—¶é—´(ç§’)</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">lSet</span><span class="params">(String key, List&lt;Object&gt; value, <span class="type">long</span> time)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForList().rightPushAll(key, value);</span><br><span class="line">            <span class="keyword">if</span> (time &gt; <span class="number">0</span>)</span><br><span class="line">                expire(key, time);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®ç´¢å¼•ä¿®æ”¹listä¸­çš„æŸæ¡æ•°æ®</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> index ç´¢å¼•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">lUpdateIndex</span><span class="params">(String key, <span class="type">long</span> index, Object value)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            redisTemplate.opsForList().set(key, index, value);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç§»é™¤Nä¸ªå€¼ä¸ºvalue</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> key   é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> count ç§»é™¤å¤šå°‘ä¸ª</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value å€¼</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> ç§»é™¤çš„ä¸ªæ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">long</span> <span class="title function_">lRemove</span><span class="params">(String key, <span class="type">long</span> count, Object value)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">Long</span> <span class="variable">remove</span> <span class="operator">=</span> redisTemplate.opsForList().remove(key, count, value);</span><br><span class="line">            <span class="keyword">return</span> remove;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Dubboå’ŒZookeeperé›†æˆ"><a href="#Dubboå’ŒZookeeperé›†æˆ" class="headerlink" title="Dubboå’ŒZookeeperé›†æˆ"></a>Dubboå’ŒZookeeperé›†æˆ</h1><h2 id="åˆ†å¸ƒå¼ç†è®º"><a href="#åˆ†å¸ƒå¼ç†è®º" class="headerlink" title="åˆ†å¸ƒå¼ç†è®º"></a>åˆ†å¸ƒå¼ç†è®º</h2><p>åœ¨ã€Šåˆ†å¸ƒå¼ç³»ç»ŸåŸç†ä¸èŒƒå‹ã€‹ä¸€ä¹¦ä¸­æœ‰å¦‚ä¸‹å®šä¹‰ï¼šâ€œåˆ†å¸ƒå¼ç³»ç»Ÿæ˜¯è‹¥å¹²ç‹¬ç«‹è®¡ç®—æœºçš„é›†åˆï¼Œè¿™äº›è®¡ç®—æœºå¯¹äºç”¨æˆ·æ¥è¯´å°±åƒå•ä¸ªç›¸å…³ç³»ç»Ÿâ€ï¼›</p>
<p> åˆ†å¸ƒå¼ç³»ç»Ÿæ˜¯ç”±ä¸€ç»„é€šè¿‡ç½‘ç»œè¿›è¡Œé€šä¿¡ã€ä¸ºäº†å®Œæˆå…±åŒçš„ä»»åŠ¡è€Œåè°ƒå·¥ä½œçš„è®¡ç®—æœºèŠ‚ç‚¹ç»„æˆçš„ç³»ç»Ÿã€‚åˆ†å¸ƒå¼ç³»ç»Ÿçš„å‡ºç°æ˜¯ä¸ºäº†ç”¨å»‰ä»·çš„ã€æ™®é€šçš„æœºå™¨å®Œæˆå•ä¸ªè®¡ç®—æœºæ— æ³•å®Œæˆçš„è®¡ç®—ã€å­˜å‚¨ä»»åŠ¡ã€‚å…¶ç›®çš„æ˜¯åˆ©ç”¨æ›´å¤šçš„æœºå™¨ï¼Œå¤„ç†æ›´å¤šçš„æ•°æ®ã€‚</p>
<p> åˆ†å¸ƒå¼ç³»ç»Ÿï¼ˆdistributed systemï¼‰æ˜¯å»ºç«‹åœ¨ç½‘ç»œä¹‹ä¸Šçš„è½¯ä»¶ç³»ç»Ÿã€‚</p>
<p> é¦–å…ˆéœ€è¦æ˜ç¡®çš„æ˜¯ï¼Œåªæœ‰å½“å•ä¸ªèŠ‚ç‚¹çš„å¤„ç†èƒ½åŠ›æ— æ³•æ»¡è¶³æ—¥ç›Šå¢é•¿çš„è®¡ç®—ã€å­˜å‚¨ä»»åŠ¡çš„æ—¶å€™ï¼Œä¸”ç¡¬ä»¶çš„æå‡ï¼ˆåŠ å†…å­˜ã€åŠ ç£ç›˜ã€ä½¿ç”¨æ›´å¥½çš„CPUï¼‰é«˜æ˜‚åˆ°å¾—ä¸å¿å¤±çš„æ—¶å€™ï¼Œåº”ç”¨ç¨‹åºä¹Ÿä¸èƒ½è¿›ä¸€æ­¥ä¼˜åŒ–çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ‰éœ€è¦è€ƒè™‘åˆ†å¸ƒå¼ç³»ç»Ÿã€‚ï¼ˆæ‰€ä»¥åˆ†å¸ƒå¼ä¸åº”è¯¥åœ¨ä¸€å¼€å§‹è®¾è®¡ç³»ç»Ÿæ—¶å°±è€ƒè™‘åˆ°ï¼‰å› ä¸ºï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿè¦è§£å†³çš„é—®é¢˜æœ¬èº«å°±æ˜¯å’Œå•æœºç³»ç»Ÿä¸€æ ·çš„ï¼Œè€Œç”±äºåˆ†å¸ƒå¼ç³»ç»Ÿå¤šèŠ‚ç‚¹ã€é€šè¿‡ç½‘ç»œé€šä¿¡çš„æ‹“æ‰‘ç»“æ„ï¼Œä¼šå¼•å…¥å¾ˆå¤šå•æœºç³»ç»Ÿæ²¡æœ‰çš„é—®é¢˜ï¼Œä¸ºäº†è§£å†³è¿™äº›é—®é¢˜åˆä¼šå¼•å…¥æ›´å¤šçš„æœºåˆ¶ã€åè®®ï¼Œå¸¦æ¥æ›´å¤šçš„é—®é¢˜ã€‚ã€‚ã€‚</p>
<h3 id="Dubboæ–‡æ¡£"><a href="#Dubboæ–‡æ¡£" class="headerlink" title="Dubboæ–‡æ¡£"></a>Dubboæ–‡æ¡£</h3><p>éšç€äº’è”ç½‘çš„å‘å±•ï¼Œç½‘ç«™åº”ç”¨çš„è§„æ¨¡ä¸æ–­æ‰©å¤§ï¼Œå¸¸è§„çš„å‚ç›´åº”ç”¨æ¶æ„å·²æ— æ³•åº”å¯¹ï¼Œåˆ†å¸ƒå¼æœåŠ¡æ¶æ„ä»¥åŠæµåŠ¨è®¡ç®—æ¶æ„åŠ¿åœ¨å¿…è¡Œï¼Œæ€¥éœ€<strong>ä¸€ä¸ªæ²»ç†ç³»ç»Ÿ</strong>ç¡®ä¿æ¶æ„æœ‰æ¡ä¸ç´Šçš„æ¼”è¿›ã€‚</p>
<p>åœ¨Dubboçš„å®˜ç½‘æ–‡æ¡£æœ‰è¿™æ ·ä¸€å¼ å›¾</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692869355660-857e5d15-91d5-49d6-abfc-520ae0df8cb6.png" alt="img"></p>
<p>å•ä¸€åº”ç”¨æ¶æ„</p>
<p>å½“ç½‘ç«™æµé‡å¾ˆå°æ—¶ï¼Œåªéœ€ä¸€ä¸ªåº”ç”¨ï¼Œå°†æ‰€æœ‰åŠŸèƒ½éƒ½éƒ¨ç½²åœ¨ä¸€èµ·ï¼Œä»¥å‡å°‘éƒ¨ç½²èŠ‚ç‚¹å’Œæˆæœ¬ã€‚æ­¤æ—¶ï¼Œç”¨äºç®€åŒ–å¢åˆ æ”¹æŸ¥å·¥ä½œé‡çš„æ•°æ®è®¿é—®æ¡†æ¶(ORM)æ˜¯å…³é”®ã€‚</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692869391283-83b4b022-7d3b-4f31-95de-edfce6ff5304.png" alt="img"></p>
<p>é€‚ç”¨äºå°å‹ç½‘ç«™ï¼Œå°å‹ç®¡ç†ç³»ç»Ÿï¼Œå°†æ‰€æœ‰åŠŸèƒ½éƒ½éƒ¨ç½²åˆ°ä¸€ä¸ªåŠŸèƒ½é‡Œï¼Œç®€å•æ˜“ç”¨ã€‚</p>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<p>1ã€æ€§èƒ½æ‰©å±•æ¯”è¾ƒéš¾</p>
<p>2ã€ååŒå¼€å‘é—®é¢˜</p>
<p>3ã€ä¸åˆ©äºå‡çº§ç»´æŠ¤</p>
<p>å‚ç›´åº”ç”¨æ¶æ„</p>
<p>å½“è®¿é—®é‡é€æ¸å¢å¤§ï¼Œå•ä¸€åº”ç”¨å¢åŠ æœºå™¨å¸¦æ¥çš„åŠ é€Ÿåº¦è¶Šæ¥è¶Šå°ï¼Œå°†åº”ç”¨æ‹†æˆäº’ä¸ç›¸å¹²çš„å‡ ä¸ªåº”ç”¨ï¼Œä»¥æå‡æ•ˆç‡ã€‚æ­¤æ—¶ï¼Œç”¨äºåŠ é€Ÿå‰ç«¯é¡µé¢å¼€å‘çš„Webæ¡†æ¶(MVC)æ˜¯å…³é”®ã€‚</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692869430903-01c19737-798b-460e-b6ec-7bb1a5f5702b.png" alt="img"></p>
<p>é€šè¿‡åˆ‡åˆ†ä¸šåŠ¡æ¥å®ç°å„ä¸ªæ¨¡å—ç‹¬ç«‹éƒ¨ç½²ï¼Œé™ä½äº†ç»´æŠ¤å’Œéƒ¨ç½²çš„éš¾åº¦ï¼Œå›¢é˜Ÿå„å¸å…¶èŒæ›´æ˜“ç®¡ç†ï¼Œæ€§èƒ½æ‰©å±•ä¹Ÿæ›´æ–¹ä¾¿ï¼Œæ›´æœ‰é’ˆå¯¹æ€§ã€‚</p>
<p>ç¼ºç‚¹ï¼šå…¬ç”¨æ¨¡å—æ— æ³•é‡å¤åˆ©ç”¨ï¼Œå¼€å‘æ€§çš„æµªè´¹</p>
<p>åˆ†å¸ƒå¼æœåŠ¡æ¶æ„</p>
<p>å½“å‚ç›´åº”ç”¨è¶Šæ¥è¶Šå¤šï¼Œåº”ç”¨ä¹‹é—´äº¤äº’ä¸å¯é¿å…ï¼Œå°†æ ¸å¿ƒä¸šåŠ¡æŠ½å–å‡ºæ¥ï¼Œä½œä¸ºç‹¬ç«‹çš„æœåŠ¡ï¼Œé€æ¸å½¢æˆç¨³å®šçš„æœåŠ¡ä¸­å¿ƒï¼Œä½¿å‰ç«¯åº”ç”¨èƒ½æ›´å¿«é€Ÿçš„å“åº”å¤šå˜çš„å¸‚åœºéœ€æ±‚ã€‚æ­¤æ—¶ï¼Œç”¨äºæé«˜ä¸šåŠ¡å¤ç”¨åŠæ•´åˆçš„**åˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶(RPC)**æ˜¯å…³é”®ã€‚</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692869463711-b2e4b5fb-095e-438e-8869-824ec9786469.png" alt="img"></p>
<p>æµåŠ¨è®¡ç®—æ¶æ„</p>
<p>å½“æœåŠ¡è¶Šæ¥è¶Šå¤šï¼Œå®¹é‡çš„è¯„ä¼°ï¼Œå°æœåŠ¡èµ„æºçš„æµªè´¹ç­‰é—®é¢˜é€æ¸æ˜¾ç°ï¼Œæ­¤æ—¶éœ€å¢åŠ ä¸€ä¸ªè°ƒåº¦ä¸­å¿ƒåŸºäºè®¿é—®å‹åŠ›å®æ—¶ç®¡ç†é›†ç¾¤å®¹é‡ï¼Œæé«˜é›†ç¾¤åˆ©ç”¨ç‡ã€‚æ­¤æ—¶ï¼Œç”¨äº<strong>æé«˜æœºå™¨åˆ©ç”¨ç‡çš„èµ„æºè°ƒåº¦å’Œæ²»ç†ä¸­å¿ƒ</strong>(SOA)[ Service Oriented Architecture]æ˜¯å…³é”®ã€‚</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692869482077-3078259a-8386-4aa3-8a04-bf04377ead9f.png" alt="img"><br> ä»€ä¹ˆæ˜¯RPC</p>
<p>RPCã€Remote Procedure Callã€‘æ˜¯æŒ‡è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼Œæ˜¯ä¸€ç§è¿›ç¨‹é—´é€šä¿¡æ–¹å¼ï¼Œä»–æ˜¯ä¸€ç§æŠ€æœ¯çš„æ€æƒ³ï¼Œè€Œä¸æ˜¯è§„èŒƒã€‚å®ƒå…è®¸ç¨‹åºè°ƒç”¨å¦ä¸€ä¸ªåœ°å€ç©ºé—´ï¼ˆé€šå¸¸æ˜¯å…±äº«ç½‘ç»œçš„å¦ä¸€å°æœºå™¨ä¸Šï¼‰çš„è¿‡ç¨‹æˆ–å‡½æ•°ï¼Œè€Œä¸ç”¨ç¨‹åºå‘˜æ˜¾å¼ç¼–ç è¿™ä¸ªè¿œç¨‹è°ƒç”¨çš„ç»†èŠ‚ã€‚å³ç¨‹åºå‘˜æ— è®ºæ˜¯è°ƒç”¨æœ¬åœ°çš„è¿˜æ˜¯è¿œç¨‹çš„å‡½æ•°ï¼Œæœ¬è´¨ä¸Šç¼–å†™çš„è°ƒç”¨ä»£ç åŸºæœ¬ç›¸åŒã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ä¸¤å°æœåŠ¡å™¨Aï¼ŒBï¼Œä¸€ä¸ªåº”ç”¨éƒ¨ç½²åœ¨AæœåŠ¡å™¨ä¸Šï¼Œæƒ³è¦è°ƒç”¨BæœåŠ¡å™¨ä¸Šåº”ç”¨æä¾›çš„å‡½æ•°&#x2F;æ–¹æ³•ï¼Œç”±äºä¸åœ¨ä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œä¸èƒ½ç›´æ¥è°ƒç”¨ï¼Œéœ€è¦é€šè¿‡ç½‘ç»œæ¥è¡¨è¾¾è°ƒç”¨çš„è¯­ä¹‰å’Œä¼ è¾¾è°ƒç”¨çš„æ•°æ®ã€‚ä¸ºä»€ä¹ˆè¦ç”¨RPCå‘¢ï¼Ÿå°±æ˜¯æ— æ³•åœ¨ä¸€ä¸ªè¿›ç¨‹å†…ï¼Œç”šè‡³ä¸€ä¸ªè®¡ç®—æœºå†…é€šè¿‡æœ¬åœ°è°ƒç”¨çš„æ–¹å¼å®Œæˆçš„éœ€æ±‚ï¼Œæ¯”å¦‚ä¸åŒçš„ç³»ç»Ÿé—´çš„é€šè®¯ï¼Œç”šè‡³ä¸åŒçš„ç»„ç»‡é—´çš„é€šè®¯ï¼Œç”±äºè®¡ç®—èƒ½åŠ›éœ€è¦æ¨ªå‘æ‰©å±•ï¼Œéœ€è¦åœ¨å¤šå°æœºå™¨ç»„æˆçš„é›†ç¾¤ä¸Šéƒ¨ç½²åº”ç”¨ã€‚RPCå°±æ˜¯è¦åƒè°ƒç”¨æœ¬åœ°çš„å‡½æ•°ä¸€æ ·å»è°ƒè¿œç¨‹å‡½æ•°ï¼›</p>
<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>
<p>æ¨èé˜…è¯»æ–‡ç« ï¼š<a href="https://www.jianshu.com/p/2accc2840a1b">https://www.jianshu.com/p/2accc2840a1b</a></p>
<p>è¯´ç™½äº†å°±æ˜¯ä¸åŒäºè°ƒç”¨æœ¬åœ°çš„è€Œæ˜¯è°ƒç”¨è¿œç¨‹èµ„æºå’Œæ–¹æ³•</p>
<p>RPCåŸç†ï¼š</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692869606357-ceb7c735-ff5a-4abb-8f47-2e0a5c7dd331.png" alt="img"></p>
<p>æ­¥éª¤åˆ†æï¼š</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692869632889-15541df1-5548-4951-bbe9-2931c591619c.png" alt="img"></p>
<p>RPCä¸¤ä¸ªæ ¸å¿ƒæ¨¡å—ï¼šé€šè®¯ï¼Œåºåˆ—åŒ–ã€‚</p>
<h2 id="Dubboçš„æ¦‚å¿µå’Œä»‹ç»"><a href="#Dubboçš„æ¦‚å¿µå’Œä»‹ç»" class="headerlink" title="Dubboçš„æ¦‚å¿µå’Œä»‹ç»"></a>Dubboçš„æ¦‚å¿µå’Œä»‹ç»</h2><h3 id="Dubboæ˜¯ä»€ä¹ˆ"><a href="#Dubboæ˜¯ä»€ä¹ˆ" class="headerlink" title="Dubboæ˜¯ä»€ä¹ˆ"></a>Dubboæ˜¯ä»€ä¹ˆ</h3><p>Dubboæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶ï¼Œè‡´åŠ›äºæä¾›é«˜æ€§èƒ½å’Œé€æ˜åŒ–çš„RPCè¿œç¨‹æœåŠ¡è°ƒç”¨æ–¹æ¡ˆï¼Œä»¥åŠSOAæœåŠ¡æ²»ç†æ–¹æ¡ˆã€‚ç®€å•çš„è¯´ï¼Œdubboå°±æ˜¯ä¸ªæœåŠ¡æ¡†æ¶ï¼Œå¦‚æœæ²¡æœ‰åˆ†å¸ƒå¼çš„éœ€æ±‚ï¼Œå…¶å®æ˜¯ä¸éœ€è¦ç”¨çš„ï¼Œåªæœ‰åœ¨åˆ†å¸ƒå¼çš„æ—¶å€™ï¼Œæ‰æœ‰dubboè¿™æ ·çš„åˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶çš„éœ€æ±‚ï¼Œå¹¶ä¸”æœ¬è´¨ä¸Šæ˜¯ä¸ªæœåŠ¡è°ƒç”¨çš„ä¸œä¸œï¼Œè¯´ç™½äº†å°±æ˜¯ä¸ªè¿œç¨‹æœåŠ¡è°ƒç”¨çš„åˆ†å¸ƒå¼æ¡†æ¶</p>
<p>å…¶æ ¸å¿ƒéƒ¨åˆ†åŒ…å«:</p>
<p>1ã€‹è¿œç¨‹é€šè®¯: æä¾›å¯¹å¤šç§åŸºäºé•¿è¿æ¥çš„NIOæ¡†æ¶æŠ½è±¡å°è£…ï¼ŒåŒ…æ‹¬å¤šç§çº¿ç¨‹æ¨¡å‹ï¼Œåºåˆ—åŒ–ï¼Œä»¥åŠâ€œè¯·æ±‚-å“åº”â€æ¨¡å¼çš„ä¿¡æ¯äº¤æ¢æ–¹å¼ã€‚</p>
<p>2ã€‹é›†ç¾¤å®¹é”™: æä¾›åŸºäºæ¥å£æ–¹æ³•çš„é€æ˜è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ŒåŒ…æ‹¬å¤šåè®®æ”¯æŒï¼Œä»¥åŠè½¯è´Ÿè½½å‡è¡¡ï¼Œå¤±è´¥å®¹é”™ï¼Œåœ°å€è·¯ç”±ï¼ŒåŠ¨æ€é…ç½®ç­‰é›†ç¾¤æ”¯æŒã€‚</p>
<p>3ã€‹è‡ªåŠ¨å‘ç°: åŸºäºæ³¨å†Œä¸­å¿ƒç›®å½•æœåŠ¡ï¼Œä½¿æœåŠ¡æ¶ˆè´¹æ–¹èƒ½åŠ¨æ€çš„æŸ¥æ‰¾æœåŠ¡æä¾›æ–¹ï¼Œä½¿åœ°å€é€æ˜ï¼Œä½¿æœåŠ¡æä¾›æ–¹å¯ä»¥å¹³æ»‘å¢åŠ æˆ–å‡å°‘æœºå™¨ã€‚</p>
<h3 id="Dubboèƒ½åšä»€ä¹ˆ"><a href="#Dubboèƒ½åšä»€ä¹ˆ" class="headerlink" title="Dubboèƒ½åšä»€ä¹ˆ"></a>Dubboèƒ½åšä»€ä¹ˆ</h3><p>1.é€æ˜åŒ–çš„è¿œç¨‹æ–¹æ³•è°ƒç”¨ï¼Œå°±åƒè°ƒç”¨æœ¬åœ°æ–¹æ³•ä¸€æ ·è°ƒç”¨è¿œç¨‹æ–¹æ³•ï¼Œåªéœ€ç®€å•é…ç½®ï¼Œæ²¡æœ‰ä»»ä½•APIä¾µå…¥ã€‚</p>
<p>2.è½¯è´Ÿè½½å‡è¡¡åŠå®¹é”™æœºåˆ¶ï¼Œå¯åœ¨å†…ç½‘æ›¿ä»£F5ç­‰ç¡¬ä»¶è´Ÿè½½å‡è¡¡å™¨ï¼Œé™ä½æˆæœ¬ï¼Œå‡å°‘å•ç‚¹ã€‚</p>
<p>3.æœåŠ¡è‡ªåŠ¨æ³¨å†Œä¸å‘ç°ï¼Œä¸å†éœ€è¦å†™æ­»æœåŠ¡æä¾›æ–¹åœ°å€ï¼Œæ³¨å†Œä¸­å¿ƒåŸºäºæ¥å£åæŸ¥è¯¢æœåŠ¡æä¾›è€…çš„IPåœ°å€ï¼Œå¹¶ä¸”èƒ½å¤Ÿå¹³æ»‘æ·»åŠ æˆ–åˆ é™¤æœåŠ¡æä¾›è€…ã€‚</p>
<h2 id="æ­å»ºæµ‹è¯•ç¯å¢ƒ"><a href="#æ­å»ºæµ‹è¯•ç¯å¢ƒ" class="headerlink" title="æ­å»ºæµ‹è¯•ç¯å¢ƒ"></a>æ­å»ºæµ‹è¯•ç¯å¢ƒ</h2><p>Apache Dubbo |ËˆdÊŒbÉ™ÊŠ| æ˜¯ä¸€æ¬¾é«˜æ€§èƒ½ã€è½»é‡çº§çš„å¼€æºJava RPCæ¡†æ¶ï¼Œå®ƒæä¾›äº†ä¸‰å¤§æ ¸å¿ƒèƒ½åŠ›ï¼šé¢å‘æ¥å£çš„è¿œç¨‹æ–¹æ³•è°ƒç”¨ï¼Œæ™ºèƒ½å®¹é”™å’Œè´Ÿè½½å‡è¡¡ï¼Œä»¥åŠæœåŠ¡è‡ªåŠ¨æ³¨å†Œå’Œå‘ç°ã€‚</p>
<p>dubboå®˜ç½‘ <a href="http://dubbo.apache.org/zh-cn/index.html">http://dubbo.apache.org/zh-cn/index.html</a></p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692869764597-d47a285b-37de-4a2f-b24a-6f818e9665a9.png" alt="img"></p>
<p><strong>æœåŠ¡æä¾›è€…</strong>ï¼ˆProviderï¼‰ï¼šæš´éœ²æœåŠ¡çš„æœåŠ¡æä¾›æ–¹ï¼ŒæœåŠ¡æä¾›è€…åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±æä¾›çš„æœåŠ¡ã€‚</p>
<p><strong>æœåŠ¡æ¶ˆè´¹è€…</strong>ï¼ˆConsumerï¼‰ï¼šè°ƒç”¨è¿œç¨‹æœåŠ¡çš„æœåŠ¡æ¶ˆè´¹æ–¹ï¼ŒæœåŠ¡æ¶ˆè´¹è€…åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒè®¢é˜…è‡ªå·±æ‰€éœ€çš„æœåŠ¡ï¼ŒæœåŠ¡æ¶ˆè´¹è€…ï¼Œä»æä¾›è€…åœ°å€åˆ—è¡¨ä¸­ï¼ŒåŸºäºè½¯è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œé€‰ä¸€å°æä¾›è€…è¿›è¡Œè°ƒç”¨ï¼Œå¦‚æœè°ƒç”¨å¤±è´¥ï¼Œå†é€‰å¦ä¸€å°è°ƒç”¨ã€‚</p>
<p><strong>æ³¨å†Œä¸­å¿ƒ</strong>ï¼ˆRegistryï¼‰ï¼šæ³¨å†Œä¸­å¿ƒè¿”å›æœåŠ¡æä¾›è€…åœ°å€åˆ—è¡¨ç»™æ¶ˆè´¹è€…ï¼Œå¦‚æœæœ‰å˜æ›´ï¼Œæ³¨å†Œä¸­å¿ƒå°†åŸºäºé•¿è¿æ¥æ¨é€å˜æ›´æ•°æ®ç»™æ¶ˆè´¹è€…</p>
<p><strong>ç›‘æ§ä¸­å¿ƒ</strong>ï¼ˆMonitorï¼‰ï¼šæœåŠ¡æ¶ˆè´¹è€…å’Œæä¾›è€…ï¼Œåœ¨å†…å­˜ä¸­ç´¯è®¡è°ƒç”¨æ¬¡æ•°å’Œè°ƒç”¨æ—¶é—´ï¼Œå®šæ—¶æ¯åˆ†é’Ÿå‘é€ä¸€æ¬¡ç»Ÿè®¡æ•°æ®åˆ°ç›‘æ§ä¸­å¿ƒ</p>
<p><strong>è°ƒç”¨å…³ç³»è¯´æ˜</strong></p>
<p>l æœåŠ¡å®¹å™¨è´Ÿè´£å¯åŠ¨ï¼ŒåŠ è½½ï¼Œè¿è¡ŒæœåŠ¡æä¾›è€…ã€‚</p>
<p>l æœåŠ¡æä¾›è€…åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒæ³¨å†Œè‡ªå·±æä¾›çš„æœåŠ¡ã€‚</p>
<p>l æœåŠ¡æ¶ˆè´¹è€…åœ¨å¯åŠ¨æ—¶ï¼Œå‘æ³¨å†Œä¸­å¿ƒè®¢é˜…è‡ªå·±æ‰€éœ€çš„æœåŠ¡ã€‚</p>
<p>l æ³¨å†Œä¸­å¿ƒè¿”å›æœåŠ¡æä¾›è€…åœ°å€åˆ—è¡¨ç»™æ¶ˆè´¹è€…ï¼Œå¦‚æœæœ‰å˜æ›´ï¼Œæ³¨å†Œä¸­å¿ƒå°†åŸºäºé•¿è¿æ¥æ¨é€å˜æ›´æ•°æ®ç»™æ¶ˆè´¹è€…ã€‚</p>
<p>l æœåŠ¡æ¶ˆè´¹è€…ï¼Œä»æä¾›è€…åœ°å€åˆ—è¡¨ä¸­ï¼ŒåŸºäºè½¯è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œé€‰ä¸€å°æä¾›è€…è¿›è¡Œè°ƒç”¨ï¼Œå¦‚æœè°ƒç”¨å¤±è´¥ï¼Œå†é€‰å¦ä¸€å°è°ƒç”¨ã€‚</p>
<p>l æœåŠ¡æ¶ˆè´¹è€…å’Œæä¾›è€…ï¼Œåœ¨å†…å­˜ä¸­ç´¯è®¡è°ƒç”¨æ¬¡æ•°å’Œè°ƒç”¨æ—¶é—´ï¼Œå®šæ—¶æ¯åˆ†é’Ÿå‘é€ä¸€æ¬¡ç»Ÿè®¡æ•°æ®åˆ°ç›‘æ§ä¸­å¿ƒ</p>
<h3 id="Zookeeperä»‹ç»"><a href="#Zookeeperä»‹ç»" class="headerlink" title="Zookeeperä»‹ç»"></a>Zookeeperä»‹ç»</h3><p><strong>Zoookeeperæ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<p>å®˜æ–¹æ–‡æ¡£ä¸Šè¿™ä¹ˆè§£é‡Šzookeeperï¼Œå®ƒæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶ï¼Œæ˜¯Apache Hadoop çš„ä¸€ä¸ªå­é¡¹ç›®ï¼Œå®ƒä¸»è¦æ˜¯ç”¨æ¥è§£å†³åˆ†å¸ƒå¼åº”ç”¨ä¸­ç»å¸¸é‡åˆ°çš„ä¸€äº›æ•°æ®ç®¡ç†é—®é¢˜ï¼Œå¦‚ï¼šç»Ÿä¸€å‘½åæœåŠ¡ã€çŠ¶æ€åŒæ­¥æœåŠ¡ã€é›†ç¾¤ç®¡ç†ã€åˆ†å¸ƒå¼åº”ç”¨é…ç½®é¡¹çš„ç®¡ç†ç­‰ã€‚</p>
<p>ä¸Šé¢çš„è§£é‡Šæœ‰ç‚¹æŠ½è±¡ï¼Œç®€å•æ¥è¯´zookeeper&#x3D;<strong>æ–‡ä»¶ç³»ç»Ÿ</strong>+<strong>ç›‘å¬é€šçŸ¥æœºåˆ¶</strong></p>
<p>â‘ .æ–‡ä»¶ç³»ç»Ÿ</p>
<p>Zookeeperç»´æŠ¤ä¸€ä¸ªç±»ä¼¼æ–‡ä»¶ç³»ç»Ÿçš„æ•°æ®ç»“æ„</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692869935960-84c551da-9557-472a-b64a-6c675b4e5efb.png" alt="img"></p>
<p>æ¯ä¸ªå­ç›®å½•é¡¹å¦‚ NameService éƒ½è¢«ç§°ä½œä¸º znode(ç›®å½•èŠ‚ç‚¹)ï¼Œå’Œæ–‡ä»¶ç³»ç»Ÿä¸€æ ·ï¼Œæˆ‘ä»¬èƒ½å¤Ÿè‡ªç”±çš„å¢åŠ ã€åˆ é™¤znodeï¼Œåœ¨ä¸€ä¸ªznodeä¸‹å¢åŠ ã€åˆ é™¤å­znodeï¼Œå”¯ä¸€çš„ä¸åŒåœ¨äºznodeæ˜¯å¯ä»¥å­˜å‚¨æ•°æ®çš„ã€‚</p>
<p>æœ‰å››ç§ç±»å‹çš„znodeï¼š</p>
<ul>
<li>PERSISTENT-æŒä¹…åŒ–ç›®å½•èŠ‚ç‚¹<br>å®¢æˆ·ç«¯ä¸zookeeperæ–­å¼€è¿æ¥åï¼Œè¯¥èŠ‚ç‚¹ä¾æ—§å­˜åœ¨</li>
<li>PERSISTENT_SEQUENTIAL-æŒä¹…åŒ–é¡ºåºç¼–å·ç›®å½•èŠ‚ç‚¹<br>å®¢æˆ·ç«¯ä¸zookeeperæ–­å¼€è¿æ¥åï¼Œè¯¥èŠ‚ç‚¹ä¾æ—§å­˜åœ¨ï¼Œåªæ˜¯Zookeeperç»™è¯¥èŠ‚ç‚¹åç§°è¿›è¡Œé¡ºåºç¼–å·</li>
<li>EPHEMERAL-ä¸´æ—¶ç›®å½•èŠ‚ç‚¹<br>-å®¢æˆ·ç«¯ä¸zookeeperæ–­å¼€è¿æ¥åï¼Œè¯¥èŠ‚ç‚¹è¢«åˆ é™¤</li>
<li>EPHEMERAL_SEQUENTIAL-ä¸´æ—¶é¡ºåºç¼–å·ç›®å½•èŠ‚ç‚¹<br>å®¢æˆ·ç«¯ä¸zookeeperæ–­å¼€è¿æ¥åï¼Œè¯¥èŠ‚ç‚¹è¢«åˆ é™¤ï¼Œåªæ˜¯Zookeeperç»™è¯¥èŠ‚ç‚¹åç§°è¿›è¡Œé¡ºåºç¼–å·</li>
</ul>
<p>2ã€ ç›‘å¬é€šçŸ¥æœºåˆ¶</p>
<p>å®¢æˆ·ç«¯æ³¨å†Œç›‘å¬å®ƒå…³å¿ƒçš„ç›®å½•èŠ‚ç‚¹ï¼Œå½“ç›®å½•èŠ‚ç‚¹å‘ç”Ÿå˜åŒ–ï¼ˆæ•°æ®æ”¹å˜ã€è¢«åˆ é™¤ã€å­ç›®å½•èŠ‚ç‚¹å¢åŠ åˆ é™¤ï¼‰æ—¶ï¼Œzookeeperä¼šé€šçŸ¥å®¢æˆ·ç«¯ã€‚</p>
<p>å°±è¿™ä¹ˆç®€å•ï¼Œä¸‹é¢æˆ‘ä»¬çœ‹çœ‹Zookeeperèƒ½åšç‚¹ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>Zookeeperèƒ½åšä»€ä¹ˆ<br>zookeeperåŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œå¯ä»¥å®ç°è¯¸å¦‚åˆ†å¸ƒå¼åº”ç”¨é…ç½®ç®¡ç†ã€ç»Ÿä¸€å‘½åæœåŠ¡ã€çŠ¶æ€åŒæ­¥æœåŠ¡ã€é›†ç¾¤ç®¡ç†ç­‰åŠŸèƒ½ï¼Œæˆ‘ä»¬è¿™é‡Œæ‹¿æ¯”è¾ƒç®€å•çš„åˆ†å¸ƒå¼åº”ç”¨é…ç½®ç®¡ç†ä¸ºä¾‹æ¥è¯´æ˜ã€‚</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692870228944-d5f265cc-7646-4e48-9c6e-4e263a02868e.png" alt="img"></p>
<p>å¦‚ä¸Šï¼Œä½ å¤§è‡´åº”è¯¥äº†è§£zookeeperæ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Œå¤§æ¦‚èƒ½åšäº›ä»€ä¹ˆäº†ï¼Œæˆ‘ä»¬é©¬ä¸Šæ¥å­¦ä¹ ä¸‹zookeeperçš„å®‰è£…åŠä½¿ç”¨</p>
<h3 id="windowsä¸‹å®‰è£…zookeeper"><a href="#windowsä¸‹å®‰è£…zookeeper" class="headerlink" title="windowsä¸‹å®‰è£…zookeeper"></a>windowsä¸‹å®‰è£…zookeeper</h3><p>1ã€ä¸‹è½½zookeeper ï¼šåœ°å€ï¼Œ æˆ‘ä»¬ä¸‹è½½3.4.14 ï¼Œ æœ€æ–°ç‰ˆï¼è§£å‹zookeeper</p>
<p>2ã€è¿è¡Œ&#x2F;bin&#x2F;zkServer.cmd ï¼Œåˆæ¬¡è¿è¡Œä¼šæŠ¥é”™ï¼Œæ²¡æœ‰zoo.cfgé…ç½®æ–‡ä»¶ï¼›</p>
<p>å®˜æ–¹ä¸‹è½½åœ°å€ï¼š<a href="http://archive.apache.org/dist/zookeeper/zookeeper-3.4.14/zookeeper-3.4.14.tar.gz">zookeeper3.4.14ä¸‹è½½åœ°å€</a></p>
<p><strong>å¯èƒ½é‡åˆ°é—®é¢˜ï¼šé—ªé€€ !</strong></p>
<p>è§£å†³æ–¹æ¡ˆï¼šç¼–è¾‘zkServer.cmdæ–‡ä»¶æœ«å°¾æ·»åŠ pause ã€‚è¿™æ ·è¿è¡Œå‡ºé”™å°±ä¸ä¼šé€€å‡ºï¼Œä¼šæç¤ºé”™è¯¯ä¿¡æ¯ï¼Œæ–¹ä¾¿æ‰¾åˆ°åŸå› ã€‚</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692870304421-96b85ee3-0216-4b52-a39d-32b3e45c883e.png" alt="img"></p>
<p><strong>è§£å†³</strong></p>
<p>å°†confæ–‡ä»¶å¤¹ä¸‹é¢çš„zoo_sample.cfgå¤åˆ¶ä¸€ä»½æ”¹åä¸ºzoo.cfgå³å¯ï¼ˆLinuxç³»ç»Ÿä¹Ÿæ˜¯ä¸€æ ·çš„æ“ä½œï¼‰</p>
<p><strong>æ³¨æ„å‡ ä¸ªé‡è¦ä½ç½®****ï¼š</strong></p>
<p><strong>dataDir&#x3D;.&#x2F; ä¸´æ—¶æ•°æ®å­˜å‚¨çš„ç›®å½•ï¼ˆå¯å†™ç›¸å¯¹è·¯å¾„ï¼‰</strong></p>
<p><strong>clientPort&#x3D;2181 zookeeperçš„ç«¯å£å·</strong></p>
<p><strong>ä¿®æ”¹å®Œæˆåå†æ¬¡å¯åŠ¨zookeeper</strong></p>
<p>4ã€ä½¿ç”¨zkCli.cmdæµ‹è¯•</p>
<p>ls &#x2F;ï¼šåˆ—å‡ºzookeeperæ ¹ä¸‹ä¿å­˜çš„æ‰€æœ‰èŠ‚ç‚¹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[zk: 127.0.0.1:2181(CONNECTED) 4] ls /</span><br><span class="line">[zookeeper]</span><br></pre></td></tr></table></figure>

<p>create â€“e &#x2F;xiaowu123ï¼šåˆ›å»ºä¸€ä¸ªxiaowuèŠ‚ç‚¹ï¼Œå€¼ä¸º123</p>
<p>get &#x2F;xiaowu :å–å€¼</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692871098230-f56ce3a1-53f5-48ed-b86c-13ffd3d0e138.png" alt="img">ã€</p>
<h3 id="windowä¸‹å®‰è£…dubbo-admin"><a href="#windowä¸‹å®‰è£…dubbo-admin" class="headerlink" title="windowä¸‹å®‰è£…dubbo-admin"></a>windowä¸‹å®‰è£…dubbo-admin</h3><p>dubboæœ¬èº«å¹¶ä¸æ˜¯ä¸€ä¸ªæœåŠ¡è½¯ä»¶ã€‚å®ƒå…¶å®å°±æ˜¯ä¸€ä¸ªjaråŒ…ï¼Œèƒ½å¤Ÿå¸®ä½ çš„javaç¨‹åºè¿æ¥åˆ°zookeeperï¼Œå¹¶åˆ©ç”¨zookeeperæ¶ˆè´¹ã€æä¾›æœåŠ¡ã€‚</p>
<p>ä½†æ˜¯ä¸ºäº†è®©ç”¨æˆ·æ›´å¥½çš„ç®¡ç†ç›‘æ§ä¼—å¤šçš„dubboæœåŠ¡ï¼Œå®˜æ–¹æä¾›äº†ä¸€ä¸ªå¯è§†åŒ–çš„ç›‘æ§ç¨‹åºdubbo-adminï¼Œä¸è¿‡è¿™ä¸ªç›‘æ§å³ä½¿ä¸è£…ä¹Ÿä¸å½±å“ä½¿ç”¨ã€‚</p>
<p>æˆ‘ä»¬è¿™é‡Œæ¥å®‰è£…ä¸€ä¸‹ï¼š</p>
<p><strong>1ã€ä¸‹è½½dubbo-admin</strong></p>
<p><a href="https://gitee.com/M-Analysis/dubbo-admin">dubbo-adminä¸‹è½½åœ°å€</a></p>
<p><strong>2ã€è§£å‹è¿›å…¥ç›®å½•</strong></p>
<p>ä¿®æ”¹ dubbo-admin\src\main\resources \application.properties æŒ‡å®šzookeeperåœ°å€ï¼ˆä¸€èˆ¬éƒ½é»˜è®¤åœ°å€ï¼‰</p>
<figure class="highlight latex"><table><tr><td class="code"><pre><span class="line">server.port=7001</span><br><span class="line">spring.velocity.cache=false</span><br><span class="line">spring.velocity.charset=UTF-8</span><br><span class="line">spring.velocity.layout-url=/templates/default.vm</span><br><span class="line">spring.messages.fallback-to-system-locale=false</span><br><span class="line">spring.messages.basename=i18n/message</span><br><span class="line">spring.root.password=root</span><br><span class="line">spring.guest.password=guest</span><br><span class="line"></span><br><span class="line">dubbo.registry.address=zookeeper://127.0.0.1:2181</span><br></pre></td></tr></table></figure>

<p><strong>3ã€åœ¨é¡¹ç›®ç›®å½•ä¸‹</strong>æ‰“åŒ…dubbo-admin</p>
<figure class="highlight latex"><table><tr><td class="code"><pre><span class="line">mvn clean package -Dmaven.test.skip=true</span><br></pre></td></tr></table></figure>

<p><strong>ç¬¬ä¸€æ¬¡æ‰“åŒ…çš„è¿‡ç¨‹æœ‰ç‚¹æ…¢ï¼Œéœ€è¦è€å¿ƒç­‰å¾…ï¼ç›´åˆ°æˆåŠŸï¼</strong></p>
<p>4ã€æ‰§è¡Œ dubbo-admin\target ä¸‹çš„dubbo-admin-0.0.1-SNAPSHOT.jar</p>
<figure class="highlight latex"><table><tr><td class="code"><pre><span class="line">java -jar dubbo-admin-0.0.1-SNAPSHOT.jar</span><br></pre></td></tr></table></figure>

<p>ã€æ³¨æ„ï¼šzookeeperçš„æœåŠ¡ä¸€å®šè¦æ‰“å¼€ï¼ã€‘</p>
<p>æ‰§è¡Œå®Œæ¯•ï¼Œæˆ‘ä»¬å»è®¿é—®ä¸€ä¸‹ <a href="http://localhost:7001/">http://localhost:7001/</a> ï¼Œ è¿™æ—¶å€™æˆ‘ä»¬éœ€è¦è¾“å…¥ç™»å½•è´¦æˆ·å’Œå¯†ç ï¼Œæˆ‘ä»¬éƒ½æ˜¯é»˜è®¤çš„<strong>root-root</strong>ï¼›</p>
<p>ç™»å½•æˆåŠŸåï¼ŒæŸ¥çœ‹ç•Œé¢</p>
<h2 id="SpringBoot-Dubbo-zookeeper"><a href="#SpringBoot-Dubbo-zookeeper" class="headerlink" title="SpringBoot + Dubbo + zookeeper"></a>SpringBoot + Dubbo + zookeeper</h2><h3 id="æ¡†æ¶æ­å»º"><a href="#æ¡†æ¶æ­å»º" class="headerlink" title="æ¡†æ¶æ­å»º"></a>æ¡†æ¶æ­å»º</h3><p><strong>1. å¯åŠ¨zookeeper ï¼</strong></p>
<p><strong>2. IDEAåˆ›å»ºä¸€ä¸ªç©ºé¡¹ç›®ï¼›</strong></p>
<p><strong>3.åˆ›å»ºä¸€ä¸ªæ¨¡å—ï¼Œå®ç°æœåŠ¡æä¾›è€…ï¼šprovider-server ï¼Œ é€‰æ‹©webä¾èµ–å³å¯</strong></p>
<p><strong>4.é¡¹ç›®åˆ›å»ºå®Œæ¯•ï¼Œæˆ‘ä»¬å†™ä¸€ä¸ªæœåŠ¡ï¼Œæ¯”å¦‚å–ç¥¨çš„æœåŠ¡ï¼›</strong></p>
<p>ç¼–å†™æ¥å£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">TicketService</span> &#123;</span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">getTicket</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¼–å†™å®ç°ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TicketServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">TicketService</span> &#123;</span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">getTicket</span><span class="params">()</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;xiaowuçœŸæ˜¯å¸…å“¥&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>5.åˆ›å»ºä¸€ä¸ªæ¨¡å—ï¼Œå®ç°æœåŠ¡æ¶ˆè´¹è€…ï¼šconsumer-server ï¼Œ é€‰æ‹©webä¾èµ–å³å¯</strong></p>
<p><strong>6.é¡¹ç›®åˆ›å»ºå®Œæ¯•ï¼Œæˆ‘ä»¬å†™ä¸€ä¸ªæœåŠ¡ï¼Œæ¯”å¦‚ç”¨æˆ·çš„æœåŠ¡ï¼›</strong></p>
<p>ç¼–å†™service</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">   <span class="comment">//æˆ‘ä»¬éœ€è¦å»æ‹¿å»æ³¨å†Œä¸­å¿ƒçš„æœåŠ¡</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>éœ€æ±‚ï¼šç°åœ¨æˆ‘ä»¬çš„ç”¨æˆ·æƒ³ä½¿ç”¨ä¹°ç¥¨çš„æœåŠ¡ï¼Œè¿™è¦æ€ä¹ˆå¼„å‘¢ ï¼Ÿ</strong></p>
<h3 id="æœåŠ¡æä¾›è€…"><a href="#æœåŠ¡æä¾›è€…" class="headerlink" title="æœåŠ¡æä¾›è€…"></a>æœåŠ¡æä¾›è€…</h3><p>1ã€å°†æœåŠ¡æä¾›è€…æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒï¼Œæˆ‘ä»¬éœ€è¦æ•´åˆDubboå’Œzookeeperï¼Œæ‰€ä»¥éœ€è¦å¯¼åŒ…</p>
<p>æˆ‘ä»¬ä»dubboå®˜ç½‘è¿›å…¥githubï¼Œçœ‹ä¸‹æ–¹çš„å¸®åŠ©æ–‡æ¡£ï¼Œæ‰¾åˆ°dubbo-springbootï¼Œæ‰¾åˆ°ä¾èµ–åŒ…</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Dubbo Spring Boot Starter --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.dubbo<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dubbo-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>zookeeperçš„åŒ…æˆ‘ä»¬å»mavenä»“åº“ä¸‹è½½ï¼Œzkclientï¼›</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.github.sgroschupf/zkclient --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.sgroschupf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zkclient<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ã€æ–°ç‰ˆçš„å‘ã€‘zookeeperåŠå…¶ä¾èµ–åŒ…ï¼Œè§£å†³æ—¥å¿—å†²çªï¼Œè¿˜éœ€è¦å‰”é™¤æ—¥å¿—ä¾èµ–ï¼›</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å¼•å…¥zookeeper --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.curator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>curator-framework<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.12.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.curator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>curator-recipes<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.12.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.zookeeper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zookeeper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.14<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--æ’é™¤è¿™ä¸ªslf4j-log4j12--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2ã€åœ¨springbooté…ç½®æ–‡ä»¶ä¸­é…ç½®dubboç›¸å…³å±æ€§ï¼</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å½“å‰åº”ç”¨åå­—</span></span><br><span class="line"><span class="attr">dubbo.application.name</span>=<span class="string">provider-server</span></span><br><span class="line"><span class="comment">#æ³¨å†Œä¸­å¿ƒåœ°å€</span></span><br><span class="line"><span class="attr">dubbo.registry.address</span>=<span class="string">zookeeper://127.0.0.1:2181</span></span><br><span class="line"><span class="comment">#æ‰«ææŒ‡å®šåŒ…ä¸‹æœåŠ¡</span></span><br><span class="line"><span class="attr">dubbo.scan.base-packages</span>=<span class="string">com.wu.service</span></span><br></pre></td></tr></table></figure>

<p>3ã€åœ¨serviceçš„å®ç°ç±»ä¸­é…ç½®æœåŠ¡æ³¨è§£ï¼Œå‘å¸ƒæœåŠ¡ï¼æ³¨æ„å¯¼åŒ…é—®é¢˜,å› ä¸ºè¿™é‡Œçš„Serviceæ³¨è§£éœ€è¦å¯¼å…¥çš„æ˜¯dubboä¸­çš„æ³¨è§£ï¼Œè€Œä¸æ˜¯springçš„æ³¨è§£,æ‰€ä»¥è¦æŠŠå…¶æ³¨å…¥å°±è¦ç”¨Componetï¼Œä¸è¿‡æœ€æ–°ç‰ˆæœ¬çš„å¥½åƒå·²ç»è§£å†³è¿™ä¸ªé—®é¢˜ï¼šä¸€ä¸ªæ–°çš„æ³¨è§£@DubboService</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.dubbo.config.annotation.Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span> <span class="comment">//å°†æœåŠ¡å‘å¸ƒå‡ºå»</span></span><br><span class="line"><span class="meta">@Component</span> <span class="comment">//æ”¾åœ¨å®¹å™¨ä¸­</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TicketServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">TicketService</span> &#123;</span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">getTicket</span><span class="params">()</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;xiaowuæ˜¯å¸…å“¥&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é€»è¾‘ç†è§£ ï¼šåº”ç”¨å¯åŠ¨èµ·æ¥ï¼Œdubboå°±ä¼šæ‰«ææŒ‡å®šçš„åŒ…ä¸‹å¸¦æœ‰@componentæ³¨è§£çš„æœåŠ¡ï¼Œå°†å®ƒå‘å¸ƒåœ¨æŒ‡å®šçš„æ³¨å†Œä¸­å¿ƒä¸­ï¼</p>
<h3 id="æœåŠ¡æ¶ˆè´¹è€…"><a href="#æœåŠ¡æ¶ˆè´¹è€…" class="headerlink" title="æœåŠ¡æ¶ˆè´¹è€…"></a>æœåŠ¡æ¶ˆè´¹è€…</h3><p>1.å¯¼å…¥ä¾èµ–ï¼Œå’Œä¹‹å‰çš„ä¾èµ–ä¸€æ ·ï¼›</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--dubbo--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Dubbo Spring Boot Starter --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.dubbo<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dubbo-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--zookeeper--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.github.sgroschupf/zkclient --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.sgroschupf<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zkclient<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- å¼•å…¥zookeeper --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.curator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>curator-framework<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.12.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.curator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>curator-recipes<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.12.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.zookeeper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zookeeper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.14<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--æ’é™¤è¿™ä¸ªslf4j-log4j12--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2.é…ç½®å‚æ•°</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å½“å‰åº”ç”¨åå­—</span></span><br><span class="line"><span class="attr">dubbo.application.name</span>=<span class="string">consumer-server</span></span><br><span class="line"><span class="comment">#æ³¨å†Œä¸­å¿ƒåœ°å€</span></span><br><span class="line"><span class="attr">dubbo.registry.address</span>=<span class="string">zookeeper://127.0.0.1:2181</span></span><br></pre></td></tr></table></figure>

<p>3.æœ¬æ¥æ­£å¸¸æ­¥éª¤æ˜¯éœ€è¦å°†æœåŠ¡æä¾›è€…çš„æ¥å£æ‰“åŒ…ï¼Œç„¶åç”¨pomæ–‡ä»¶å¯¼å…¥ï¼Œæˆ‘ä»¬è¿™é‡Œä½¿ç”¨ç®€å•çš„æ–¹å¼ï¼Œç›´æ¥å°†æœåŠ¡çš„æ¥å£æ‹¿è¿‡æ¥ï¼Œè·¯å¾„å¿…é¡»ä¿è¯æ­£ç¡®ï¼Œå³å’ŒæœåŠ¡æä¾›è€…ç›¸åŒï¼›</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22758736/1692928975261-bd6f8248-b2cc-4b97-ab8c-76eea0328d9b.png" alt="img"></p>
<ol>
<li>å®Œå–„æ¶ˆè´¹è€…çš„æœåŠ¡ç±»</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.wu.service.TicketService;</span><br><span class="line"><span class="keyword">import</span> org.apache.dubbo.config.annotation.Reference;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span> <span class="comment">//æ³¨å…¥åˆ°å®¹å™¨ä¸­</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Reference</span> <span class="comment">//è¿œç¨‹å¼•ç”¨æŒ‡å®šçš„æœåŠ¡ï¼Œä»–ä¼šæŒ‰ç…§å…¨ç±»åè¿›è¡ŒåŒ¹é…ï¼Œçœ‹è°ç»™æ³¨å†Œä¸­å¿ƒæ³¨å†Œäº†è¿™ä¸ªå…¨ç±»å</span></span><br><span class="line">   TicketService ticketService;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">buyTicket</span><span class="params">()</span>&#123;</span><br><span class="line">       <span class="type">String</span> <span class="variable">ticket</span> <span class="operator">=</span> ticketService.getTicket();</span><br><span class="line">       System.out.println(<span class="string">&quot;åœ¨æ³¨å†Œä¸­å¿ƒä¹°åˆ°&quot;</span>+ticket);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>5.æµ‹è¯•ç±»ç¼–å†™</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RunWith(SpringRunner.class)</span></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConsumerServerApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Autowired</span></span><br><span class="line">   UserService userService;</span><br><span class="line"></span><br><span class="line">   <span class="meta">@Test</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">       userService.bugTicket();</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<details class="lake-collapse"><summary id="uf5f7c91a"><span class="ne-text" style="color: rgb(77, 77, 77); font-size: 16px">å¾®æœåŠ¡æ¶æ„é—®é¢˜ï¼š</span></summary><p id="ub777ac3d" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><strong><span class="ne-text">åˆ†å¸ƒå¼æ¶æ„ä¼šé‡åˆ°çš„å››ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š</span></strong></p><ol class="ne-ol" style="margin: 0; padding-left: 23px"><li id="uc11337e7" data-lake-index-type="0"><span class="ne-text">è¿™ä¹ˆå¤šçš„æœåŠ¡ï¼Œå®¢æˆ·ç«¯è¯¥å¦‚ä½•å»è®¿é—®ï¼Ÿ</span></li><li id="u4e60931c" data-lake-index-type="0"><span class="ne-text">è¿™ä¹ˆå¤šçš„æœåŠ¡ï¼ŒæœåŠ¡å™¨ä¹‹é—´å¦‚ä½•è¿›è¡Œé€šä¿¡ï¼Ÿ</span></li><li id="ud901167c" data-lake-index-type="0"><span class="ne-text">è¿™ä¹ˆå¤šçš„æœåŠ¡ï¼Œè¯¥å¦‚ä½•ç®¡ç†å’Œæ²»ç†ï¼Ÿ</span></li><li id="u1f30bc45" data-lake-index-type="0"><span class="ne-text">æœåŠ¡æŒ‚äº†ï¼Œæ€ä¹ˆåŠï¼Ÿ</span></li></ol><ul class="ne-ul" style="margin: 0; padding-left: 23px"><li id="u2bbc715f" data-lake-index-type="0"><strong><span class="ne-text">è§£å†³æ–¹æ¡ˆ</span></strong><span class="ne-text">ï¼š</span></li></ul><ul class="ne-list-wrap" style="margin: 0; padding-left: 23px; list-style: none"><ul ne-level="1" class="ne-ul" style="margin: 0; padding-left: 23px; list-style: circle"><li id="u76fc4b67" data-lake-index-type="0"><span class="ne-text">SpringCloudï¼Œæ˜¯ä¸€å¥—ç”Ÿæ€ï¼Œå°±æ˜¯æ¥è§£å†³ä»¥ä¸Šåˆ†å¸ƒå¼æ¶æ„çš„å››ä¸ªé—®é¢˜</span></li><li id="u3c2776f2" data-lake-index-type="0"><span class="ne-text">æƒ³ä½¿ç”¨SpringCloudï¼Œå¿…é¡»è¦æŒæ¡Springbootï¼Œå› ä¸ºå®ƒæ˜¯åŸºäºSpirngBootçš„</span></li></ul></ul><p id="uec1b4938" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><strong><span class="ne-text">1.SpringCloud NetFlixï¼Œå‡ºäº†ä¸€å¥—è§£å†³æ–¹æ¡ˆ</span></strong></p><p id="u9e0f794a" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><strong><span class="ne-text">2.Apcahe Dubbo zookeeper ç¬¬äºŒå¥—è§£å†³æ–¹æ¡ˆ</span></strong></p><ul class="ne-ul" style="margin: 0; padding-left: 23px"><li id="u01e83916" data-lake-index-type="0"><span class="ne-text">APIï¼šæ²¡æœ‰ï¼Œè¦ä¹ˆæ‰¾ç¬¬ä¸‰æ–¹ï¼Œè¦ä¹ˆè‡ªå·±å®ç°</span></li><li id="ude54c508" data-lake-index-type="0"><span class="ne-text">Dubboæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„åŸºäºjavaå®ç°çš„RPCé€šä¿¡æ¡†æ¶</span></li><li id="u8260f9a8" data-lake-index-type="0"><span class="ne-text">æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼Œzookeeperï¼Œæ²¡æœ‰ç†”æ–­æœºåˆ¶ï¼Œæ¥ä½äº†Hystrix</span></li></ul><p id="u91101b32" class="ne-p" style="margin: 0; padding: 0; min-height: 24px"><strong><span class="ne-text">3.SpringCloud Alibaba ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆï¼</span></strong></p></details>

<h1 id><a href="#" class="headerlink" title></a></h1>]]></content>
      <categories>
        <category>javaæ¡†æ¶</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>springæ¡†æ¶</tag>
        <tag>springboot</tag>
      </tags>
  </entry>
  <entry>
    <title>springmvc</title>
    <url>/2023/11/05/springmvc/</url>
    <content><![CDATA[<center>springmvc</center>

<span id="more"></span>

<h1 id="ä¸€ã€ä»€ä¹ˆæ˜¯SpringMVC"><a href="#ä¸€ã€ä»€ä¹ˆæ˜¯SpringMVC" class="headerlink" title="ä¸€ã€ä»€ä¹ˆæ˜¯SpringMVC"></a>ä¸€ã€ä»€ä¹ˆæ˜¯SpringMVC</h1><p><strong>é¦–å…ˆåˆ›å»ºé¡¹ç›®SpringMVCï¼Œå¯¼å…¥ä¾èµ–</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SpringMVC<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>springmvc-01-servlet<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">modules</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--å¯¼å…¥ä¾èµ–--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="1-1ã€springmvc-01-serlvetæ¨¡å—"><a href="#1-1ã€springmvc-01-serlvetæ¨¡å—" class="headerlink" title="1.1ã€springmvc-01-serlvetæ¨¡å—"></a>1.1ã€springmvc-01-serlvetæ¨¡å—</h2><h3 id="1ã€æ¨¡å—"><a href="#1ã€æ¨¡å—" class="headerlink" title="1ã€æ¨¡å—"></a>1ã€æ¨¡å—</h3><h3 id="2ã€æ·»åŠ Web-appçš„æ”¯æŒï¼"><a href="#2ã€æ·»åŠ Web-appçš„æ”¯æŒï¼" class="headerlink" title="2ã€æ·»åŠ Web appçš„æ”¯æŒï¼"></a>2ã€æ·»åŠ Web appçš„æ”¯æŒï¼</h3><img src="/2023/11/05/springmvc/1675731783788-d3eb5650-1c27-4911-a775-7318fee1e49e.png" class title="img">

<img src="/2023/11/05/springmvc/1675731815306-a483202c-ce09-4779-97ef-7e5556ce8d38.png" class title="img">

<h3 id="3ã€pom-xml-springmvc-01-serlvet"><a href="#3ã€pom-xml-springmvc-01-serlvet" class="headerlink" title="3ã€pom.xml (springmvc-01-serlvet)"></a>3ã€pom.xml (springmvc-01-serlvet)</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SpringMVC<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springmvc-01-servlet<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="4ã€HelloServlet"><a href="#4ã€HelloServlet" class="headerlink" title="4ã€HelloServlet"></a>4ã€HelloServlet</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//è·å–å‰ç«¯å‚æ•°</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span>req.getParameter(<span class="string">&quot;method&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(method.equals(<span class="string">&quot;add&quot;</span>))&#123;</span><br><span class="line">           req.getSession().setAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;æ‰§è¡Œäº†addæ–¹æ³•&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(method.equals(<span class="string">&quot;delete&quot;</span>))&#123;</span><br><span class="line">            req.getSession().setAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;æ‰§è¡Œäº†deleteæ–¹æ³•&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//ä¸šåŠ¡é€»è¾‘</span></span><br><span class="line">        <span class="comment">//è§†å›¾è·³è½¬</span></span><br><span class="line">        req.getRequestDispatcher(<span class="string">&quot;WEB-INF/jsp/test.jsp&quot;</span>).forward(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        doGet(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5ã€test"><a href="#5ã€test" class="headerlink" title="5ã€test"></a>5ã€test</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line">  <span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">      $&#123;msg&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="6ã€web"><a href="#6ã€web" class="headerlink" title="6ã€web"></a>6ã€web</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.wu.servlet.HelloServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/hello<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--è®¾ç½®sessionç”Ÿæ•ˆæ—¶é—´ï¼šåˆ†é’Ÿä¸ºå•ä½--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">session-config</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>15<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--è®¾ç½®webé»˜è®¤é¡µé¢--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>/WEB-INF/jsp/form.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="7ã€from"><a href="#7ã€from" class="headerlink" title="7ã€from"></a>7ã€from</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/hello&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;method&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;submit&quot;</span>&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h3 id="8ã€ç»“æœ"><a href="#8ã€ç»“æœ" class="headerlink" title="8ã€ç»“æœ"></a>8ã€ç»“æœ</h3><img src="/2023/11/05/springmvc/1675750438601-1231fe5d-1abf-41ee-83cc-2bea3c1b5ad1.png" class title="img">

<p>&#x2F;&#x2F;ã€add</p>
<img src="/2023/11/05/springmvc/1675750847403-c3d8fc4b-64dc-47b7-a53d-d0bbd8afee5d.png" class title="img">

<p>&#x2F;&#x2F;ã€delete</p>
<img src="/2023/11/05/springmvc/1675750873156-33c9c421-4f9f-47b5-9a87-dcf7e3e8aa63.png" class title="img">

<h2 id="1-2ã€MVCæ¡†æ¶è¦åšå“ªäº›äº‹æƒ…"><a href="#1-2ã€MVCæ¡†æ¶è¦åšå“ªäº›äº‹æƒ…" class="headerlink" title="1.2ã€MVCæ¡†æ¶è¦åšå“ªäº›äº‹æƒ…"></a>1.2ã€MVCæ¡†æ¶è¦åšå“ªäº›äº‹æƒ…</h2><ul>
<li>å°†urlæ˜ å°„åˆ°javaç±»æˆ–javaç±»çš„æ–¹æ³•</li>
<li>å°è£…ç”¨æˆ·æäº¤çš„æ•°æ® .</li>
<li>å¤„ç†è¯·æ±‚â€“è°ƒç”¨ç›¸å…³çš„ä¸šåŠ¡å¤„ç†â€“å°è£…å“åº”æ•°æ®</li>
<li>å°†å“åº”çš„æ•°æ®è¿›è¡Œæ¸²æŸ“ . jsp &#x2F; html ç­‰è¡¨ç¤ºå±‚æ•°æ®</li>
</ul>
<h2 id="1-3ã€æ–‡æ¡£"><a href="#1-3ã€æ–‡æ¡£" class="headerlink" title="1.3ã€æ–‡æ¡£"></a>1.3ã€æ–‡æ¡£</h2><p><a href="https://docs.spring.io/spring-framework/docs/4.3.24.RELEASE/spring-framework-reference/">4.3.24æ–‡æ¡£</a></p>
<h2 id="1-4ã€æ³¨æ„"><a href="#1-4ã€æ³¨æ„" class="headerlink" title="1.4ã€æ³¨æ„"></a>1.4ã€æ³¨æ„</h2><p>å¦‚æœå‡ºç°404é—®é¢˜ï¼Œè¯·æŸ¥çœ‹</p>
<img src="/2023/11/05/springmvc/1675760872607-411788cb-5043-46c1-b0c2-15509c55e848.png" class title="img">

<p>1ã€æ–‡ä»¶â€“&gt;æ‰“å¼€é¡¹ç›®ç»“æ„</p>
<p>æ·»åŠ libç›®å½•å¿…é¡»åœ¨WEB-INFä¸‹ï¼Œå› ä¸ºjaråŒ…éœ€è¦ä¸Šä¼ tomcat</p>
<img src="/2023/11/05/springmvc/1675760473428-8d1fb253-0e74-4b71-88a5-fee90b97f217.png" class title="img">2ã€2ã€ç„¶ååŠ å…¥æ‰€æœ‰çš„åŒ…

<img src="/2023/11/05/springmvc/1675760614074-2c37d109-280d-4b50-bbe5-6e17f4bf0b23.png" class title="img">

<p>3ã€å…¨é€‰åç‚¹å‡»ç¡®å®š</p>
<img src="/2023/11/05/springmvc/1675760639826-cd628d2e-88ce-4d58-ab02-4cbb29d869e5.png" class title="img">

<p>æ³¨æ„ï¼šæ·»åŠ libåï¼Œéœ€è¦é‡å¯tomcat</p>
<img src="/2023/11/05/springmvc/1675760751267-461eeaff-465c-48b2-aa26-a2f9479edc81.png" class title="img">

<h1 id="äºŒã€ç¬¬ä¸€ä¸ªMVCç¨‹åº"><a href="#äºŒã€ç¬¬ä¸€ä¸ªMVCç¨‹åº" class="headerlink" title="äºŒã€ç¬¬ä¸€ä¸ªMVCç¨‹åº"></a>äºŒã€ç¬¬ä¸€ä¸ªMVCç¨‹åº</h1><p><a href="https://mp.weixin.qq.com/s?__biz=Mzg2NTAzMTExNg==&mid=2247483978&idx=1&sn=6711110a3b2595d6bb987ca02ee0a728&scene=19#wechat_redirect">SpringMVC02ï¼šç¬¬ä¸€ä¸ªMVCç¨‹åº</a></p>
<h2 id="1-1ã€springmvc-02-hellomvc"><a href="#1-1ã€springmvc-02-hellomvc" class="headerlink" title="1.1ã€springmvc-02-hellomvc"></a>1.1ã€springmvc-02-hellomvc</h2><h3 id="1ã€æ¨¡å—-1"><a href="#1ã€æ¨¡å—-1" class="headerlink" title="1ã€æ¨¡å—"></a>1ã€æ¨¡å—</h3><img src="/2023/11/05/springmvc/1675772149395-c1cdbb0e-610c-4322-9777-66bb62e892b2.png" class title="img">

<h3 id="2ã€web-xml"><a href="#2ã€web-xml" class="headerlink" title="2ã€web.xml"></a>2ã€web.xml</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--1.æ³¨å†ŒDispatcherServlet--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å…³è”ä¸€ä¸ªspringmvcçš„é…ç½®æ–‡ä»¶:ã€servlet-nameã€‘-servlet.xml--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc-servlet.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å¯åŠ¨çº§åˆ«-1--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--/ åŒ¹é…æ‰€æœ‰çš„è¯·æ±‚ï¼›ï¼ˆä¸åŒ…æ‹¬.jspï¼‰--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--/* åŒ¹é…æ‰€æœ‰çš„è¯·æ±‚ï¼›ï¼ˆåŒ…æ‹¬.jspï¼‰--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3ã€springmvc-servlet-xml"><a href="#3ã€springmvc-servlet-xml" class="headerlink" title="3ã€springmvc-servlet.xml"></a>3ã€springmvc-servlet.xml</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ·»åŠ  å¤„ç†æ˜ å°„å™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ·»åŠ  å¤„ç†å™¨é€‚é…å™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ·»åŠ  è§†å›¾è§£æå™¨--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--è§†å›¾è§£æå™¨:DispatcherServletç»™ä»–çš„ModelAndView--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span> <span class="attr">id</span>=<span class="string">&quot;InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å‰ç¼€--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/jsp/&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--åç¼€--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--Handler--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;/hello&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wu.controller.HelloController&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="4ã€HelloController-java"><a href="#4ã€HelloController-java" class="headerlink" title="4ã€HelloController.java"></a>4ã€HelloController.java</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ³¨æ„ï¼šè¿™é‡Œæˆ‘ä»¬å…ˆå¯¼å…¥Controlleræ¥å£</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> <span class="keyword">implements</span> <span class="title class_">Controller</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">handleRequest</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//ModelAndView æ¨¡å‹å’Œè§†å›¾</span></span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">mv</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å°è£…å¯¹è±¡ï¼Œæ”¾åœ¨ModelAndViewä¸­ã€‚Model</span></span><br><span class="line">        mv.addObject(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;HelloSpringMVC!&quot;</span>);</span><br><span class="line">        <span class="comment">//å°è£…è¦è·³è½¬çš„è§†å›¾ï¼Œæ”¾åœ¨ModelAndViewä¸­</span></span><br><span class="line">        mv.setViewName(<span class="string">&quot;hello&quot;</span>); <span class="comment">//: /WEB-INF/jsp/hello.jsp</span></span><br><span class="line">        <span class="keyword">return</span> mv;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5ã€hello-jsp"><a href="#5ã€hello-jsp" class="headerlink" title="5ã€hello.jsp"></a>5ã€hello.jsp</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">$&#123;msg&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="6ã€TomCaté…ç½®"><a href="#6ã€TomCaté…ç½®" class="headerlink" title="6ã€TomCaté…ç½®"></a>6ã€TomCaté…ç½®</h3><img src="/2023/11/05/springmvc/1675773195117-92a29702-69a1-44e3-b38f-d0c9d9d0635f.png" class title="img">

<h3 id="7ã€æŸ¥çœ‹é¡¹ç›®ç»“æ„"><a href="#7ã€æŸ¥çœ‹é¡¹ç›®ç»“æ„" class="headerlink" title="7ã€æŸ¥çœ‹é¡¹ç›®ç»“æ„"></a>7ã€æŸ¥çœ‹é¡¹ç›®ç»“æ„</h3><img src="/2023/11/05/springmvc/1675772896830-4aee67a8-689a-46d5-9ce3-c8b38766aeff.png" class title="img">

<h3 id="7ã€ç»“æœ"><a href="#7ã€ç»“æœ" class="headerlink" title="7ã€ç»“æœ"></a>7ã€ç»“æœ</h3><img src="/2023/11/05/springmvc/1675773274942-785890dc-9a50-4b56-844f-a11624afa777.png" class title="img">

<p>è¾“å…¥&#x2F;hello</p>
<img src="/2023/11/05/springmvc/1675773342772-0d731f46-e19c-451d-8099-53a22bc21e08.png" class title="img">

<h2 id="1-2ã€ä¸­å¿ƒæ§åˆ¶å™¨"><a href="#1-2ã€ä¸­å¿ƒæ§åˆ¶å™¨" class="headerlink" title="1.2ã€ä¸­å¿ƒæ§åˆ¶å™¨"></a>1.2ã€ä¸­å¿ƒæ§åˆ¶å™¨</h2><p>å½“å‘èµ·è¯·æ±‚æ—¶è¢«å‰ç½®çš„æ§åˆ¶å™¨æ‹¦æˆªåˆ°è¯·æ±‚ï¼Œæ ¹æ®è¯·æ±‚å‚æ•°ç”Ÿæˆä»£ç†è¯·æ±‚ï¼Œæ‰¾åˆ°è¯·æ±‚å¯¹åº”çš„å®é™…æ§åˆ¶å™¨ï¼Œæ§åˆ¶å™¨å¤„ç†è¯·æ±‚ï¼Œåˆ›å»ºæ•°æ®æ¨¡å‹ï¼Œè®¿é—®æ•°æ®åº“ï¼Œå°†æ¨¡å‹å“åº”ç»™ä¸­å¿ƒæ§åˆ¶å™¨ï¼Œæ§åˆ¶å™¨ä½¿ç”¨æ¨¡å‹ä¸è§†å›¾æ¸²æŸ“è§†å›¾ç»“æœï¼Œå°†ç»“æœè¿”å›ç»™ä¸­å¿ƒæ§åˆ¶å™¨ï¼Œå†å°†ç»“æœè¿”å›ç»™è¯·æ±‚è€…ã€‚</p>
<img src="/2023/11/05/springmvc/1675927493296-c056ae69-b73f-4370-b170-6dcf4fb9c73d.png" class title="img">

<p><strong>HandlerMappingï¼š</strong> å¤„ç†å™¨æ˜ å°„å™¨&#96;</p>
<p><strong>HandlerAdapterï¼š</strong> å¤„ç†å™¨é€‚é…å™¨</p>
<p><strong>viewResolverï¼š</strong> è§†å›¾è§£æå™¨</p>
<img src="/2023/11/05/springmvc/1675927644850-7db12314-b4c7-4af1-9df0-2e9cc77e596d.png" class title="img">

<p>å›¾ä¸ºSpringMVCçš„ä¸€ä¸ªè¾ƒå®Œæ•´çš„æµç¨‹å›¾ï¼Œå®çº¿è¡¨ç¤ºSpringMVCæ¡†æ¶æä¾›çš„æŠ€æœ¯ï¼Œä¸éœ€è¦å¼€å‘è€…å®ç°ï¼Œè™šçº¿è¡¨ç¤ºéœ€è¦å¼€å‘è€…å®ç°ã€‚</p>
<h2 id="1-3ã€æ·±å…¥å­¦ä¹ SpringMVC"><a href="#1-3ã€æ·±å…¥å­¦ä¹ SpringMVC" class="headerlink" title="1.3ã€æ·±å…¥å­¦ä¹ SpringMVC"></a>1.3ã€æ·±å…¥å­¦ä¹ SpringMVC</h2><h3 id="1ã€web"><a href="#1ã€web" class="headerlink" title="1ã€web"></a>1ã€web</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--1.é…ç½®DispatcherServlet,è¿™ä¸ªæ˜¯SpringMVCçš„æ ¸å¿ƒï¼šè¯·æ±‚åˆ†å‘å™¨ï¼Œå‰ç«¯æ§åˆ¶å™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--DispatcherServletè¦ç»‘å®šspringmvcçš„é…ç½®æ–‡ä»¶:ã€servlet-nameã€‘-servlet.xml--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc-servlet.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å¯åŠ¨çº§åˆ«-1--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--/ åŒ¹é…æ‰€æœ‰çš„è¯·æ±‚ï¼›ï¼ˆä¸åŒ…æ‹¬.jspï¼‰--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--/* åŒ¹é…æ‰€æœ‰çš„è¯·æ±‚ï¼›ï¼ˆåŒ…æ‹¬.jspï¼‰--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2ã€springmvc-servlet-xml"><a href="#2ã€springmvc-servlet-xml" class="headerlink" title="2ã€springmvc-servlet.xml"></a>2ã€springmvc-servlet.xml</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ·»åŠ  å¤„ç†æ˜ å°„å™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ·»åŠ  å¤„ç†å™¨é€‚é…å™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ·»åŠ  è§†å›¾è§£æå™¨--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--è§†å›¾è§£æå™¨:DispatcherServletç»™ä»–çš„ModelAndView--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span> <span class="attr">id</span>=<span class="string">&quot;InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å‰ç¼€--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/jsp/&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--åç¼€--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--BeanNameUrlHandlerMappingï¼šbean --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;/hello&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wu.controller.HelloController&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3ã€HelloController-java"><a href="#3ã€HelloController-java" class="headerlink" title="3ã€HelloController.java"></a>3ã€HelloController.java</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> <span class="keyword">implements</span> <span class="title class_">Controller</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">handleRequest</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">mv</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">         <span class="comment">//ä¸šåŠ¡ä»£ç </span></span><br><span class="line">        String result=<span class="string">&quot;HelloSpringMVC!&quot;</span>;</span><br><span class="line">        mv.addObject(<span class="string">&quot;msg&quot;</span>,result);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è§†å›¾è·³è½¬</span></span><br><span class="line">        mv.setViewName(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> mv;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="1-4ã€ä½¿ç”¨æ³¨è§£å¼€å‘SpringMVC"><a href="#1-4ã€ä½¿ç”¨æ³¨è§£å¼€å‘SpringMVC" class="headerlink" title="1.4ã€ä½¿ç”¨æ³¨è§£å¼€å‘SpringMVC"></a>1.4ã€ä½¿ç”¨æ³¨è§£å¼€å‘SpringMVC</h2><h2 id="æ¨¡å—"><a href="#æ¨¡å—" class="headerlink" title="æ¨¡å—"></a>æ¨¡å—</h2><h3 id="1ã€web-jsp"><a href="#1ã€web-jsp" class="headerlink" title="1ã€web.jsp"></a>1ã€web.jsp</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--1.é…ç½® DispatcherServletï¼Œè¿™ä¸ªæ˜¯SpringMVCçš„æ ¸å¿ƒï¼šè¯·æ±‚åˆ†å‘å™¨ï¼Œå‰ç«¯æ§åˆ¶å™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--DispatcherServletè¦ç»‘å®šspringmvcçš„é…ç½®æ–‡ä»¶:ã€servlet-nameã€‘-servlet.xml--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc-servlet.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å¯åŠ¨çº§åˆ«-1--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--/ åŒ¹é…æ‰€æœ‰çš„è¯·æ±‚ï¼›ï¼ˆä¸åŒ…æ‹¬.jspï¼‰--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--/* åŒ¹é…æ‰€æœ‰çš„è¯·æ±‚ï¼›ï¼ˆåŒ…æ‹¬.jspï¼‰--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2ã€springmvc-servlet-xml-1"><a href="#2ã€springmvc-servlet-xml-1" class="headerlink" title="2ã€springmvc-servlet.xml"></a>2ã€springmvc-servlet.xml</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">       https://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="string"><span class="tag">       https://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è‡ªåŠ¨æ‰«æåŒ…ï¼Œè®©æŒ‡å®šåŒ…ä¸‹çš„æ³¨è§£ç”Ÿæ•ˆ,ç”±IOCå®¹å™¨ç»Ÿä¸€ç®¡ç† --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.wu.controller&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è®©Spring MVCä¸å¤„ç†é™æ€èµ„æº --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    æ”¯æŒmvcæ³¨è§£é©±åŠ¨</span></span><br><span class="line"><span class="comment">        åœ¨springä¸­ä¸€èˆ¬é‡‡ç”¨@RequestMappingæ³¨è§£æ¥å®Œæˆæ˜ å°„å…³ç³»</span></span><br><span class="line"><span class="comment">        è¦æƒ³ä½¿@RequestMappingæ³¨è§£ç”Ÿæ•ˆ</span></span><br><span class="line"><span class="comment">        å¿…é¡»å‘ä¸Šä¸‹æ–‡ä¸­æ³¨å†ŒDefaultAnnotationHandlerMapping</span></span><br><span class="line"><span class="comment">        å’Œä¸€ä¸ªAnnotationMethodHandlerAdapterå®ä¾‹</span></span><br><span class="line"><span class="comment">        è¿™ä¸¤ä¸ªå®ä¾‹åˆ†åˆ«åœ¨ç±»çº§åˆ«å’Œæ–¹æ³•çº§åˆ«å¤„ç†ã€‚</span></span><br><span class="line"><span class="comment">        è€Œannotation-drivené…ç½®å¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨å®Œæˆä¸Šè¿°ä¸¤ä¸ªå®ä¾‹çš„æ³¨å…¥ã€‚</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- è§†å›¾è§£æå™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">id</span>=<span class="string">&quot;internalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å‰ç¼€ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/jsp/&quot;</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- åç¼€ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3ã€HelloController"><a href="#3ã€HelloController" class="headerlink" title="3ã€HelloController"></a>3ã€HelloController</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="comment">//@RequestMapping(&quot;/HelloController&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//çœŸå®è®¿é—®åœ°å€ : é¡¹ç›®å/HelloController/hello</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/h1&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sayHello</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">        <span class="comment">//å°è£…æ•°æ®</span></span><br><span class="line">        <span class="comment">//å‘æ¨¡å‹ä¸­æ·»åŠ å±æ€§msgä¸å€¼ï¼Œå¯ä»¥åœ¨JSPé¡µé¢ä¸­å–å‡ºå¹¶æ¸²æŸ“</span></span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;hello,SpringMVCAnnotation!&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;   <span class="comment">//web-inf/jsp/hello.jsp  ä¼šè¢«è§†å›¾è§£æå™¨å¤„ç†ï¼š</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨è§†å›¾è§£æå™¨ä¸­æˆ‘ä»¬æŠŠæ‰€æœ‰çš„è§†å›¾éƒ½å­˜æ”¾åœ¨&#x2F;WEB-INF&#x2F;ç›®å½•ä¸‹ï¼Œè¿™æ ·å¯ä»¥ä¿è¯è§†å›¾å®‰å…¨ï¼Œå› ä¸ºè¿™ä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œå®¢æˆ·ç«¯ä¸èƒ½ç›´æ¥è®¿é—®ã€‚</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">$&#123;msg&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="4ã€æŸ¥çœ‹Tomcaté…ç½®"><a href="#4ã€æŸ¥çœ‹Tomcaté…ç½®" class="headerlink" title="4ã€æŸ¥çœ‹Tomcaté…ç½®"></a>4ã€æŸ¥çœ‹Tomcaté…ç½®</h3><img src="/2023/11/05/springmvc/1675949136676-f862a1af-af6b-46e5-9965-3dccb024f6be.png" class title="img">

<h3 id="5ã€libä¸­åŠ å…¥æ‰€æœ‰åŒ…"><a href="#5ã€libä¸­åŠ å…¥æ‰€æœ‰åŒ…" class="headerlink" title="5ã€libä¸­åŠ å…¥æ‰€æœ‰åŒ…"></a>5ã€libä¸­åŠ å…¥æ‰€æœ‰åŒ…</h3><img src="/2023/11/05/springmvc/1675949213351-32cfa86c-7195-4677-bb8a-4344765bbd9e.png" class title="img">

<h3 id="6ã€ç»“æœ"><a href="#6ã€ç»“æœ" class="headerlink" title="6ã€ç»“æœ"></a>6ã€ç»“æœ</h3><img src="/2023/11/05/springmvc/1675949240385-e36410be-736f-4091-90be-c5ec9d22315d.png" class title="img"><img src="/2023/11/05/springmvc/1675950328102-17611d6c-eec6-4f7b-b281-fea33eb5f4e4.png" class title="img">

<h1 id="ä¸‰ã€ControlleråŠRestFul"><a href="#ä¸‰ã€ControlleråŠRestFul" class="headerlink" title="ä¸‰ã€ControlleråŠRestFul"></a>ä¸‰ã€ControlleråŠRestFul</h1><p><a href="https://mp.weixin.qq.com/s?__biz=Mzg2NTAzMTExNg==&mid=2247483993&idx=1&sn=abdd687e0f360107be0208946a7afc1d&scene=19#wechat_redirect">SpringMVC03ï¼šRestFulå’Œæ§åˆ¶å™¨</a></p>
<h2 id="ç¬¬ä¸€ç§æ–¹æ³•â€”â€”å®ç°Controlleræ¥å£"><a href="#ç¬¬ä¸€ç§æ–¹æ³•â€”â€”å®ç°Controlleræ¥å£" class="headerlink" title="ç¬¬ä¸€ç§æ–¹æ³•â€”â€”å®ç°Controlleræ¥å£"></a>ç¬¬ä¸€ç§æ–¹æ³•â€”â€”å®ç°Controlleræ¥å£</h2><h3 id="springmvc-04-controlleræ¨¡å—"><a href="#springmvc-04-controlleræ¨¡å—" class="headerlink" title="springmvc-04-controlleræ¨¡å—"></a>springmvc-04-controlleræ¨¡å—</h3><img src="/2023/11/05/springmvc/1687856478160-addcbdc0-5b3c-4f8f-9429-d8fe664ca2a5.png" class title="img">

<h4 id="1ã€web-1"><a href="#1ã€web-1" class="headerlink" title="1ã€web"></a>1ã€web</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®DispatcherServlet--&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc-servlet.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line">     <span class="comment">&lt;!--èµ„æºè¿‡æ»¤å™¨--&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--springmvcè‡ªå¸¦çš„è¿‡æ»¤å™¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span><span class="symbol">&amp;lt;</span>!<span class="symbol">&amp;ndash;</span> &quot;/&quot; ä»£è¡¨è¿‡æ»¤æ‰€æœ‰è¯·æ±‚(é™¤jsp), &quot;/*&quot; ä»£è¡¨è¿‡æ»¤æ‰€æœ‰è¯·æ±‚(åŒ…æ‹¬jsp) <span class="symbol">&amp;ndash;</span><span class="symbol">&amp;gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="2ã€springmvc-servlet-xml-2"><a href="#2ã€springmvc-servlet-xml-2" class="headerlink" title="2ã€springmvc-servlet.xml"></a>2ã€springmvc-servlet.xml</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc https://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.wu.controller&quot;</span>/&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- &lt;mvc:default-servlet-handler/&gt;</span></span><br><span class="line"><span class="comment">    &lt;mvc:annotation-driven/&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="comment">&lt;!--è§†å›¾è§£æå™¨:DispatcherServletç»™ä»–çš„ModelAndView--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span> <span class="attr">id</span>=<span class="string">&quot;InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å‰ç¼€--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/jsp/&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--åç¼€--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;/t1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wu.controller.controllerTest1&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="3ã€ControllerTest1"><a href="#3ã€ControllerTest1" class="headerlink" title="3ã€ControllerTest1"></a>3ã€ControllerTest1</h4><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.mvc.Controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">controllerTest1</span>  <span class="keyword">implements</span> <span class="title class_">Controller</span> &#123;</span><br><span class="line">    <span class="comment">/*å®ç°äº†Controlleræ¥å£çš„ç±»ï¼Œè¯´æ˜è¿™å°±æ˜¯ä¸€ä¸ªæ§åˆ¶å™¨äº†*/</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">handleRequest</span><span class="params">(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">mv</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>();</span><br><span class="line">        mv.addObject(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;controllerTest1&quot;</span>);</span><br><span class="line">        mv.setViewName(<span class="string">&quot;test&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> mv;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4ã€test-jsp"><a href="#4ã€test-jsp" class="headerlink" title="4ã€test.jsp"></a>4ã€test.jsp</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>SpringMVC<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    $&#123;msg&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="5ã€ç»“æœ"><a href="#5ã€ç»“æœ" class="headerlink" title="5ã€ç»“æœ:"></a>5ã€ç»“æœ:</h4><img src="/2023/11/05/springmvc/1687831495044-177738a8-ef17-4c94-80f0-92337dc9665a.png" class title="img">

<h2 id="ç¬¬äºŒç§â€”â€”ä½¿ç”¨æ³¨è§£-Controller"><a href="#ç¬¬äºŒç§â€”â€”ä½¿ç”¨æ³¨è§£-Controller" class="headerlink" title="ç¬¬äºŒç§â€”â€”ä½¿ç”¨æ³¨è§£@Controller"></a>ç¬¬äºŒç§â€”â€”ä½¿ç”¨æ³¨è§£@Controller</h2><h3 id="1ã€ControllerTest2"><a href="#1ã€ControllerTest2" class="headerlink" title="1ã€ControllerTest2"></a>1ã€ControllerTest2</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span>  <span class="comment">/*ä»£è¡¨è¿™ä¸ªç±»ä¼šè¢«springæ‰˜ç®¡</span></span><br><span class="line"><span class="comment"> è¢«è¿™ä¸ªæ³¨è§£çš„ç±»ï¼Œä¸­çš„æ‰€æœ‰æ–¹æ³•ï¼Œå¦‚æœè¿”å›å€¼æ˜¯String,å¹¶ä¸”æœ‰å…·ä½“é¡µé¢å¯ä»¥è·³è½¬ï¼Œé‚£ä¹ˆå°±ä¼šè¢«è§†å›¾è§£æå™¨è§£æï¼š*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">controllerTest2</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;t1&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">test1</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">       model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;Helloï¼ŒcontrollerTest2&quot;</span>);</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;t3&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">test3</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;Helloï¼Œtest3&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2ã€springmvc-servlet-xml-3"><a href="#2ã€springmvc-servlet-xml-3" class="headerlink" title="2ã€springmvc-servlet.xml"></a>2ã€springmvc-servlet.xml</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">  http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc https://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.wu.controller&quot;</span>/&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- &lt;mvc:default-servlet-handler/&gt;</span></span><br><span class="line"><span class="comment">  &lt;mvc:annotation-driven/&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--è§†å›¾è§£æå™¨:DispatcherServletç»™ä»–çš„ModelAndView--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span> <span class="attr">id</span>=<span class="string">&quot;InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å‰ç¼€--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/jsp/&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--åç¼€--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--&lt;bean id=&quot;/t1&quot; class=&quot;com.wu.controller.controllerTest1&quot;/&gt;--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3ã€ç»“æœ"><a href="#3ã€ç»“æœ" class="headerlink" title="3ã€ç»“æœ"></a>3ã€ç»“æœ</h3><img src="/2023/11/05/springmvc/1687831666756-9f7eec58-65df-4a4f-ba15-6379db3499c1.png" class title="img">

<h2 id="RestFul-é£æ ¼"><a href="#RestFul-é£æ ¼" class="headerlink" title="RestFul é£æ ¼"></a>RestFul é£æ ¼</h2><p>Restfulå°±æ˜¯ä¸€ä¸ªèµ„æºå®šä½åŠèµ„æºæ“ä½œçš„é£æ ¼ã€‚ä¸æ˜¯æ ‡å‡†ä¹Ÿä¸æ˜¯åè®®ï¼Œåªæ˜¯ä¸€ç§é£æ ¼ã€‚åŸºäºè¿™ä¸ªé£æ ¼è®¾è®¡çš„è½¯ä»¶å¯ä»¥æ›´ç®€æ´ï¼Œæ›´æœ‰å±‚æ¬¡ï¼Œæ›´æ˜“äºå®ç°ç¼“å­˜ç­‰æœºåˆ¶ã€‚</p>
<p><strong>åŠŸèƒ½</strong></p>
<p>èµ„æºï¼šäº’è”ç½‘æ‰€æœ‰çš„äº‹ç‰©éƒ½å¯ä»¥è¢«æŠ½è±¡ä¸ºèµ„æº<br>èµ„æºæ“ä½œï¼šä½¿ç”¨POSTã€DELETEã€PUTã€GETï¼Œä½¿ç”¨ä¸åŒæ–¹æ³•å¯¹èµ„æºè¿›è¡Œæ“ä½œã€‚<br>åˆ†åˆ«å¯¹åº” æ·»åŠ ã€ åˆ é™¤ã€ä¿®æ”¹ã€æŸ¥è¯¢ã€‚</p>
<p><strong>ä¼ ç»Ÿæ–¹å¼æ“ä½œèµ„æº ï¼š</strong> é€šè¿‡ä¸åŒçš„å‚æ•°æ¥å®ç°ä¸åŒçš„æ•ˆæœï¼æ–¹æ³•å•ä¸€ï¼Œpost å’Œ get</p>
<p><a href="http://127.0.0.1/item/queryItem.action?id=1">http://127.0.0.1/item/queryItem.action?id=1</a> æŸ¥è¯¢,GET</p>
<p><a href="http://127.0.0.1/item/saveItem.action">http://127.0.0.1/item/saveItem.action</a> æ–°å¢,POST</p>
<p><a href="http://127.0.0.1/item/updateItem.action">http://127.0.0.1/item/updateItem.action</a> æ›´æ–°,POST</p>
<p><a href="http://127.0.0.1/item/deleteItem.action?id=1">http://127.0.0.1/item/deleteItem.action?id=1</a> åˆ é™¤,GETæˆ–POST</p>
<p><strong>ä½¿ç”¨RESTfulæ“ä½œèµ„æº ï¼š</strong> å¯ä»¥é€šè¿‡ä¸åŒçš„è¯·æ±‚æ–¹å¼æ¥å®ç°ä¸åŒçš„æ•ˆæœï¼å¦‚ä¸‹ï¼šè¯·æ±‚åœ°å€ä¸€æ ·ï¼Œä½†æ˜¯åŠŸèƒ½å¯ä»¥ä¸åŒï¼</p>
<p><a href="http://127.0.0.1/item/1">http://127.0.0.1/item/1</a> æŸ¥è¯¢,GET</p>
<p><a href="http://127.0.0.1/item">http://127.0.0.1/item</a> æ–°å¢,POST</p>
<p><a href="http://127.0.0.1/item">http://127.0.0.1/item</a> æ›´æ–°,PUT</p>
<p><a href="http://127.0.0.1/item/1">http://127.0.0.1/item/1</a> åˆ é™¤,DELETE</p>
<h3 id="RestFulController"><a href="#RestFulController" class="headerlink" title="RestFulController"></a>RestFulController</h3><p>åŸæ¥</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RestFulController</span> &#123;</span><br><span class="line">    </span><br><span class="line">   <span class="comment">//åŸæ¥çš„ï¼š  http://LocaLhost:8080/add?a=1&amp;b=2</span></span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/add&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">test1</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b, Model model)</span>&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> a + b;</span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;ç»“æœä¸º&quot;</span>+res);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RestFulController</span> &#123;</span><br><span class="line">   </span><br><span class="line">    <span class="comment">//RestFul: http://LocaLhost:8080/add/1/2</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/add/&#123;a&#125;/&#123;b&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">test2</span><span class="params">(<span class="meta">@PathVariable</span> <span class="type">int</span> a,<span class="meta">@PathVariable</span> <span class="type">int</span> b, Model model)</span>&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">res</span> <span class="operator">=</span> a + b;</span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;ç»“æœä¸º&quot;</span>+res);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ç»“æœ"><a href="#ç»“æœ" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h3><img src="/2023/11/05/springmvc/1687832667461-926464e6-41f6-4ace-8460-2f00232a7bdd.png" class title="img">

<h3 id="postæ–¹æ³•"><a href="#postæ–¹æ³•" class="headerlink" title="postæ–¹æ³•"></a>postæ–¹æ³•</h3><p><strong>a.jsp</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/add/1/2&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span>&gt;</span>æäº¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line">package com.wu.controller;</span><br><span class="line"></span><br><span class="line">import org.springframework.stereotype.Controller;</span><br><span class="line">import org.springframework.ui.Model;</span><br><span class="line">import org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line">@Controller</span><br><span class="line">public class RestFulController &#123;</span><br><span class="line">    //åŸæ¥çš„ï¼š  http://LocaLhost:8080/add?a=1&amp;b=2</span><br><span class="line">    //RestFul: http://LocaLhost:8080/add/1/2</span><br><span class="line"></span><br><span class="line">  /*  @RequestMapping(value = &quot;/add/&#123;a&#125;/&#123;b&#125;&quot;, method = RequestMethod.GET) */</span><br><span class="line"></span><br><span class="line">    @PostMapping(value = &quot;/add/&#123;a&#125;/&#123;b&#125;&quot;)</span><br><span class="line">    public String Test1(@PathVariable int a, @PathVariable String b, Model model) &#123;</span><br><span class="line">        String rest = a + b;</span><br><span class="line">        model.addAttribute(&quot;msg&quot;, &quot;ç»“æœä¸º1ï¼š&quot; + rest + &quot;&quot;);</span><br><span class="line">        return &quot;test&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    @GetMapping(&quot;/add/&#123;a&#125;/&#123;b&#125;&quot;)</span><br><span class="line">    public String Test2(@PathVariable int a, @PathVariable String b, Model model) &#123;</span><br><span class="line">        String rest = a + b;</span><br><span class="line">        model.addAttribute(&quot;msg&quot;, &quot;ç»“æœä¸º2ï¼š&quot; + rest + &quot;&quot;);</span><br><span class="line">        return &quot;test&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç»“æœï¼š</p>
<img src="/2023/11/05/springmvc/1687832885369-e895b7a1-e08d-4011-bd2b-f415691bc5a6.png" class title="img">

<img src="/2023/11/05/springmvc/1687832922317-c4d32de5-0b09-4606-9c29-71496305aa38.png" class title="img">

<h1 id="å››ã€æ•°æ®å¤„ç†åŠè·³è½¬"><a href="#å››ã€æ•°æ®å¤„ç†åŠè·³è½¬" class="headerlink" title="å››ã€æ•°æ®å¤„ç†åŠè·³è½¬"></a>å››ã€æ•°æ®å¤„ç†åŠè·³è½¬</h1><p><a href="https://mp.weixin.qq.com/s?__biz=Mzg2NTAzMTExNg==&mid=2247483998&idx=1&sn=97c417a2c1484d694c761a2ad27f217d&scene=19#wechat_redirect">SpringMVC04ï¼šæ•°æ®å¤„ç†åŠè·³è½¬</a></p>
<h2 id="4-1ã€ç»“æœè·³è½¬æ–¹å¼"><a href="#4-1ã€ç»“æœè·³è½¬æ–¹å¼" class="headerlink" title="4.1ã€ç»“æœè·³è½¬æ–¹å¼"></a>4.1ã€ç»“æœè·³è½¬æ–¹å¼</h2><p><strong>ModelAndView</strong></p>
<h3 id="ModelTest1"><a href="#ModelTest1" class="headerlink" title="ModelTest1"></a>ModelTest1</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ModelTest1</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;m1/t1&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">test1</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span>&#123;</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession();</span><br><span class="line">        System.out.println(session.getId());</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2023/11/05/springmvc/1687854115876-b041b857-40f2-43c5-833c-4928c5ef5c49.png" class title="img">

<p>ä¿®æ”¹</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span>     </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ModelTest1</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/m/t1&quot;)</span></span><br><span class="line">    <span class="keyword">public</span>  String  <span class="title function_">test1</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;ModelTest1&quot;</span>);</span><br><span class="line">        <span class="comment">//è½¬å‘</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;/test&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/m/t2&quot;)</span></span><br><span class="line">    <span class="keyword">public</span>  String  <span class="title function_">test2</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;ModelTest2&quot;</span>);</span><br><span class="line">        <span class="comment">//è½¬å‘</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;forward:/index.jsp&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/m/t3&quot;)</span></span><br><span class="line">    <span class="keyword">public</span>  String  <span class="title function_">test3</span><span class="params">(Model model)</span>&#123;</span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg&quot;</span>,<span class="string">&quot;ModelTest3&quot;</span>);</span><br><span class="line">        <span class="comment">//é‡å®šå‘</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/index.jsp&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2023/11/05/springmvc/1687854433741-034db1fe-7d2a-4637-88ec-eb1cc05ab020.png" class title="img">

<h2 id="4-2ã€æ•°æ®å¤„ç†"><a href="#4-2ã€æ•°æ®å¤„ç†" class="headerlink" title="4.2ã€æ•°æ®å¤„ç†"></a>4.2ã€æ•°æ®å¤„ç†</h2><p><a href="https://mp.weixin.qq.com/s?__biz=Mzg2NTAzMTExNg==&mid=2247483998&idx=1&sn=97c417a2c1484d694c761a2ad27f217d&scene=19#wechat_redirect">04â€”â€”æ•°æ®å¤„ç†</a></p>
<p><strong>æ­£å¸¸</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.sun.org.glassfish.gmbal.ParameterNames;</span><br><span class="line"><span class="keyword">import</span> com.wu.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.ModelMap;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/t1&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">test1</span><span class="params">(String name, Model model)</span>&#123;</span><br><span class="line">        <span class="comment">// 1. æ¥æ”¶å‰ç«¯å‚æ•°</span></span><br><span class="line">        System.out.println(<span class="string">&quot;æ¥æ”¶åˆ°å‰ç«¯çš„å‚æ•°ä¸º&quot;</span>+name);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. å°†è¿”å›çš„ç»“æœä¼ é€’çº·å‰ç«¯ï¼Œ Model</span></span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg&quot;</span>,name);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. è§†å›¾è·³è½¬</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2023/11/05/springmvc/1687855670509-4485f2e9-d341-4b19-bca7-7ea2c5924d85.png" class title="img">

<p><strong>æ·»åŠ æ³¨è§£@RequestParam(â€œxxxxâ€)</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.sun.org.glassfish.gmbal.ParameterNames;</span><br><span class="line"><span class="keyword">import</span> com.wu.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.ModelMap;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/t1&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">Test1</span><span class="params">(<span class="meta">@RequestParam(&quot;username&quot;)</span> String name, Model model)</span>&#123;</span><br><span class="line">        <span class="comment">//1.æ¥æ”¶å‰ç«¯å‚æ•°</span></span><br><span class="line">        System.out.println(<span class="string">&quot;æ¥æ”¶åˆ°å‰ç«¯å‚æ•°ä¸ºï¼š&quot;</span>+ name);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.å°†è¿”å›çš„ç»“æœä¼ é€’ç»™å‰ç«¯ ï¼ŒModel</span></span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg&quot;</span>,name);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.è§†å›¾è·³è½¬</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2023/11/05/springmvc/1687855740025-af16b755-40bc-463e-97d3-e23728b11990.png" class title="img">

<p><strong>å¯¹è±¡å‚æ•°</strong></p>
<p><strong>åˆ›å»ºpojoæ–‡ä»¶å¤¹ â€”-&gt; æ–°å»ºuserå®ä½“ç±»</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span>  <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span>  String name;</span><br><span class="line">    <span class="keyword">private</span>  <span class="type">int</span> age;</span><br><span class="line">&#125;</span><br><span class="line">   <span class="comment">/*</span></span><br><span class="line"><span class="comment">    1. æ¥æ”¶å‰ç«¯ç”¨æˆ·ä¼ é€’çš„å‚æ•°ï¼Œåˆ¤æ–­å‚æ•°çš„åå­—ï¼Œå‡è®¾åå­—ç›´æ¥åœ¨æ–¹æ³•ä¸Šï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨</span></span><br><span class="line"><span class="comment">    2. å‡è®¾ä¼ é€’çš„æ˜¯ä¸€ä¸ªå¯¹è±¡User,åŒ¹Userå¯¹è±¡ä¸­çš„å­—æ®µåï¼šå¦‚æœåå­—ä¸€è‡´åˆ™OK,å¦åˆ™ï¼ŒåŒ¹é…ä¸åˆ°</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/t2&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">test2</span><span class="params">(User user)</span>&#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<img src="/2023/11/05/springmvc/1687855922584-e9666556-a2f9-4208-bf0b-6f00bbdd116a.png" class title="img">

<img src="/2023/11/05/springmvc/1687855935587-811e9f36-b96b-4501-95e3-032cf2e962a1.png" class title="img">

<h2 id="4-3ã€ä¹±ç é—®é¢˜"><a href="#4-3ã€ä¹±ç é—®é¢˜" class="headerlink" title="4.3ã€ä¹±ç é—®é¢˜"></a>4.3ã€ä¹±ç é—®é¢˜</h2><img src="/2023/11/05/springmvc/1687856333108-a5f7973d-e927-44dc-be3c-67911b3d9890.png" class title="img">

<h3 id="é—®é¢˜ï¼š"><a href="#é—®é¢˜ï¼š" class="headerlink" title="é—®é¢˜ï¼š"></a>é—®é¢˜ï¼š</h3><p><strong>form.jsp</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/e/t1&quot;</span> <span class="attr">method</span>=<span class="string">&quot;get&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>EncodingController</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EncodingController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;e/t1&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">Test1</span><span class="params">(String name, Model model)</span>&#123;</span><br><span class="line">        System.out.println(name);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;msg&quot;</span>,name);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;test&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="è¿‡æ»¤å™¨è§£å†³ä¹±ç "><a href="#è¿‡æ»¤å™¨è§£å†³ä¹±ç " class="headerlink" title="è¿‡æ»¤å™¨è§£å†³ä¹±ç "></a>è¿‡æ»¤å™¨è§£å†³ä¹±ç </h3><p>åŠ ä¸Šè¿‡æ»¤å™¨</p>
<p><strong>EncodingFilter</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.filter;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EncodingFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        servletRequest.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        servletResponse.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">        filterChain.doFilter(servletRequest,servletResponse);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>web.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--EncodingFilter--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.wu.filter.EncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¾“å…¥<a href="http://localhost:8080/form.jsp%EF%BC%8C%E8%BE%93%E5%85%A5%EF%BC%8C%E7%82%B9%E5%87%BB%E6%8F%90%E4%BA%A4">http://localhost:8080/form.jspï¼Œè¾“å…¥ï¼Œç‚¹å‡»æäº¤</a></p>
<img src="/2023/11/05/springmvc/1687857673789-7369bc58-e3de-4424-91c0-cb78cbb9426c.png" class title="img">

<p><strong>å¤§ä½¬çš„è¿‡æ»¤å™¨</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.filter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.*;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequestWrapper;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.UnsupportedEncodingException;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è§£å†³getå’Œpostè¯·æ±‚ å…¨éƒ¨ä¹±ç çš„è¿‡æ»¤å™¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GenericEncodingFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        <span class="comment">//å¤„ç†responseçš„å­—ç¬¦ç¼–ç </span></span><br><span class="line">        HttpServletResponse myResponse=(HttpServletResponse) response;</span><br><span class="line">        myResponse.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è½¬å‹ä¸ºä¸åè®®ç›¸å…³å¯¹è±¡</span></span><br><span class="line">        <span class="type">HttpServletRequest</span> <span class="variable">httpServletRequest</span> <span class="operator">=</span> (HttpServletRequest) request;</span><br><span class="line">        <span class="comment">// å¯¹requeståŒ…è£…å¢å¼º</span></span><br><span class="line">        <span class="type">HttpServletRequest</span> <span class="variable">myrequest</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyRequest</span>(httpServletRequest);</span><br><span class="line">        chain.doFilter(myrequest, response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰requestå¯¹è±¡ï¼ŒHttpServletRequestçš„åŒ…è£…ç±»</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyRequest</span> <span class="keyword">extends</span> <span class="title class_">HttpServletRequestWrapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> HttpServletRequest request;</span><br><span class="line">    <span class="comment">//æ˜¯å¦ç¼–ç çš„æ ‡è®°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span> hasEncode;</span><br><span class="line">    <span class="comment">//å®šä¹‰ä¸€ä¸ªå¯ä»¥ä¼ å…¥HttpServletRequestå¯¹è±¡çš„æ„é€ å‡½æ•°ï¼Œä»¥ä¾¿å¯¹å…¶è¿›è¡Œè£…é¥°</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyRequest</span><span class="params">(HttpServletRequest request)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(request);<span class="comment">// superå¿…é¡»å†™</span></span><br><span class="line">        <span class="built_in">this</span>.request = request;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯¹éœ€è¦å¢å¼ºæ–¹æ³• è¿›è¡Œè¦†ç›–</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Map <span class="title function_">getParameterMap</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// å…ˆè·å¾—è¯·æ±‚æ–¹å¼</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">method</span> <span class="operator">=</span> request.getMethod();</span><br><span class="line">        <span class="keyword">if</span> (method.equalsIgnoreCase(<span class="string">&quot;post&quot;</span>)) &#123;</span><br><span class="line">            <span class="comment">// postè¯·æ±‚</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">// å¤„ç†postä¹±ç </span></span><br><span class="line">                request.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> request.getParameterMap();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (method.equalsIgnoreCase(<span class="string">&quot;get&quot;</span>)) &#123;</span><br><span class="line">            <span class="comment">// getè¯·æ±‚</span></span><br><span class="line">            Map&lt;String, String[]&gt; parameterMap = request.getParameterMap();</span><br><span class="line">            <span class="keyword">if</span> (!hasEncode) &#123; <span class="comment">// ç¡®ä¿getæ‰‹åŠ¨ç¼–ç é€»è¾‘åªè¿è¡Œä¸€æ¬¡</span></span><br><span class="line">                <span class="keyword">for</span> (String parameterName : parameterMap.keySet()) &#123;</span><br><span class="line">                    String[] values = parameterMap.get(parameterName);</span><br><span class="line">                    <span class="keyword">if</span> (values != <span class="literal">null</span>) &#123;</span><br><span class="line">                        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; values.length; i++) &#123;</span><br><span class="line">                            <span class="keyword">try</span> &#123;</span><br><span class="line">                                <span class="comment">// å¤„ç†getä¹±ç </span></span><br><span class="line">                                values[i] = <span class="keyword">new</span> <span class="title class_">String</span>(values[i]</span><br><span class="line">                                        .getBytes(<span class="string">&quot;ISO-8859-1&quot;</span>), <span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">                            &#125; <span class="keyword">catch</span> (UnsupportedEncodingException e) &#123;</span><br><span class="line">                                e.printStackTrace();</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                hasEncode = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> parameterMap;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">super</span>.getParameterMap();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å–ä¸€ä¸ªå€¼</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getParameter</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        Map&lt;String, String[]&gt; parameterMap = getParameterMap();</span><br><span class="line">        String[] values = parameterMap.get(name);</span><br><span class="line">        <span class="keyword">if</span> (values == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> values[<span class="number">0</span>]; <span class="comment">// å–å›å‚æ•°çš„ç¬¬ä¸€ä¸ªå€¼</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å–æ‰€æœ‰å€¼</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String[] getParameterValues(String name) &#123;</span><br><span class="line">        Map&lt;String, String[]&gt; parameterMap = getParameterMap();</span><br><span class="line">        String[] values = parameterMap.get(name);</span><br><span class="line">        <span class="keyword">return</span> values;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>web</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¤§ä½¬çš„è¿‡æ»¤å™¨--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.wu.filter.GenericEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼šè¿‡æ»¤å™¨åªèƒ½å¼€ä¸€ä¸ªï¼Œæ‰€ä»¥ä½¿ç”¨çš„è¯ï¼Œå°½é‡ç”¨è‡ªå·±å–œæ¬¢çš„ï¼Œå…¶ä»–çš„éƒ½æ³¨é‡Š</strong></p>
<h1 id="äº”ã€Jsonäº¤äº’å¤„ç†"><a href="#äº”ã€Jsonäº¤äº’å¤„ç†" class="headerlink" title="äº”ã€Jsonäº¤äº’å¤„ç†"></a>äº”ã€Jsonäº¤äº’å¤„ç†</h1><p><a href="https://mp.weixin.qq.com/s?__biz=Mzg2NTAzMTExNg==&mid=2247484014&idx=1&sn=9bab2e9a658c32b1877c6015a3bd5f7d&scene=19#wechat_redirect">SpringMVC06ï¼šJsonäº¤äº’å¤„ç†</a></p>
<h2 id="5-1ã€Jackson-Databind-å¯¼å…¥ä¾èµ–"><a href="#5-1ã€Jackson-Databind-å¯¼å…¥ä¾èµ–" class="headerlink" title="5.1ã€Jackson Databind å¯¼å…¥ä¾èµ–"></a>5.1ã€Jackson Databind å¯¼å…¥ä¾èµ–</h2><p><a href="https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind">mavenä»“åº“åœ°å€</a></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.13.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>springmvc-servlet.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc https://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--è‡ªåŠ¨æ‰«åŒ…--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.wu.controller&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--è§†å›¾è§£æå™¨:DispatcherServletç»™ä»–çš„ModelAndView--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span> <span class="attr">id</span>=<span class="string">&quot;InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å‰ç¼€--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/jsp/&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--åç¼€--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>web.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®DispatcherServlet--&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc-servlet.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>User</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>UserController</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSON;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSONObject;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.core.JsonProcessingException;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.SerializationFeature;</span><br><span class="line"><span class="keyword">import</span> com.wu.pojo.User;</span><br><span class="line"><span class="keyword">import</span> com.wu.utils.JsonUtils;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="comment">//@RestController</span></span><br><span class="line"><span class="comment">//å®ƒçš„ä½œç”¨ç›¸å½“äº@Controllerå’Œ@ResponseBodyçš„ç»“åˆä½“ï¼Œå¯ä»¥ç›´æ¥è¿”å›JSONã€XMLç­‰å†…å®¹ï¼Œè€Œ@Controlleråˆ™éœ€è¦åœ¨æ–¹æ³•ä¸Šæ·»åŠ @ResponseBodyæ³¨è§£æ‰èƒ½è¿”å›JSONç­‰å†…å®¹ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/j1&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span> <span class="comment">//å®ƒä¸ä¼šèµ°è¯•å›¾è§£æå™¨ï¼Œä¼šç›´æ¥è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">json1</span><span class="params">()</span> <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€ä¸ªjacksonçš„å¯¹è±¡æ˜ å°„å™¨ï¼Œç”¨æ¥è§£ææ•°æ®</span></span><br><span class="line">        <span class="type">ObjectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;xiaowu&quot;</span>, <span class="number">19</span>, <span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">        <span class="comment">//å°†æˆ‘ä»¬çš„å¯¹è±¡è§£ææˆä¸ºjsonæ ¼å¼</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> mapper.writeValueAsString(user);</span><br><span class="line">        <span class="comment">//ç”±äº@ResponseBodyæ³¨è§£ï¼Œè¿™é‡Œä¼šå°†strè½¬æˆjsonæ ¼å¼è¿”å›ï¼›ååˆ†æ–¹ä¾¿</span></span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ç»“æœï¼š</strong></p>
<img src="/2023/11/05/springmvc/1687905682120-cec69a2d-4f99-4531-a501-6bccec136fdf.png" class title="img">

<h2 id="5-2ã€è§£å†³jsonä¹±ç é—®é¢˜"><a href="#5-2ã€è§£å†³jsonä¹±ç é—®é¢˜" class="headerlink" title="5.2ã€è§£å†³jsonä¹±ç é—®é¢˜"></a>5.2ã€è§£å†³jsonä¹±ç é—®é¢˜</h2><h3 id="æ–¹æ³•ä¸€"><a href="#æ–¹æ³•ä¸€" class="headerlink" title="æ–¹æ³•ä¸€"></a>æ–¹æ³•ä¸€</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//produces:æŒ‡å®šå“åº”ä½“è¿”å›ç±»å‹å’Œç¼–ç </span></span><br><span class="line"><span class="meta">@RequestMapping(value = &quot;/j1&quot;,produces = &quot;application/json;charset=utf-8&quot;)</span></span><br></pre></td></tr></table></figure>

<img src="/2023/11/05/springmvc/1687905849374-69b6b5b7-8e8c-4f44-9a53-ebf5e1c378d9.png" class title="img">

<h3 id="æ–¹æ³•äºŒ"><a href="#æ–¹æ³•äºŒ" class="headerlink" title="æ–¹æ³•äºŒ"></a>æ–¹æ³•äºŒ</h3><p>åœ¨springmvc-servlet.xmlä¸­æ·»åŠ ä¸‹é¢ä»£ç </p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--JSONä¹±ç é—®é¢˜é…ç½®--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">mvc:message-converters</span> <span class="attr">register-defaults</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.StringHttpMessageConverter&quot;</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&quot;</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;objectMapper&quot;</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.json.Jackson2ObjectMapperFactoryBean&quot;</span>&gt;</span></span><br><span class="line">                       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;failOnEmptyBeans&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">                   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure>

<img src="/2023/11/05/springmvc/1687905983892-fa7626c9-4b82-4b22-a6ba-320a37f0a086.png" class title="img">

<h2 id="5-3ã€è¿”å›jsonå­—ç¬¦ä¸²ç»Ÿä¸€è§£å†³"><a href="#5-3ã€è¿”å›jsonå­—ç¬¦ä¸²ç»Ÿä¸€è§£å†³" class="headerlink" title="5.3ã€è¿”å›jsonå­—ç¬¦ä¸²ç»Ÿä¸€è§£å†³"></a>5.3ã€è¿”å›jsonå­—ç¬¦ä¸²ç»Ÿä¸€è§£å†³</h2><p>@RestController</p>
<p>&#x2F;&#x2F;å®ƒçš„ä½œç”¨ç›¸å½“äº@Controllerå’Œ@ResponseBodyçš„ç»“åˆä½“ï¼Œå¯ä»¥ç›´æ¥è¿”å›JSONã€XMLç­‰å†…å®¹ï¼Œè€Œ@Controlleråˆ™éœ€è¦åœ¨æ–¹æ³•ä¸Šæ·»åŠ @ResponseBodyæ³¨è§£æ‰èƒ½è¿”å›JSONç­‰å†…å®¹ã€‚</p>
<h3 id="1ã€å¯¹è±¡ç±»å‹"><a href="#1ã€å¯¹è±¡ç±»å‹" class="headerlink" title="1ã€å¯¹è±¡ç±»å‹"></a>1ã€å¯¹è±¡ç±»å‹</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/j2&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">json2</span><span class="params">()</span> <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line"></span><br><span class="line">       List&lt;User&gt; userList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">       <span class="type">User</span> <span class="variable">user1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;xiaowu&quot;</span>, <span class="number">1</span>, <span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">       <span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;xiaowu&quot;</span>, <span class="number">1</span>, <span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">       <span class="type">User</span> <span class="variable">user3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;xiaowu&quot;</span>, <span class="number">1</span>, <span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">       <span class="type">User</span> <span class="variable">user4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;xiaowu&quot;</span>, <span class="number">1</span>, <span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">       userList.add(user1);</span><br><span class="line">       userList.add(user2);</span><br><span class="line">       userList.add(user3);</span><br><span class="line">       userList.add(user4);</span><br><span class="line">       <span class="comment">//ç›´æ¥ç”¨è‡ªå·±å†™çš„jsonå·¥å…·ç±»</span></span><br><span class="line">       <span class="keyword">return</span> JsonUtils.getJson(userList); <span class="comment">// new ObjectMapper().mapper.writeValueAsString(userList);</span></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<img src="/2023/11/05/springmvc/1687906577466-f8359759-2636-45fa-8b1a-00288f896e7d.png" class title="img">

<h3 id="2ã€æ—¶é—´ç±»å‹"><a href="#2ã€æ—¶é—´ç±»å‹" class="headerlink" title="2ã€æ—¶é—´ç±»å‹"></a>2ã€æ—¶é—´ç±»å‹</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/j3&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">json3</span><span class="params">()</span> <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line"></span><br><span class="line">       <span class="type">ObjectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line">       <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"></span><br><span class="line">       <span class="keyword">return</span> mapper.writeValueAsString(date);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<img src="/2023/11/05/springmvc/1687907418417-9be30028-d879-4146-af1c-4210487eea4d.png" class title="img">

<h3 id="3ã€çº¯javaè§£å†³â€”æ—¶é—´æˆ³"><a href="#3ã€çº¯javaè§£å†³â€”æ—¶é—´æˆ³" class="headerlink" title="3ã€çº¯javaè§£å†³â€”æ—¶é—´æˆ³"></a>3ã€çº¯javaè§£å†³â€”æ—¶é—´æˆ³</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/j3&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">json3</span><span class="params">()</span> <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">ObjectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line">    <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è‡ªå®šä¹‰æ—¥æœŸçš„æ ¼å¼</span></span><br><span class="line">    <span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ObjectMapper,æ—¶é—´è§£æåçš„é»˜è®¤æ ¼å¼ä¸ºï¼šTimestamp,æ—¶é—´æˆ³</span></span><br><span class="line">    <span class="keyword">return</span> mapper.writeValueAsString(sdf.format(date));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2023/11/05/springmvc/1687907487712-968251c4-33d0-4297-a37b-972a1ab5e2db.png" class title="img">

<h3 id="4ã€ä¸ä½¿ç”¨æ—¶é—´æˆ³çš„æ–¹å¼"><a href="#4ã€ä¸ä½¿ç”¨æ—¶é—´æˆ³çš„æ–¹å¼" class="headerlink" title="4ã€ä¸ä½¿ç”¨æ—¶é—´æˆ³çš„æ–¹å¼"></a>4ã€ä¸ä½¿ç”¨æ—¶é—´æˆ³çš„æ–¹å¼</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/j3&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">json3</span><span class="params">()</span> <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">ObjectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line">        <span class="comment">//ä¸ä½¿ç”¨ æ—¶é—´æˆ³ çš„æ–¹å¼</span></span><br><span class="line">        mapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS,<span class="literal">false</span>);</span><br><span class="line">        <span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">        mapper.setDateFormat(sdf);</span><br><span class="line"></span><br><span class="line">        <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ObjectMapper,æ—¶é—´è§£æåçš„é»˜è®¤æ ¼å¼ä¸ºï¼šTimestamp,æ—¶é—´æˆ³</span></span><br><span class="line">        <span class="keyword">return</span> mapper.writeValueAsString(date);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<img src="/2023/11/05/springmvc/1687907848550-0bab156a-89b9-4b98-b0d8-516d2737fe03.png" class title="img">

<h3 id="5ã€å·¥å…·ç±»"><a href="#5ã€å·¥å…·ç±»" class="headerlink" title="5ã€å·¥å…·ç±»"></a>5ã€å·¥å…·ç±»</h3><p><strong>JsonUtils</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.core.JsonProcessingException;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.SerializationFeature;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JsonUtils</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getJson</span><span class="params">(Object object)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> getJson(object,<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getJson</span><span class="params">(Object object,String dateFormat)</span>&#123;</span><br><span class="line">        <span class="type">ObjectMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line">        <span class="comment">//ä¸ä½¿ç”¨æ—¶é—´æˆ³çš„æ–¹å¼</span></span><br><span class="line">        mapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS,<span class="literal">false</span>);</span><br><span class="line">        <span class="comment">//è‡ªå®šä¹‰æ—¥æœŸçš„æ ¼å¼</span></span><br><span class="line">        SimpleDateFormat sdf=<span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(dateFormat);</span><br><span class="line">        mapper.setDateFormat(sdf);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> mapper.writeValueAsString(object);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (JsonProcessingException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">  <span class="meta">@RequestMapping(&quot;/j3&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">json3</span><span class="params">()</span> <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> JsonUtils.getJson(date);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="5-4ã€FastJson"><a href="#5-4ã€FastJson" class="headerlink" title="5.4ã€FastJson"></a>5.4ã€FastJson</h2><p>fastjson.jaræ˜¯é˜¿é‡Œå¼€å‘çš„ä¸€æ¬¾ä¸“é—¨ç”¨äºJavaå¼€å‘çš„åŒ…ï¼Œå¯ä»¥æ–¹ä¾¿çš„å®ç°jsonå¯¹è±¡ä¸JavaBeanå¯¹è±¡çš„è½¬æ¢ï¼Œå®ç°JavaBeanå¯¹è±¡ä¸jsonå­—ç¬¦ä¸²çš„è½¬æ¢ï¼Œå®ç°jsonå¯¹è±¡ä¸jsonå­—ç¬¦ä¸²çš„è½¬æ¢ã€‚å®ç°jsonçš„è½¬æ¢æ–¹æ³•å¾ˆå¤šï¼Œæœ€åçš„å®ç°ç»“æœéƒ½æ˜¯ä¸€æ ·çš„ã€‚</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/j4&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">json4</span><span class="params">()</span> <span class="keyword">throws</span> JsonProcessingException &#123;</span><br><span class="line"></span><br><span class="line">        List&lt;User&gt; userList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="type">User</span> <span class="variable">user1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;xiaowu1&quot;</span>, <span class="number">1</span>, <span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;xiaowu2&quot;</span>, <span class="number">2</span>, <span class="string">&quot;å¥³&quot;</span>);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;xiaowu3&quot;</span>, <span class="number">3</span>, <span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;xiaowu4&quot;</span>, <span class="number">4</span>, <span class="string">&quot;ç”·&quot;</span>);</span><br><span class="line">        userList.add(user1);</span><br><span class="line">        userList.add(user2);</span><br><span class="line">        userList.add(user3);</span><br><span class="line">        userList.add(user4);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;*******Javaå¯¹è±¡ è½¬ JSONå­—ç¬¦ä¸²*******&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> JSON.toJSONString(userList);</span><br><span class="line">        System.out.println(<span class="string">&quot;JSON.toJSONString(list)==&gt;&quot;</span>+str1);</span><br><span class="line">        <span class="type">String</span> <span class="variable">str2</span> <span class="operator">=</span> JSON.toJSONString(user1);</span><br><span class="line">        System.out.println(<span class="string">&quot;JSON.toJSONString(user1)==&gt;&quot;</span>+str2);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;\n****** JSONå­—ç¬¦ä¸² è½¬ Javaå¯¹è±¡*******&quot;</span>);</span><br><span class="line">        User jp_user1=JSON.parseObject(str2,User.class);</span><br><span class="line">        System.out.println(<span class="string">&quot;JSON.parseObject(str2,User.class)==&gt;&quot;</span>+jp_user1);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;\n****** Javaå¯¹è±¡ è½¬ JSONå¯¹è±¡ ******&quot;</span>);</span><br><span class="line">        <span class="type">JSONObject</span> <span class="variable">jsonObject1</span> <span class="operator">=</span> (JSONObject) JSON.toJSON(user2);</span><br><span class="line">        System.out.println(<span class="string">&quot;(JSONObject) JSON.toJSON(user2)==&gt;&quot;</span>+jsonObject1.getString(<span class="string">&quot;name&quot;</span>));</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;\n****** JSONå¯¹è±¡ è½¬ Javaå¯¹è±¡ ******&quot;</span>);</span><br><span class="line">        <span class="type">User</span> <span class="variable">to_java_user</span> <span class="operator">=</span> JSON.toJavaObject(jsonObject1, User.class);</span><br><span class="line">        System.out.println(<span class="string">&quot;JSON.toJavaObject(jsonObject1, User.class)==&gt;&quot;</span>+to_java_user);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<img src="/2023/11/05/springmvc/1687908245026-b3905d6d-a01e-4518-899b-eab061f7a421.png" class title="img">

<h1 id="å…­ã€SpringMVC-æ•´åˆSSM"><a href="#å…­ã€SpringMVC-æ•´åˆSSM" class="headerlink" title="å…­ã€SpringMVC:æ•´åˆSSM"></a>å…­ã€SpringMVC:æ•´åˆSSM</h1><p><a href="https://mp.weixin.qq.com/s?__biz=Mzg2NTAzMTExNg==&mid=2247484004&idx=1&sn=cef9d881d0a8d7db7e8ddc6a380a9a76&scene=19#wechat_redirect">ç‹‚ç¥è¯´SpringMVC05ï¼šæ•´åˆSSMæ¡†æ¶</a></p>
<h2 id="6-1ã€ç¯å¢ƒè¦æ±‚ï¼š"><a href="#6-1ã€ç¯å¢ƒè¦æ±‚ï¼š" class="headerlink" title="6.1ã€ç¯å¢ƒè¦æ±‚ï¼š"></a>6.1ã€ç¯å¢ƒè¦æ±‚ï¼š</h2><ul>
<li>IDEA</li>
<li>MySQL 8.0.27</li>
<li>Tomcat 9.0.64</li>
<li>Maven 3.6.3</li>
</ul>
<p><strong>è¦æ±‚ï¼š</strong></p>
<p>éœ€è¦ç†Ÿç»ƒæŒæ¡MySQLæ•°æ®åº“ï¼ŒSpringï¼ŒJavaWebåŠMyBatisçŸ¥è¯†ï¼Œç®€å•çš„å‰ç«¯çŸ¥è¯†ï¼›</p>
<h2 id="6-2ã€åˆ›å»ºæ•°æ®åº“"><a href="#6-2ã€åˆ›å»ºæ•°æ®åº“" class="headerlink" title="6.2ã€åˆ›å»ºæ•°æ®åº“"></a>6.2ã€åˆ›å»ºæ•°æ®åº“</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE `ssmbuild`;</span><br><span class="line"></span><br><span class="line">USE `ssmbuild`;</span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `books`;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `books` (</span><br><span class="line">`bookID` <span class="type">INT</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;ä¹¦id&#x27;</span>,</span><br><span class="line">`bookName` <span class="type">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;ä¹¦å&#x27;</span>,</span><br><span class="line">`bookCounts` <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æ•°é‡&#x27;</span>,</span><br><span class="line">`detail` <span class="type">VARCHAR</span>(<span class="number">200</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æè¿°&#x27;</span>,</span><br><span class="line">KEY `bookID` (`bookID`)</span><br><span class="line">) ENGINE<span class="operator">=</span>INNODB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span>  <span class="keyword">INTO</span> `books`(`bookID`,`bookName`,`bookCounts`,`detail`)<span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">1</span>,<span class="string">&#x27;Java&#x27;</span>,<span class="number">1</span>,<span class="string">&#x27;ä»å…¥é—¨åˆ°æ”¾å¼ƒ&#x27;</span>),</span><br><span class="line">(<span class="number">2</span>,<span class="string">&#x27;MySQL&#x27;</span>,<span class="number">10</span>,<span class="string">&#x27;ä»åˆ åº“åˆ°è·‘è·¯&#x27;</span>),</span><br><span class="line">(<span class="number">3</span>,<span class="string">&#x27;Linux&#x27;</span>,<span class="number">5</span>,<span class="string">&#x27;ä»è¿›é—¨åˆ°è¿›ç‰¢&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="6-3ã€å¯¼å…¥ä¾èµ–"><a href="#6-3ã€å¯¼å…¥ä¾èµ–" class="headerlink" title="6.3ã€å¯¼å…¥ä¾èµ–"></a>6.3ã€å¯¼å…¥ä¾èµ–</h2><p>æ–°å»ºé¡¹ç›®ï¼Œå¯¼å…¥ä¾èµ–junitã€mysqlã€c3p0ã€servletã€JSP ã€Mybatisã€Springï¼Œè¿æ¥æ•°æ®åº“</p>
<h3 id="1ã€pomæ–‡ä»¶ä¾èµ–"><a href="#1ã€pomæ–‡ä»¶ä¾èµ–" class="headerlink" title="1ã€pomæ–‡ä»¶ä¾èµ–"></a>1ã€pomæ–‡ä»¶ä¾èµ–</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ssmbuild<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--Junit--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ•°æ®åº“é©±åŠ¨--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.27<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ•°æ®åº“è¿æ¥æ±  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mchange<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>c3p0<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--Servlet - JSP --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsp-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--Mybatis--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--Spring--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.9.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.20<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2ã€æ•°æ®åº“"><a href="#2ã€æ•°æ®åº“" class="headerlink" title="2ã€æ•°æ®åº“"></a>2ã€æ•°æ®åº“</h3><img src="/2023/11/05/springmvc/1687908621959-eb748805-9a71-4e04-8f8a-ed22a4cac776.png" class title="img">

<h3 id="3ã€mavenèµ„æºè¿‡æ»¤"><a href="#3ã€mavenèµ„æºè¿‡æ»¤" class="headerlink" title="3ã€mavenèµ„æºè¿‡æ»¤"></a>3ã€mavenèµ„æºè¿‡æ»¤</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="6-4ã€åŸºæœ¬æ¶æ„å’Œé…ç½®æ–‡ä»¶"><a href="#6-4ã€åŸºæœ¬æ¶æ„å’Œé…ç½®æ–‡ä»¶" class="headerlink" title="6.4ã€åŸºæœ¬æ¶æ„å’Œé…ç½®æ–‡ä»¶"></a>6.4ã€åŸºæœ¬æ¶æ„å’Œé…ç½®æ–‡ä»¶</h2><ul>
<li>com.wu.pojo</li>
<li>com.wu.dao</li>
<li>com.wu.service</li>
<li>com.wu.controller</li>
<li>mybatis-config.xml</li>
<li>applicationContext.xml</li>
<li>database.properties</li>
</ul>
<p><strong>åé¢å‡ºç°</strong></p>
<ul>
<li>spring-service</li>
<li>spring-mvc</li>
<li>spring-dao</li>
</ul>
<p><strong>mybatis-config.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>applicationContext.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;classpath:spring-dao.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;classpath:spring-mvc.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;classpath:spring-service.xml&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>database.properties</strong></p>
<figure class="highlight latex"><table><tr><td class="code"><pre><span class="line">jdbc.driver=com.mysql.cj.jdbc.Driver</span><br><span class="line"><span class="params">#</span>Mysql8.0+ adds &quot;cj&quot; and time zone to driver: &quot;<span class="built_in">&amp;</span> serverTimezone=Asia/Shanghai&quot;</span><br><span class="line">jdbc.url=jdbc:mysql://localhost:3306/ssmbuild?<span class="built_in">&amp;</span>serverTimezone=Asia/Shanghai<span class="built_in">&amp;</span>useSSL=true<span class="built_in">&amp;</span>useUnicode=true<span class="built_in">&amp;</span>characterEncoding=utf8</span><br><span class="line">jdbc.username=root</span><br><span class="line">jdbc.password=root</span><br></pre></td></tr></table></figure>

<h2 id="6-5ã€Mybatiså±‚"><a href="#6-5ã€Mybatiså±‚" class="headerlink" title="6.5ã€Mybatiså±‚"></a>6.5ã€Mybatiså±‚</h2><h3 id="å®ä½“ç±»"><a href="#å®ä½“ç±»" class="headerlink" title="å®ä½“ç±»"></a>å®ä½“ç±»</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Books</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> bookID;</span><br><span class="line">    <span class="keyword">private</span> String bookName;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> bookCounts;</span><br><span class="line">    <span class="keyword">private</span> String detail;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ¥å£"><a href="#æ¥å£" class="headerlink" title="æ¥å£"></a>æ¥å£</h3><p><strong>BookMapper</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.wu.pojo.Books;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookMapper</span> &#123;</span><br><span class="line">    <span class="comment">//æ·»åŠ ä¸€æœ¬ä¹¦</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">addbook</span><span class="params">(Books books)</span>;</span><br><span class="line">    <span class="comment">//åˆ é™¤ä¸€æœ¬ä¹¦</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">deleteBookById</span><span class="params">(<span class="meta">@Param(&quot;bookID&quot;)</span> <span class="type">int</span> id)</span>;</span><br><span class="line">    <span class="comment">//æ›´æ–°ä¸€æœ¬ä¹¦</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">updateBook</span><span class="params">(Books books)</span>;</span><br><span class="line">    <span class="comment">//æŸ¥è¯¢ä¸€æœ¬ä¹¦</span></span><br><span class="line">    Books <span class="title function_">queryBookById</span><span class="params">(<span class="meta">@Param(&quot;bookID&quot;)</span><span class="type">int</span> id)</span>;</span><br><span class="line">    <span class="comment">//æŸ¥è¯¢æ‰€æœ‰æ•°</span></span><br><span class="line">    List&lt;Books&gt; <span class="title function_">queryAllBook</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>BookMapper.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.wu.dao.BookMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--å¢åŠ ä¸€ä¸ªBook--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addbook&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Books&quot;</span>&gt;</span></span><br><span class="line">        insert into ssmbuild.books(bookName, bookCounts, detail)</span><br><span class="line">        values (#&#123;bookName&#125;, #&#123;bookCounts&#125;, #&#123;detail&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--æ ¹æ®idåˆ é™¤ä¸€ä¸ªBook--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteBookById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">        delete</span><br><span class="line">        from ssmbuild.books</span><br><span class="line">        where bookID = #&#123;bookID&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--æ›´æ–°Bookæ ¹æ®ID--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateBook&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;Books&quot;</span>&gt;</span></span><br><span class="line">        update ssmbuild.books</span><br><span class="line">        set bookName   = #&#123;bookName&#125;,</span><br><span class="line">            bookCounts = #&#123;bookCounts&#125;,</span><br><span class="line">            detail     = #&#123;detail&#125;</span><br><span class="line">        where bookID = #&#123;bookID&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--æ ¹æ®idæŸ¥è¯¢,è¿”å›ä¸€ä¸ªBook--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryBookById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Books&quot;</span>&gt;</span></span><br><span class="line">        select *</span><br><span class="line">        from ssmbuild.books</span><br><span class="line">        where bookID = #&#123;bookID&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--æŸ¥è¯¢å…¨éƒ¨Book--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryAllBook&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Books&quot;</span>&gt;</span></span><br><span class="line">        SELECT *</span><br><span class="line">        from ssmbuild.books</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>mybatis-config.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®æ•°æ®æºï¼Œäº¤ç»™Springå»åš--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.wu.pojo&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--ç»‘å®šå†™mapper--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;com.wu.dao.BookMapper&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="serviceå±‚"><a href="#serviceå±‚" class="headerlink" title="serviceå±‚"></a>serviceå±‚</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.wu.pojo.Books;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line">    <span class="comment">//æ·»åŠ ä¸€æœ¬ä¹¦</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">addbook</span><span class="params">(Books books)</span>;</span><br><span class="line">    <span class="comment">//åˆ é™¤ä¸€æœ¬ä¹¦</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">deleteBookById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">    <span class="comment">//æ›´æ–°ä¸€æœ¬ä¹¦</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">updateBook</span><span class="params">(Books books)</span>;</span><br><span class="line">    <span class="comment">//æŸ¥è¯¢ä¸€æœ¬ä¹¦</span></span><br><span class="line">    Books <span class="title function_">queryBookById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">    <span class="comment">//æŸ¥è¯¢æ‰€æœ‰æ•°</span></span><br><span class="line">    List&lt;Books&gt; <span class="title function_">queryAllBook</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>BookServiceImpl</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.wu.dao.BookMapper;</span><br><span class="line"><span class="keyword">import</span> com.wu.pojo.Books;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//serviceè°ƒdaoå±‚ï¼šç»„åˆdaoå±‚</span></span><br><span class="line">    <span class="keyword">private</span> BookMapper bookMapper;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBookMapper</span><span class="params">(BookMapper bookMapper)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bookMapper = bookMapper;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">addbook</span><span class="params">(Books books)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> bookMapper.addbook(books);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">deleteBookById</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> bookMapper.deleteBookById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">updateBook</span><span class="params">(Books books)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> bookMapper.updateBook(books);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Books <span class="title function_">queryBookById</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> bookMapper.queryBookById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Books&gt; <span class="title function_">queryAllBook</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> bookMapper.queryAllBook();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-6ã€Springå±‚"><a href="#6-6ã€Springå±‚" class="headerlink" title="6.6ã€Springå±‚"></a>6.6ã€Springå±‚</h2><p><strong>spring-dao.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">       https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®æ•´åˆmybatis --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 1.å…³è”æ•°æ®åº“æ–‡ä»¶ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">&quot;classpath:database.properties&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 2.æ•°æ®åº“è¿æ¥æ±  --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--æ•°æ®åº“è¿æ¥æ± </span></span><br><span class="line"><span class="comment">        dbcp åŠè‡ªåŠ¨åŒ–æ“ä½œ ä¸èƒ½è‡ªåŠ¨è¿æ¥</span></span><br><span class="line"><span class="comment">        c3p0 è‡ªåŠ¨åŒ–æ“ä½œï¼ˆè‡ªåŠ¨çš„åŠ è½½é…ç½®æ–‡ä»¶ å¹¶ä¸”è®¾ç½®åˆ°å¯¹è±¡é‡Œé¢ï¼‰</span></span><br><span class="line"><span class="comment">        druid</span></span><br><span class="line"><span class="comment">        hikari</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.mchange.v2.c3p0.ComboPooledDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- é…ç½®è¿æ¥æ± å±æ€§ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClass&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.driver&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;jdbcUrl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.url&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.username&#125;&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;jdbc.password&#125;&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- c3p0è¿æ¥æ± çš„ç§æœ‰å±æ€§ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxPoolSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;30&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;minPoolSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;10&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å…³é—­è¿æ¥åä¸è‡ªåŠ¨commit --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;autoCommitOnClose&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- è·å–è¿æ¥è¶…æ—¶æ—¶é—´ --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;checkoutTimeout&quot;</span> <span class="attr">value</span>=<span class="string">&quot;10000&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å½“è·å–è¿æ¥å¤±è´¥é‡è¯•æ¬¡æ•° --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;acquireRetryAttempts&quot;</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 3.é…ç½®SqlSessionFactoryå¯¹è±¡ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ³¨å…¥æ•°æ®åº“è¿æ¥æ±  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- é…ç½®MyBatiså…¨å±€é…ç½®æ–‡ä»¶:mybatis-config.xml --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;configLocation&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mybatis-config.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 4.é…ç½®æ‰«æDaoæ¥å£åŒ…ï¼ŒåŠ¨æ€å®ç°Daoæ¥å£æ³¨å…¥åˆ°springå®¹å™¨ä¸­ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--è§£é‡Š ï¼šhttps://www.cnblogs.com/jpfss/p/7799806.html--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ³¨å…¥sqlSessionFactory --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sqlSessionFactoryBeanName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;sqlSessionFactory&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ç»™å‡ºéœ€è¦æ‰«æDaoæ¥å£åŒ… --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;basePackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.wu.dao&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>spring-service.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span> <span class="attr">xmlns:tx</span>=<span class="string">&quot;http://www.springframework.org/schema/tx&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">   http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag"></span></span></span><br><span class="line"><span class="string"><span class="tag">   http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">   http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">   http://www.springframework.org/schema/tx</span></span></span><br><span class="line"><span class="string"><span class="tag">   http://www.springframework.org/schema/tx/spring-tx.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">   http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="string"><span class="tag">   https://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ‰«æserviceç›¸å…³çš„bean --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.wu.service&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--BookServiceImplæ³¨å…¥åˆ°IOCå®¹å™¨ä¸­--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;BookServiceImpl&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wu.service.BookServiceImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;bookMapper&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;bookMapper&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®äº‹åŠ¡ç®¡ç†å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ³¨å…¥æ•°æ®åº“è¿æ¥æ±  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="6-7ã€SpringMVCå±‚"><a href="#6-7ã€SpringMVCå±‚" class="headerlink" title="6.7ã€SpringMVCå±‚"></a>6.7ã€SpringMVCå±‚</h2><p><strong>web.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;4.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®DispatchServlet--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--ä¸€å®šè¦æ³¨æ„:æˆ‘ä»¬è¿™é‡ŒåŠ è½½çš„æ˜¯æ€»çš„é…ç½®æ–‡ä»¶ï¼Œä¹‹å‰è¢«è¿™é‡Œå‘äº†ï¼--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--ä¹±ç è¿‡æ»¤--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span></span><br><span class="line">            org.springframework.web.filter.CharacterEncodingFilter</span><br><span class="line">        <span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>encodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--è®¾ç½®sessionè¿‡æœŸæ—¶é—´--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">session-config</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>15<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>spring-mvc.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="string"><span class="tag">       https://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®SpringMVC --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 1.å¼€å¯SpringMVCæ³¨è§£é©±åŠ¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 2.é™æ€èµ„æºé»˜è®¤servleté…ç½®--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 3.é…ç½®jsp æ˜¾ç¤ºViewResolverè§†å›¾è§£æå™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;viewClass&quot;</span> <span class="attr">value</span>=<span class="string">&quot;org.springframework.web.servlet.view.JstlView&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/jsp/&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 4.æ‰«æwebç›¸å…³çš„bean --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.wu.controller&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>BookController</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.wu.pojo.Books;</span><br><span class="line"><span class="keyword">import</span> com.wu.service.BookService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Qualifier;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/book&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookController</span> &#123;</span><br><span class="line">    <span class="comment">//Controller è°ƒç”¨ Serviceå±‚</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> BookService bookService;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BookController</span><span class="params">(<span class="meta">@Qualifier(&quot;BookServiceImpl&quot;)</span> BookService bookService)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.bookService = bookService;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/allBook&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">list</span><span class="params">(Model model)</span> &#123;</span><br><span class="line">        List&lt;Books&gt; list = bookService.queryAllBook();</span><br><span class="line">        model.addAttribute(<span class="string">&quot;list&quot;</span>, list);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;allBook&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>allBook.jsp</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>ä¹¦ç±å±•ç¤º<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>ä¹¦ç±å±•ç¤º<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>index.jsp</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/book/allBook&quot;</span>&gt;</span>è¿›å…¥ä¹¦ç±é¡µé¢<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="æ’é”™æ€è·¯"><a href="#æ’é”™æ€è·¯" class="headerlink" title="æ’é”™æ€è·¯"></a>æ’é”™æ€è·¯</h2><h3 id="é—®é¢˜ï¼šbeanä¸å­˜åœ¨ï¼ˆ500ï¼‰"><a href="#é—®é¢˜ï¼šbeanä¸å­˜åœ¨ï¼ˆ500ï¼‰" class="headerlink" title="é—®é¢˜ï¼šbeanä¸å­˜åœ¨ï¼ˆ500ï¼‰"></a>é—®é¢˜ï¼šbeanä¸å­˜åœ¨ï¼ˆ500ï¼‰</h3><p><strong>æ­¥éª¤ï¼š</strong></p>
<p>1ã€æŸ¥çœ‹è¿™ä¸ªbeanæ³¨å…¥æ˜¯å¦æˆåŠŸï¼<br>2ã€Junitå•å…ƒæµ‹è¯•ï¼Œçœ‹æˆ‘ä»¬çš„ä»£ç æ˜¯å¦èƒ½å¤ŸæŸ¥è¯¢å‡ºæ¥ç»“æœï¼<br>3ã€é—®é¢˜ï¼Œä¸€å®šä¸åœ¨æˆ‘ä»¬çš„åº•å±‚ï¼Œæ˜¯springå‡ºäº†é—®é¢˜ï¼<br>4ã€SpringMVCï¼Œæ•´åˆçš„æ—¶å€™æ²¡è°ƒç”¨åˆ°æˆ‘ä»¬çš„service.å±‚çš„bean</p>
<ul>
<li>applicationContext.xmlæ²¡æœ‰æ³¨å…¥bean</li>
<li>web.xmlä¸­ï¼Œæˆ‘ä»¬ä¹Ÿç»‘å®šè¿‡é…ç½®æ–‡ä»¶ï¼å‘ç°é—®é¢˜ï¼Œæˆ‘ä»¬é…ç½®çš„æ˜¯Spring-mvc.Xmlè¿™é‡Œé¢ç¡®å®æ²¡æœ‰service bean,æ‰€ä»¥æŠ¥ç©ºæŒ‡é’ˆ</li>
</ul>
<h2 id="6-8ã€æŸ¥è¯¢ä¹¦ç±"><a href="#6-8ã€æŸ¥è¯¢ä¹¦ç±" class="headerlink" title="6.8ã€æŸ¥è¯¢ä¹¦ç±"></a>6.8ã€æŸ¥è¯¢ä¹¦ç±</h2><p><strong>index.jsp</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">a</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-decoration</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">18px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">h3</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">180px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">38px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">100px</span> auto;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">line-height</span>: <span class="number">38px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: pink;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/book/allBook&quot;</span>&gt;</span>è¿›å…¥ä¹¦ç±é¡µé¢<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æŸ¥æ‰¾BootStrap CDNï¼Œæœç´¢</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ–° Bootstrap æ ¸å¿ƒ CSS æ–‡ä»¶ --&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">&lt;!-- jQueryæ–‡ä»¶ã€‚åŠ¡å¿…åœ¨bootstrap.min.js ä¹‹å‰å¼•å…¥ --&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">&lt;!-- æœ€æ–°çš„ Bootstrap æ ¸å¿ƒ JavaScript æ–‡ä»¶ --&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>allbook.jsp</strong></p>
<ul>
<li>å…ˆå¯¼å…¥&lt;%@ taglib prefix&#x3D;â€câ€ uri&#x3D;â€<a href="http://java.sun.com/jsp/jstl/core">http://java.sun.com/jsp/jstl/core</a>â€œ %&gt;ï¼Œæ”¾ç¬¬ä¸€è¡Œ</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;</span><br><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>ä¹¦ç±å±•ç¤º<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    &lt;%--  BootStrapç¾åŒ–ç•Œé¢  --%&gt;</span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row clearfix&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-12 column&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;page-header&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">small</span>&gt;</span>ä¹¦ç±åˆ—è¡¨ â€”â€” æ˜¾ç¤ºæ‰€æœ‰ä¹¦ç±<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row clearfix&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-12 column&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">table</span> <span class="attr">class</span>=<span class="string">&quot;table table-hover table-striped&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>ä¹¦ç±ç¼–å·<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>ä¹¦ç±åå­—<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>ä¹¦ç±æ•°é‡<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>ä¹¦ç±è¯¦æƒ…<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">th</span>&gt;</span>æ“ä½œ<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                &lt;%-- ä¹¦ç±ä»æ•°æ®åº“ä¸­æŸ¥è¯¢å‡ºæ¥ï¼Œä»è¿™ä¸ªListä¸­éå†å‡ºæ¥ï¼šforeach --%&gt;</span><br><span class="line">                <span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">                    &lt;%--<span class="tag">&lt;<span class="name">c:forEach</span> <span class="attr">var</span>=<span class="string">&quot;book&quot;</span> <span class="attr">items</span>=<span class="string">&quot;$&#123;requestScope.get(&#x27;list&#x27;)&#125;&quot;</span>&gt;</span>--%&gt;</span><br><span class="line">                    <span class="tag">&lt;<span class="name">c:forEach</span> <span class="attr">var</span>=<span class="string">&quot;book&quot;</span> <span class="attr">items</span>=<span class="string">&quot;$&#123;requestScope.get(&#x27;list&#x27;)&#125;&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;book.getBookID()&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;book.getBookName()&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;book.getBookCounts()&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;book.getDetail()&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">c:forEach</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<img src="/2023/11/05/springmvc/1687918187096-69db285f-b2a3-49ce-ac46-b00914a9481a.png" class title="img">

<h2 id="6-9ã€æ·»åŠ ä¹¦ç±"><a href="#6-9ã€æ·»åŠ ä¹¦ç±" class="headerlink" title="6.9ã€æ·»åŠ ä¹¦ç±"></a>6.9ã€æ·»åŠ ä¹¦ç±</h2><p><strong>allBook.jsp</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-4 column&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/book/toAddBook&quot;</span>&gt;</span>æ–°å¢ä¹¦ç±<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>BookController.java</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·³è½¬åˆ°å¢åŠ ä¹¦ç±é¡µé¢</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/toAddBook&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">toAddPaper</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;addBook&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ ä¹¦ç±</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/addBook&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">addBook</span><span class="params">(Books books)</span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;addBook=&gt;&quot;</span>+books);</span><br><span class="line">    bookService.addBook(books);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;redirect:/book/allBook&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>addBook.jsp</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>æ·»åŠ ä¹¦ç±<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row clearfix&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-12 column&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;page-header&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">small</span>&gt;</span>æ–°å¢ä¹¦ç±<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/book/addBook&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span>&gt;</span>ä¹¦ç±åç§°:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;bookName&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span>&gt;</span>ä¹¦ç±æ•°é‡:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;bookCounts&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span>&gt;</span>ä¹¦ç±æè¿°:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;detail&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æ·»åŠ &quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>ç»“æœ</strong></p>
<img src="/2023/11/05/springmvc/1687914765667-bc93febf-2d6e-4efa-afe0-44c19345d8eb.png" class title="img">

<img src="/2023/11/05/springmvc/1687914800486-aa20f659-6488-4134-80e7-80a4943d5eef.png" class title="img">

<h2 id="6-10ã€ä¿®æ”¹ä¹¦ç±"><a href="#6-10ã€ä¿®æ”¹ä¹¦ç±" class="headerlink" title="6.10ã€ä¿®æ”¹ä¹¦ç±"></a>6.10ã€ä¿®æ”¹ä¹¦ç±</h2><p><strong>allBook.jsp</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">c:forEach</span> <span class="attr">var</span>=<span class="string">&quot;book&quot;</span> <span class="attr">items</span>=<span class="string">&quot;$&#123;requestScope.get(&#x27;list&#x27;)&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;book.getBookID()&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;book.getBookName()&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;book.getBookCounts()&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;book.getDetail()&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/book/toUpdateBook?id=$&#123;book.getBookID()&#125;&quot;</span>&gt;</span>ä¿®æ”¹<span class="tag">&lt;/<span class="name">a</span>&gt;</span> |</span><br><span class="line">            <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">c:forEach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>BookController.java</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è·³è½¬åˆ°ä¿®æ”¹ä¹¦ç±é¡µé¢</span></span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/toUpdateBook&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">toUpdatePaper</span><span class="params">(<span class="type">int</span> id, Model model)</span> &#123;</span><br><span class="line">       <span class="type">Books</span> <span class="variable">books</span> <span class="operator">=</span> bookService.queryBookById(id);</span><br><span class="line">       model.addAttribute(<span class="string">&quot;books&quot;</span>, books);</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;updateBook&quot;</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p><strong>updateBook.jsp</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;</span><br><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>ä¿®æ”¹ä¹¦ç±ä¿¡æ¯<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥ Bootstrap --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row clearfix&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-12 column&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;page-header&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">small</span>&gt;</span>ä¿®æ”¹ä¹¦ç±<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/book/&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span>&gt;</span>ä¹¦ç±åç§°<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;bookName&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;QBook.bookName&#125;&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span>&gt;</span>ä¹¦ç±æ•°é‡<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;bookCounts&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;QBook.bookCounts&#125;&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span>&gt;</span>ä¹¦ç±æè¿°<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;detail&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;QBook.detail&#125;&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ä¿®æ”¹&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&lt;%--        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æäº¤&quot;</span>/&gt;</span>--%&gt;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>ç»“æœ</strong></p>
<img src="/2023/11/05/springmvc/1687915731908-d2d6ed8e-5150-46b3-90ad-ae70d77eade9.png" class title="img">

<h3 id="ä¿®æ”¹ä¹¦ç±é¡µé¢"><a href="#ä¿®æ”¹ä¹¦ç±é¡µé¢" class="headerlink" title="ä¿®æ”¹ä¹¦ç±é¡µé¢"></a>ä¿®æ”¹ä¹¦ç±é¡µé¢</h3><p><strong>BookController</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä¿®æ”¹ä¹¦ç±çš„è¯·æ±‚</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/updateBook&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">updateBook</span><span class="params">(Books books)</span> &#123;</span><br><span class="line">        bookService.updateBook(books);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/book/allBook&quot;</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><strong>BookServiceImpl</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">updateBook</span><span class="params">(Books books)</span> &#123;</span><br><span class="line">     System.out.println(<span class="string">&quot;BookServiceImpl:updateBook=&gt;&quot;</span>+books);</span><br><span class="line">       <span class="keyword">return</span> bookMapper.updateBook(books);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>å¯¼å…¥jaråŒ…</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.8.14<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>åŠ ä¸Šäº‹åŠ¡</strong></p>
<p><strong>spring-service.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span> <span class="attr">xmlns:tx</span>=<span class="string">&quot;http://www.springframework.org/schema/tx&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">   http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag"></span></span></span><br><span class="line"><span class="string"><span class="tag">   http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">   http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">   http://www.springframework.org/schema/tx</span></span></span><br><span class="line"><span class="string"><span class="tag">   http://www.springframework.org/schema/tx/spring-tx.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">   http://www.springframework.org/schema/aop</span></span></span><br><span class="line"><span class="string"><span class="tag">   https://www.springframework.org/schema/aop/spring-aop.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- æ‰«æserviceç›¸å…³çš„bean --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.wu.service&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--BookServiceImplæ³¨å…¥åˆ°IOCå®¹å™¨ä¸­--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;BookServiceImpl&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wu.service.BookServiceImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;bookMapper&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;bookMapper&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®äº‹åŠ¡ç®¡ç†å™¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ³¨å…¥æ•°æ®åº“è¿æ¥æ±  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--AOPäº‹åŠ¡æ”¯æŒ--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é…ç½®äº‹åŠ¡é€šçŸ¥ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">&quot;txAdvice&quot;</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;*&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--  é…ç½®äº‹åŠ¡åˆ‡å…¥  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;txPointCut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.wu.dao.*.*(..))&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;txAdvice&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;txPointCut&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>libåŒ…å¯¼å…¥</p>
<p><strong>updateBook.jsp</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;</span><br><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>ä¿®æ”¹ä¹¦ç±ä¿¡æ¯<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥ Bootstrap --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row clearfix&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-12 column&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;page-header&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">small</span>&gt;</span>ä¿®æ”¹ä¹¦ç±<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    &lt;%--  å‡ºç°çš„é—®é¢˜ï¼šæˆ‘ä»¬æäº¤äº†ä¿®æ”¹çš„SQè¯·æ±‚ï¼Œä½†æ˜¯ä¿®æ”¹å¤±è´¥ï¼Œåˆæ¬¡è€ƒè™‘ï¼Œæ˜¯äº‹åŠ¡é—®é¢˜ï¼Œé…ç½®å®Œåäº‹åŠ¡ï¼Œä¾æ—§å¤±è´¥ï¼--%&gt;</span><br><span class="line">    &lt;%-- çœ‹ä¸€ä¸‹SQLè¯­å¥ï¼Œèƒ½å¦æ‰§è¡ŒæˆåŠŸï¼šSQLæ‰§è¡Œå¤±è´¥ï¼Œä¿®æ”¿æœªå®Œæˆ--%&gt;</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/book/updateBook&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">        &lt;%--å‰ç«¯ä¼ é€’éšè—åŸŸ--%&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;hidden&quot;</span> <span class="attr">name</span>=<span class="string">&quot;bookID&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;books.bookID&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span>&gt;</span>ä¹¦ç±åç§°<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;bookName&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;books.bookName&#125;&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span>&gt;</span>ä¹¦ç±æ•°é‡<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;bookCounts&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;books.bookCounts&#125;&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span>&gt;</span>ä¹¦ç±æè¿°<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;detail&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">value</span>=<span class="string">&quot;$&#123;books.detail&#125;&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ä¿®æ”¹&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ‰‹åŠ¨æ·»åŠ æ—¥å¿—</p>
<p>mybatis-config.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ·»åŠ æ—¥å¿—--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;STDOUT_LOGGING&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="6-11ã€åˆ é™¤ä¹¦ç±"><a href="#6-11ã€åˆ é™¤ä¹¦ç±" class="headerlink" title="6.11ã€åˆ é™¤ä¹¦ç±"></a>6.11ã€åˆ é™¤ä¹¦ç±</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åˆ é™¤ä¹¦ç±</span></span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/del/&#123;bookId&#125;&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">deleteBook</span><span class="params">(<span class="meta">@PathVariable(&quot;bookId&quot;)</span> <span class="type">int</span> id)</span> &#123;</span><br><span class="line">       bookService.deleteBookById(id);</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;redirect:/book/allBook&quot;</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p><strong>serviceå’Œdaoå±‚ä¸Šé¢éƒ½å†™å¥½äº†ï¼Œæ‰€ä»¥ä¸å±•ç¤ºäº†ï¼Œå’Œä¸Šé¢ä¿®æ”¹ä¸€æ ·</strong></p>
<p><strong>allBook.jsp</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">c:forEach</span> <span class="attr">var</span>=<span class="string">&quot;book&quot;</span> <span class="attr">items</span>=<span class="string">&quot;$&#123;requestScope.get(&#x27;list&#x27;)&#125;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                       <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;book.getBookID()&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                       <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;book.getBookName()&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                       <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;book.getBookCounts()&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                       <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;book.getDetail()&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                       <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">                           <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/book/toUpdateBook?id=$&#123;book.getBookID()&#125;&quot;</span>&gt;</span>ä¿®æ”¹<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                           <span class="symbol">&amp;nbsp;</span>|<span class="symbol">&amp;nbsp;</span></span><br><span class="line">                           <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/book/del/$&#123;book.getBookID()&#125;&quot;</span>&gt;</span>åˆ é™¤<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                       <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">c:forEach</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="6-12ã€æŸ¥è¯¢ä¹¦ç±"><a href="#6-12ã€æŸ¥è¯¢ä¹¦ç±" class="headerlink" title="6.12ã€æŸ¥è¯¢ä¹¦ç±"></a>6.12ã€æŸ¥è¯¢ä¹¦ç±</h2><p><strong>BookMapper</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//é€šè¿‡ä¹¦åæŸ¥ä¿¡æ¯</span></span><br><span class="line">    Books <span class="title function_">queryBookByName</span><span class="params">(<span class="meta">@Param(&quot;bookName&quot;)</span>String bookName)</span>;</span><br></pre></td></tr></table></figure>

<p><strong>BookMapper.xml</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--é€šè¿‡ä¹¦åæŸ¥ä¿¡æ¯--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryBookByName&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Books&quot;</span>&gt;</span></span><br><span class="line">       select * from ssmbuild.books where bookName = #&#123;bookName&#125;</span><br><span class="line">   <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>BookService</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//é€šè¿‡ä¹¦åæŸ¥ä¿¡æ¯</span></span><br><span class="line">   Books <span class="title function_">queryBookByName</span><span class="params">(String bookName)</span>;</span><br></pre></td></tr></table></figure>

<p><strong>BookServiceImpl</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> Books <span class="title function_">queryBookByName</span><span class="params">(String bookName)</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> bookMapper.queryBookByName(bookName);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p><strong>BookController</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æŸ¥è¯¢ä¹¦ç±</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/queryBook&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">queryBook</span><span class="params">(String queryBookName,Model model)</span>&#123;</span><br><span class="line">    <span class="type">Books</span> <span class="variable">books</span> <span class="operator">=</span> bookService.queryBookByName(queryBookName);</span><br><span class="line">    System.err.println(<span class="string">&quot;books=&gt;&quot;</span>+books);</span><br><span class="line">    List&lt;Books&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Books&gt;();</span><br><span class="line">    list.add(books);</span><br><span class="line">    model.addAttribute(<span class="string">&quot;list&quot;</span>,list);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;allBook&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>allBook.jsp</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-4 column&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/book/toAddBook&quot;</span>&gt;</span>æ–°å¢ä¹¦ç±<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-4 column&quot;</span>&gt;</span></span><br><span class="line">        &lt;%-- æŸ¥è¯¢ä¹¦ç±--%&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/book/queryBook&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">style</span>=<span class="string">&quot;float: right&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;queryBookName&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥è¦æŸ¥è¯¢ä¹¦ç±çš„åç§°&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æŸ¥è¯¢&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>ç»“æœ</strong></p>
<img src="/2023/11/05/springmvc/1687918344119-513c97a2-d5db-43f4-8355-7d36b4223680.png" class title="img">

<p>æŠ¥500é”™è¯¯ï¼Œdao.BookMapper.xmlæŸ¥ä¸åˆ°</p>
<p>åŠ ä¸Šmavenèµ„æºè¿‡æ»¤</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/resources<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                   <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>false<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="æ˜¾ç¤ºå…¨éƒ¨ä¹¦ç±"><a href="#æ˜¾ç¤ºå…¨éƒ¨ä¹¦ç±" class="headerlink" title="æ˜¾ç¤ºå…¨éƒ¨ä¹¦ç±"></a>æ˜¾ç¤ºå…¨éƒ¨ä¹¦ç±</h3><p><strong>allBook.jsp</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-4 column&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/book/toAddBook&quot;</span>&gt;</span>æ–°å¢ä¹¦ç±<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/book/allBook&quot;</span>&gt;</span>æ˜¾ç¤ºå…¨éƒ¨ä¹¦ç±<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-md-8 column&quot;</span>&gt;</span></span><br><span class="line">            &lt;%-- æŸ¥è¯¢ä¹¦ç±--%&gt;</span><br><span class="line">            <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">&quot;form-inline&quot;</span> <span class="attr">action</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/book/queryBook&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span></span></span><br><span class="line"><span class="tag">                  <span class="attr">style</span>=<span class="string">&quot;float: right&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color:red; font-weight:bold&quot;</span>&gt;</span>$&#123;error&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;queryBookName&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥è¦æŸ¥è¯¢ä¹¦ç±çš„åç§°&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æŸ¥è¯¢&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>BookController</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æŸ¥è¯¢ä¹¦ç±</span></span><br><span class="line">   <span class="meta">@RequestMapping(&quot;/queryBook&quot;)</span></span><br><span class="line">   <span class="keyword">public</span> String <span class="title function_">queryBook</span><span class="params">(String queryBookName, Model model)</span> &#123;</span><br><span class="line">           <span class="type">Books</span> <span class="variable">books</span> <span class="operator">=</span> bookService.queryBookByName(queryBookName);</span><br><span class="line">           List&lt;Books&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">           list.add(books);</span><br><span class="line"></span><br><span class="line">       <span class="keyword">if</span> (books == <span class="literal">null</span>) &#123;</span><br><span class="line">           list=bookService.queryAllBook();</span><br><span class="line">           model.addAttribute(<span class="string">&quot;error&quot;</span>,<span class="string">&quot;â€œ&quot;</span>+queryBookName+<span class="string">&quot;â€ä¸å­˜åœ¨&quot;</span>);</span><br><span class="line">       &#125;</span><br><span class="line">           model.addAttribute(<span class="string">&quot;list&quot;</span>, list);</span><br><span class="line">       <span class="keyword">return</span> <span class="string">&quot;allBook&quot;</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>ç»“æœ</p>
<img src="/2023/11/05/springmvc/1687917867246-deac2aff-5ef7-4bd2-b720-7c3412ec90d7.png" class title="img">

<h1 id="ä¸ƒã€Ajaxç ”ç©¶"><a href="#ä¸ƒã€Ajaxç ”ç©¶" class="headerlink" title="ä¸ƒã€Ajaxç ”ç©¶"></a>ä¸ƒã€Ajaxç ”ç©¶</h1><p><a href="https://mp.weixin.qq.com/s?__biz=Mzg2NTAzMTExNg==&mid=2247484021&idx=1&sn=9c3e5538167483d1d6ba4c5daaea9ca1&scene=19#wechat_redirect">SpringMVC07ï¼šAjaxç ”ç©¶</a></p>
<h3 id="7-1ã€ç®€ä»‹"><a href="#7-1ã€ç®€ä»‹" class="headerlink" title="7.1ã€ç®€ä»‹"></a>7.1ã€ç®€ä»‹</h3><ul>
<li><strong>AJAX &#x3D; Asynchronous JavaScript and XMLï¼ˆå¼‚æ­¥çš„ JavaScript å’Œ XMLï¼‰ã€‚</strong></li>
<li>AJAX æ˜¯ä¸€ç§åœ¨æ— éœ€é‡æ–°åŠ è½½æ•´ä¸ªç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿæ›´æ–°éƒ¨åˆ†ç½‘é¡µçš„æŠ€æœ¯ã€‚</li>
<li><strong>Ajax ä¸æ˜¯ä¸€ç§æ–°çš„ç¼–ç¨‹è¯­è¨€ï¼Œè€Œæ˜¯ä¸€ç§ç”¨äºåˆ›å»ºæ›´å¥½æ›´å¿«ä»¥åŠäº¤äº’æ€§æ›´å¼ºçš„Webåº”ç”¨ç¨‹åºçš„æŠ€æœ¯ã€‚</strong></li>
<li>åœ¨ 2005 å¹´ï¼ŒGoogle é€šè¿‡å…¶ Google Suggest ä½¿ AJAX å˜å¾—æµè¡Œèµ·æ¥ã€‚Google Suggestèƒ½å¤Ÿè‡ªåŠ¨å¸®ä½ å®Œæˆæœç´¢å•è¯ã€‚</li>
<li>Google Suggest ä½¿ç”¨ AJAX åˆ›é€ å‡ºåŠ¨æ€æ€§æå¼ºçš„ web ç•Œé¢ï¼šå½“æ‚¨åœ¨è°·æ­Œçš„æœç´¢æ¡†è¾“å…¥å…³é”®å­—æ—¶ï¼ŒJavaScript ä¼šæŠŠè¿™äº›å­—ç¬¦å‘é€åˆ°æœåŠ¡å™¨ï¼Œç„¶åæœåŠ¡å™¨ä¼šè¿”å›ä¸€ä¸ªæœç´¢å»ºè®®çš„åˆ—è¡¨ã€‚</li>
<li>å°±å’Œå›½å†…ç™¾åº¦çš„æœç´¢æ¡†ä¸€æ ·!</li>
<li>ä¼ ç»Ÿçš„ç½‘é¡µ(å³ä¸ç”¨ajaxæŠ€æœ¯çš„ç½‘é¡µ)ï¼Œæƒ³è¦æ›´æ–°å†…å®¹æˆ–è€…æäº¤ä¸€ä¸ªè¡¨å•ï¼Œéƒ½éœ€è¦é‡æ–°åŠ è½½æ•´ä¸ªç½‘é¡µã€‚</li>
<li>ä½¿ç”¨ajaxæŠ€æœ¯çš„ç½‘é¡µï¼Œé€šè¿‡åœ¨åå°æœåŠ¡å™¨è¿›è¡Œå°‘é‡çš„æ•°æ®äº¤æ¢ï¼Œå°±å¯ä»¥å®ç°å¼‚æ­¥å±€éƒ¨æ›´æ–°ã€‚</li>
<li>ä½¿ç”¨Ajaxï¼Œç”¨æˆ·å¯ä»¥åˆ›å»ºæ¥è¿‘æœ¬åœ°æ¡Œé¢åº”ç”¨çš„ç›´æ¥ã€é«˜å¯ç”¨ã€æ›´ä¸°å¯Œã€æ›´åŠ¨æ€çš„Webç”¨æˆ·ç•Œé¢ã€‚</li>
</ul>
<h3 id="7-2ã€ä¼ªé€ Ajax"><a href="#7-2ã€ä¼ªé€ Ajax" class="headerlink" title="7.2ã€ä¼ªé€ Ajax"></a>7.2ã€ä¼ªé€ Ajax</h3><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‰ç«¯çš„ä¸€ä¸ªæ ‡ç­¾æ¥ä¼ªé€ ä¸€ä¸ªajaxçš„æ ·å­ã€‚iframeæ ‡ç­¾</p>
<ol>
<li>æ–°å»ºä¸€ä¸ªmodule ï¼šsspringmvc-06-ajax ï¼Œ å¯¼å…¥webæ”¯æŒï¼</li>
<li>ç¼–å†™ä¸€ä¸ª ajax-frame.html ä½¿ç”¨ iframe æµ‹è¯•ï¼Œæ„Ÿå—ä¸‹æ•ˆæœ</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">title</span>&gt;</span>xiaowu<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">   <span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">var</span> myDate = <span class="keyword">new</span> <span class="title class_">Date</span>();</span></span><br><span class="line"><span class="language-javascript">       <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;currentTime&#x27;</span>).<span class="property">innerText</span> = myDate.<span class="title function_">getTime</span>();</span></span><br><span class="line"><span class="language-javascript">  &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">   <span class="keyword">function</span> <span class="title function_">LoadPage</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">var</span> targetUrl =  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;url&#x27;</span>).<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">       <span class="variable language_">console</span>.<span class="title function_">log</span>(targetUrl);</span></span><br><span class="line"><span class="language-javascript">       <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;iframePosition&quot;</span>).<span class="property">src</span> = targetUrl;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">p</span>&gt;</span>è¯·è¾“å…¥è¦åŠ è½½çš„åœ°å€ï¼š<span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;currentTime&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;url&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;https://www.baidu.com/&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æäº¤&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;LoadPage()&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">h3</span>&gt;</span>åŠ è½½é¡µé¢ä½ç½®ï¼š<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">id</span>=<span class="string">&quot;iframePosition&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%;height: 500px;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>ä½¿ç”¨IDEAå¼€æµè§ˆå™¨æµ‹è¯•ä¸€ä¸‹ï¼</li>
</ol>
<p><strong>åˆ©ç”¨AJAXå¯ä»¥åšï¼š</strong></p>
<ul>
<li>æ³¨å†Œæ—¶ï¼Œè¾“å…¥ç”¨æˆ·åè‡ªåŠ¨æ£€æµ‹ç”¨æˆ·æ˜¯å¦å·²ç»å­˜åœ¨ã€‚</li>
<li>ç™»é™†æ—¶ï¼Œæç¤ºç”¨æˆ·åå¯†ç é”™è¯¯</li>
<li>åˆ é™¤æ•°æ®è¡Œæ—¶ï¼Œå°†è¡ŒIDå‘é€åˆ°åå°ï¼Œåå°åœ¨æ•°æ®åº“ä¸­åˆ é™¤ï¼Œæ•°æ®åº“åˆ é™¤æˆåŠŸåï¼Œåœ¨é¡µé¢DOMä¸­å°†æ•°æ®è¡Œä¹Ÿåˆ é™¤ã€‚</li>
<li>â€¦ç­‰ç­‰</li>
</ul>
<h3 id="7-3ã€jQuery-ajax"><a href="#7-3ã€jQuery-ajax" class="headerlink" title="7.3ã€jQuery.ajax"></a>7.3ã€jQuery.ajax</h3><ul>
<li>çº¯JSåŸç”Ÿå®ç°Ajaxæˆ‘ä»¬ä¸å»è®²è§£è¿™é‡Œï¼Œç›´æ¥ä½¿ç”¨jqueryæä¾›çš„ï¼Œæ–¹ä¾¿å­¦ä¹ å’Œä½¿ç”¨ï¼Œé¿å…é‡å¤é€ è½®å­ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥å»äº†è§£ä¸‹JSåŸç”ŸXMLHttpRequest ï¼</li>
<li>Ajaxçš„æ ¸å¿ƒæ˜¯XMLHttpRequestå¯¹è±¡(XHR)ã€‚XHRä¸ºå‘æœåŠ¡å™¨å‘é€è¯·æ±‚å’Œè§£ææœåŠ¡å™¨å“åº”æä¾›äº†æ¥å£ã€‚èƒ½å¤Ÿä»¥å¼‚æ­¥æ–¹å¼ä»æœåŠ¡å™¨è·å–æ–°æ•°æ®ã€‚</li>
<li>jQuery æä¾›å¤šä¸ªä¸ AJAX æœ‰å…³çš„æ–¹æ³•ã€‚</li>
<li>é€šè¿‡ jQuery AJAX æ–¹æ³•ï¼Œæ‚¨èƒ½å¤Ÿä½¿ç”¨ HTTP Get å’Œ HTTP Post ä»è¿œç¨‹æœåŠ¡å™¨ä¸Šè¯·æ±‚æ–‡æœ¬ã€HTMLã€XML æˆ– JSON â€“ åŒæ—¶æ‚¨èƒ½å¤ŸæŠŠè¿™äº›å¤–éƒ¨æ•°æ®ç›´æ¥è½½å…¥ç½‘é¡µçš„è¢«é€‰å…ƒç´ ä¸­ã€‚</li>
<li>jQuery ä¸æ˜¯ç”Ÿäº§è€…ï¼Œè€Œæ˜¯å¤§è‡ªç„¶æ¬è¿å·¥ã€‚</li>
<li>jQuery Ajaxæœ¬è´¨å°±æ˜¯ XMLHttpRequestï¼Œå¯¹ä»–è¿›è¡Œäº†å°è£…ï¼Œæ–¹ä¾¿è°ƒç”¨ï¼</li>
</ul>
<figure class="highlight latex"><table><tr><td class="code"><pre><span class="line">jQuery.ajax(...)</span><br><span class="line">éƒ¨åˆ†å‚æ•°ï¼š</span><br><span class="line">urlï¼šè¯·æ±‚åœ°å€</span><br><span class="line">typeï¼šè¯·æ±‚æ–¹å¼ï¼ŒGETã€POSTï¼ˆ1.9.0ä¹‹åç”¨methodï¼‰</span><br><span class="line">headersï¼šè¯·æ±‚å¤´</span><br><span class="line">dataï¼šè¦å‘é€çš„æ•°æ®</span><br><span class="line">contentTypeï¼šå³å°†å‘é€ä¿¡æ¯è‡³æœåŠ¡å™¨çš„å†…å®¹ç¼–ç ç±»å‹(é»˜è®¤: &quot;application/x-www-form-urlencoded; charset=UTF-8&quot;)</span><br><span class="line">asyncï¼šæ˜¯å¦å¼‚æ­¥</span><br><span class="line">timeoutï¼šè®¾ç½®è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</span><br><span class="line">beforeSendï¼šå‘é€è¯·æ±‚å‰æ‰§è¡Œçš„å‡½æ•°(å…¨å±€)</span><br><span class="line">completeï¼šå®Œæˆä¹‹åæ‰§è¡Œçš„å›è°ƒå‡½æ•°(å…¨å±€)</span><br><span class="line">successï¼šæˆåŠŸä¹‹åæ‰§è¡Œçš„å›è°ƒå‡½æ•°(å…¨å±€)</span><br><span class="line">errorï¼šå¤±è´¥ä¹‹åæ‰§è¡Œçš„å›è°ƒå‡½æ•°(å…¨å±€)</span><br><span class="line">acceptsï¼šé€šè¿‡è¯·æ±‚å¤´å‘é€ç»™æœåŠ¡å™¨ï¼Œå‘Šè¯‰æœåŠ¡å™¨å½“å‰å®¢æˆ·ç«¯å¯æ¥å—çš„æ•°æ®ç±»å‹</span><br><span class="line">dataTypeï¼šå°†æœåŠ¡å™¨ç«¯è¿”å›çš„æ•°æ®è½¬æ¢æˆæŒ‡å®šç±»å‹</span><br><span class="line">&quot;xml&quot;: å°†æœåŠ¡å™¨ç«¯è¿”å›çš„å†…å®¹è½¬æ¢æˆxmlæ ¼å¼</span><br><span class="line">&quot;text&quot;: å°†æœåŠ¡å™¨ç«¯è¿”å›çš„å†…å®¹è½¬æ¢æˆæ™®é€šæ–‡æœ¬æ ¼å¼</span><br><span class="line">&quot;html&quot;: å°†æœåŠ¡å™¨ç«¯è¿”å›çš„å†…å®¹è½¬æ¢æˆæ™®é€šæ–‡æœ¬æ ¼å¼ï¼Œåœ¨æ’å…¥DOMä¸­æ—¶ï¼Œå¦‚æœåŒ…å«JavaScriptæ ‡ç­¾ï¼Œåˆ™ä¼šå°è¯•å»æ‰§è¡Œã€‚</span><br><span class="line">&quot;script&quot;: å°è¯•å°†è¿”å›å€¼å½“ä½œJavaScriptå»æ‰§è¡Œï¼Œç„¶åå†å°†æœåŠ¡å™¨ç«¯è¿”å›çš„å†…å®¹è½¬æ¢æˆæ™®é€šæ–‡æœ¬æ ¼å¼</span><br><span class="line">&quot;json&quot;: å°†æœåŠ¡å™¨ç«¯è¿”å›çš„å†…å®¹è½¬æ¢æˆç›¸åº”çš„JavaScriptå¯¹è±¡</span><br><span class="line">&quot;jsonp&quot;: JSONP æ ¼å¼ä½¿ç”¨ JSONP å½¢å¼è°ƒç”¨å‡½æ•°æ—¶ï¼Œå¦‚ &quot;myurl?callback=?&quot; jQuery å°†è‡ªåŠ¨æ›¿æ¢ ? ä¸ºæ­£ç¡®çš„å‡½æ•°åï¼Œä»¥æ‰§è¡Œå›è°ƒå‡½æ•°</span><br></pre></td></tr></table></figure>

<p><strong>æˆ‘ä»¬æ¥ä¸ªç®€å•çš„æµ‹è¯•ï¼Œä½¿ç”¨æœ€åŸå§‹çš„HttpServletResponseå¤„ç† , .æœ€ç®€å• , æœ€é€šç”¨</strong></p>
<ol>
<li>é…ç½®web.xml å’Œ springmvcçš„é…ç½®æ–‡ä»¶ã€è®°å¾—é™æ€èµ„æºè¿‡æ»¤å’Œæ³¨è§£é©±åŠ¨é…ç½®ä¸Šã€‘</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">&quot;http://www.springframework.org/schema/mvc&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc https://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--è‡ªåŠ¨æ‰«åŒ…--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.wu.controller&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é™æ€èµ„æºè¿‡æ»¤--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--JSONä¹±ç é—®é¢˜é…ç½®--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:message-converters</span> <span class="attr">register-defaults</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.StringHttpMessageConverter&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;objectMapper&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.json.Jackson2ObjectMapperFactoryBean&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;failOnEmptyBeans&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--è§†å›¾è§£æå™¨:DispatcherServletç»™ä»–çš„ModelAndView--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span> <span class="attr">id</span>=<span class="string">&quot;InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å‰ç¼€--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/jsp/&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--åç¼€--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>ç¼–å†™ä¸€ä¸ªAjaxController</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.controller;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.sun.deploy.net.HttpResponse;</span><br><span class="line"><span class="keyword">import</span> com.sun.org.glassfish.gmbal.ParameterNames;</span><br><span class="line"><span class="keyword">import</span> lombok.SneakyThrows;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AjaxController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/t1&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;è¿›å…¥&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/a1&quot;)</span></span><br><span class="line">    <span class="keyword">public</span>  <span class="keyword">void</span> <span class="title function_">a1</span><span class="params">(String name, HttpServletResponse response)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;a1:param=&gt;&quot;</span>+name);</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;xiaowu&quot;</span>.equals(name)) &#123;</span><br><span class="line">            response.getWriter().print(<span class="string">&quot;true&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            response.getWriter().print(<span class="string">&quot;false&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>å¯¼å…¥jquery ï¼Œ å¯ä»¥ä½¿ç”¨åœ¨çº¿çš„CDN ï¼Œ ä¹Ÿå¯ä»¥ä¸‹è½½å¯¼å…¥</li>
</ol>
<figure class="highlight latex"><table><tr><td class="code"><pre><span class="line">&lt;script src=&quot;https://code.jquery.com/jquery-3.1.1.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=&quot;<span class="built_in">$</span>&#123;pageContext.request.contextPath&#125;/statics/js/jquery-3.1.1.min.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ol>
<li>ç¼–å†™index.jspæµ‹è¯•</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Login<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/statics/js/jquery-3.6.4.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        $.<span class="title function_">post</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">url</span>: <span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/a1&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>: &#123;<span class="string">&quot;name&quot;</span>: $(<span class="string">&quot;username&quot;</span>).<span class="title function_">val</span>()&#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">success</span>:<span class="keyword">function</span> (<span class="params">data,status</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;data=&quot;</span>+data);</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;status=&quot;</span>+status); <span class="comment">//200 300 400 500</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">&lt;%--å¤±å»ç„¦ç‚¹çš„æ—¶å€™,å‘èµ·ä¸€ä¸ªè¯·æ±‚(æºå¸¦ä¿¡æ¯)åˆ°åå°--%&gt;</span><br><span class="line">ç”¨æˆ·åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span> <span class="attr">onblur</span>=<span class="string">&quot;a()&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>å¯åŠ¨tomcatæµ‹è¯•ï¼æ‰“å¼€æµè§ˆå™¨çš„æ§åˆ¶å°ï¼Œå½“æˆ‘ä»¬é¼ æ ‡ç¦»å¼€è¾“å…¥æ¡†çš„æ—¶å€™ï¼Œå¯ä»¥çœ‹åˆ°å‘å‡ºäº†ä¸€ä¸ªajaxçš„è¯·æ±‚ï¼æ˜¯åå°è¿”å›ç»™æˆ‘ä»¬çš„ç»“æœï¼æµ‹è¯•æˆåŠŸï¼</li>
</ol>
<h3 id="7-4ã€Springmvcå®ç°"><a href="#7-4ã€Springmvcå®ç°" class="headerlink" title="7.4ã€Springmvcå®ç°"></a>7.4ã€<strong>Springmvcå®ç°</strong></h3><ol>
<li>å®ä½“ç±»userï¼ˆä½¿ç”¨äº†lombokæ’ä»¶ï¼Œå¯ä»¥è‡ªå·±å†™å®ç°ç±»æ–¹æ³•</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">private</span> String name;</span><br><span class="line">   <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">   <span class="keyword">private</span> String sex;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>æˆ‘ä»¬æ¥è·å–ä¸€ä¸ªé›†åˆå¯¹è±¡ï¼Œå±•ç¤ºåˆ°å‰ç«¯é¡µé¢</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/a2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> List&lt;User&gt; <span class="title function_">ajax2</span><span class="params">()</span>&#123;</span><br><span class="line">   List&lt;User&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;User&gt;();</span><br><span class="line">   list.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;xiaowu1&quot;</span>,<span class="number">3</span>,<span class="string">&quot;ç”·&quot;</span>));</span><br><span class="line">   list.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;xiaowu2&quot;</span>,<span class="number">3</span>,<span class="string">&quot;ç”·&quot;</span>));</span><br><span class="line">   list.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;xiaowu3&quot;</span>,<span class="number">3</span>,<span class="string">&quot;ç”·&quot;</span>));</span><br><span class="line">   <span class="keyword">return</span> list; <span class="comment">//ç”±äº@RestControlleræ³¨è§£ï¼Œå°†listè½¬æˆjsonæ ¼å¼è¿”å›</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>å‰ç«¯é¡µé¢</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://code.jquery.com/jquery-3.1.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;åŠ è½½æ•°æ®&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>å§“å<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>å¹´é¾„<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>æ€§åˆ«<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tbody</span> <span class="attr">id</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">    &lt;%--æ•°æ®ï¼šåå°--%&gt;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    $(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&quot;#btn&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// console.log(&#x27;ç‚¹å‡»äº‹ä»¶æˆåŠŸ&#x27;)</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// $.post(url,param,[å¯ä»¥çœç•¥],success)</span></span></span><br><span class="line"><span class="language-javascript">            $.<span class="title function_">post</span>(<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/a2&quot;</span>, <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(data[<span class="number">0</span>].<span class="property">name</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">let</span> html = <span class="string">&quot;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; data.<span class="property">length</span>; i++) &#123;</span></span><br><span class="line"><span class="language-javascript">                    html += <span class="string">`&lt;tr&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                                    &lt;td&gt;<span class="subst">$&#123;<span class="string">&quot;$&#123;data[i].name&#125;&quot;</span>&#125;</span>&lt;/td&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                                    &lt;td&gt;<span class="subst">$&#123;<span class="string">&quot;$&#123;data[i].age&#125;&quot;</span>&#125;</span>&lt;/td&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                                    &lt;td&gt;<span class="subst">$&#123;<span class="string">&quot;$&#123;data[i].sex&#125;&quot;</span>&#125;</span>&lt;/td&gt;</span></span></span><br><span class="line"><span class="string"><span class="language-javascript">                                &lt;/tr&gt;`</span></span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                $(<span class="string">&quot;#content&quot;</span>).<span class="title function_">html</span>(html)</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(html)</span></span><br><span class="line"><span class="language-javascript">            &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>æˆåŠŸå®ç°äº†æ•°æ®å›æ˜¾ï¼å¯ä»¥ä½“ä¼šä¸€ä¸‹Ajaxçš„å¥½å¤„ï¼</strong></p>
<h3 id="7-5ã€æ³¨å†Œæç¤ºæ•ˆæœ"><a href="#7-5ã€æ³¨å†Œæç¤ºæ•ˆæœ" class="headerlink" title="7.5ã€æ³¨å†Œæç¤ºæ•ˆæœ"></a>7.5ã€æ³¨å†Œæç¤ºæ•ˆæœ</h3><ol>
<li>æˆ‘ä»¬å†™ä¸€ä¸ªController</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/a3&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">ajax3</span><span class="params">(String name,String pwd)</span>&#123;</span><br><span class="line">   <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">   <span class="comment">//æ¨¡æ‹Ÿæ•°æ®åº“ä¸­å­˜åœ¨æ•°æ®</span></span><br><span class="line">   <span class="keyword">if</span> (name!=<span class="literal">null</span>)&#123;</span><br><span class="line">       <span class="keyword">if</span> (<span class="string">&quot;admin&quot;</span>.equals(name))&#123;</span><br><span class="line">           msg = <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">      &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">           msg = <span class="string">&quot;ç”¨æˆ·åè¾“å…¥é”™è¯¯&quot;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">   <span class="keyword">if</span> (pwd!=<span class="literal">null</span>)&#123;</span><br><span class="line">       <span class="keyword">if</span> (<span class="string">&quot;123456&quot;</span>.equals(pwd))&#123;</span><br><span class="line">           msg = <span class="string">&quot;OK&quot;</span>;</span><br><span class="line">      &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">           msg = <span class="string">&quot;å¯†ç è¾“å…¥æœ‰è¯¯&quot;</span>;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">   <span class="keyword">return</span> msg; <span class="comment">//ç”±äº@RestControlleræ³¨è§£ï¼Œå°†msgè½¬æˆjsonæ ¼å¼è¿”å›</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>å‰ç«¯é¡µé¢ login.jsp</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">title</span>&gt;</span>ajax<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/statics/js/jquery-3.1.1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">function</span> <span class="title function_">a1</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">           $.<span class="title function_">post</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">               <span class="attr">url</span>:<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/a3&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">               <span class="attr">data</span>:&#123;<span class="string">&#x27;name&#x27;</span>:$(<span class="string">&quot;#name&quot;</span>).<span class="title function_">val</span>()&#125;,</span></span><br><span class="line"><span class="language-javascript">               <span class="attr">success</span>:<span class="keyword">function</span> (<span class="params">data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                   <span class="keyword">if</span> (data.<span class="title function_">toString</span>()==<span class="string">&#x27;OK&#x27;</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                       $(<span class="string">&quot;#userInfo&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;color&quot;</span>,<span class="string">&quot;green&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                  &#125;<span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                       $(<span class="string">&quot;#userInfo&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;color&quot;</span>,<span class="string">&quot;red&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                  &#125;</span></span><br><span class="line"><span class="language-javascript">                   $(<span class="string">&quot;#userInfo&quot;</span>).<span class="title function_">html</span>(data);</span></span><br><span class="line"><span class="language-javascript">              &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">function</span> <span class="title function_">a2</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">           $.<span class="title function_">post</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">               <span class="attr">url</span>:<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/a3&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">               <span class="attr">data</span>:&#123;<span class="string">&#x27;pwd&#x27;</span>:$(<span class="string">&quot;#pwd&quot;</span>).<span class="title function_">val</span>()&#125;,</span></span><br><span class="line"><span class="language-javascript">               <span class="attr">success</span>:<span class="keyword">function</span> (<span class="params">data</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                   <span class="keyword">if</span> (data.<span class="title function_">toString</span>()==<span class="string">&#x27;OK&#x27;</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                       $(<span class="string">&quot;#pwdInfo&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;color&quot;</span>,<span class="string">&quot;green&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                  &#125;<span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                       $(<span class="string">&quot;#pwdInfo&quot;</span>).<span class="title function_">css</span>(<span class="string">&quot;color&quot;</span>,<span class="string">&quot;red&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">                  &#125;</span></span><br><span class="line"><span class="language-javascript">                   $(<span class="string">&quot;#pwdInfo&quot;</span>).<span class="title function_">html</span>(data);</span></span><br><span class="line"><span class="language-javascript">              &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">   </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">  ç”¨æˆ·å:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;name&quot;</span> <span class="attr">onblur</span>=<span class="string">&quot;a1()&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;userInfo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">  å¯†ç :<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;pwd&quot;</span> <span class="attr">onblur</span>=<span class="string">&quot;a2()&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;pwdInfo&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>è®°å¾—å¤„ç†jsonä¹±ç é—®é¢˜</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--JSONä¹±ç é—®é¢˜é…ç½®--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:message-converters</span> <span class="attr">register-defaults</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.StringHttpMessageConverter&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">value</span>=<span class="string">&quot;UTF-8&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.json.MappingJackson2HttpMessageConverter&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;objectMapper&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.http.converter.json.Jackson2ObjectMapperFactoryBean&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;failOnEmptyBeans&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>æ•ˆæœï¼š</strong></p>
<img src="/2023/11/05/springmvc/1687953538467-1708071a-866a-49d1-99ee-3c386d8160ff.png" class title="img">

<ol>
<li>æµ‹è¯•ä¸€ä¸‹æ•ˆæœï¼ŒåŠ¨æ€è¯·æ±‚å“åº”ï¼Œå±€éƒ¨åˆ·æ–°ï¼Œå°±æ˜¯å¦‚æ­¤ï¼</li>
</ol>
<img src="/2023/11/05/springmvc/1687952361239-0df8a1f9-7f54-41f0-b17f-3d68260f06bf.png" class title="img">

<h3 id="7-6ã€è·å–baiduæ¥å£Demo"><a href="#7-6ã€è·å–baiduæ¥å£Demo" class="headerlink" title="7.6ã€è·å–baiduæ¥å£Demo"></a>7.6ã€è·å–baiduæ¥å£Demo</h3><ol>
<li>JSONP.html</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">HTML</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;Content-Type&quot;</span> <span class="attr">content</span>=<span class="string">&quot;text/html; charset=utf-8&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">title</span>&gt;</span>JSONPç™¾åº¦æœç´¢<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">       <span class="selector-id">#q</span>&#123;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">width</span>: <span class="number">500px</span>;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">height</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">border</span>:<span class="number">1px</span> solid <span class="number">#ddd</span>;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">line-height</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">font-size</span>: <span class="number">14px</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">       <span class="selector-id">#ul</span>&#123;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">width</span>: <span class="number">520px</span>;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">list-style</span>: none;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">border</span>:<span class="number">1px</span> solid <span class="number">#ddd</span>;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">margin-top</span>: -<span class="number">1px</span>;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">       <span class="selector-id">#ul</span> <span class="selector-tag">li</span>&#123;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">line-height</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">       <span class="selector-id">#ul</span> <span class="selector-tag">li</span><span class="selector-pseudo">:hover</span>&#123;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">background-color</span>: <span class="number">#f60</span>;</span></span><br><span class="line"><span class="language-css">           <span class="attribute">color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">   </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">       <span class="comment">// 2.æ­¥éª¤äºŒ</span></span></span><br><span class="line"><span class="language-javascript">       <span class="comment">// å®šä¹‰demoå‡½æ•° (åˆ†ææ¥å£ã€æ•°æ®)</span></span></span><br><span class="line"><span class="language-javascript">       <span class="keyword">function</span> <span class="title function_">demo</span>(<span class="params">data</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">           <span class="keyword">var</span> <span class="title class_">Ul</span> = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;ul&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">           <span class="keyword">var</span> html = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">           <span class="comment">// å¦‚æœæœç´¢æ•°æ®å­˜åœ¨ æŠŠå†…å®¹æ·»åŠ è¿›å»</span></span></span><br><span class="line"><span class="language-javascript">           <span class="keyword">if</span> (data.<span class="property">s</span>.<span class="property">length</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">               <span class="comment">// éšè—æ‰çš„ulæ˜¾ç¤ºå‡ºæ¥</span></span></span><br><span class="line"><span class="language-javascript">               <span class="title class_">Ul</span>.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;block&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">               <span class="comment">// æœç´¢åˆ°çš„æ•°æ®å¾ªç¯è¿½åŠ åˆ°lié‡Œ</span></span></span><br><span class="line"><span class="language-javascript">               <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>;i&lt;data.<span class="property">s</span>.<span class="property">length</span>;i++)&#123;</span></span><br><span class="line"><span class="language-javascript">                   html += <span class="string">&#x27;&lt;li&gt;&#x27;</span>+data.<span class="property">s</span>[i]+<span class="string">&#x27;&lt;/li&gt;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">              &#125;</span></span><br><span class="line"><span class="language-javascript">               <span class="comment">// å¾ªç¯çš„liå†™å…¥ul</span></span></span><br><span class="line"><span class="language-javascript">               <span class="title class_">Ul</span>.<span class="property">innerHTML</span> = html;</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">       <span class="comment">// 1.æ­¥éª¤ä¸€</span></span></span><br><span class="line"><span class="language-javascript">       <span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">           <span class="comment">// è·å–è¾“å…¥æ¡†å’Œul</span></span></span><br><span class="line"><span class="language-javascript">           <span class="keyword">var</span> Q = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;q&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">           <span class="keyword">var</span> <span class="title class_">Ul</span> = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;ul&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">           <span class="comment">// äº‹ä»¶é¼ æ ‡æŠ¬èµ·æ—¶å€™</span></span></span><br><span class="line"><span class="language-javascript">           Q.<span class="property">onkeyup</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">               <span class="comment">// å¦‚æœè¾“å…¥æ¡†ä¸ç­‰äºç©º</span></span></span><br><span class="line"><span class="language-javascript">               <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">value</span> != <span class="string">&#x27;&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                   <span class="comment">// â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†JSONPzé‡ç‚¹â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†â˜†</span></span></span><br><span class="line"><span class="language-javascript">                   <span class="comment">// åˆ›å»ºæ ‡ç­¾</span></span></span><br><span class="line"><span class="language-javascript">                   <span class="keyword">var</span> script = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;script&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                   <span class="comment">//ç»™å®šè¦è·¨åŸŸçš„åœ°å€ èµ‹å€¼ç»™src</span></span></span><br><span class="line"><span class="language-javascript">                   <span class="comment">//è¿™é‡Œæ˜¯è¦è¯·æ±‚çš„è·¨åŸŸçš„åœ°å€ æˆ‘å†™çš„æ˜¯ç™¾åº¦æœç´¢çš„è·¨åŸŸåœ°å€</span></span></span><br><span class="line"><span class="language-javascript">                   script.<span class="property">src</span> = <span class="string">&#x27;https://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su?wd=&#x27;</span>+<span class="variable language_">this</span>.<span class="property">value</span>+<span class="string">&#x27;&amp;cb=demo&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                   <span class="comment">// å°†ç»„åˆå¥½çš„å¸¦srcçš„scriptæ ‡ç­¾è¿½åŠ åˆ°bodyé‡Œ</span></span></span><br><span class="line"><span class="language-javascript">                   <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(script);</span></span><br><span class="line"><span class="language-javascript">              &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">   </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;q&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;ul&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>æµ‹è¯•</li>
</ol>
<img src="/2023/11/05/springmvc/1687953778230-632ef15e-6021-4ca4-a26e-fa156ad15ffa.png" class title="img">

<h1 id="å…«ã€æ‹¦æˆªå™¨"><a href="#å…«ã€æ‹¦æˆªå™¨" class="headerlink" title="å…«ã€æ‹¦æˆªå™¨"></a>å…«ã€æ‹¦æˆªå™¨</h1><h3 id="8-1ã€æ¦‚è¿°"><a href="#8-1ã€æ¦‚è¿°" class="headerlink" title="8.1ã€æ¦‚è¿°"></a>8.1ã€æ¦‚è¿°</h3><ul>
<li>SpringMVCçš„å¤„ç†å™¨æ‹¦æˆªå™¨ç±»ä¼¼äºServletå¼€å‘ä¸­çš„è¿‡æ»¤å™¨Filter,ç”¨äºå¯¹å¤„ç†å™¨è¿›è¡Œé¢„å¤„ç†å’Œåå¤„ç†ã€‚</li>
<li>å¼€å‘è€…å¯ä»¥è‡ªå·±å®šä¹‰ä¸€äº›æ‹¦æˆªå™¨æ¥å®ç°ç‰¹å®šçš„åŠŸèƒ½ã€‚</li>
</ul>
<p><strong>è¿‡æ»¤å™¨ä¸æ‹¦æˆªå™¨çš„åŒºåˆ«ï¼š</strong>æ‹¦æˆªå™¨æ˜¯AOPæ€æƒ³çš„å…·ä½“åº”ç”¨ã€‚</p>
<p><strong>è¿‡æ»¤å™¨</strong></p>
<ul>
<li>servletè§„èŒƒä¸­çš„ä¸€éƒ¨åˆ†ï¼Œä»»ä½•javawebå·¥ç¨‹éƒ½å¯ä»¥ä½¿ç”¨</li>
<li>åœ¨url-patternä¸­é…ç½®äº†&#x2F;*ä¹‹åï¼Œå¯ä»¥å¯¹æ‰€æœ‰è¦è®¿é—®çš„èµ„æºè¿›è¡Œæ‹¦æˆª</li>
</ul>
<p><strong>æ‹¦æˆªå™¨</strong></p>
<ul>
<li>æ‹¦æˆªå™¨æ˜¯SpringMVCæ¡†æ¶è‡ªå·±çš„ï¼Œåªæœ‰ä½¿ç”¨äº†SpringMVCæ¡†æ¶çš„å·¥ç¨‹æ‰èƒ½ä½¿ç”¨</li>
<li>æ‹¦æˆªå™¨åªä¼šæ‹¦æˆªè®¿é—®çš„æ§åˆ¶å™¨æ–¹æ³•ï¼Œ å¦‚æœè®¿é—®çš„æ˜¯jsp&#x2F;html&#x2F;css&#x2F;image&#x2F;jsæ˜¯ä¸ä¼šè¿›è¡Œæ‹¦æˆªçš„</li>
</ul>
<h3 id="8-2ã€è‡ªå®šä¹‰æ‹¦æˆªå™¨"><a href="#8-2ã€è‡ªå®šä¹‰æ‹¦æˆªå™¨" class="headerlink" title="8.2ã€è‡ªå®šä¹‰æ‹¦æˆªå™¨"></a>8.2ã€è‡ªå®šä¹‰æ‹¦æˆªå™¨</h3><ol>
<li>æ–°å»ºä¸€ä¸ªMoudule ï¼Œ springmvc-Interceptor ï¼Œ æ·»åŠ webæ”¯æŒ</li>
<li>é…ç½®web.xml å’Œ springmvc-servlet.xml æ–‡ä»¶</li>
<li>ç¼–å†™ä¸€ä¸ªæ‹¦æˆªå™¨ï¼ˆå¿…é¡»å®ç° HandlerInterceptor æ¥å£ï¼‰</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.Interceptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line">    <span class="comment">//return true; æ‰§è¡Œä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨ï¼Œæ”¾è¡Œ</span></span><br><span class="line">    <span class="comment">//return false; ä¸æ‰§è¡Œä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨ï¼Œæ‹¦æˆª</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;===========å¤„ç†å‰===========&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ—¥å¿—</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;===========å¤„ç†å===========&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ—¥å¿—</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;===========æ¸…ç†===========&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ol>
<li>åœ¨springmvcçš„é…ç½®æ–‡ä»¶ä¸­é…ç½®æ‹¦æˆªå™¨</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ‹¦æˆªå™¨é…ç½®--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--åŒ…æ‹¬è¿™ä¸ªè¯·æ±‚ä¸‹é¢çš„æ‰€æœ‰è¯·æ±‚--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/**&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.wu.Interceptor.MyInterceptor&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>ç¼–å†™ä¸€ä¸ªControllerï¼Œæ¥æ”¶è¯·æ±‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestController</span> &#123;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/t1&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;TestController.test&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ok&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>å¯åŠ¨tomcat æµ‹è¯•ä¸€ä¸‹ï¼(<a href="http://localhost:8888/t1">http://localhost:8888/t1</a>)</li>
</ol>
<h3 id="8-3ã€éªŒè¯ç”¨æˆ·æ˜¯å¦ç™»å½•-è®¤è¯ç”¨æˆ·"><a href="#8-3ã€éªŒè¯ç”¨æˆ·æ˜¯å¦ç™»å½•-è®¤è¯ç”¨æˆ·" class="headerlink" title="8.3ã€éªŒè¯ç”¨æˆ·æ˜¯å¦ç™»å½• (è®¤è¯ç”¨æˆ·)"></a>8.3ã€éªŒè¯ç”¨æˆ·æ˜¯å¦ç™»å½• (è®¤è¯ç”¨æˆ·)</h3><p><strong>å®ç°æ€è·¯</strong></p>
<ol>
<li>æœ‰ä¸€ä¸ªç™»é™†é¡µé¢ï¼Œéœ€è¦å†™ä¸€ä¸ªcontrollerè®¿é—®é¡µé¢ã€‚</li>
<li>ç™»é™†é¡µé¢æœ‰ä¸€æäº¤è¡¨å•çš„åŠ¨ä½œã€‚éœ€è¦åœ¨controllerä¸­å¤„ç†ã€‚åˆ¤æ–­ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®ã€‚å¦‚æœæ­£ç¡®ï¼Œå‘sessionä¸­å†™å…¥ç”¨æˆ·ä¿¡æ¯ã€‚<em>è¿”å›ç™»é™†æˆåŠŸã€‚</em></li>
<li>æ‹¦æˆªç”¨æˆ·è¯·æ±‚ï¼Œåˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»é™†ã€‚å¦‚æœç”¨æˆ·å·²ç»ç™»é™†ã€‚æ”¾è¡Œï¼Œ å¦‚æœç”¨æˆ·æœªç™»é™†ï¼Œè·³è½¬åˆ°ç™»é™†é¡µé¢</li>
</ol>
<p><strong>æµ‹è¯•ï¼š</strong></p>
<ol>
<li>ç¼–å†™ä¸€ä¸ªç™»é™†é¡µé¢ login.jsp</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>ç™»å½•<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">&lt;%--åœ¨web-infä¸‹é¢çš„æ‰€æœ‰é¡µé¢æˆ–è€…èµ„æºï¼Œåªèƒ½é€šè¿‡controlleræˆ–è€…Servletè¿›è¡Œè®¿é—®--%&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>ç™»å½•é¡µé¢<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/user/login&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    ç”¨æˆ·åï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">    å¯†ç ï¼š<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æäº¤&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>ç¼–å†™ä¸€ä¸ªControllerå¤„ç†è¯·æ±‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ui.Model;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/main&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;main&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/goLogin&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">login</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;login&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/login&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">login</span><span class="params">(HttpSession session, String username, String password, Model model)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æŠŠç”¨æˆ·çš„ä¿¡æ¯å­˜åœ¨sessionä¸­</span></span><br><span class="line">        session.setAttribute(<span class="string">&quot;userLoginInfo&quot;</span>,username);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;password&quot;</span>,password);</span><br><span class="line">        model.addAttribute(<span class="string">&quot;username&quot;</span>,username);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;main&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/goOut&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">goOut</span><span class="params">(HttpSession sessionl)</span> &#123;</span><br><span class="line">        sessionl.removeAttribute(<span class="string">&quot;userLoginInfo&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;login&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>ç¼–å†™ä¸€ä¸ªç™»é™†æˆåŠŸçš„é¡µé¢ main.jsp</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>$&#123;password&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>$&#123;username&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/user/goOut&quot;</span>&gt;</span>æ³¨é”€<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>åœ¨ index é¡µé¢ä¸Šæµ‹è¯•è·³è½¬ï¼å¯åŠ¨Tomcat æµ‹è¯•ï¼Œæœªç™»å½•ä¹Ÿå¯ä»¥è¿›å…¥ä¸»é¡µï¼</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>index<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/user/goLogin&quot;</span>&gt;</span>ç™»å½•é¡µé¢<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/user/main&quot;</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>ç¼–å†™ç”¨æˆ·ç™»å½•æ‹¦æˆªå™¨</li>
</ol>
<p>	</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.Interceptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession();</span><br><span class="line">        <span class="comment">//æ”¾è¡Œ:åˆ¤æ–­ä»€ä¹ˆæƒ…å†µä¸‹ç™»å½•</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç™»å½•é¡µé¢ä¹Ÿä¼šæ”¾è¡Œ</span></span><br><span class="line">        <span class="keyword">if</span> (request.getRequestURI().contains(<span class="string">&quot;goLogin&quot;</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (request.getRequestURI().contains(<span class="string">&quot;login&quot;</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (session.getAttribute(<span class="string">&quot;userLoginInfo&quot;</span>) != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//åˆ¤æ–­ä»€ä¹ˆæƒ…å†µä¸‹æ²¡æœ‰ç™»å½•</span></span><br><span class="line">        request.getRequestDispatcher(<span class="string">&quot;/WEB-INF/jsp/login.jsp&quot;</span>).forward(request,response);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>åœ¨Springmvcçš„é…ç½®æ–‡ä»¶ä¸­æ³¨å†Œæ‹¦æˆªå™¨</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--å…³äºæ‹¦æˆªå™¨çš„é…ç½®--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">&quot;/user/**&quot;</span>/&gt;</span> </span><br><span class="line">       <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;loginInterceptor&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wu.Interceptor.LoginInterceptor&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>å†æ¬¡é‡å¯Tomcatæµ‹è¯•ï¼</li>
</ol>
<p><strong>OKï¼Œæµ‹è¯•ç™»å½•æ‹¦æˆªåŠŸèƒ½æ— è¯¯.</strong></p>
<img src="/2023/11/05/springmvc/1687956550857-c771a8bf-83e9-459d-a1c7-b0314f8fe9f7.png" class title="img">

<h1 id="ä¹ã€æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½"><a href="#ä¹ã€æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½" class="headerlink" title="ä¹ã€æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½"></a>ä¹ã€æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½</h1><h3 id="9-1ã€å‡†å¤‡å·¥ä½œ"><a href="#9-1ã€å‡†å¤‡å·¥ä½œ" class="headerlink" title="9.1ã€å‡†å¤‡å·¥ä½œ"></a>9.1ã€å‡†å¤‡å·¥ä½œ</h3><ul>
<li>æ–‡ä»¶ä¸Šä¼ æ˜¯é¡¹ç›®å¼€å‘ä¸­æœ€å¸¸è§çš„åŠŸèƒ½ä¹‹ä¸€ ,springMVC å¯ä»¥å¾ˆå¥½çš„æ”¯æŒæ–‡ä»¶ä¸Šä¼ ã€‚</li>
<li>SpringMVCä¸Šä¸‹æ–‡ä¸­é»˜è®¤æ²¡æœ‰è£…é…MultipartResolverï¼Œå› æ­¤é»˜è®¤æƒ…å†µä¸‹å…¶ä¸èƒ½å¤„ç†æ–‡ä»¶ä¸Šä¼ å·¥ä½œã€‚å¦‚æœæƒ³ä½¿ç”¨Springçš„æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ï¼Œåˆ™éœ€è¦åœ¨ä¸Šä¸‹æ–‡ä¸­é…ç½®MultipartResolverã€‚</li>
<li>å‰ç«¯è¡¨å•è¦æ±‚ï¼šä¸ºäº†èƒ½ä¸Šä¼ æ–‡ä»¶ï¼Œå¿…é¡»å°†è¡¨å•çš„methodè®¾ç½®ä¸ºPOSTï¼Œå¹¶å°†enctypeè®¾ç½®ä¸ºmultipart&#x2F;form-dataã€‚åªæœ‰åœ¨è¿™æ ·çš„æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨æ‰ä¼šæŠŠç”¨æˆ·é€‰æ‹©çš„æ–‡ä»¶ä»¥äºŒè¿›åˆ¶æ•°æ®å‘é€ç»™æœåŠ¡å™¨ï¼›</li>
</ul>
<p><strong>å¯¹è¡¨å•ä¸­çš„ enctype å±æ€§åšä¸ªè¯¦ç»†çš„è¯´æ˜ï¼š</strong></p>
<ul>
<li>application&#x2F;x-www&#x3D;form-urlencodedï¼šé»˜è®¤æ–¹å¼ï¼Œåªå¤„ç†è¡¨å•åŸŸä¸­çš„ value å±æ€§å€¼ï¼Œé‡‡ç”¨è¿™ç§ç¼–ç æ–¹å¼çš„è¡¨å•ä¼šå°†è¡¨å•åŸŸä¸­çš„å€¼å¤„ç†æˆ URL ç¼–ç æ–¹å¼ã€‚</li>
<li>multipart&#x2F;form-dataï¼šè¿™ç§ç¼–ç æ–¹å¼ä¼šä»¥äºŒè¿›åˆ¶æµçš„æ–¹å¼æ¥å¤„ç†è¡¨å•æ•°æ®ï¼Œè¿™ç§ç¼–ç æ–¹å¼ä¼šæŠŠæ–‡ä»¶åŸŸæŒ‡å®šæ–‡ä»¶çš„å†…å®¹ä¹Ÿå°è£…åˆ°è¯·æ±‚å‚æ•°ä¸­ï¼Œä¸ä¼šå¯¹å­—ç¬¦ç¼–ç ã€‚</li>
<li>text&#x2F;plainï¼šé™¤äº†æŠŠç©ºæ ¼è½¬æ¢ä¸º â€œ+â€ å·å¤–ï¼Œå…¶ä»–å­—ç¬¦éƒ½ä¸åšç¼–ç å¤„ç†ï¼Œè¿™ç§æ–¹å¼é€‚ç”¨ç›´æ¥é€šè¿‡è¡¨å•å‘é€é‚®ä»¶ã€‚</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;file&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä¸€æ—¦è®¾ç½®äº†enctypeä¸ºmultipart&#x2F;form-dataï¼Œæµè§ˆå™¨å³ä¼šé‡‡ç”¨äºŒè¿›åˆ¶æµçš„æ–¹å¼æ¥å¤„ç†è¡¨å•æ•°æ®ï¼Œè€Œå¯¹äºæ–‡ä»¶ä¸Šä¼ çš„å¤„ç†åˆ™æ¶‰åŠåœ¨æœåŠ¡å™¨ç«¯è§£æåŸå§‹çš„HTTPå“åº”ã€‚åœ¨2003å¹´ï¼ŒApache Software Foundationå‘å¸ƒäº†å¼€æºçš„Commons FileUploadç»„ä»¶ï¼Œå…¶å¾ˆå¿«æˆä¸ºServlet&#x2F;JSPç¨‹åºå‘˜ä¸Šä¼ æ–‡ä»¶çš„æœ€ä½³é€‰æ‹©</p>
<ul>
<li>Servlet3.0è§„èŒƒå·²ç»æä¾›æ–¹æ³•æ¥å¤„ç†æ–‡ä»¶ä¸Šä¼ ï¼Œä½†è¿™ç§ä¸Šä¼ éœ€è¦åœ¨Servletä¸­å®Œæˆã€‚</li>
<li>è€ŒSpring MVCåˆ™æä¾›äº†æ›´ç®€å•çš„å°è£…ã€‚</li>
<li>Spring MVCä¸ºæ–‡ä»¶ä¸Šä¼ æä¾›äº†ç›´æ¥çš„æ”¯æŒï¼Œè¿™ç§æ”¯æŒæ˜¯ç”¨å³æ’å³ç”¨çš„MultipartResolverå®ç°çš„ã€‚</li>
<li>Spring MVCä½¿ç”¨Apache Commons FileUploadæŠ€æœ¯å®ç°äº†ä¸€ä¸ªMultipartResolverå®ç°ç±»ï¼š</li>
<li>CommonsMultipartResolverã€‚å› æ­¤ï¼ŒSpringMVCçš„æ–‡ä»¶ä¸Šä¼ è¿˜éœ€è¦ä¾èµ–Apache Commons FileUploadçš„ç»„ä»¶ã€‚</li>
</ul>
<h3 id="9-2ã€æ–‡ä»¶ä¸Šä¼ "><a href="#9-2ã€æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="9.2ã€æ–‡ä»¶ä¸Šä¼ "></a>9.2ã€æ–‡ä»¶ä¸Šä¼ </h3><ol>
<li>å¯¼å…¥æ–‡ä»¶ä¸Šä¼ çš„jaråŒ…ï¼Œcommons-fileupload ï¼Œ Mavenä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬å¯¼å…¥ä»–çš„ä¾èµ–åŒ… commons-ioåŒ…ï¼›</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ–‡ä»¶ä¸Šä¼ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--servlet-apiå¯¼å…¥é«˜ç‰ˆæœ¬çš„--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>é…ç½®beanï¼šmultipartResolver</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ–‡ä»¶ä¸Šä¼ é…ç½®--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;multipartResolver&quot;</span>  <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- è¯·æ±‚çš„ç¼–ç æ ¼å¼ï¼Œå¿…é¡»å’ŒjSPçš„pageEncodingå±æ€§ä¸€è‡´ï¼Œä»¥ä¾¿æ­£ç¡®è¯»å–è¡¨å•çš„å†…å®¹ï¼Œé»˜è®¤ä¸ºISO-8859-1 --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;defaultEncoding&quot;</span> <span class="attr">value</span>=<span class="string">&quot;utf-8&quot;</span>/&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- ä¸Šä¼ æ–‡ä»¶å¤§å°ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼ˆ10485760=10Mï¼‰ --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxUploadSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;10485760&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxInMemorySize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;40960&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ã€<strong>æ³¨æ„ï¼ï¼ï¼è¿™ä¸ªbenaçš„idå¿…é¡»ä¸ºï¼šmultipartResolver ï¼Œ å¦åˆ™ä¸Šä¼ æ–‡ä»¶ä¼šæŠ¥400çš„é”™è¯¯ï¼åœ¨è¿™é‡Œæ ½è¿‡å‘,æ•™è®­ï¼</strong>ã€‘</p>
<p>CommonsMultipartFile çš„ å¸¸ç”¨æ–¹æ³•ï¼š</p>
<ul>
<li><strong>String getOriginalFilename()ï¼šè·å–ä¸Šä¼ æ–‡ä»¶çš„åŸå</strong></li>
<li><strong>InputStream getInputStream()ï¼šè·å–æ–‡ä»¶æµ</strong></li>
<li><strong>void transferTo(File dest)ï¼šå°†ä¸Šä¼ æ–‡ä»¶ä¿å­˜åˆ°ä¸€ä¸ªç›®å½•æ–‡ä»¶ä¸­</strong></li>
</ul>
<p>æˆ‘ä»¬å»å®é™…æµ‹è¯•ä¸€ä¸‹</p>
<ol>
<li>ç¼–å†™å‰ç«¯é¡µé¢</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/upload&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;file&quot;</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;upload&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li><strong>Controller</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.commons.CommonsMultipartFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.URLEncoder;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FileController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//@RequestParam(&quot;file&quot;) å°†name=fileæ§ä»¶å¾—åˆ°çš„æ–‡ä»¶å°è£…æˆCommonsMultipartFile å¯¹è±¡</span></span><br><span class="line">    <span class="comment">//æ‰¹é‡ä¸Šä¼ CommonsMultipartFileåˆ™ä¸ºæ•°ç»„å³å¯</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/upload&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">fileUpload</span><span class="params">(<span class="meta">@RequestParam(&quot;file&quot;)</span> CommonsMultipartFile file , HttpServletRequest request)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è·å–æ–‡ä»¶å : file.getOriginalFilename();</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">uploadFileName</span> <span class="operator">=</span> file.getOriginalFilename();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//å¦‚æœæ–‡ä»¶åä¸ºç©ºï¼Œç›´æ¥å›åˆ°é¦–é¡µï¼</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="string">&quot;&quot;</span>.equals(uploadFileName))&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;redirect:/index.jsp&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸Šä¼ æ–‡ä»¶å : &quot;</span>+uploadFileName);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä¸Šä¼ è·¯å¾„ä¿å­˜è®¾ç½®</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> request.getServletContext().getRealPath(<span class="string">&quot;/upload&quot;</span>);</span><br><span class="line">        <span class="comment">//å¦‚æœè·¯å¾„ä¸å­˜åœ¨ï¼Œåˆ›å»ºä¸€ä¸ª</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">realPath</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(path);</span><br><span class="line">        <span class="keyword">if</span> (!realPath.exists())&#123;</span><br><span class="line">            realPath.mkdir();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸Šä¼ æ–‡ä»¶ä¿å­˜åœ°å€ï¼š&quot;</span>+realPath);</span><br><span class="line"></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> file.getInputStream(); <span class="comment">//æ–‡ä»¶è¾“å…¥æµ</span></span><br><span class="line">        <span class="type">OutputStream</span> <span class="variable">os</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(realPath,uploadFileName)); <span class="comment">//æ–‡ä»¶è¾“å‡ºæµ</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//è¯»å–å†™å‡º</span></span><br><span class="line">        <span class="type">int</span> len=<span class="number">0</span>;</span><br><span class="line">        <span class="type">byte</span>[] buffer = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">while</span> ((len=is.read(buffer))!=-<span class="number">1</span>)&#123;</span><br><span class="line">            os.write(buffer,<span class="number">0</span>,len);</span><br><span class="line">            os.flush();</span><br><span class="line">        &#125;</span><br><span class="line">        os.close();</span><br><span class="line">        is.close();</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/index.jsp&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>æµ‹è¯•ä¸Šä¼ æ–‡ä»¶</li>
</ol>
<p><strong>é‡‡ç”¨file.Transto æ¥ä¿å­˜ä¸Šä¼ çš„æ–‡ä»¶</strong></p>
<ol>
<li>ç¼–å†™Controller</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* é‡‡ç”¨file.Transto æ¥ä¿å­˜ä¸Šä¼ çš„æ–‡ä»¶</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/upload2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String  <span class="title function_">fileUpload2</span><span class="params">(<span class="meta">@RequestParam(&quot;file&quot;)</span> CommonsMultipartFile file, HttpServletRequest request)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//ä¸Šä¼ è·¯å¾„ä¿å­˜è®¾ç½®</span></span><br><span class="line">   <span class="type">String</span> <span class="variable">path</span> <span class="operator">=</span> request.getServletContext().getRealPath(<span class="string">&quot;/upload&quot;</span>);</span><br><span class="line">   <span class="type">File</span> <span class="variable">realPath</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(path);</span><br><span class="line">   <span class="keyword">if</span> (!realPath.exists())&#123;</span><br><span class="line">       realPath.mkdir();</span><br><span class="line">  &#125;</span><br><span class="line">   <span class="comment">//ä¸Šä¼ æ–‡ä»¶åœ°å€</span></span><br><span class="line">   System.out.println(<span class="string">&quot;ä¸Šä¼ æ–‡ä»¶ä¿å­˜åœ°å€ï¼š&quot;</span>+realPath);</span><br><span class="line"></span><br><span class="line">   <span class="comment">//é€šè¿‡CommonsMultipartFileçš„æ–¹æ³•ç›´æ¥å†™æ–‡ä»¶ï¼ˆæ³¨æ„è¿™ä¸ªæ—¶å€™ï¼‰</span></span><br><span class="line">   file.transferTo(<span class="keyword">new</span> <span class="title class_">File</span>(realPath +<span class="string">&quot;/&quot;</span>+ file.getOriginalFilename()));</span><br><span class="line"></span><br><span class="line">   <span class="keyword">return</span> <span class="string">&quot;redirect:/index.jsp&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>å‰ç«¯è¡¨å•æäº¤åœ°å€ä¿®æ”¹</li>
<li>è®¿é—®æäº¤æµ‹è¯•</li>
</ol>
<h3 id="9-3ã€æ–‡ä»¶ä¸‹è½½"><a href="#9-3ã€æ–‡ä»¶ä¸‹è½½" class="headerlink" title="9.3ã€æ–‡ä»¶ä¸‹è½½"></a>9.3ã€æ–‡ä»¶ä¸‹è½½</h3><p><strong>æ–‡ä»¶ä¸‹è½½æ­¥éª¤ï¼š</strong></p>
<ol>
<li>è®¾ç½® response å“åº”å¤´</li>
<li>è¯»å–æ–‡ä»¶ â€“ InputStream</li>
<li>å†™å‡ºæ–‡ä»¶ â€“ OutputStream</li>
<li>æ‰§è¡Œæ“ä½œ</li>
<li>å…³é—­æµ ï¼ˆå…ˆå¼€åå…³ï¼‰</li>
</ol>
<p><strong>ä»£ç å®ç°ï¼š</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(value=&quot;/download&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">downloads</span><span class="params">(HttpServletResponse response ,HttpServletRequest request)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">   <span class="comment">//è¦ä¸‹è½½çš„å›¾ç‰‡åœ°å€</span></span><br><span class="line">   <span class="type">String</span>  <span class="variable">path</span> <span class="operator">=</span> request.getServletContext().getRealPath(<span class="string">&quot;/upload&quot;</span>);</span><br><span class="line">   <span class="type">String</span>  <span class="variable">fileName</span> <span class="operator">=</span> <span class="string">&quot;åŸºç¡€è¯­æ³•.jpg&quot;</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//1ã€è®¾ç½®response å“åº”å¤´</span></span><br><span class="line">   response.reset(); <span class="comment">//è®¾ç½®é¡µé¢ä¸ç¼“å­˜,æ¸…ç©ºbuffer</span></span><br><span class="line">   response.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>); <span class="comment">//å­—ç¬¦ç¼–ç </span></span><br><span class="line">   response.setContentType(<span class="string">&quot;multipart/form-data&quot;</span>); <span class="comment">//äºŒè¿›åˆ¶ä¼ è¾“æ•°æ®</span></span><br><span class="line">   <span class="comment">//è®¾ç½®å“åº”å¤´</span></span><br><span class="line">   response.setHeader(<span class="string">&quot;Content-Disposition&quot;</span>,</span><br><span class="line">           <span class="string">&quot;attachment;fileName=&quot;</span>+URLEncoder.encode(fileName, <span class="string">&quot;UTF-8&quot;</span>));</span><br><span class="line"></span><br><span class="line">   <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(path,fileName);</span><br><span class="line">   <span class="comment">//2ã€ è¯»å–æ–‡ä»¶--è¾“å…¥æµ</span></span><br><span class="line">   InputStream input=<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file);</span><br><span class="line">   <span class="comment">//3ã€ å†™å‡ºæ–‡ä»¶--è¾“å‡ºæµ</span></span><br><span class="line">   <span class="type">OutputStream</span> <span class="variable">out</span> <span class="operator">=</span> response.getOutputStream();</span><br><span class="line"></span><br><span class="line">   <span class="type">byte</span>[] buff =<span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line">   <span class="type">int</span> index=<span class="number">0</span>;</span><br><span class="line">   <span class="comment">//4ã€æ‰§è¡Œ å†™å‡ºæ“ä½œ</span></span><br><span class="line">   <span class="keyword">while</span>((index= input.read(buff))!= -<span class="number">1</span>)&#123;</span><br><span class="line">       out.write(buff, <span class="number">0</span>, index);</span><br><span class="line">       out.flush();</span><br><span class="line">  &#125;</span><br><span class="line">   out.close();</span><br><span class="line">   input.close();</span><br><span class="line">   <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å‰ç«¯</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/download&quot;</span>&gt;</span>ç‚¹å‡»ä¸‹è½½<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ï¼Œæ–‡ä»¶ä¸‹è½½OK</p>
]]></content>
      <categories>
        <category>javaæ¡†æ¶</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>åç«¯</tag>
        <tag>springæ¡†æ¶</tag>
      </tags>
  </entry>
  <entry>
    <title>jdbc</title>
    <url>/2023/11/05/jdbc/</url>
    <content><![CDATA[<center>jdbc</center>

<span id="more"></span>

<h1 id="1-æ¦‚è¿°"><a href="#1-æ¦‚è¿°" class="headerlink" title="1.æ¦‚è¿°"></a>1.æ¦‚è¿°</h1><h2 id="1-1ã€æ•°æ®åº“é©±åŠ¨"><a href="#1-1ã€æ•°æ®åº“é©±åŠ¨" class="headerlink" title="1.1ã€æ•°æ®åº“é©±åŠ¨"></a>1.1ã€æ•°æ®åº“é©±åŠ¨</h2><p>è¿™é‡Œçš„é©±åŠ¨çš„æ¦‚å¿µå’Œå¹³æ—¶å¬åˆ°çš„é‚£ç§é©±åŠ¨çš„æ¦‚å¿µæ˜¯ä¸€æ ·çš„ï¼Œæ¯”å¦‚å¹³æ—¶è´­ä¹°çš„å£°å¡ï¼Œç½‘å¡ç›´æ¥æ’åˆ°è®¡ç®—æœºä¸Šé¢æ˜¯ä¸èƒ½ç”¨çš„ï¼Œå¿…é¡»è¦å®‰è£…ç›¸åº”çš„é©±åŠ¨ç¨‹åºä¹‹åæ‰èƒ½å¤Ÿä½¿ç”¨å£°å¡å’Œç½‘å¡ï¼ŒåŒæ ·é“ç†ï¼Œæˆ‘ä»¬å®‰è£…å¥½æ•°æ®åº“ä¹‹åï¼Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¹Ÿæ˜¯ä¸èƒ½ç›´æ¥ä½¿ç”¨æ•°æ®åº“çš„ï¼Œå¿…é¡»è¦é€šè¿‡ç›¸åº”çš„æ•°æ®åº“é©±åŠ¨ç¨‹åºï¼Œé€šè¿‡é©±åŠ¨ç¨‹åºå»å’Œæ•°æ®åº“æ‰“äº¤é“ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<img src="/2023/11/05/jdbc/1658449264392-d49dea02-52f7-4430-aada-b69ce7532293.png" class title="img">

<h2 id="1-2ã€JDBCä»‹ç»"><a href="#1-2ã€JDBCä»‹ç»" class="headerlink" title="1.2ã€JDBCä»‹ç»"></a>1.2ã€JDBCä»‹ç»</h2><ul>
<li>JDBCå…¨ç§°ä¸ºï¼šJava Data Base Connectivityï¼ˆjavaæ•°æ®åº“è¿æ¥ï¼‰</li>
<li>SUNå…¬å¸ä¸ºäº†ç®€åŒ–ã€ç»Ÿä¸€å¯¹æ•°æ®åº“çš„æ“ä½œï¼Œå®šä¹‰äº†ä¸€å¥—Javaæ“ä½œæ•°æ®åº“çš„è§„èŒƒï¼ˆæ¥å£ï¼‰ï¼Œç§°ä¹‹ä¸ºJDBCã€‚</li>
<li>è¿™å¥—æ¥å£ç”±æ•°æ®åº“å‚å•†å»å®ç°ï¼Œè¿™æ ·ï¼Œå¼€å‘äººå‘˜åªéœ€è¦å­¦ä¹ jdbcæ¥å£ï¼Œå¹¶é€šè¿‡jdbcåŠ è½½å…·ä½“çš„é©±åŠ¨ï¼Œå°±å¯ä»¥æ“ä½œæ•°æ®åº“</li>
</ul>
<img src="/2023/11/05/jdbc/1658449306133-8d66b402-5815-4851-9a76-85cbf77f4708.png" class title="img">

<h2 id="1-3ã€å¼€å§‹å‡†å¤‡"><a href="#1-3ã€å¼€å§‹å‡†å¤‡" class="headerlink" title="1.3ã€å¼€å§‹å‡†å¤‡"></a>1.3ã€å¼€å§‹å‡†å¤‡</h2><p><strong>ç»„æˆJDBCçš„ä¸¤ä¸ªjaråŒ…ï¼š</strong></p>
<ul>
<li>java.sql</li>
<li>javax.sql</li>
<li>è¿˜éœ€è¦å¯¼å…¥ä¸€ä¸ªæ•°æ®åº“é©±åŠ¨åŒ… mysql-connector-java</li>
</ul>
<p><strong>æ•°æ®åº“é©±åŠ¨åŒ…æˆ‘ä»¬ä¸€èˆ¬å»<strong><strong>mavenä»“åº“</strong></strong>ä¸‹è½½</strong></p>
<ul>
<li>åœ¨mavenä»“åº“æœç´¢mysql-connector-javaï¼Œ<a href="https://mvnrepository.com/">mavenä»“åº“åœ°å€ç›´è¾¾</a></li>
<li><img src="/2023/11/05/jdbc/1658449392277-86796fc0-53fa-4a4d-8484-5823d948f3c5.png" class title="img"></li>
<li>ç‚¹å‡»è¿›å»é€‰æ‹©è‡ªå·±å®‰è£…çš„å¯¹åº”çš„mysqlç‰ˆæœ¬</li>
<li>æˆ‘çš„mysqlç‰ˆæœ¬æ˜¯5.1.47ï¼Œæ‰€ä»¥ä¸‹è½½mysql-connector-java-5.1.47</li>
</ul>
<img src="/2023/11/05/jdbc/1658449421838-d7414636-6579-4d97-bc21-4c713af42955.png" class title="img">



<h2 id="1-4ã€ç¬¬ä¸€ä¸ªJDBCç¨‹åº"><a href="#1-4ã€ç¬¬ä¸€ä¸ªJDBCç¨‹åº" class="headerlink" title="1.4ã€ç¬¬ä¸€ä¸ªJDBCç¨‹åº"></a>1.4ã€ç¬¬ä¸€ä¸ªJDBCç¨‹åº</h2><p>åˆ›å»ºæµ‹è¯•æ•°æ®åº“</p>
<ol>
<li>é¦–å…ˆåœ¨sqlyogé‡Œé¢åˆ›å»ºä¸€ä¸ªjdbcStudy è¡¨</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE jdbcStudy <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci;</span><br><span class="line"></span><br><span class="line">USE jdbcStudy;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `users`(</span><br><span class="line">	id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">	NAME <span class="type">VARCHAR</span>(<span class="number">40</span>),</span><br><span class="line">	PASSWORD <span class="type">VARCHAR</span>(<span class="number">40</span>),</span><br><span class="line">	email <span class="type">VARCHAR</span>(<span class="number">60</span>),</span><br><span class="line">	birthday <span class="type">DATE</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `users`(id,NAME,PASSWORD,email,birthday)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;zhansan&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;zs@sina.com&#x27;</span>,<span class="string">&#x27;1980-12-04&#x27;</span>),</span><br><span class="line">(<span class="number">2</span>,<span class="string">&#x27;lisi&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;lisi@sina.com&#x27;</span>,<span class="string">&#x27;1981-12-04&#x27;</span>),</span><br><span class="line">(<span class="number">3</span>,<span class="string">&#x27;wangwu&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;wangwu@sina.com&#x27;</span>,<span class="string">&#x27;1979-12-04&#x27;</span>);</span><br></pre></td></tr></table></figure>

<ol>
<li>åˆ›å»ºä¸€ä¸ªæ™®é€šé¡¹ç›®</li>
<li><strong>å¯¼å…¥æ•°æ®åº“é©±åŠ¨</strong></li>
</ol>
<ul>
<li>åœ¨modelï¼ˆé¡¹ç›®ï¼‰ä¸‹åˆ›å»ºä¸€ä¸ªdirectorï¼ˆç›®å½•ï¼‰ï¼Œå‘½åä¸ºlib</li>
<li>å°† mysql-connection-java åŒ…å¤åˆ¶ç²˜è´´è¿›æ¥</li>
<li>å³é”®- Add as Libraryï¼ˆæ·»åŠ ä¸ºåº“ï¼‰</li>
</ul>
<img src="/2023/11/05/jdbc/1658450839903-7b4b64ec-9a43-45b0-bba0-e7b67552e031.png" class title="img">

<p>ä¸‹é¢æ¥å¼€å§‹æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªJDBCç¨‹åº,ç¼–å†™ç¨‹åºä»userè¡¨ä¸­è¯»å–æ•°æ®ï¼Œå¹¶æ‰“å°åœ¨å‘½ä»¤è¡Œçª—å£ä¸­</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBC_Demo01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException, SQLException &#123;</span><br><span class="line">        <span class="comment">// 1.åŠ è½½é©±åŠ¨</span></span><br><span class="line">        Class.forName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>); <span class="comment">//å›ºå®šå†™æ³•ï¼ŒåŠ è½½é©±åŠ¨</span></span><br><span class="line">        <span class="comment">// 2.ç”¨æˆ·ä¿¡æ¯å’Œurl</span></span><br><span class="line">        <span class="comment">// useUnicode=true&amp;characterEncoding=utf8&amp;&amp;SSL=true</span></span><br><span class="line">        <span class="comment">// ç¬¬ä¸€ä¸ªæ”¯æŒä¸­æ–‡ç¼–ç ï¼Œç¬¬äºŒä¸ªè®¾ç½®ä¸­æ–‡å­—ç¬¦é›†ä¸ºutf-8,ç¬¬ä¸‰ä¸ªä½¿ç”¨å®‰å…¨çš„è¿æ¥</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/æ•°æ®åº“åå­—?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=true&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">        <span class="comment">// 3.è¿æ¥æˆåŠŸï¼Œä¼šè¿”å›æ•°æ®åº“å¯¹è±¡ connectionä»£è¡¨æ•°æ®åº“</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(url, username, password);</span><br><span class="line">        <span class="comment">// 4.Statementæ‰§è¡Œsqlå¯¹è±¡</span></span><br><span class="line">        <span class="type">Statement</span> <span class="variable">statement</span> <span class="operator">=</span> connection.createStatement();</span><br><span class="line">        <span class="comment">// 5.æ‰§è¡Œsqlçš„å¯¹è±¡å»æ‰§è¡Œsqlï¼Œå¯èƒ½å­˜åœ¨ç»“æœï¼ŒæŸ¥çœ‹è¿”å›ä¿¡æ¯</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;SELECT * FROM users&quot;</span>;</span><br><span class="line">        <span class="comment">// resultSet è¿”å›çš„ç»“æœé›†ï¼Œç»“æœé›†ä¸­å°è£…äº†æˆ‘ä»¬å…¨éƒ¨çš„æŸ¥è¯¢å‡ºæ¥çš„ç»“æœ</span></span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">resultSet</span> <span class="operator">=</span> statement.executeQuery(sql);</span><br><span class="line">        <span class="keyword">while</span>(resultSet.next())&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;id=&quot;</span>+resultSet.getObject(<span class="string">&quot;id&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;NAME=&quot;</span>+resultSet.getObject(<span class="string">&quot;NAME&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;PASSWORD=&quot;</span>+resultSet.getObject(<span class="string">&quot;PASSWORD&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;email=&quot;</span>+resultSet.getObject(<span class="string">&quot;email&quot;</span>));</span><br><span class="line">            System.out.println(<span class="string">&quot;birthday=&quot;</span>+resultSet.getObject(<span class="string">&quot;birthday&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 6.é‡Šæ”¾è¿æ¥</span></span><br><span class="line">            resultSet.close();</span><br><span class="line">            statement.close();</span><br><span class="line">            connection.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ­¥éª¤æ€»ç»“ï¼š</p>
<ol>
<li>åŠ è½½é©±åŠ¨</li>
<li>è¿æ¥æ•°æ®åº“ DriverManager</li>
<li>è·å¾—æ‰§è¡Œsqlçš„å¯¹è±¡ Statement</li>
<li>è·å¾—è¿”å›çš„ç»“æœé›†</li>
<li>é‡Šæ”¾è¿æ¥</li>
</ol>
<h1 id="2-å¯¹è±¡è¯´æ˜"><a href="#2-å¯¹è±¡è¯´æ˜" class="headerlink" title="2.å¯¹è±¡è¯´æ˜"></a>2.å¯¹è±¡è¯´æ˜</h1><h2 id="2-1ã€DriverManager"><a href="#2-1ã€DriverManager" class="headerlink" title="2.1ã€DriverManager"></a>2.1ã€DriverManager</h2><ul>
<li><strong>Jdbcç¨‹åºä¸­çš„DriverManagerç”¨äºåŠ è½½é©±åŠ¨ï¼Œå¹¶åˆ›å»ºä¸æ•°æ®åº“çš„è¿æ¥</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// connection ä»£è¡¨æ•°æ®åº“</span></span><br><span class="line"><span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(url, username, password);</span><br><span class="line"></span><br><span class="line"><span class="comment">// äº‹åŠ¡æäº¤</span></span><br><span class="line">connection.commit();</span><br><span class="line"><span class="comment">// äº‹åŠ¡å›æ»š</span></span><br><span class="line">connection.rollback();</span><br><span class="line"><span class="comment">// è®¾ç½®äº‹åŠ¡è‡ªåŠ¨æäº¤</span></span><br><span class="line">connection.setAutoCommit(<span class="literal">true</span>);</span><br><span class="line"><span class="comment">// è®¾ç½®äº‹åŠ¡ä¸è‡ªåŠ¨æäº¤</span></span><br><span class="line">connection.setAutoCommit(<span class="literal">false</span>);</span><br></pre></td></tr></table></figure>

<h2 id="2-2ã€URL"><a href="#2-2ã€URL" class="headerlink" title="2.2ã€URL"></a>2.2ã€URL</h2><p>URLç”¨äºæ ‡è¯†æ•°æ®åº“çš„ä½ç½®ï¼Œé€šè¿‡URLåœ°å€å‘Šè¯‰JDBCç¨‹åºè¿æ¥å“ªä¸ªæ•°æ®åº“ï¼ŒURLçš„å†™æ³•ä¸ºï¼š</p>
<img src="/2023/11/05/jdbc/1658452070525-b5871f7e-2b6e-405b-9ca4-be5768c9908a.png" class title="img">

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//jdbc:mysql://ä¸»æœºåœ°å€:ç«¯å£å·/æ•°æ®åº“å?å‚æ•°1&amp;å‚æ•°2&amp;å‚æ•°3</span></span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/jdbcstudy?useUnicode=true&amp;characterEncoding=utf8&amp;SSL=true&quot;</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>useUnicode&#x3D;trueæ”¯æŒä¸­æ–‡ç¼–ç </li>
<li>characterEncoding&#x3D;utf8 è®¾ç½®ä¸­æ–‡å­—ç¬¦é›†ä¸ºutf-8</li>
<li>SSL&#x3D;true ä½¿ç”¨å®‰å…¨çš„è¿æ¥</li>
</ul>
<p>å¸¸ç”¨æ•°æ®åº“URLåœ°å€çš„å†™æ³•ï¼š</p>
<ul>
<li>Oracleå†™æ³•ï¼šjdbc:oracle:thin:@localhost:1521:sid</li>
<li>SqlServerå†™æ³•ï¼šjdbc:microsoft:sqlserver:&#x2F;&#x2F;localhost:1433; DatabaseName&#x3D;sid</li>
<li>MySqlå†™æ³•ï¼šjdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;sid</li>
</ul>
<h2 id="2-3ã€Statement"><a href="#2-3ã€Statement" class="headerlink" title="2.3ã€Statement"></a>2.3ã€Statement</h2><p>Jdbcç¨‹åºä¸­çš„Statementå¯¹è±¡ç”¨äºå‘æ•°æ®åº“å‘é€SQLè¯­å¥ï¼Œ Statementå¯¹è±¡å¸¸ç”¨æ–¹æ³•ï¼š</p>
<ul>
<li>executeQuery(String sql)ï¼šç”¨äºå‘æ•°æ®å‘é€æŸ¥è¯¢è¯­å¥ã€‚</li>
<li>executeUpdate(String sql)ï¼šç”¨äºå‘æ•°æ®åº“å‘é€insertã€updateæˆ–deleteè¯­å¥</li>
<li>execute(String sql)ï¼šç”¨äºå‘æ•°æ®åº“å‘é€ä»»æ„sqlè¯­å¥</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 4.Statementæ˜¯æ‰§è¡Œsqlçš„å¯¹è±¡,   PrepareStatementä¹Ÿæ˜¯æ‰§è¡Œsqlçš„å¯¹è±¡,ä¹‹åä¼šä½¿ç”¨</span></span><br><span class="line"><span class="type">Statement</span> <span class="variable">statement</span> <span class="operator">=</span> connection.createStatement();</span><br><span class="line"></span><br><span class="line">statement.executeQuery(sql);   <span class="comment">// æŸ¥è¯¢æ“ä½œè¿”å›ResultSet</span></span><br><span class="line">statement.execute(sql);  		  <span class="comment">//æ‰§è¡Œä»»ä½•sql</span></span><br><span class="line">statement.executeUpdate();     <span class="comment">// æ›´æ–°,æ’å…¥,åˆ é™¤éƒ½æ˜¯ç”¨è¿™ä¸ª,è¿”å›ä¸€ä¸ªå—å½±å“çš„è¡Œæ•°</span></span><br></pre></td></tr></table></figure>

<h2 id="2-4ã€ResltSet"><a href="#2-4ã€ResltSet" class="headerlink" title="2.4ã€ResltSet"></a>2.4ã€ResltSet</h2><p>Jdbcç¨‹åºä¸­çš„ResultSetç”¨äºä»£è¡¨Sqlè¯­å¥çš„æ‰§è¡Œç»“æœï¼ŒResultSetæ˜¯ç”¨äºå°è£…æ‰§è¡Œç»“æœçš„ï¼Œæ‰€ä»¥è¯¥å¯¹è±¡æä¾›çš„éƒ½æ˜¯ç”¨äºè·å–æ•°æ®çš„getæ–¹æ³•ï¼š</p>
<p>ResultSet æŸ¥è¯¢çš„ç»“æœé›†ï¼Œå°è£…äº†æ‰€æœ‰çš„ç»“æœé›†</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// resultSet è¿”å›çš„ç»“æœé›†ï¼Œç»“æœé›†ä¸­å°è£…äº†æˆ‘ä»¬å…¨éƒ¨çš„æŸ¥è¯¢å‡ºæ¥çš„ç»“æœ</span></span><br><span class="line"><span class="type">ResultSet</span> <span class="variable">resultSet</span> <span class="operator">=</span> statement.executeQuery(sql);</span><br><span class="line"></span><br><span class="line">resultSet.getObject(); <span class="comment">//åœ¨ä¸çŸ¥é“æ•°æ®åº“è¡¨åˆ—ç±»å‹çš„æƒ…å†µä¸‹ä½¿ç”¨</span></span><br><span class="line"><span class="comment">// å¦‚æœçŸ¥é“æ•°æ®åº“è¡¨åˆ—çš„ç±»å‹å°±ä½¿ç”¨æŒ‡å®šçš„ç±»å‹</span></span><br><span class="line">resultSet.getString();</span><br><span class="line">resultSet.getInt();</span><br><span class="line">resultSet.getFloat();</span><br><span class="line">resultSet.getDate();</span><br></pre></td></tr></table></figure>

<ul>
<li>éå†</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">resultSet.next(); <span class="comment">// ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªæ•°æ®</span></span><br></pre></td></tr></table></figure>

<h2 id="2-5ã€é‡Šæ”¾èµ„æº"><a href="#2-5ã€é‡Šæ”¾èµ„æº" class="headerlink" title="2.5ã€é‡Šæ”¾èµ„æº"></a>2.5ã€é‡Šæ”¾èµ„æº</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">resultSet.close();</span><br><span class="line">statement.close();</span><br><span class="line">connection.close();</span><br></pre></td></tr></table></figure>

<h1 id="3-statementå¯¹è±¡è¯¦è§£"><a href="#3-statementå¯¹è±¡è¯¦è§£" class="headerlink" title="3.statementå¯¹è±¡è¯¦è§£"></a>3.statementå¯¹è±¡è¯¦è§£</h1><p>jdbcä¸­statementå¯¹è±¡ï¼š</p>
<ul>
<li>ç”¨äºå‘æ•°æ®åº“å‘é€SQLè¯­å¥</li>
<li>æƒ³å®Œæˆå¯¹æ•°æ®åº“çš„å¢åˆ æ”¹æŸ¥ï¼Œåªéœ€è¦é€šè¿‡è¿™ä¸ªå¯¹è±¡å‘æ•°æ®åº“å‘é€å¢åˆ æ”¹æŸ¥è¯­å¥å³å¯</li>
<li>Statement å¯¹è±¡çš„ executeUpdate æ–¹æ³•,ç”¨äºå‘æ•°æ®åº“å‘é€å¢åˆ æ”¹æŸ¥çš„sqlè¯­å¥</li>
<li>executeUpdate æ‰§è¡Œå®Œåï¼Œå°†ä¼šè¿”å›ä¸€ä¸ªæ•´æ•°(å³å¢åˆ æ”¹æŸ¥è¯­å¥å¯¼è‡´äº†æ•°æ®åº“å‡ è¡Œæ•°æ®å‘ç”Ÿå˜åŒ–)</li>
<li>Statement.executeQueryæ–¹æ³•ç”¨äºå‘æ•°æ®åº“å‘é€æŸ¥è¯¢è¯­å¥</li>
<li>executeQueryæ–¹æ³•è¿”å›ä»£è¡¨æŸ¥è¯¢ç»“æœçš„ResultSetå¯¹è±¡</li>
</ul>
<h2 id="3-1ã€createæ“ä½œ"><a href="#3-1ã€createæ“ä½œ" class="headerlink" title="3.1ã€createæ“ä½œ"></a>3.1ã€createæ“ä½œ</h2><p>ä½¿ç”¨executeUpdate(String sql)æ–¹æ³•å®Œæˆæ•°æ®æ·»åŠ æ“ä½œï¼Œç¤ºä¾‹æ“ä½œ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Statement</span> <span class="variable">st</span> <span class="operator">=</span> conn.createStatement();</span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;insert into user(â€¦.) values(â€¦..) &quot;</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> st.executeUpdate(sql);</span><br><span class="line"><span class="keyword">if</span>(num&gt;<span class="number">0</span>)&#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;æ’å…¥æˆåŠŸï¼ï¼ï¼&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-2ã€updateæ“ä½œ"><a href="#3-2ã€updateæ“ä½œ" class="headerlink" title="3.2ã€updateæ“ä½œ"></a>3.2ã€updateæ“ä½œ</h2><p>ä½¿ç”¨executeUpdate(String sql)æ–¹æ³•å®Œæˆæ•°æ®ä¿®æ”¹æ“ä½œï¼Œç¤ºä¾‹æ“ä½œï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Statement</span> <span class="variable">st</span> <span class="operator">=</span> conn.createStatement();</span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update user set name=&#x27;&#x27; where name=&#x27;&#x27;&quot;</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> st.executeUpdate(sql);</span><br><span class="line"><span class="keyword">if</span>(num&gt;<span class="number">0</span>)&#123;</span><br><span class="line">	System.out.println(<span class="string">&quot;ä¿®æ”¹æˆåŠŸï¼ï¼ï¼&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-3ã€readæ“ä½œ"><a href="#3-3ã€readæ“ä½œ" class="headerlink" title="3.3ã€readæ“ä½œ"></a>3.3ã€readæ“ä½œ</h2><p>ä½¿ç”¨executeQuery(String sql)æ–¹æ³•å®Œæˆæ•°æ®æŸ¥è¯¢æ“ä½œï¼Œç¤ºä¾‹æ“ä½œï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Statement</span> <span class="variable">st</span> <span class="operator">=</span> conn.createStatement();</span><br><span class="line"><span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from user where id=1&quot;</span>;</span><br><span class="line"><span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> st.executeUpdate(sql);</span><br><span class="line"><span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">	<span class="comment">//æ ¹æ®è·å–åˆ—çš„æ•°æ®ç±»å‹ï¼Œåˆ†åˆ«è°ƒç”¨rsçš„ç›¸åº”æ–¹æ³•æ˜ å°„åˆ°javaå¯¹è±¡ä¸­</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="4-JdbcUtilså·¥å…·ç±»å°è£…"><a href="#4-JdbcUtilså·¥å…·ç±»å°è£…" class="headerlink" title="4.JdbcUtilså·¥å…·ç±»å°è£…"></a>4.JdbcUtilså·¥å…·ç±»å°è£…</h1><ol>
<li>åœ¨srcç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªdb.propertiesæ–‡ä»¶,ä»£ç å¦‚ä¸‹(å¯æ ¹æ®è‡ªå·±çš„æ•°æ®åº“åè´¦æˆ·å¯†ç ä¿®æ”¹)</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">driver=com.mysql.cj.jdbc.Driver</span><br><span class="line">url=jdbc:mysql:<span class="comment">//localhost:3306/jdbcStudy?</span></span><br><span class="line">useUnicode=<span class="literal">true</span>&amp;characterEncoding=utf8&amp;useSSL=<span class="literal">true</span></span><br><span class="line">username=root</span><br><span class="line">password=root</span><br></pre></td></tr></table></figure>

<ol>
<li>æ–°å»º utils åŒ…,æ–°å»ºä¸€ä¸ªç±»JdbcUtils,ä»£ç å¦‚ä¸‹</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JdbcUtils</span> &#123;</span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">static</span> <span class="type">String</span> <span class="variable">driver</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">static</span> <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">static</span> <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span>  <span class="keyword">static</span> <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span>JdbcUtils.class.getClassLoader().getResourceAsStream(<span class="string">&quot;db.properties&quot;</span>);</span><br><span class="line">            <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">            properties.load(in);</span><br><span class="line"></span><br><span class="line">            driver = properties.getProperty(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">            url = properties.getProperty(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">            username = properties.getProperty(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">            password = properties.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">            <span class="comment">// 1.é©±åŠ¨åªç”¨åŠ è½½ä¸€æ¬¡</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–è¿æ¥</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">return</span> DriverManager.getConnection(url,username,password);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// é‡Šæ”¾è¿æ¥èµ„æº</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">release</span><span class="params">(Connection conn, Statement st, ResultSet rs)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(rs != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                rs.close();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(st != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                st.close();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(conn != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                conn.close();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>ä½¿ç”¨JdbcUtilså·¥å…·ç±»è¿›è¡Œå¢åˆ æ”¹æŸ¥æ“ä½œ</li>
</ul>
<h2 id="4-1ã€æ’å…¥æ•°æ®"><a href="#4-1ã€æ’å…¥æ•°æ®" class="headerlink" title="4.1ã€æ’å…¥æ•°æ®"></a>4.1ã€æ’å…¥æ•°æ®</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestInsert</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Statement</span> <span class="variable">st</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JdbcUtils.getConnection();   <span class="comment">//è·å–æ•°æ®åº“è¿æ¥</span></span><br><span class="line">            st = conn.createStatement();        <span class="comment">//è·å–SQLçš„æ‰§è¡Œå¯¹è±¡</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;INSERT INTO users(id,`NAME`,`PASSWORD`,`email`,`birthday`)&quot;</span> +</span><br><span class="line">                    <span class="string">&quot;VALUES(5,&#x27;kuangshen&#x27;,&#x27;123456&#x27;,&#x27;123456@qq.com&#x27;,&#x27;2020-01-01&#x27;)&quot;</span>;</span><br><span class="line"></span><br><span class="line">            <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> st.executeUpdate(sql);</span><br><span class="line">            <span class="keyword">if</span>(i&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;æ’å…¥æˆåŠŸ&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            JdbcUtils.release(conn,st,rs);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-2ã€åˆ é™¤æ•°æ®"><a href="#4-2ã€åˆ é™¤æ•°æ®" class="headerlink" title="4.2ã€åˆ é™¤æ•°æ®"></a>4.2ã€åˆ é™¤æ•°æ®</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestDelete</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Statement</span> <span class="variable">st</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JdbcUtils.getConnection();   <span class="comment">//è·å–æ•°æ®åº“è¿æ¥</span></span><br><span class="line">            st = conn.createStatement();        <span class="comment">//è·å–SQLçš„æ‰§è¡Œå¯¹è±¡</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;delete from users where id=4&quot;</span>;</span><br><span class="line"></span><br><span class="line">            <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> st.executeUpdate(sql);</span><br><span class="line">            <span class="keyword">if</span>(i&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;åˆ é™¤æˆåŠŸ&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            JdbcUtils.release(conn,st,rs);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-3ã€æ›´æ–°æ•°æ®"><a href="#4-3ã€æ›´æ–°æ•°æ®" class="headerlink" title="4.3ã€æ›´æ–°æ•°æ®"></a>4.3ã€æ›´æ–°æ•°æ®</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestUpdate</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Statement</span> <span class="variable">st</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JdbcUtils.getConnection();   <span class="comment">//è·å–æ•°æ®åº“è¿æ¥</span></span><br><span class="line">            st = conn.createStatement();        <span class="comment">//è·å–SQLçš„æ‰§è¡Œå¯¹è±¡</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update users set</span></span><br><span class="line"><span class="string">name=&#x27;kuangshen&#x27;,email=&#x27;24736743@qq.com&#x27; where id=3&quot;</span>;</span><br><span class="line"></span><br><span class="line">            <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> st.executeUpdate(sql);</span><br><span class="line">            <span class="keyword">if</span>(i&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;æ›´æ–°æˆåŠŸ&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            JdbcUtils.release(conn,st,rs);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-4ã€æŸ¥æ‰¾æ•°æ®"><a href="#4-4ã€æŸ¥æ‰¾æ•°æ®" class="headerlink" title="4.4ã€æŸ¥æ‰¾æ•°æ®"></a>4.4ã€æŸ¥æ‰¾æ•°æ®</h2><ul>
<li>æŸ¥è¯¢ç”¨çš„æ˜¯excuteQuery(sql)ï¼Œå¹¶ä¸”è¿”å›çš„ç»“æœé›†æ˜¯ResultSet</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestSelect</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Statement</span> <span class="variable">st</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JdbcUtils.getConnection();</span><br><span class="line">            st = conn.createStatement();</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from users where id = 3&quot;</span>;</span><br><span class="line">            <span class="comment">// æ³¨æ„æŸ¥è¯¢è¿”å›çš„æ˜¯ç»“æœé›†å¯¹è±¡,ä¸æ˜¯æ•´å‹å¯¹è±¡,è¿™é‡ŒåªæŸ¥è¯¢äº†ä¸€æ¡æ•°æ®</span></span><br><span class="line">            rs = st.executeQuery(sql);</span><br><span class="line">            <span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">                System.out.println(rs.getString(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            JdbcUtils.release(conn,st,rs);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="5-SQLæ³¨å…¥"><a href="#5-SQLæ³¨å…¥" class="headerlink" title="5.SQLæ³¨å…¥"></a>5.SQLæ³¨å…¥</h1><ul>
<li>é€šè¿‡å·§å¦™çš„æŠ€å·§æ¥æ‹¼æ¥å­—ç¬¦ä¸²ï¼Œé€ æˆSQLçŸ­è·¯ï¼Œä»è€Œè·å–æ•°æ®åº“æ•°æ®</li>
<li>å¤§ç™½è¯ï¼šSQLå­˜åœ¨æ¼æ´ï¼Œä¼šè¢«æ”»å‡»å¯¼è‡´æ•°æ®æ³„éœ²</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestSQL</span>æ³¨å…¥ &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// æ­£å¸¸ç™»å½•</span></span><br><span class="line">        login(<span class="string">&quot;kuangshen&quot;</span>,<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">        <span class="comment">// SQLæ³¨å…¥ç™»å½•</span></span><br><span class="line">        <span class="comment">// login(&quot;&#x27;or&#x27;1=1&quot;,&quot;123456&quot;);</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ç™»å½•ä¸šåŠ¡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">login</span><span class="params">(String username,String password)</span>&#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Statement</span> <span class="variable">st</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JdbcUtils.getConnection();   <span class="comment">//è·å–æ•°æ®åº“è¿æ¥</span></span><br><span class="line">            st = conn.createStatement();        <span class="comment">//è·å–SQLçš„æ‰§è¡Œå¯¹è±¡</span></span><br><span class="line">            <span class="comment">// select * from users where `name` = &#x27;kuangshen&#x27; and `password` = &#x27;123456&#x27;</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from users where `name` = &#x27;&quot;</span>+username+<span class="string">&quot;&#x27; and `password` = &#x27;&quot;</span>+password+<span class="string">&quot;&#x27;&quot;</span>;</span><br><span class="line"></span><br><span class="line">            rs= st.executeQuery(sql);</span><br><span class="line">            <span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">                System.out.println(rs.getString(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            JdbcUtils.release(conn,st,rs);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="6-PreparedStatement-å¯¹è±¡"><a href="#6-PreparedStatement-å¯¹è±¡" class="headerlink" title="6.PreparedStatement å¯¹è±¡"></a>6.PreparedStatement å¯¹è±¡</h1><ul>
<li><p>å¯ä»¥é˜²æ­¢SQLæ³¨å…¥,å¹¶ä¸”æ•ˆç‡æ›´é«˜</p>
</li>
<li><p>PreparedStatement æ˜¯Statementçš„å­ç±»</p>
</li>
<li><ul>
<li>Connection.createStament() æ–¹æ³•è·å¾—Statementå¯¹è±¡</li>
<li>Connection.preparedStatement(sql) æ–¹æ³•è·å¾—preparedStatementå¯¹è±¡</li>
</ul>
</li>
<li><p>Statementä¼šä½¿æ•°æ®åº“é¢‘ç¹ç¼–è¯‘SQLï¼Œå¯èƒ½é€ æˆæ•°æ®åº“ç¼“å†²åŒºæº¢å‡º</p>
</li>
<li><p><strong>PreparedStatementå¯å¯¹SQLè¿›è¡Œé¢„ç¼–è¯‘ï¼Œä»è€Œæé«˜æ•°æ®åº“çš„æ‰§è¡Œæ•ˆç‡ã€‚å¹¶ä¸”PreperedStatementå¯¹äºsqlä¸­çš„å‚æ•°ï¼Œå…è®¸ä½¿ç”¨å ä½ç¬¦çš„å½¢å¼è¿›è¡Œæ›¿æ¢ï¼Œç®€åŒ–sqlè¯­å¥çš„ç¼–å†™ã€‚</strong></p>
</li>
</ul>
<h2 id="6-1ã€æ’å…¥æ•°æ®"><a href="#6-1ã€æ’å…¥æ•°æ®" class="headerlink" title="6.1ã€æ’å…¥æ•°æ®"></a>6.1ã€æ’å…¥æ•°æ®</h2><ul>
<li>æ³¨æ„æ˜¯å…ˆç¼–è¯‘sql,ä¹‹åå†æ‰§è¡Œsql</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBC_Insert</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">st</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JdbcUtils.getConnection();</span><br><span class="line">            <span class="comment">// åŒºåˆ«</span></span><br><span class="line">            <span class="comment">// ä½¿ç”¨ ? å ä½ç¬¦ä»£æ›¿å‚æ•°</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;INSERT INTO users(id,`NAME`,`PASSWORD`,`email`,`birthday`) values(?,?,?,?,?)&quot;</span>;</span><br><span class="line">            st = conn.prepareStatement(sql); <span class="comment">//é¢„ç¼–è¯‘SQL,å…ˆå†™sql,ç„¶åä¸æ‰§è¡Œ</span></span><br><span class="line">            <span class="comment">// æ‰‹åŠ¨ç»™å‚æ•°èµ‹å€¼</span></span><br><span class="line">            st.setInt(<span class="number">1</span>,<span class="number">6</span>);</span><br><span class="line">            st.setString(<span class="number">2</span>,<span class="string">&quot;qinxiao&quot;</span>);</span><br><span class="line">            st.setString(<span class="number">3</span>,<span class="string">&quot;1232112&quot;</span>);</span><br><span class="line">            st.setString(<span class="number">4</span>,<span class="string">&quot;110123@qq.com&quot;</span>);</span><br><span class="line">            <span class="comment">// æ³¨æ„ç‚¹: sql.Date    æ•°æ®åº“ç”¨çš„    java.sql.Date()</span></span><br><span class="line">            <span class="comment">//        util.Date   javaä¸­çš„     new Date().getTime() è·å¾—æ—¶é—´æˆ³</span></span><br><span class="line">            st.setDate(<span class="number">5</span>,<span class="keyword">new</span> <span class="title class_">java</span>.sql.Date(<span class="keyword">new</span> <span class="title class_">Date</span>().getTime()));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ‰§è¡Œ</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> st.executeUpdate();</span><br><span class="line">            <span class="keyword">if</span>(i &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;æ’å…¥æˆåŠŸ!&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            JdbcUtils.release(conn,st,<span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-2ã€åˆ é™¤æ•°æ®"><a href="#6-2ã€åˆ é™¤æ•°æ®" class="headerlink" title="6.2ã€åˆ é™¤æ•°æ®"></a>6.2ã€åˆ é™¤æ•°æ®</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * PreparedStatement å¯¹è±¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBC_Delete</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">st</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JdbcUtils.getConnection();</span><br><span class="line">            <span class="comment">// åŒºåˆ«</span></span><br><span class="line">            <span class="comment">// ä½¿ç”¨ ? å ä½ç¬¦ä»£æ›¿å‚æ•°</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;delete from users where id=?&quot;</span>;</span><br><span class="line">            st = conn.prepareStatement(sql);</span><br><span class="line">            <span class="comment">// æ‰‹åŠ¨ç»™å‚æ•°èµ‹å€¼</span></span><br><span class="line">            st.setInt(<span class="number">1</span>,<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ‰§è¡Œ</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> st.executeUpdate();</span><br><span class="line">            <span class="keyword">if</span>(i &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;åˆ é™¤æˆåŠŸ!&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            JdbcUtils.release(conn,st,<span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-3ã€æ›´æ–°æ•°æ®"><a href="#6-3ã€æ›´æ–°æ•°æ®" class="headerlink" title="6.3ã€æ›´æ–°æ•°æ®"></a>6.3ã€æ›´æ–°æ•°æ®</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBC_Update</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">st</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JdbcUtils.getConnection();</span><br><span class="line">            <span class="comment">// åŒºåˆ«</span></span><br><span class="line">            <span class="comment">// ä½¿ç”¨ ? å ä½ç¬¦ä»£æ›¿å‚æ•°</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;update users set `name`=? where id=?&quot;</span>;</span><br><span class="line">            st = conn.prepareStatement(sql);</span><br><span class="line">            <span class="comment">// æ‰‹åŠ¨ç»™å‚æ•°èµ‹å€¼</span></span><br><span class="line">            st.setString(<span class="number">1</span>,<span class="string">&quot;æ™“ç³&quot;</span>);</span><br><span class="line">            st.setInt(<span class="number">2</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ‰§è¡Œ</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> st.executeUpdate();</span><br><span class="line">            <span class="keyword">if</span>(i &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;ä¿®æ”¹æˆåŠŸ!&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            JdbcUtils.release(conn,st,<span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-4ã€æŸ¥æ‰¾æ•°æ®"><a href="#6-4ã€æŸ¥æ‰¾æ•°æ®" class="headerlink" title="6.4ã€æŸ¥æ‰¾æ•°æ®"></a>6.4ã€æŸ¥æ‰¾æ•°æ®</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBC_Select</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">st</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JdbcUtils.getConnection();</span><br><span class="line">            <span class="comment">// åŒºåˆ«</span></span><br><span class="line">            <span class="comment">// ä½¿ç”¨ ? å ä½ç¬¦ä»£æ›¿å‚æ•°</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from users where id = ?&quot;</span>;</span><br><span class="line">            st = conn.prepareStatement(sql);</span><br><span class="line">            <span class="comment">// æ‰‹åŠ¨ç»™å‚æ•°èµ‹å€¼</span></span><br><span class="line">            st.setInt(<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">            <span class="comment">// æ‰§è¡Œ</span></span><br><span class="line">            rs = st.executeQuery();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">                System.out.println(rs.getString(<span class="string">&quot;NAME&quot;</span>));</span><br><span class="line">                System.out.println(rs.getString(<span class="string">&quot;PASSWORD&quot;</span>));</span><br><span class="line">                System.out.println(<span class="string">&quot;=================&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            JdbcUtils.release(conn,st,rs);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-5ã€é¿å…SQLæ³¨å…¥"><a href="#6-5ã€é¿å…SQLæ³¨å…¥" class="headerlink" title="6.5ã€é¿å…SQLæ³¨å…¥"></a>6.5ã€é¿å…SQLæ³¨å…¥</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBC_</span>é¿å…SQLæ³¨å…¥ &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        login(<span class="string">&quot;zhangsan&quot;</span>,<span class="string">&quot;123456&quot;</span>); <span class="comment">// æ­£å¸¸ç™»é™†</span></span><br><span class="line">        login(<span class="string">&quot;&#x27;or &#x27;1=1&quot;</span>,<span class="string">&quot;123456&quot;</span>); <span class="comment">// SQL æ³¨å…¥</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">login</span><span class="params">(String username,String password)</span>&#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">st</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JdbcUtils.getConnection();</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select * from users where name=? and password=?&quot;</span>;</span><br><span class="line"></span><br><span class="line">            st = conn.prepareStatement(sql);</span><br><span class="line">            st.setString(<span class="number">1</span>,username);</span><br><span class="line">            st.setString(<span class="number">2</span>,password);</span><br><span class="line">            rs = st.executeQuery();</span><br><span class="line">            <span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">                System.out.println(rs.getString(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">                System.out.println(rs.getString(<span class="string">&quot;password&quot;</span>));</span><br><span class="line">                System.out.println(<span class="string">&quot;==============&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            JdbcUtils.release(conn,st,rs);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>prepareStatement é˜²æ­¢SQLæ³¨å…¥çš„æœ¬è´¨,æŠŠä¼ é€’è¿›æ¥çš„å‚æ•°å½“åšå­—ç¬¦</li>
<li>å‡è®¾å…¶ä¸­å­˜åœ¨è½¬ä¹‰å­—ç¬¦ï¼Œå°±ç›´æ¥å¿½ç•¥,æ¯”å¦‚è¯´å¼•å·ä¼šè¢«ç›´æ¥è½¬ä¹‰</li>
</ul>
<h1 id="7-IDEAè¿æ¥æ•°æ®åº“"><a href="#7-IDEAè¿æ¥æ•°æ®åº“" class="headerlink" title="7.IDEAè¿æ¥æ•°æ®åº“"></a>7.IDEAè¿æ¥æ•°æ®åº“</h1><ol>
<li>åœ¨ç”¨IDEAè¿æ¥æ•°æ®åº“ä¹‹å‰ï¼Œè¦ç¡®ä¿mysql-connection-java.jaråŒ…å¯¼å…¥ï¼Œè¿‡ç¨‹è¯·å‚ç…§ç›®å½•1.3</li>
<li>æ‰“å¼€IDEA</li>
<li>ç‚¹å‡»å³ä¾§çš„Database</li>
</ol>
<img src="/2023/11/05/jdbc/1658453133773-de8c6364-41fb-4485-bc66-d5d3f5c99c97.png" class title="img">

<ol>
<li>å¦‚æœä½ çš„å³ä¾§æ²¡æœ‰Databaseï¼Œç‚¹å‡»å·¦ä¸‹è§’å°æ¡†æ¡†å°±ä¼šå‡ºæ¥</li>
</ol>
<img src="/2023/11/05/jdbc/1658453150472-5083d159-72b7-42f6-ae0e-2779a8214e88.png" class title="img">

<ol>
<li>ç‚¹å‡»Database</li>
</ol>
<img src="/2023/11/05/jdbc/1658453164310-b81fb2c6-8d1c-4b92-b02a-55f38b71a740.png" class title="img">

<ol>
<li>è¾“å…¥æ•°æ®åº“ç”¨æˆ·åå¯†ç æµ‹è¯•è¿æ¥</li>
</ol>
<img src="/2023/11/05/jdbc/1658453176569-5d45e297-5042-492c-9ce6-1d5b2d56a1f7.png" class title="img">

<ol>
<li>è¿æ¥æˆåŠŸåå¯ä»¥ä¿®æ”¹è¿æ¥çš„æ•°æ®åº“</li>
</ol>
<img src="/2023/11/05/jdbc/1658453190738-5682ea60-18ac-4ca4-9280-8aed3086cef1.png" class title="img">

<ol>
<li>ç‚¹å‡»Schemas,å¯ä»¥å‹¾é€‰è‡ªå·±æƒ³è¿æ¥çš„æ•°æ®åº“å³å¯</li>
</ol>
<img src="/2023/11/05/jdbc/1658453209942-9d7409bc-4eeb-4bb8-af85-ec9aff2fdb14.png" class title="img">

<ol>
<li>åŒå‡»è¡¨å³å¯æ‰“å¼€è¡¨ä¸­æ•°æ®</li>
</ol>
<img src="/2023/11/05/jdbc/1658453220457-35316b37-0eb8-41a3-89e7-81235f865ec0.png" class title="img">

<ol>
<li>åœ¨è¡¨ä¸­å¯ä»¥ç›´æ¥ä¿®æ”¹ï¼Œ<strong>ä½†æ˜¯ä¿®æ”¹å®Œè¦è¿›è¡Œæäº¤</strong></li>
</ol>
<img src="/2023/11/05/jdbc/1658453233714-27fe935c-2f70-46db-9462-0bfbf2a01757.png" class title="img">

<h1 id="8-JDBCæ“ä½œäº‹åŠ¡"><a href="#8-JDBCæ“ä½œäº‹åŠ¡" class="headerlink" title="8.JDBCæ“ä½œäº‹åŠ¡"></a>8.JDBCæ“ä½œäº‹åŠ¡</h1><p>æ­¥éª¤ï¼š</p>
<ol>
<li>å¼€å¯äº‹åŠ¡ï¼šconn.setAutoCommit(false);</li>
</ol>
<ul>
<li><ul>
<li>è¿™é‡Œçš„ fasle æ˜¯å› ä¸ºå…³é—­æ•°æ®åº“è‡ªåŠ¨æäº¤,äº‹åŠ¡ä¼šè‡ªåŠ¨å¼€å¯</li>
<li>åœ¨sqlä¸­éœ€è¦ä¸¤æ­¥ï¼Œä½†æ˜¯åœ¨javaä¸­åªéœ€è¦ä¸€æ­¥</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">SET</span> <span class="variable">autocommit</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">/*å…³é—­è‡ªåŠ¨æäº¤*/</span></span><br><span class="line">start transaction;	<span class="comment">/*å¼€å§‹ä¸€ä¸ªäº‹åŠ¡*/</span></span><br></pre></td></tr></table></figure>

<ol>
<li>ä¸€ç»„ä¸šåŠ¡æ‰§è¡Œå®Œæ¯•,æäº¤äº‹åŠ¡</li>
<li>å¯ä»¥åœ¨ catch è¯­å¥ä¸­æ˜¾å¼çš„å®šä¹‰å›æ»šè¯­å¥</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TransactionDemo01</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">st</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            conn = JdbcUtils.getConnection();</span><br><span class="line">            <span class="comment">// å…³é—­æ•°æ®åº“çš„è‡ªåŠ¨æäº¤,è‡ªåŠ¨ä¼šå¼€å¯äº‹åŠ¡</span></span><br><span class="line">            conn.setAutoCommit(<span class="literal">false</span>); <span class="comment">// å¼€å¯äº‹åŠ¡</span></span><br><span class="line"></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql1</span> <span class="operator">=</span> <span class="string">&quot;update account set money = money-100 where name =&#x27;A&quot;</span>;</span><br><span class="line">            st = conn.prepareStatement(sql1);</span><br><span class="line">            st.executeUpdate();</span><br><span class="line"></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql2</span> <span class="operator">=</span> <span class="string">&quot;update account set money = money+100 where name =&#x27;B&quot;</span>;</span><br><span class="line">            st = conn.prepareStatement(sql2);</span><br><span class="line">            st.executeUpdate();</span><br><span class="line"></span><br><span class="line">            <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">1</span>/<span class="number">0</span>;    <span class="comment">// æ‰‹åŠ¨åˆ¶é€ å¼‚å¸¸</span></span><br><span class="line">            <span class="comment">// ä¸šåŠ¡å®Œæ¯•ï¼Œæäº¤äº‹åŠ¡</span></span><br><span class="line">            conn.commit();</span><br><span class="line">            System.out.println(<span class="string">&quot;æˆåŠŸ&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                conn.rollback();  <span class="comment">//å¦‚æœå¤±è´¥åˆ™å›æ»šäº‹åŠ¡</span></span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException throwables) &#123;</span><br><span class="line">                throwables.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="9-æ•°æ®åº“è¿æ¥æ± "><a href="#9-æ•°æ®åº“è¿æ¥æ± " class="headerlink" title="9.æ•°æ®åº“è¿æ¥æ± "></a>9.æ•°æ®åº“è¿æ¥æ± </h1><p>æ•°æ®åº“è¿æ¥â¡æ‰§è¡Œå®Œæ¯• â¡ é‡Šæ”¾èµ„æºï¼Œåœ¨è¿æ¥ â¡ é‡Šæ”¾è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œååˆ†æµªè´¹èµ„æºï¼Œå› æ­¤æ± åŒ–æŠ€æœ¯å°±å‡ºç°äº†ã€‚</p>
<ul>
<li><strong>æ± åŒ–æŠ€æœ¯ï¼šå‡†å¤‡ä¸€äº›é¢„å…ˆçš„èµ„æºï¼Œè¿‡æ¥å°±è¿æ¥é¢„å…ˆå‡†å¤‡å¥½çš„</strong></li>
<li>æœ€å°è¿æ¥æ•°ï¼š10</li>
<li>æœ€å¤§è¿æ¥æ•°ï¼š15</li>
<li>è¶…è¿‡æœ€å¤§è¿æ¥æ•°åˆ™åé¢çš„éœ€è¦æ’é˜Ÿç­‰å¾…</li>
<li>ç­‰å¾…è¶…æ—¶ï¼š100ms</li>
</ul>
<h2 id="9-1ã€æ­¥éª¤"><a href="#9-1ã€æ­¥éª¤" class="headerlink" title="9.1ã€æ­¥éª¤"></a>9.1ã€æ­¥éª¤</h2><p>ç¼–å†™è¿æ¥æ± ï¼Œå®ç°ä¸€ä¸ªæ¥å£ DataSource</p>
<p>å¼€æºæ•°æ®æºå®ç°(æ‹¿æ¥å³ç”¨)</p>
<ul>
<li>DBCP</li>
<li>C3P0</li>
<li>Druidï¼šé˜¿é‡Œå·´å·´</li>
</ul>
<p>ä½¿ç”¨äº†è¿™äº›æ•°æ®åº“è¿æ¥æ± ä¹‹åï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®å¼€å‘ä¸­å°±ä¸éœ€è¦ç¼–å†™è¿æ¥æ•°æ®åº“çš„ä»£ç äº†</p>
<h2 id="9-2ã€DBCP"><a href="#9-2ã€DBCP" class="headerlink" title="9.2ã€DBCP"></a>9.2ã€DBCP</h2><p>éœ€è¦ç”¨åˆ°çš„jar åŒ…</p>
<ul>
<li>commons-dbcp-1.4</li>
<li>commons-pool-1.6</li>
</ul>
<p>åœ¨Mavenå®˜ç½‘ä¸‹è½½å³å¯ï¼š</p>
<ul>
<li>Mavenå®˜ç½‘ï¼š <a href="https://mvnrepository.com/">Mavenå®˜ç½‘ç›´è¾¾</a></li>
</ul>
<img src="/2023/11/05/jdbc/1658453873858-5e7153dc-be13-44f0-8909-c15ea25a1dd6.png" class title="img">

<img src="/2023/11/05/jdbc/1658453898069-d64fad54-5cbb-4e49-9d4a-4a3985f6d494.png" class title="img">

<ol>
<li>åœ¨srcç›®å½•ä¸‹æ–°å»ºdbcpconfig.properties</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">#è¿æ¥è®¾ç½®</span><br><span class="line">driverClassName=com.mysql.cj.jdbc.Driver</span><br><span class="line">url=jdbc:mysql:<span class="comment">//localhost:3306/jdbcstudy?useUnicode=true&amp;characterEncoding=utf8&amp;useSSL=true</span></span><br><span class="line">username=root</span><br><span class="line">password=root</span><br><span class="line"></span><br><span class="line">#!-- åˆå§‹åŒ–è¿æ¥ --</span><br><span class="line">initialSize=<span class="number">10</span></span><br><span class="line"></span><br><span class="line">#æœ€å¤§è¿æ¥æ•°é‡</span><br><span class="line">maxActive=<span class="number">50</span></span><br><span class="line"></span><br><span class="line">#!-- æœ€å¤§ç©ºé—²è¿æ¥ --</span><br><span class="line">maxIdle=<span class="number">20</span></span><br><span class="line"></span><br><span class="line">#!-- æœ€å°ç©ºé—²è¿æ¥ --</span><br><span class="line">minIdle=<span class="number">5</span></span><br><span class="line"></span><br><span class="line">#!-- è¶…æ—¶ç­‰å¾…æ—¶é—´ä»¥æ¯«ç§’ä¸ºå•ä½ <span class="number">6000</span>æ¯«ç§’/<span class="number">1000</span>ç­‰äº<span class="number">60</span>ç§’ --</span><br><span class="line">maxWait=<span class="number">60000</span></span><br><span class="line">#JDBCé©±åŠ¨å»ºç«‹è¿æ¥æ—¶é™„å¸¦çš„è¿æ¥å±æ€§å±æ€§çš„æ ¼å¼å¿…é¡»ä¸ºè¿™æ ·ï¼šã€å±æ€§å=property;ã€‘</span><br><span class="line">#æ³¨æ„ï¼šuser ä¸ password ä¸¤ä¸ªå±æ€§ä¼šè¢«æ˜ç¡®åœ°ä¼ é€’ï¼Œå› æ­¤è¿™é‡Œä¸éœ€è¦åŒ…å«ä»–ä»¬ã€‚</span><br><span class="line">connectionProperties=useUnicode=<span class="literal">true</span>;characterEncoding=UTF8</span><br><span class="line"></span><br><span class="line">#æŒ‡å®šç”±è¿æ¥æ± æ‰€åˆ›å»ºçš„è¿æ¥çš„è‡ªåŠ¨æäº¤ï¼ˆauto-commitï¼‰çŠ¶æ€ã€‚</span><br><span class="line">defaultAutoCommit=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line">#driver <span class="keyword">default</span> æŒ‡å®šç”±è¿æ¥æ± æ‰€åˆ›å»ºçš„è¿æ¥çš„åªè¯»ï¼ˆread-onlyï¼‰çŠ¶æ€ã€‚</span><br><span class="line">#å¦‚æœæ²¡æœ‰è®¾ç½®è¯¥å€¼ï¼Œåˆ™â€œsetReadOnlyâ€æ–¹æ³•å°†ä¸è¢«è°ƒç”¨ã€‚ï¼ˆæŸäº›é©±åŠ¨å¹¶ä¸æ”¯æŒåªè¯»æ¨¡å¼ï¼Œå¦‚ï¼šInformixï¼‰</span><br><span class="line">defaultReadOnly=</span><br><span class="line"></span><br><span class="line">#driver <span class="keyword">default</span> æŒ‡å®šç”±è¿æ¥æ± æ‰€åˆ›å»ºçš„è¿æ¥çš„äº‹åŠ¡çº§åˆ«ï¼ˆTransactionIsolationï¼‰ã€‚</span><br><span class="line">#å¯ç”¨å€¼ä¸ºä¸‹åˆ—ä¹‹ä¸€ï¼šï¼ˆè¯¦æƒ…å¯è§javadocã€‚ï¼‰NONE,READ_UNCOMMITTED, READ_COMMITTED, REPEATABLE_READ, SERIALIZABLE</span><br><span class="line">defaultTransactionIsolation=READ_UNCOMMITTED</span><br></pre></td></tr></table></figure>

<ol>
<li>åˆ›å»ºDBCPçš„å·¥å…·ç±»</li>
</ol>
<p>JdbcUtils_DBCP.java</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JdbcUtils_DBCP</span> &#123;</span><br><span class="line">   <span class="keyword">private</span>  <span class="keyword">static</span> <span class="type">DataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span>JdbcUtils_DBCP.class.getClassLoader().getResourceAsStream(<span class="string">&quot;db.properties&quot;</span>);</span><br><span class="line">            <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">            properties.load(in);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// åˆ›å»ºæ•°æ®æº   å·¥å‚æ¨¡å¼ --&gt; åˆ›å»º</span></span><br><span class="line">            dataSource = BasicDataSourceFactory.createDataSource(properties);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–è¿æ¥</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">return</span> dataSource.getConnection();   <span class="comment">// ä»æ•°æ®æºä¸­è·å–è¿æ¥</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// é‡Šæ”¾è¿æ¥èµ„æº</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">release</span><span class="params">(Connection conn, Statement st, ResultSet rs)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(rs != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                rs.close();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(st != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                st.close();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(conn != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                conn.close();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>è¿›è¡Œæµ‹è¯•</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestDBCP</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">st</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JdbcUtils_DBCP.getConnection();</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;INSERT INTO users(id,`NAME`,`PASSWORD`,`email`,`birthday`) values(?,?,?,?,?)&quot;</span>;</span><br><span class="line">            st = conn.prepareStatement(sql);</span><br><span class="line">            <span class="comment">// æ‰‹åŠ¨ç»™å‚æ•°èµ‹å€¼</span></span><br><span class="line">            st.setInt(<span class="number">1</span>,<span class="number">7</span>);</span><br><span class="line">            st.setString(<span class="number">2</span>,<span class="string">&quot;qinxiao&quot;</span>);</span><br><span class="line">            st.setString(<span class="number">3</span>,<span class="string">&quot;1232112&quot;</span>);</span><br><span class="line">            st.setString(<span class="number">4</span>,<span class="string">&quot;110123@qq.com&quot;</span>);</span><br><span class="line">            st.setDate(<span class="number">5</span>,<span class="keyword">new</span> <span class="title class_">java</span>.sql.Date(<span class="keyword">new</span> <span class="title class_">Date</span>().getTime()));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ‰§è¡Œ</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> st.executeUpdate();</span><br><span class="line">            <span class="keyword">if</span>(i &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;æ’å…¥æˆåŠŸ!&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            JdbcUtils_DBCP.release(conn,st,<span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="9-3ã€C3P0"><a href="#9-3ã€C3P0" class="headerlink" title="9.3ã€C3P0"></a>9.3ã€C3P0</h2><p>éœ€è¦ç”¨åˆ°çš„jaråŒ…</p>
<ul>
<li>c3p0-0.9.5.5</li>
<li>mchange-commons-java-0.2.19</li>
<li>åœ¨mavenå®˜ç½‘é‡Œé¢ä¸‹è½½å³å¯</li>
</ul>
<img src="/2023/11/05/jdbc/1658454105632-2cc7bf22-e040-4469-827e-1bdca333dbe4.png" class title="img">

<img src="/2023/11/05/jdbc/1658454115983-2c7099b0-84b4-4a9f-8aeb-05a481a3ccc1.png" class title="img">

<ol>
<li>åœ¨srcä¸‹æ–°å»ºc3p0-config.xml</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="line">&lt;c3p0-config&gt;</span><br><span class="line">        &lt;!--</span><br><span class="line">        c3p0çš„ç¼ºçœï¼ˆé»˜è®¤ï¼‰é…ç½®</span><br><span class="line">        å¦‚æœåœ¨ä»£ç ä¸­ComboPooledDataSource ds=<span class="keyword">new</span> <span class="title class_">ComboPooledDataSource</span>();è¿™æ ·å†™å°±è¡¨ç¤ºä½¿ç”¨çš„æ˜¯c3p0çš„ç¼ºçœï¼ˆé»˜è®¤ï¼‰</span><br><span class="line">        --&gt;</span><br><span class="line">        &lt;<span class="keyword">default</span>-config&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;driverClass&quot;</span>&gt;com.mysql.cj.jdbc.Driver&lt;/property&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;jdbcUrl&quot;</span>&gt;jdbc:mysql:<span class="comment">//localhost:3306/jdbcstudy?useUnicode=true&amp;amp;characterEncoding=utf8&amp;amp;uesSSL=true&amp;amp;serverTimezone=UTC/property&lt;/property&gt;</span></span><br><span class="line">        &lt;property name=<span class="string">&quot;user&quot;</span>&gt;root&lt;/property&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;password&quot;</span>&gt;root&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">        &lt;property name=<span class="string">&quot;acquireIncrement&quot;</span>&gt;<span class="number">5</span>&lt;/property&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;initialPoolSize&quot;</span>&gt;<span class="number">10</span>&lt;/property&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;minPoolSize&quot;</span>&gt;<span class="number">5</span>&lt;/property&gt;</span><br><span class="line">        &lt;property name=<span class="string">&quot;maxPoolSize&quot;</span>&gt;<span class="number">20</span>&lt;/property&gt;</span><br><span class="line">        &lt;/<span class="keyword">default</span>-config&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!--</span><br><span class="line">        c3p0çš„å‘½åé…ç½®</span><br><span class="line">        å¦‚æœåœ¨ä»£ç ä¸­ComboPooledDataSource ds=<span class="keyword">new</span> <span class="title class_">ComboPooledDataSource</span>(<span class="string">&quot;MySQL&quot;</span>);è¿™æ ·å†™å°±è¡¨ç¤ºä½¿ç”¨çš„æ˜¯c3p0çš„ç¼ºçœï¼ˆé»˜è®¤ï¼‰</span><br><span class="line">        --&gt;</span><br><span class="line">        &lt;named-config name=<span class="string">&quot;MySQL&quot;</span>&gt;</span><br><span class="line">            &lt;property name=<span class="string">&quot;driverClass&quot;</span>&gt;com.mysql.jdbc.Driver&lt;/property&gt;</span><br><span class="line">            &lt;property name=<span class="string">&quot;jdbcUrl&quot;</span>&gt;jdbc:mysql:<span class="comment">//localhost:3306/jdbcstudy?useUnicode=true&amp;amp;characterEncoding=utf8&amp;amp;uesSSL=true&lt;/property&gt;</span></span><br><span class="line">            &lt;property name=<span class="string">&quot;user&quot;</span>&gt;root&lt;/property&gt;</span><br><span class="line">            &lt;property name=<span class="string">&quot;password&quot;</span>&gt;<span class="number">123456</span>&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">            &lt;property name=<span class="string">&quot;acquireIncrement&quot;</span>&gt;<span class="number">5</span>&lt;/property&gt;</span><br><span class="line">            &lt;property name=<span class="string">&quot;initialPoolSize&quot;</span>&gt;<span class="number">10</span>&lt;/property&gt;</span><br><span class="line">            &lt;property name=<span class="string">&quot;minPoolSize&quot;</span>&gt;<span class="number">5</span>&lt;/property&gt;</span><br><span class="line">            &lt;property name=<span class="string">&quot;maxPoolSize&quot;</span>&gt;<span class="number">20</span>&lt;/property&gt;</span><br><span class="line"></span><br><span class="line">        &lt;/named-config&gt;&gt;</span><br><span class="line">&lt;/c3p0-config&gt;</span><br></pre></td></tr></table></figure>

<ol>
<li>ç¼–å†™c3p0å·¥å…·ç±»</li>
</ol>
<p>JdbcUtils_C3P0.java</p>
<ul>
<li>xmlæ–‡ä»¶ä¸éœ€è¦è¯»ï¼Œç›´æ¥ç”¨å°±è¡Œäº†</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JdbcUtils_C3P0</span> &#123;</span><br><span class="line">   <span class="keyword">private</span>  <span class="keyword">static</span> <span class="type">ComboPooledDataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">// åˆ›å»ºæ•°æ®æº   å·¥å‚æ¨¡å¼ --&gt; åˆ›å»º</span></span><br><span class="line">            <span class="comment">// æ¨èé…ç½®æ–‡ä»¶å†™æ³•</span></span><br><span class="line">           dataSource =  <span class="keyword">new</span> <span class="title class_">ComboPooledDataSource</span>(<span class="string">&quot;MySQL&quot;</span>);  </span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è·å–è¿æ¥</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">return</span> dataSource.getConnection();   <span class="comment">// ä»æ•°æ®æºä¸­è·å–è¿æ¥</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// é‡Šæ”¾è¿æ¥èµ„æº</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">release</span><span class="params">(Connection conn, Statement st, ResultSet rs)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(rs != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                rs.close();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(st != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                st.close();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(conn != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                conn.close();</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>æµ‹è¯•</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestC3P0</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">st</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JdbcUtils_C3P0.getConnection();   </span><br><span class="line">            <span class="comment">// åŸæ¥æ˜¯è‡ªå·±å®ç°çš„ï¼Œç°åœ¨ç”¨åˆ«äººå®ç°çš„</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;INSERT INTO users(id,`NAME`,`PASSWORD`,`email`,`birthday`) values(?,?,?,?,?)&quot;</span>;</span><br><span class="line">            st = conn.prepareStatement(sql);</span><br><span class="line">            <span class="comment">// æ‰‹åŠ¨ç»™å‚æ•°èµ‹å€¼</span></span><br><span class="line">            st.setInt(<span class="number">1</span>,<span class="number">8</span>);</span><br><span class="line">            st.setString(<span class="number">2</span>,<span class="string">&quot;qinxiao&quot;</span>);</span><br><span class="line">            st.setString(<span class="number">3</span>,<span class="string">&quot;1232112&quot;</span>);</span><br><span class="line">            st.setString(<span class="number">4</span>,<span class="string">&quot;110123@qq.com&quot;</span>);</span><br><span class="line">            <span class="comment">// æŠŠä¸Šé¢çš„java.sql.Date æ”¹ä¸º java.util.Date</span></span><br><span class="line">            <span class="comment">// æ³¨æ„ç‚¹: sql.Date  æ•°æ®åº“    java.sql.Date()</span></span><br><span class="line">            <span class="comment">//        util.Date java     new Date().getTime() è·å¾—æ—¶é—´æˆ³</span></span><br><span class="line">            st.setDate(<span class="number">5</span>,<span class="keyword">new</span> <span class="title class_">java</span>.sql.Date(<span class="keyword">new</span> <span class="title class_">Date</span>().getTime()));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ‰§è¡Œ</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> st.executeUpdate();</span><br><span class="line">            <span class="keyword">if</span>(i &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;æ’å…¥æˆåŠŸ!&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            JdbcUtils_C3P0.release(conn,st,<span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ç»“è®º</strong></p>
<p>æ— è®ºä½¿ç”¨ä»€ä¹ˆæ•°æ®æºï¼Œæœ¬è´¨è¿˜æ˜¯ä¸€æ ·çš„</p>
<p>DataSourceæ¥å£ä¸ä¼šå˜ï¼Œæ–¹æ³•å°±ä¸ä¼šå˜</p>
]]></content>
      <categories>
        <category>åç«¯</category>
      </categories>
      <tags>
        <tag>javase</tag>
        <tag>mysql</tag>
        <tag>jdbc</tag>
      </tags>
  </entry>
  <entry>
    <title>vue</title>
    <url>/2023/11/05/vue/</url>
    <content><![CDATA[<center>Vue</center>

<span id="more"></span>
]]></content>
      <categories>
        <category>vueæ¡†æ¶</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>vue</tag>
        <tag>å‰ç«¯æ¡†æ¶</tag>
      </tags>
  </entry>
  <entry>
    <title>js</title>
    <url>/2023/11/05/js/</url>
    <content><![CDATA[<center>js</center>

<span id="more"></span>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>CSS</title>
    <url>/2023/11/05/CSS/</url>
    <content><![CDATA[<center>CSS</center>

<span id="more"></span>

<img src="/2023/11/05/CSS/1665665317491-87a57f58-7862-4aa4-9e83-22768b9e8b47.png" class title="img">

<p>HTML + CSS + JavaScript</p>
<p>ç»“æ„ + è¡¨ç° + åŠ¨ä½œ</p>
<h1 id="1ã€ä»€ä¹ˆæ˜¯CSS"><a href="#1ã€ä»€ä¹ˆæ˜¯CSS" class="headerlink" title="1ã€ä»€ä¹ˆæ˜¯CSS"></a>1ã€ä»€ä¹ˆæ˜¯CSS</h1><p>å¦‚ä½•å­¦ä¹ </p>
<ol>
<li>CSSæ˜¯ä»€ä¹ˆ</li>
<li>CSSæ€ä¹ˆç”¨ï¼ˆå¿«é€Ÿå…¥é—¨ï¼‰</li>
<li><strong>CSSé€‰æ‹©å™¨ï¼ˆé‡ç‚¹+éš¾ç‚¹ï¼‰</strong></li>
<li>ç¾åŒ–ç½‘é¡µï¼ˆæ–‡å­—ï¼Œé˜´å½±ï¼Œè¶…é“¾æ¥ï¼Œåˆ—è¡¨ï¼Œæ¸å˜â€¦ï¼‰</li>
<li>ç›’å­æ¨¡å‹</li>
<li>æµ®åŠ¨</li>
<li>å®šä½</li>
<li>ç½‘é¡µåŠ¨ç”»ï¼ˆç‰¹æ•ˆæ•ˆæœï¼‰</li>
</ol>
<h2 id="1-1ã€ä»€ä¹ˆæ˜¯CSS"><a href="#1-1ã€ä»€ä¹ˆæ˜¯CSS" class="headerlink" title="1.1ã€ä»€ä¹ˆæ˜¯CSS"></a>1.1ã€ä»€ä¹ˆæ˜¯CSS</h2><p>Cascading Style Sheetå±‚å <a href="https://so.csdn.net/so/search?q=%E6%A0%B7%E5%BC%8F%E8%A1%A8&spm=1001.2101.3001.7020">æ ·å¼è¡¨</a><br>CSSï¼šè¡¨ç°ï¼ˆç¾åŒ–ç½‘é¡µï¼‰<br>å­—ä½“ï¼Œé¢œè‰²ï¼Œè¾¹è·ï¼Œé«˜åº¦ï¼Œå®½åº¦ï¼ŒèƒŒæ™¯å›¾ç‰‡ï¼Œç½‘é¡µå®šä½ï¼Œç½‘é¡µæµ®åŠ¨</p>
<img src="/2023/11/05/CSS/1665665389711-6da66ec4-7a1a-4c19-87fb-7b43bd96766f.png" class title="img">

<h2 id="1-2ã€å‘å±•å²"><a href="#1-2ã€å‘å±•å²" class="headerlink" title="1.2ã€å‘å±•å²"></a>1.2ã€å‘å±•å²</h2><p>CSS1.0<br>CSS2.0ï¼šDIVï¼ˆå—ï¼‰+CSSï¼ŒHTMLä¸CSSç»“æ„åˆ†ç¦»çš„æ€æƒ³ï¼Œç½‘é¡µå˜å¾—ç®€å•ï¼ŒSEO<br>CSS2.1ï¼šæµ®åŠ¨ï¼Œå®šä½<br>CSS3.0ï¼šåœ†è§’ã€é˜´å½±ã€åŠ¨ç”»â€¦æµè§ˆå™¨å…¼å®¹æ€§~</p>
<img src="/2023/11/05/CSS/1665665419707-1d3240f2-2687-44e2-bf3c-3c25b8448177.png" class title="img">

<h2 id="1-3ã€å¿«é€Ÿå…¥é—¨"><a href="#1-3ã€å¿«é€Ÿå…¥é—¨" class="headerlink" title="1.3ã€å¿«é€Ÿå…¥é—¨"></a>1.3ã€å¿«é€Ÿå…¥é—¨</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE <span class="selector-tag">html</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">html</span> lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-<span class="number">8</span>&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;!--è§„èŒƒï¼Œ&lt;style&gt;å¯ä»¥ç¼–å†™CSSçš„ä»£ç ï¼Œæ¯ä¸€ä¸ªå£°æ˜æœ€å¥½ä»¥â€œ;â€ç»“å°¾</span><br><span class="line">	è¯­æ³•ï¼š</span><br><span class="line">		é€‰æ‹©å™¨&#123;</span><br><span class="line">				å£°æ˜<span class="number">1</span>;</span><br><span class="line">				å£°æ˜<span class="number">2</span>;</span><br><span class="line">				å£°æ˜<span class="number">3</span>;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">--&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        <span class="selector-tag">h1</span>&#123;</span><br><span class="line">            <span class="attribute">color</span>: crimson;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">h1</span>&gt;CSSæµ‹è¯•&lt;/<span class="selector-tag">h1</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">html</span>&gt;</span><br></pre></td></tr></table></figure>

<p>å»ºè®®ä½¿ç”¨è¿™ç§è§„èŒƒ</p>
<img src="/2023/11/05/CSS/1665665464359-c0867297-ffa2-41fb-9ef9-b56da7d3fbfd.png" class title="img">

<p>CSSçš„ä¼˜åŠ¿ï¼š</p>
<p>1ã€å†…å®¹å’Œè¡¨ç°åˆ†ç¦»ï¼›</p>
<p>2ã€ç½‘é¡µç»“æ„è¡¨ç°ç»Ÿä¸€ï¼Œå¯ä»¥å®ç°å¤ç”¨</p>
<p>3ã€æ ·å¼ååˆ†çš„ä¸°å¯Œ</p>
<p>4ã€å»ºè®®ä½¿ç”¨ç‹¬ç«‹äºhtmlçš„cssæ–‡ä»¶</p>
<p>5ã€åˆ©ç”¨SEOï¼Œå®¹æ˜“è¢«æœç´¢å¼•æ“æ”¶å½•ï¼</p>
<h2 id="1-4ã€CSSçš„3ç§å¯¼å…¥æ–¹å¼"><a href="#1-4ã€CSSçš„3ç§å¯¼å…¥æ–¹å¼" class="headerlink" title="1.4ã€CSSçš„3ç§å¯¼å…¥æ–¹å¼"></a>1.4ã€CSSçš„3ç§å¯¼å…¥æ–¹å¼</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE <span class="selector-tag">html</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">html</span> lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-<span class="number">8</span>&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--å†…éƒ¨æ ·å¼--&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        <span class="selector-tag">h1</span>&#123;</span><br><span class="line">            <span class="attribute">color</span>: green;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--å¤–éƒ¨æ ·å¼--&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;css/style<span class="selector-class">.css</span>&quot; /&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--ä¼˜å…ˆçº§ï¼šå°±è¿‘åŸåˆ™--&gt;</span><br><span class="line">&lt;!--è¡Œå†…æ ·å¼ï¼šåœ¨æ ‡ç­¾å…ƒç´ ä¸­ï¼Œç¼–å†™ä¸€ä¸ªstyleå±æ€§ï¼Œç¼–å†™æ ·å¼å³å¯--&gt;</span><br><span class="line">&lt;<span class="selector-tag">h1</span> style=&quot;<span class="attribute">color</span>: red<span class="string">&quot;&gt;è¿™æ˜¯æ ‡ç­¾&lt;/h1&gt;</span></span><br><span class="line"><span class="string">&lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ‹“å±•ï¼šå¤–éƒ¨æ ·å¼ä¸¤ç§æ–¹æ³•</p>
<ul>
<li>é“¾æ¥å¼</li>
</ul>
<p>Link</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;!--å¤–éƒ¨æ ·å¼--&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;css/style<span class="selector-class">.css</span>&quot; /&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>å¯¼å…¥å¼</li>
</ul>
<p>@importæ˜¯CSS2.1ç‰¹æœ‰çš„ï¼</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;!--å¯¼å…¥å¼--&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        <span class="keyword">@import</span> url(<span class="string">&quot;css/style.css&quot;</span>);</span><br><span class="line">    &lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h1 id="2ã€é€‰æ‹©å™¨"><a href="#2ã€é€‰æ‹©å™¨" class="headerlink" title="2ã€é€‰æ‹©å™¨"></a>2ã€<a href="https://so.csdn.net/so/search?q=%E9%80%89%E6%8B%A9%E5%99%A8&spm=1001.2101.3001.7020">é€‰æ‹©å™¨</a></h1><p>1ã€æ ‡ç­¾é€‰æ‹©å™¨ï¼šé€‰æ‹©ä¸€ç±»æ ‡ç­¾ æ ‡ç­¾{}</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE <span class="selector-tag">html</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">html</span> lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-<span class="number">8</span>&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        <span class="selector-tag">h1</span>&#123;</span><br><span class="line">            <span class="attribute">color</span>: orange;</span><br><span class="line">            <span class="attribute">background</span>: blue;</span><br><span class="line">            <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">h1</span>&gt;æ ‡ç­¾é€‰æ‹©å™¨&lt;/<span class="selector-tag">h1</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">html</span>&gt;</span><br></pre></td></tr></table></figure>

<p>2ã€ç±» é€‰æ‹©å™¨classï¼šé€‰æ‹©æ‰€æœ‰classä¸€è‡´çš„æ ‡ç­¾ï¼Œè·¨æ ‡ç­¾ï¼Œæ ¼å¼ï¼š.ç±»å{}</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE <span class="selector-tag">html</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">html</span> lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-<span class="number">8</span>&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line"></span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        <span class="comment">/*  ç±»é€‰æ‹©å™¨çš„æ ¼å¼ .classçš„åç§°&#123;&#125;</span></span><br><span class="line"><span class="comment">            å¥½å¤„ï¼šå¯ä»¥å¤šä¸ªæ ‡ç­¾å½’ç±»ï¼Œæ˜¯åŒä¸€ä¸ªclassï¼Œå¯ä»¥å¤ç”¨</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="selector-class">.demo1</span>&#123;</span><br><span class="line">            <span class="attribute">color</span>: blue;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-class">.demo2</span>&#123;</span><br><span class="line">            <span class="attribute">color</span>: red;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-class">.demo3</span>&#123;</span><br><span class="line">            <span class="attribute">color</span>: aqua;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">h1</span> class = &quot;demo1&quot;&gt;ç±»é€‰æ‹©å™¨ï¼šdemo1&lt;/<span class="selector-tag">h1</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">h1</span> class=&quot;demo2&quot;&gt;ç±»é€‰æ‹©å™¨ï¼šdemo2&lt;/<span class="selector-tag">h1</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">h1</span> class=&quot;demo3&quot;&gt;ç±»é€‰æ‹©å™¨ï¼šdemo3&lt;/<span class="selector-tag">h1</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">html</span>&gt;</span><br></pre></td></tr></table></figure>

<p>3ã€id é€‰æ‹©å™¨ï¼šå…¨å±€å”¯ä¸€ï¼Œæ ¼å¼ï¼š#idå{}</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE <span class="selector-tag">html</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">html</span> lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-<span class="number">8</span>&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        <span class="comment">/*  idé€‰æ‹©å™¨ï¼šidå¿…é¡»ä¿è¯å…¨å±€å”¯ä¸€</span></span><br><span class="line"><span class="comment">            #idåç§°&#123;&#125;</span></span><br><span class="line"><span class="comment">            ä¸éµå¾ªå°±è¿‘åŸåˆ™ï¼Œä¼˜å…ˆçº§æ˜¯å›ºå®šçš„</span></span><br><span class="line"><span class="comment">            idé€‰æ‹©å™¨ &gt; ç±»é€‰æ‹©å™¨  &gt;  æ ‡ç­¾é€‰æ‹©å™¨</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="selector-id">#demo1</span>&#123;</span><br><span class="line">            <span class="attribute">color</span>: aqua;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-class">.demo2</span>&#123;</span><br><span class="line">            <span class="attribute">color</span>: red;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-id">#demo2</span>&#123;</span><br><span class="line">            <span class="attribute">color</span>: orange;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-tag">h1</span>&#123;</span><br><span class="line">            <span class="attribute">color</span>: blue;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;<span class="selector-tag">h1</span> id=&quot;demo1&quot;&gt;idé€‰æ‹©å™¨ï¼šdemo1&lt;/<span class="selector-tag">h1</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">h1</span> class=&quot;demo2&quot; id = &quot;demo2&quot;&gt;idé€‰æ‹©å™¨ï¼šdemo2&lt;/<span class="selector-tag">h1</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">h1</span> class=&quot;demo2&quot;&gt;idé€‰æ‹©å™¨ï¼šdemo3&lt;/<span class="selector-tag">h1</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">h1</span>&gt;idé€‰æ‹©å™¨ï¼šdemo4&lt;/<span class="selector-tag">h1</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">h1</span>&gt;idé€‰æ‹©å™¨ï¼šdemo5&lt;/<span class="selector-tag">h1</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">html</span>&gt;</span><br></pre></td></tr></table></figure>

<p>ä¼˜å…ˆçº§ï¼šid &gt; class &gt; æ ‡ç­¾</p>
<h2 id="2-2ã€å±‚æ¬¡é€‰æ‹©å™¨"><a href="#2-2ã€å±‚æ¬¡é€‰æ‹©å™¨" class="headerlink" title="2.2ã€å±‚æ¬¡é€‰æ‹©å™¨"></a>2.2ã€å±‚æ¬¡é€‰æ‹©å™¨</h2><p>1.åä»£é€‰æ‹©å™¨ï¼šåœ¨æŸä¸ªå…ƒç´ çš„åé¢</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*åä»£é€‰æ‹©å™¨*/</span></span><br><span class="line">&lt;style&gt;</span><br><span class="line"><span class="selector-tag">body</span> <span class="selector-tag">p</span>&#123;</span><br><span class="line">	<span class="attribute">background</span>:red;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<img src="/2023/11/05/CSS/1665665929652-bfde9943-abd8-4a0e-9945-f5dc06e8d192.png" class title="img">

<p>2.å­é€‰æ‹©å™¨ï¼Œä¸€ä»£</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*å­é€‰æ‹©å™¨*/</span></span><br><span class="line">&lt;style&gt;</span><br><span class="line"><span class="selector-tag">body</span>&gt;<span class="selector-tag">p</span>&#123;</span><br><span class="line">	<span class="attribute">background</span>:orange;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<img src="/2023/11/05/CSS/1665665948655-fec2b959-aa58-45be-81e1-df53803d790f.png" class title="img">

<p>3.ç›¸é‚»çš„å…„å¼Ÿé€‰æ‹©å™¨ åŒè¾ˆ</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*ç›¸é‚»å…„å¼Ÿé€‰æ‹©å™¨ï¼šåªæœ‰ä¸€ä¸ªï¼Œç›¸é‚»ï¼ˆå‘ä¸‹ï¼‰*/</span></span><br><span class="line">&lt;style&gt;</span><br><span class="line"><span class="selector-class">.active</span>+<span class="selector-tag">p</span>&#123;</span><br><span class="line"><span class="attribute">background</span>: red</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">	&lt;<span class="selector-tag">p</span> class=&quot;active&quot;&gt;p1&lt;<span class="selector-tag">p</span>&gt;</span><br><span class="line">	&lt;<span class="selector-tag">p</span>&gt;p2&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br></pre></td></tr></table></figure>

<img src="/2023/11/05/CSS/1665665972961-4d1c45fd-d4d4-4339-a816-d5a94638d56c.png" class title="img">

<p>4.é€šç”¨é€‰æ‹©å™¨</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line"><span class="comment">/*é€šç”¨å…„å¼Ÿé€‰æ‹©å™¨ï¼Œå½“å‰é€‰ä¸­å…ƒç´ çš„å‘ä¸‹çš„æ‰€æœ‰å…„å¼Ÿå…ƒç´ */</span></span><br><span class="line">	<span class="selector-class">.active</span>~<span class="selector-tag">p</span>&#123;</span><br><span class="line">	<span class="attribute">background</span>:red;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">	&lt;<span class="selector-tag">p</span> class=&quot;active&quot;&gt;p1&lt;<span class="selector-tag">p</span>&gt;</span><br><span class="line">	&lt;<span class="selector-tag">p</span>&gt;p2&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br></pre></td></tr></table></figure>

<img src="/2023/11/05/CSS/1665665992628-4cbfc81a-b8ef-441b-a2a5-5ff22d9a5a16.png" class title="img">

<p>HTML</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE <span class="selector-tag">html</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">html</span> lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-<span class="number">8</span>&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        <span class="comment">/*p&#123;</span></span><br><span class="line"><span class="comment">            background: green;</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/*åä»£é€‰æ‹©å™¨*/</span></span><br><span class="line">        <span class="comment">/*body p&#123;</span></span><br><span class="line"><span class="comment">            background: red;</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/*å­é€‰æ‹©å™¨*/</span></span><br><span class="line">        <span class="comment">/*body&gt;p&#123;</span></span><br><span class="line"><span class="comment">            background: #3cbda6;</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/*ç›¸é‚»å…„å¼Ÿé€‰æ‹©å™¨ï¼Œåªæœ‰ä¸€ä¸ªï¼Œç›¸é‚»ï¼ˆå‘ä¸‹ï¼‰*/</span></span><br><span class="line">        <span class="comment">/*.active + p&#123;</span></span><br><span class="line"><span class="comment">            background: #a13d30;</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/*é€šç”¨å…„å¼Ÿé€‰æ‹©å™¨ï¼Œå½“å‰é€‰ä¸­å…ƒç´ çš„å‘ä¸‹æ‰€æœ‰å…„å¼Ÿå…ƒç´ */</span></span><br><span class="line">        <span class="selector-class">.active</span>~<span class="selector-tag">p</span>&#123;</span><br><span class="line">            <span class="attribute">background</span>: blueviolet;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">p</span>&gt;p0&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">p</span> class=&quot;active&quot;&gt;p1&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">p</span>&gt;p2&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">p</span>&gt;p3&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">ul</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">li</span>&gt;</span><br><span class="line">        &lt;<span class="selector-tag">p</span>&gt;p4&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line">    &lt;/<span class="selector-tag">li</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">li</span>&gt;</span><br><span class="line">        &lt;<span class="selector-tag">p</span>&gt;p5&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line">    &lt;/<span class="selector-tag">li</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">li</span>&gt;</span><br><span class="line">        &lt;<span class="selector-tag">p</span>&gt;p6&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line">    &lt;/<span class="selector-tag">li</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">ul</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;<span class="selector-tag">p</span>&gt;p7&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">p</span>&gt;p8&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">html</span>&gt;</span><br></pre></td></tr></table></figure>

<h2 id="2-3ã€ç»“æ„ä¼ªç±»é€‰æ‹©å™¨"><a href="#2-3ã€ç»“æ„ä¼ªç±»é€‰æ‹©å™¨" class="headerlink" title="2.3ã€ç»“æ„ä¼ªç±»é€‰æ‹©å™¨"></a>2.3ã€ç»“æ„ä¼ªç±»é€‰æ‹©å™¨</h2><p>ä¼ªç±»</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">        <span class="comment">/*ulçš„ç¬¬ä¸€ä¸ªå­å…ƒç´ */</span></span><br><span class="line">        <span class="selector-tag">ul</span> <span class="selector-tag">li</span><span class="selector-pseudo">:first</span>-child&#123;</span><br><span class="line">            <span class="attribute">background</span>: aqua;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*ulçš„æœ€åä¸€ä¸ªå­å…ƒç´ */</span></span><br><span class="line">        <span class="selector-tag">ul</span> <span class="selector-tag">li</span><span class="selector-pseudo">:last-child</span>&#123;</span><br><span class="line">            <span class="attribute">background</span>: blue;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/*é€‰ä¸­p1ï¼šå®šä½åˆ°çˆ¶å…ƒç´ ï¼Œé€‰æ‹©å½“å‰çš„ç¬¬ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="comment">            é€‰æ‹©å½“å‰på…ƒç´  çš„çˆ¶çº§å…ƒç´ ï¼Œé€‰ä¸­çˆ¶çº§å…ƒç´ çš„ç¬¬ä¸€ä¸ªï¼Œå¹¶ä¸”æ˜¯å½“å‰å…ƒç´ æ‰ç”Ÿæ•ˆï¼</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="selector-tag">p</span><span class="selector-pseudo">:nth-child</span>(<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="attribute">background</span>: orange;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">/*é€‰ä¸­çˆ¶å…ƒç´ ä¸‹çš„ï¼Œç¬¬2ä¸ªpå…ƒç´ */</span></span><br><span class="line">        <span class="selector-tag">p</span><span class="selector-pseudo">:nth-of-type</span>(<span class="number">2</span>)&#123;</span><br><span class="line">            <span class="attribute">background</span>: red;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;!DOCTYPE <span class="selector-tag">html</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">html</span> lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-<span class="number">8</span>&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--é¿å…ä½¿ç”¨ï¼Œclassï¼Œidé€‰æ‹©å™¨--&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        <span class="comment">/*ulçš„ç¬¬ä¸€ä¸ªå­å…ƒç´ */</span></span><br><span class="line">        <span class="selector-tag">ul</span> <span class="selector-tag">li</span><span class="selector-pseudo">:first</span>-child&#123;</span><br><span class="line">            <span class="attribute">background</span>: <span class="number">#a13d30</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/*ulçš„æœ€åä¸€ä¸ªå­å…ƒç´ */</span></span><br><span class="line">        <span class="selector-tag">ul</span> <span class="selector-tag">li</span><span class="selector-pseudo">:last-child</span>&#123;</span><br><span class="line">            <span class="attribute">background</span>: red;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*é€‰ä¸­p1ï¼šå®šä½åˆ°çˆ¶å…ƒç´ ï¼Œé€‰æ‹©å½“å‰çš„ç¬¬ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="comment">        é€‰æ‹©å½“å‰på…ƒç´ çš„çˆ¶çº§å…ƒç´ ï¼Œé€‰ä¸­çˆ¶çº§å…ƒç´ çš„ç¬¬ä¸€ä¸ªå­å…ƒç´ ä¸ºpçš„</span></span><br><span class="line"><span class="comment">        æŒ‰é¡ºåº</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="selector-tag">p</span><span class="selector-pseudo">:nth-child</span>(<span class="number">2</span>)&#123;</span><br><span class="line">            <span class="attribute">background</span>: blue;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*é€‰ä¸­çˆ¶å…ƒç´ ä¸‹çš„på…ƒç´ çš„ç¬¬äºŒä¸ªï¼ŒæŒ‰ç±»å‹*/</span></span><br><span class="line">        <span class="selector-tag">p</span><span class="selector-pseudo">:nth-of-type</span>(<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="attribute">background</span>: yellow;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">            <span class="attribute">background</span>: black;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">    &lt;!--&lt;<span class="selector-tag">h1</span>&gt;<span class="selector-tag">h1</span>&lt;/<span class="selector-tag">h1</span>&gt;--&gt;</span><br><span class="line">    &lt;<span class="selector-tag">p</span>&gt;p1&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">p</span>&gt;p2&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">p</span>&gt;p3&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">ul</span>&gt;</span><br><span class="line">        &lt;<span class="selector-tag">li</span>&gt;li1&lt;/<span class="selector-tag">li</span>&gt;</span><br><span class="line">        &lt;<span class="selector-tag">li</span>&gt;li2&lt;/<span class="selector-tag">li</span>&gt;</span><br><span class="line">        &lt;<span class="selector-tag">li</span>&gt;li3&lt;/<span class="selector-tag">li</span>&gt;</span><br><span class="line">    &lt;/<span class="selector-tag">ul</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;<span class="selector-tag">a</span> href=&quot;&quot;&gt;é“¾æ¥æ ‡ç­¾&lt;/<span class="selector-tag">a</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">html</span>&gt;</span><br></pre></td></tr></table></figure>

<h2 id="2-4ã€å±æ€§é€‰æ‹©å™¨ï¼ˆå¸¸ç”¨ï¼‰"><a href="#2-4ã€å±æ€§é€‰æ‹©å™¨ï¼ˆå¸¸ç”¨ï¼‰" class="headerlink" title="2.4ã€å±æ€§é€‰æ‹©å™¨ï¼ˆå¸¸ç”¨ï¼‰"></a>2.4ã€å±æ€§é€‰æ‹©å™¨ï¼ˆå¸¸ç”¨ï¼‰</h2><p>id + classç»“åˆ</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE <span class="selector-tag">html</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">html</span> lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-<span class="number">8</span>&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">         <span class="selector-class">.demo</span> <span class="selector-tag">a</span>&#123;</span><br><span class="line">            <span class="attribute">display</span>: block;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line">            <span class="attribute">float</span><span class="selector-pseudo">:left</span>;</span><br><span class="line">            <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">            <span class="attribute">background</span>: blue;</span><br><span class="line">            <span class="attribute">text-align</span>: center;</span><br><span class="line">            <span class="attribute">color</span>: beige;</span><br><span class="line">            <span class="attribute">text-decoration</span>: none;</span><br><span class="line">            <span class="attribute">margin-right</span>: <span class="number">5px</span>;</span><br><span class="line">            <span class="attribute">font</span>: bold <span class="number">20px</span>/<span class="number">50px</span> Arial;</span><br><span class="line">        &#125;</span><br><span class="line">         <span class="comment">/*å±æ€§åï¼Œå±æ€§å=å±æ€§å€¼ï¼ˆæ­£åˆ™ï¼‰</span></span><br><span class="line"><span class="comment">         =è¡¨ç¤ºç»å¯¹ç­‰äº</span></span><br><span class="line"><span class="comment">         *=è¡¨ç¤ºåŒ…å«</span></span><br><span class="line"><span class="comment">         ^=è¡¨ç¤ºä»¥...å¼€å¤´</span></span><br><span class="line"><span class="comment">         $=è¡¨ç¤ºä»¥...ç»“å°¾</span></span><br><span class="line"><span class="comment">         å­˜åœ¨idå±æ€§çš„å…ƒç´   a[]&#123;&#125;</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="comment">/* a[id]&#123;</span></span><br><span class="line"><span class="comment">             background: red;</span></span><br><span class="line"><span class="comment">         &#125;*/</span></span><br><span class="line"></span><br><span class="line">         <span class="comment">/*id=firstçš„å…ƒç´ */</span></span><br><span class="line">       <span class="comment">/* a[id=first]&#123;</span></span><br><span class="line"><span class="comment">            background: aqua;</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/*classä¸­æœ‰linkså…ƒç´ */</span></span><br><span class="line">       <span class="comment">/* a[class = &quot;links item2 first2&quot;]&#123;</span></span><br><span class="line"><span class="comment">            background: orange;</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line">        <span class="comment">/*a[class*=&quot;links&quot;]&#123;</span></span><br><span class="line"><span class="comment">            background: black ;</span></span><br><span class="line"><span class="comment">        &#125;*/</span></span><br><span class="line">        <span class="comment">/*é€‰ä¸­hrefä¸­ä»¥httpå¼€å¤´çš„å…ƒç´ */</span></span><br><span class="line">        <span class="selector-tag">a</span><span class="selector-attr">[href^=<span class="string">&quot;http&quot;</span>]</span>&#123;</span><br><span class="line">            <span class="attribute">background</span>: orange;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">p</span> class=&quot;demo&quot;&gt;</span><br><span class="line">    &lt;<span class="selector-tag">a</span> href=&quot;http://www.baidu.com<span class="string">&quot; class=&quot;</span>links item first<span class="string">&quot; id=&quot;</span>first<span class="string">&quot;&gt;1&lt;/a&gt;</span></span><br><span class="line"><span class="string">    &lt;a href=&quot;</span>/adad/faf<span class="string">&quot; class=&quot;</span>links item2 first2<span class="string">&quot; &gt;2&lt;/a&gt;</span></span><br><span class="line"><span class="string">    &lt;a href=&quot;</span>qwe123<span class="string">&quot; class=&quot;</span>links item3 first3<span class="string">&quot; &gt;3&lt;/a&gt;</span></span><br><span class="line"><span class="string">    &lt;a href=&quot;</span>eweqe<span class="string">&quot; class=&quot;</span>links item4 first4<span class="string">&quot; &gt;4&lt;/a&gt;</span></span><br><span class="line"><span class="string">    &lt;a href=&quot;</span>rrrrr<span class="string">&quot; class=&quot;</span>links item5 first5<span class="string">&quot; &gt;5&lt;/a&gt;</span></span><br><span class="line"><span class="string">    &lt;a href=&quot;</span>ttt<span class="string">&quot; class=&quot;</span>links item6 first6<span class="string">&quot; &gt;6&lt;/a&gt;</span></span><br><span class="line"><span class="string">    &lt;a href=&quot;</span>yyy<span class="string">&quot; class=&quot;</span>links item7 first7<span class="string">&quot; &gt;7&lt;/a&gt;</span></span><br><span class="line"><span class="string">&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br></pre></td></tr></table></figure>

<img src="/2023/11/05/CSS/1665666271600-d971fc75-e7da-465b-ab9f-9136096fe0d8.png" class title="img">

<p>&#x3D; ç»å¯¹ç­‰äº</p>
<p>*&#x3D; åŒ…å«è¿™ä¸ªå…ƒç´ </p>
<p>^&#x3D; ä»¥è¿™ä¸ªå¼€å¤´</p>
<p>$&#x3D; ä»¥è¿™ä¸ªç»“å°¾</p>
<h1 id="3ã€ç¾åŒ–ç½‘é¡µå…ƒç´ "><a href="#3ã€ç¾åŒ–ç½‘é¡µå…ƒç´ " class="headerlink" title="3ã€ç¾åŒ–ç½‘é¡µå…ƒç´ "></a>3ã€ç¾åŒ–ç½‘é¡µå…ƒç´ </h1><h2 id="3-1ã€ä¸ºä»€ä¹ˆè¦ç¾åŒ–ç½‘é¡µ"><a href="#3-1ã€ä¸ºä»€ä¹ˆè¦ç¾åŒ–ç½‘é¡µ" class="headerlink" title="3.1ã€ä¸ºä»€ä¹ˆè¦ç¾åŒ–ç½‘é¡µ"></a>3.1ã€ä¸ºä»€ä¹ˆè¦ç¾åŒ–ç½‘é¡µ</h2><ol>
<li>æœ‰æ•ˆçš„ä¼ é€’é¡µé¢ä¿¡æ¯</li>
<li>ç¾åŒ–ç½‘é¡µï¼Œé¡µé¢æ¼‚äº®æ‰èƒ½å¸å¼•å®¢æˆ·</li>
<li>å‡¸æ˜¾é¡µé¢çš„ä¸»é¢˜</li>
<li>æé«˜ç”¨æˆ·çš„ä½“éªŒ</li>
</ol>
<p>spanæ ‡ç­¾ï¼šé‡ç‚¹è¦çªå‡ºçš„å­—ï¼Œä½¿ç”¨spanæ ‡ç­¾å¥—èµ·æ¥</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE <span class="selector-tag">html</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">html</span> lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-<span class="number">8</span>&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        <span class="selector-id">#title1</span>&#123;</span><br><span class="line">            <span class="attribute">font-size</span>: <span class="number">50px</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line"></span><br><span class="line">å­¦ä¹ è¯­è¨€&lt;<span class="selector-tag">span</span> id=&quot;title1&quot;&gt;JAVA&lt;/<span class="selector-tag">span</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">html</span>&gt;</span><br></pre></td></tr></table></figure>

<p>font-familyï¼šå­—ä½“ç³»åˆ—<br>font-sizeï¼šå­—ä½“å¤§å°<br>font-weightï¼šå­—ä½“ç²—ç»†</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"> &lt;style&gt;</span><br><span class="line">	<span class="selector-tag">body</span>&#123;</span><br><span class="line">		<span class="attribute">font-family</span>:æ¥·ä½“;</span><br><span class="line">		<span class="attribute">color</span>ï¼šred;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="selector-tag">h1</span>&#123;</span><br><span class="line">		<span class="attribute">font-size</span>ï¼š <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br><span class="line">	<span class="selector-class">.p1</span>&#123;</span><br><span class="line">		<span class="attribute">font-weight</span>ï¼šblod;</span><br><span class="line">	</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="3-2ã€å­—ä½“æ ·å¼"><a href="#3-2ã€å­—ä½“æ ·å¼" class="headerlink" title="3.2ã€å­—ä½“æ ·å¼"></a>3.2ã€å­—ä½“æ ·å¼</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE <span class="selector-tag">html</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">html</span> lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-<span class="number">8</span>&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">    <span class="attribute">font-family</span>ï¼šå­—ä½“</span><br><span class="line">    <span class="attribute">font-size</span>ï¼šå­—ä½“å¤§å°</span><br><span class="line">    <span class="attribute">font-weight</span>ï¼šå­—ä½“çš„ç²—ç»†</span><br><span class="line">    <span class="attribute">color</span>ï¼šå­—ä½“é¢œè‰²</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        <span class="selector-tag">body</span>&#123;</span><br><span class="line">            <span class="attribute">font-family</span>:<span class="string">&quot;Arial Black&quot;</span> ,æ¥·ä½“;</span><br><span class="line">            <span class="attribute">color</span>: <span class="number">#a13d30</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-tag">h1</span>&#123;</span><br><span class="line">            <span class="attribute">font-size</span>: <span class="number">50px</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-class">.p1</span>&#123;</span><br><span class="line">            <span class="attribute">font-weight</span>: lighter;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;<span class="selector-tag">h1</span>&gt;æ•…äº‹ä»‹ç»&lt;/<span class="selector-tag">h1</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;<span class="selector-tag">p</span> class=&quot;p1&quot;&gt;</span><br><span class="line">    æŒ‰ç…§è¡¨ç°çš„å†…å®¹å¯åˆ†ä¸ºç¥è¯ã€ä»™ä¾ ã€æ­¦ä¾ ã€ç§‘å¹»ã€æ‚¬ç–‘ã€å¤ä¼ ã€å½“ä»£ã€æµªæ¼«é’æ˜¥ã€æ¸¸æˆç«æŠ€ç­‰ã€‚</span><br><span class="line">&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">p</span>&gt;</span><br><span class="line">    æŒ‰ç…§ä½“åˆ¶å¯åˆ†ä¸ºç« å›ä½“å°è¯´ã€æ—¥è®°ä½“å°è¯´ã€ä¹¦ä¿¡ä½“å°è¯´ã€è‡ªä¼ ä½“å°è¯´ã€‚æŒ‰ç…§è¯­è¨€å½¢å¼å¯åˆ†ä¸ºæ–‡è¨€å°è¯´å’Œç™½è¯å°è¯´ã€‚</span><br><span class="line">&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;<span class="selector-tag">p</span>&gt;</span><br><span class="line">    Hooray! It&#x27;s snowing! It&#x27;s <span class="selector-tag">time</span> <span class="selector-tag">to</span> make <span class="selector-tag">a</span> snowman<span class="selector-class">.James</span> runs out.</span><br><span class="line">&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">html</span>&gt;</span><br><span class="line">&lt;!DOCTYPE <span class="selector-tag">html</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">html</span> lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-<span class="number">8</span>&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--å­—ä½“é£æ ¼--&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        <span class="selector-tag">p</span>&#123;</span><br><span class="line">            <span class="attribute">font</span>: oblique bolder <span class="number">12px</span> <span class="string">&quot;æ¥·ä½“&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;<span class="selector-tag">p</span>&gt;</span><br><span class="line">    æŒ‰ç…§ä½“åˆ¶å¯åˆ†ä¸ºç« å›ä½“å°è¯´ã€æ—¥è®°ä½“å°è¯´ã€ä¹¦ä¿¡ä½“å°è¯´ã€è‡ªä¼ ä½“å°è¯´ã€‚æŒ‰ç…§è¯­è¨€å½¢å¼å¯åˆ†ä¸ºæ–‡è¨€å°è¯´å’Œç™½è¯å°è¯´ã€‚</span><br><span class="line">&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">html</span>&gt;</span><br><span class="line"><span class="attribute">font-weight</span>:bolder;<span class="comment">/*ä¹Ÿå¯ä»¥å¡«pxï¼Œä½†ä¸èƒ½è¶…è¿‡900,ç›¸å½“äºbloder*/</span></span><br><span class="line"><span class="comment">/*å¸¸ç”¨å†™æ³•ï¼š*/</span></span><br><span class="line"><span class="attribute">font</span>:oblique bloder <span class="number">12px</span> <span class="string">&quot;æ¥·ä½“&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="3-3ã€æ–‡æœ¬æ ·å¼"><a href="#3-3ã€æ–‡æœ¬æ ·å¼" class="headerlink" title="3.3ã€æ–‡æœ¬æ ·å¼"></a>3.3ã€æ–‡æœ¬æ ·å¼</h2><p>é¢œè‰² â€“&gt; color, rgbï¼Œrgba</p>
<p>æ–‡æœ¬å¯¹é½æ–¹å¼ â€“&gt; text-alignï¼šcenter</p>
<p>é¦–è¡Œç¼©è¿› â€“&gt; text-indentï¼š2em</p>
<p>è¡Œé«˜ â€“&gt; line-heightï¼š300pxï¼›å•è¡Œæ–‡å­—ä¸Šä¸‹å±…ä¸­ï¼line-height &#x3D; height</p>
<p>ä¸‹åˆ’çº¿ â€“&gt; text-decoration</p>
<p>æ–‡æœ¬å›¾ç‰‡æ°´å¹³å¯¹é½ï¼švertical-align: middle;</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">text-decoration</span>:underline<span class="comment">/*ä¸‹åˆ’çº¿*/</span></span><br><span class="line">text-decoration:line-through<span class="comment">/*ä¸­åˆ’çº¿*/</span></span><br><span class="line">text-decoration:overline<span class="comment">/*ä¸Šåˆ’çº¿*/</span></span><br><span class="line">text-decoration:none<span class="comment">/*è¶…é“¾æ¥å»ä¸‹åˆ’çº¿*/</span></span><br></pre></td></tr></table></figure>

<p>å›¾ç‰‡ã€æ–‡å­—æ°´å¹³å¯¹é½</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">img</span>,<span class="selector-tag">span</span>&#123;vetical-align:middle&#125;<span class="comment">/*å‚ç›´å¯¹é½  middleä¸­é—´*/</span></span><br><span class="line">&lt;!DOCTYPE <span class="selector-tag">html</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">html</span> lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-<span class="number">8</span>&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--</span><br><span class="line">    é¢œè‰²ï¼š</span><br><span class="line">        å•è¯ï¼š<span class="selector-id">#FFFFFF</span></span><br><span class="line">        RGBï¼š<span class="number">0</span>~F ,rgb(<span class="number">0</span>,<span class="number">255</span>,<span class="number">255</span>)</span><br><span class="line">        RGBAï¼š<span class="selector-tag">A</span>ï¼ˆé€æ˜åº¦ï¼‰ï¼š<span class="number">0</span>~<span class="number">1</span>,rgba(<span class="number">0</span>,<span class="number">255</span>,<span class="number">255</span>,<span class="number">0.9</span>)</span><br><span class="line">        <span class="attribute">text-indent</span>ï¼šæ®µè½é¦–è¡Œç¼©è¿›</span><br><span class="line">        <span class="attribute">line-height</span>: <span class="number">300px</span>;</span><br><span class="line">            è¡Œé«˜ å’Œ å—çš„é«˜åº¦ä¸€è‡´ï¼Œå°±å¯ä»¥ä¸Šä¸‹å±…ä¸­</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        <span class="selector-tag">h1</span>&#123;</span><br><span class="line">            <span class="attribute">color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">255</span>,<span class="number">255</span>,<span class="number">0.9</span>);</span><br><span class="line">            <span class="attribute">text-align</span>: center;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-class">.p1</span>&#123;</span><br><span class="line">            <span class="attribute">text-indent</span>: <span class="number">2em</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-class">.p3</span>&#123;</span><br><span class="line">            <span class="attribute">background</span>: blueviolet;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">            <span class="attribute">line-height</span>: <span class="number">50px</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*ä¸‹åˆ’çº¿*/</span></span><br><span class="line">        <span class="selector-class">.l1</span>&#123;</span><br><span class="line">            <span class="attribute">text-decoration</span>: underline;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/*ä¸­åˆ’çº¿*/</span></span><br><span class="line">        <span class="selector-class">.l2</span>&#123;</span><br><span class="line">            <span class="attribute">text-decoration</span>: line-through;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/*ä¸Šåˆ’çº¿*/</span></span><br><span class="line">        <span class="selector-class">.l3</span>&#123;</span><br><span class="line">            <span class="attribute">text-decoration</span>: overline;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/* aæ ‡ç­¾å»é™¤ä¸‹åˆ’çº¿ */</span></span><br><span class="line">        a1&#123;</span><br><span class="line">            <span class="attribute">text-decoration</span>: none;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/* æ°´å¹³å¯¹é½~ å‚ç…§ç‰©ï¼Œ aï¼Œb */</span></span><br><span class="line">        <span class="selector-tag">img</span>,<span class="selector-tag">span</span>&#123;</span><br><span class="line">            <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;<span class="selector-tag">a</span> href=&quot;&quot;&gt;<span class="selector-tag">a</span>æ ‡ç­¾å»é™¤ä¸‹åˆ’çº¿&lt;/<span class="selector-tag">a</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;<span class="selector-tag">p</span> class=&quot;l1&quot;&gt;<span class="number">123321</span>&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">p</span> class=&quot;l2&quot;&gt;<span class="number">123321</span>&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">p</span> class=&quot;l3&quot;&gt;<span class="number">123321</span>&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;<span class="selector-tag">h1</span>&gt;æ•…äº‹ä»‹ç»&lt;/<span class="selector-tag">h1</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;<span class="selector-tag">p</span> class=&quot;p1&quot;&gt;</span><br><span class="line">    æŒ‰ç…§è¡¨ç°çš„å†…å®¹å¯åˆ†ä¸ºç¥è¯ã€ä»™ä¾ ã€æ­¦ä¾ ã€ç§‘å¹»ã€æ‚¬ç–‘ã€å¤ä¼ ã€å½“ä»£ã€æµªæ¼«é’æ˜¥ã€æ¸¸æˆç«æŠ€ç­‰ã€‚</span><br><span class="line">&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">p</span>&gt;</span><br><span class="line">    æŒ‰ç…§ä½“åˆ¶å¯åˆ†ä¸ºç« å›ä½“å°è¯´ã€æ—¥è®°ä½“å°è¯´ã€ä¹¦ä¿¡ä½“å°è¯´ã€è‡ªä¼ ä½“å°è¯´ã€‚æŒ‰ç…§è¯­è¨€å½¢å¼å¯åˆ†ä¸ºæ–‡è¨€å°è¯´å’Œç™½è¯å°è¯´ã€‚</span><br><span class="line">&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;<span class="selector-tag">p</span> class=&quot;p3&quot;&gt;</span><br><span class="line">    Hooray! It&#x27;s snowing! It&#x27;s <span class="selector-tag">time</span> <span class="selector-tag">to</span> make <span class="selector-tag">a</span> snowman<span class="selector-class">.James</span> runs out.</span><br><span class="line">&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;<span class="selector-tag">p</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">img</span> <span class="attribute">src</span>=&quot;images/<span class="selector-tag">a</span><span class="selector-class">.png</span>&quot; alt=&quot;&quot;&gt;</span><br><span class="line">    &lt;<span class="selector-tag">span</span>&gt;abcdefghijklmnabcdefghijklmn&lt;/<span class="selector-tag">span</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">html</span>&gt;</span><br></pre></td></tr></table></figure>

<h2 id="3-4ã€è¶…é“¾æ¥ä¼ªç±»"><a href="#3-4ã€è¶…é“¾æ¥ä¼ªç±»" class="headerlink" title="3.4ã€è¶…é“¾æ¥ä¼ªç±»"></a>3.4ã€è¶…é“¾æ¥ä¼ªç±»</h2><p>è¶…é“¾æ¥ä¼ªç±»</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* æœªè®¿é—®çš„é“¾æ¥ */</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:link</span> &#123;<span class="attribute">color</span>: <span class="number">#FF0000</span>&#125;</span><br><span class="line"><span class="comment">/* å·²è®¿é—®çš„é“¾æ¥,ç‚¹å‡»ä¹‹åçš„çŠ¶æ€*/</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:visited</span> &#123;<span class="attribute">color</span>: <span class="number">#00FF00</span>&#125;</span><br><span class="line"><span class="comment">/* é¼ æ ‡ç§»åŠ¨åˆ°é“¾æ¥ä¸Š,é¼ æ ‡æ‚¬æµ®çš„çŠ¶æ€*/</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;<span class="attribute">color</span>: <span class="number">#FF00FF</span>&#125;</span><br><span class="line"><span class="comment">/* é€‰å®šçš„é“¾æ¥,é¼ æ ‡æŒ‰ä½æœªé‡Šæ”¾çš„çŠ¶æ€*/</span></span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:active</span> &#123;<span class="attribute">color</span>: <span class="number">#0000FF</span>&#125;</span><br><span class="line">&lt;<span class="selector-tag">html</span> lang=&quot;en&quot;&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-<span class="number">8</span>&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line"></span><br><span class="line">    &lt;style&gt;</span><br><span class="line">      <span class="comment">/* é»˜è®¤é¢œè‰² */</span></span><br><span class="line">      <span class="selector-tag">a</span>&#123;</span><br><span class="line">        <span class="attribute">text-decoration</span>: none;</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#000000</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">/* é¼ æ ‡æ‚¬æµ®çš„é¢œè‰² ï¼ˆåªéœ€è¦è®°ä½è¿™ä¸ªï¼‰*/</span></span><br><span class="line">      <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">        <span class="attribute">color</span>: burlywood;</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">30px</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">/* é¼ æ ‡æŒ‰ä¸»æœªé‡Šæ”¾çš„çŠ¶æ€ */</span></span><br><span class="line">      <span class="selector-tag">a</span><span class="selector-pseudo">:active</span>&#123;</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#008800</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">/* æœªè®¿é—®çš„é“¾æ¥ */</span></span><br><span class="line">      <span class="selector-tag">a</span><span class="selector-pseudo">:link</span>&#123;</span><br><span class="line">        <span class="attribute">color</span>: maroon;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">/* å·²è®¿é—®çš„é“¾æ¥ */</span></span><br><span class="line">      <span class="selector-tag">a</span><span class="selector-pseudo">:visited</span>&#123;</span><br><span class="line">        <span class="attribute">color</span>: darkmagenta;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">/* text-shadow: é˜´å½±é¢œè‰²ï¼Œæ°´å¹³åç§»ï¼Œå‚ç›´åç§»ï¼Œé˜´å½±åŠå¾„*/</span></span><br><span class="line">      <span class="selector-id">#price</span>&#123;</span><br><span class="line">        <span class="attribute">text-shadow</span>: <span class="number">#008800</span> <span class="number">20px</span> -<span class="number">10px</span> <span class="number">2px</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line"></span><br><span class="line">    &lt;<span class="selector-tag">a</span> href=&quot;#&quot;&gt;</span><br><span class="line">      &lt;<span class="selector-tag">img</span> <span class="attribute">src</span>=&quot;images/<span class="selector-tag">a</span><span class="selector-class">.jpg</span>&quot; alt=&quot;&quot;&gt;</span><br><span class="line">    &lt;/<span class="selector-tag">a</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">p</span>&gt;</span><br><span class="line">      &lt;<span class="selector-tag">a</span> href=&quot;#&quot;&gt;ç å‡ºé«˜æ ¡ï¼šJavaå¼€å‘æ‰‹å†Œ&lt;/<span class="selector-tag">a</span>&gt;</span><br><span class="line">    &lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">p</span>&gt;</span><br><span class="line">      &lt;<span class="selector-tag">a</span> href=&quot;&quot;&gt;ä½œè€…ï¼šå­¤å°½è€å¸ˆ&lt;/<span class="selector-tag">a</span>&gt;</span><br><span class="line">    &lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">p</span> id=&quot;price&quot;&gt;</span><br><span class="line">      ï¿¥<span class="number">99</span></span><br><span class="line">    &lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/<span class="selector-tag">body</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">html</span>&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">é»˜è®¤ï¼š</span></span><br><span class="line"><span class="comment">é¼ æ ‡æ‚¬æµ®çš„çŠ¶æ€ï¼šhover</span></span><br><span class="line"><span class="comment">é¼ æ ‡æŒ‰ä½æœªé‡Šæ”¾çš„çŠ¶æ€ï¼šactive</span></span><br><span class="line"><span class="comment">ç‚¹å‡»ä¹‹åçš„çŠ¶æ€ï¼švisited</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">	<span class="selector-tag">a</span>&#123;<span class="comment">/*è¶…é“¾æ¥æœ‰é»˜è®¤çš„é¢œè‰²*/</span></span><br><span class="line">		<span class="attribute">text-decoration</span>:none;</span><br><span class="line">		<span class="attribute">color</span>:<span class="number">#000000</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>&#123;<span class="comment">/*é¼ æ ‡æ‚¬æµ®çš„çŠ¶æ€*/</span></span><br><span class="line">		<span class="attribute">color</span>:orange;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="selector-tag">a</span><span class="selector-pseudo">:active</span>&#123;<span class="comment">/*é¼ æ ‡æŒ‰ä½æœªé‡Šæ”¾çš„çŠ¶æ€*/</span></span><br><span class="line">		<span class="attribute">color</span>:green</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="selector-tag">a</span><span class="selector-pseudo">:visited</span>&#123;<span class="comment">/*ç‚¹å‡»ä¹‹åçš„çŠ¶æ€*/</span></span><br><span class="line">		<span class="attribute">color</span>:red</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="3-5ã€é˜´å½±"><a href="#3-5ã€é˜´å½±" class="headerlink" title="3.5ã€é˜´å½±"></a>3.5ã€é˜´å½±</h2><p>é˜´å½±ï¼štext-shadow</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* text-shadow: é˜´å½±é¢œè‰²ï¼Œæ°´å¹³åç§»ï¼Œå‚ç›´åç§»ï¼Œé˜´å½±åŠå¾„*/</span></span><br><span class="line"><span class="selector-id">#price</span>&#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">#008800</span> <span class="number">20px</span> -<span class="number">10px</span> <span class="number">2px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*	ç¬¬ä¸€ä¸ªå‚æ•°ï¼šè¡¨ç¤ºæ°´å¹³åç§»</span></span><br><span class="line"><span class="comment">	ç¬¬äºŒä¸ªå‚æ•°ï¼šè¡¨ç¤ºå‚ç›´åç§»</span></span><br><span class="line"><span class="comment">	ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šè¡¨ç¤ºæ¨¡ç³ŠåŠå¾„</span></span><br><span class="line"><span class="comment">	ç¬¬å››ä¸ªå‚æ•°ï¼šè¡¨ç¤ºé¢œè‰²</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="attribute">text-shadow</span>:<span class="number">5px</span> <span class="number">5px</span> <span class="number">5px</span> é¢œè‰²</span><br></pre></td></tr></table></figure>

<h2 id="3-6ã€åˆ—è¡¨ul-li"><a href="#3-6ã€åˆ—è¡¨ul-li" class="headerlink" title="3.6ã€åˆ—è¡¨ul li"></a>3.6ã€åˆ—è¡¨ul li</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>åˆ—è¡¨æ ·å¼<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;css/style.css&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;nav&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>å…¨éƒ¨å•†å“åˆ†ç±»<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>å›¾ä¹¦<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>éŸ³å“<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>æ•°å­—å•†å“<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>å®¶ç”¨ç”µå™¨<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>æ‰‹æœº<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>æ•°ç <span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>ç”µè„‘<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>åŠå…¬<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>å®¶å±…<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>å®¶è£…<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>å¨å…·<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>æœé¥°é‹å¸½<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>ä¸ªæŠ¤åŒ–å¦†<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>ç¤¼å“ç®±åŒ…<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>ä¸­æ ‡<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>ç å®<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>é£Ÿå“é¥®æ–™<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>ä¿å¥é£Ÿå“<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>å½©ç¥¨<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>æ—…è¡Œ<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>å……å€¼<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>ç¥¨åŠ¡<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line">#nav&#123;</span><br><span class="line">    width: 300px;</span><br><span class="line">    background: darkgrey;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.title&#123;</span><br><span class="line">    font-size: 18px;</span><br><span class="line">    font-weight: bold;</span><br><span class="line">    text-indent: 1em;</span><br><span class="line">    line-height: 35px;</span><br><span class="line">    background: red;</span><br><span class="line">&#125;</span><br><span class="line">/*ul li</span><br><span class="line">list-style:</span><br><span class="line">    noneï¼šå»æ‰åœ†ç‚¹</span><br><span class="line">    circleï¼šç©ºå¿ƒåœ†</span><br><span class="line">    decimalï¼šæ•°å­—</span><br><span class="line">    spuareï¼šæ­£æ–¹å½¢</span><br><span class="line">*/</span><br><span class="line">ul&#123;</span><br><span class="line">    background: darkgrey;</span><br><span class="line">&#125;</span><br><span class="line">ul li&#123;</span><br><span class="line">    height: 30px;</span><br><span class="line">    list-style: none;</span><br><span class="line">    text-indent: 1em;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">a&#123;</span><br><span class="line">    text-decoration: none;</span><br><span class="line">    font-size: 14px;</span><br><span class="line">    color: black;</span><br><span class="line">&#125;</span><br><span class="line">a:hover&#123;</span><br><span class="line">    color: orange;</span><br><span class="line">    text-decoration: underline;</span><br><span class="line">&#125;</span><br><span class="line">/*list-style&#123;</span><br><span class="line">	none:å»æ‰åŸç‚¹</span><br><span class="line">	circleï¼šç©ºå¿ƒåœ†</span><br><span class="line">	decimalï¼šæ•°å­—</span><br><span class="line">	squareï¼šæ­£æ–¹å½¢</span><br><span class="line">&#125;*/</span><br><span class="line">ul li&#123;</span><br><span class="line">	height:30px;</span><br><span class="line">	list-style:none;</span><br><span class="line">	text-indent:1em;</span><br><span class="line">&#125;</span><br><span class="line">a&#123;</span><br><span class="line">	text-decoration:none;</span><br><span class="line">	font-size:14px;</span><br><span class="line">	color:#000;</span><br><span class="line">&#125;</span><br><span class="line">a:hover&#123;</span><br><span class="line">	color:orange;</span><br><span class="line">	text-decoration:underline/*ä¸‹åˆ’çº¿*/</span><br><span class="line">&#125;</span><br><span class="line">/*æ”¾åœ¨divä¸­ï¼Œä½œä¸ºå¯¼èˆªæ */</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;nav&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">#nav&#123;</span><br><span class="line">	width:300px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-7ã€èƒŒæ™¯"><a href="#3-7ã€èƒŒæ™¯" class="headerlink" title="3.7ã€èƒŒæ™¯"></a>3.7ã€èƒŒæ™¯</h2><ol>
<li>èƒŒæ™¯é¢œè‰²ï¼šbackground</li>
<li>èƒŒæ™¯å›¾ç‰‡</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">div</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">1000px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">700px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;images/tx.jpg&quot;</span>);</span></span><br><span class="line"><span class="language-css">            <span class="comment">/*é»˜è®¤æ˜¯å…¨éƒ¨å¹³é“ºçš„ repeat*/</span></span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.div1</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-repeat</span>: repeat-x;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.div2</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-repeat</span>: repeat-y;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.div3</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-repeat</span>: no-repeat;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;div1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;div2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;div3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>åˆ—è¡¨æ ·å¼<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;css/style.css&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;nav&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">&quot;title&quot;</span>&gt;</span>å…¨éƒ¨å•†å“åˆ†ç±»<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>å›¾ä¹¦<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>éŸ³å“<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>æ•°å­—å•†å“<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>å®¶ç”¨ç”µå™¨<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>æ‰‹æœº<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>æ•°ç <span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>ç”µè„‘<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>åŠå…¬<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>å®¶å±…<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>å®¶è£…<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>å¨å…·<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>æœé¥°é‹å¸½<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>ä¸ªæŠ¤åŒ–å¦†<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>ç¤¼å“ç®±åŒ…<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>ä¸­æ ‡<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>ç å®<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>é£Ÿå“é¥®æ–™<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>ä¿å¥é£Ÿå“<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>å½©ç¥¨<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>æ—…è¡Œ<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>å……å€¼<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>ç¥¨åŠ¡<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>CSS</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#nav</span>&#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">background</span>: darkgrey;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.title</span>&#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line">    <span class="attribute">text-indent</span>: <span class="number">1em</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">35px</span>;</span><br><span class="line">    <span class="attribute">background</span>: red <span class="built_in">url</span>(<span class="string">&quot;../images/c.jpg&quot;</span>) <span class="number">270px</span> <span class="number">10px</span> no-repeat;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*ul li</span></span><br><span class="line"><span class="comment">list-style:</span></span><br><span class="line"><span class="comment">    noneï¼šå»æ‰åœ†ç‚¹</span></span><br><span class="line"><span class="comment">    circleï¼šç©ºå¿ƒåœ†</span></span><br><span class="line"><span class="comment">    decimalï¼šæ•°å­—</span></span><br><span class="line"><span class="comment">    spuareï¼šæ­£æ–¹å½¢</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">/*ul&#123;</span></span><br><span class="line"><span class="comment">    background: darkgrey;</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br><span class="line"><span class="selector-tag">ul</span> <span class="selector-tag">li</span>&#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">    <span class="attribute">text-indent</span>: <span class="number">1em</span>;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;../images/b.jpg&quot;</span>);</span><br><span class="line">    <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">    <span class="attribute">background-position</span>: <span class="number">236px</span> <span class="number">2px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">a</span>&#123;</span><br><span class="line">    <span class="attribute">text-decoration</span>: none;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">    <span class="attribute">color</span>: black;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">    <span class="attribute">color</span>: orange;</span><br><span class="line">    <span class="attribute">text-decoration</span>: underline;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2023/11/05/CSS/1665666779789-d0a77b11-e34f-4bfb-9e36-d1cd2c4404a2.png" class title="img">

<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">background-image</span>:<span class="built_in">url</span>(<span class="string">&quot;&quot;</span>);<span class="comment">/*é»˜è®¤æ˜¯å…¨éƒ¨å¹³é“ºçš„*/</span></span><br><span class="line"><span class="attribute">background-repeat</span>:repeat-x<span class="comment">/*æ°´å¹³å¹³é“º*/</span></span><br><span class="line">background-repeat:repeat-y<span class="comment">/*å‚ç›´å¹³é“º*/</span></span><br><span class="line">background-repeat:no-repeat<span class="comment">/*ä¸å¹³é“º*/</span></span><br></pre></td></tr></table></figure>

<p>ç»¼åˆä½¿ç”¨</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">background</span>:red <span class="built_in">url</span>(<span class="string">&quot;å›¾ç‰‡ç›¸å¯¹è·¯åŠ²&quot;</span>) <span class="number">270px</span> <span class="number">10px</span> no-repeat</span><br><span class="line">background-positionï¼š<span class="comment">/*å®šä½ï¼šèƒŒæ™¯ä½ç½®*/</span></span><br></pre></td></tr></table></figure>

<h2 id="3-8ã€æ¸å˜"><a href="#3-8ã€æ¸å˜" class="headerlink" title="3.8ã€æ¸å˜"></a>3.8ã€æ¸å˜</h2><p>çº¿æ€§æ¸å˜ç›¸å…³å±æ€§ï¼š<a href="https://www.runoob.com/cssref/pr-background-image.html">background-image</a>ã€‚</p>
<p>çº¿æ€§æ¸å˜åœ¨çº¿å·¥å…·ï¼š<a href="https://c.runoob.com/more/gradients/#LemonLime">æ¸å˜åœ¨çº¿å·¥å…·</a>ã€‚</p>
<ul>
<li><strong>çº¿æ€§æ¸å˜ï¼ˆLinear Gradientsï¼‰- å‘ä¸‹&#x2F;å‘ä¸Š&#x2F;å‘å·¦&#x2F;å‘å³&#x2F;å¯¹è§’æ–¹å‘</strong></li>
<li><strong>å¾„å‘æ¸å˜ï¼ˆRadial Gradientsï¼‰- ç”±å®ƒä»¬çš„ä¸­å¿ƒå®šä¹‰</strong></li>
</ul>
<h3 id="3-8-1çº¿æ€§æ¸å˜"><a href="#3-8-1çº¿æ€§æ¸å˜" class="headerlink" title="3.8.1çº¿æ€§æ¸å˜"></a>3.8.1çº¿æ€§æ¸å˜</h3><p><strong>çº¿æ€§æ¸å˜çš„å®ä¾‹ï¼š</strong></p>
<img src="/2023/11/05/CSS/1665674230740-5405fd5c-d3af-4a65-95ca-beb2964bc559.png" class title="img">

<p><strong>è¯­æ³•</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(direction, color-stop1, color-stop2, ...);</span><br></pre></td></tr></table></figure>

<p><strong>çº¿æ€§æ¸å˜ - ä»ä¸Šåˆ°ä¸‹ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼‰</strong></p>
<p>ä¸‹é¢çš„å®ä¾‹æ¼”ç¤ºäº†ä»	é¡¶éƒ¨å¼€å§‹çš„çº¿æ€§æ¸å˜ã€‚èµ·ç‚¹æ˜¯çº¢è‰²ï¼Œæ…¢æ…¢è¿‡æ¸¡åˆ°è“è‰²ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#grad</span> &#123;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(<span class="number">#e66465</span>, <span class="number">#9198e5</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>çº¿æ€§æ¸å˜ - ä»å·¦åˆ°å³</strong></p>
<p>ä¸‹é¢çš„å®ä¾‹æ¼”ç¤ºäº†ä»å·¦è¾¹å¼€å§‹çš„çº¿æ€§æ¸å˜ã€‚èµ·ç‚¹æ˜¯çº¢è‰²ï¼Œæ…¢æ…¢è¿‡æ¸¡åˆ°é»„è‰²ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#grad</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(to right, red , yellow);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>çº¿æ€§æ¸å˜ - å¯¹è§’</strong></p>
<p>ä½ å¯ä»¥é€šè¿‡æŒ‡å®šæ°´å¹³å’Œå‚ç›´çš„èµ·å§‹ä½ç½®æ¥åˆ¶ä½œä¸€ä¸ªå¯¹è§’æ¸å˜ã€‚</p>
<p>ä¸‹é¢çš„å®ä¾‹æ¼”ç¤ºäº†ä»å·¦ä¸Šè§’å¼€å§‹ï¼ˆåˆ°å³ä¸‹è§’ï¼‰çš„çº¿æ€§æ¸å˜ã€‚èµ·ç‚¹æ˜¯çº¢è‰²ï¼Œæ…¢æ…¢è¿‡æ¸¡åˆ°é»„è‰²ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#grad</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(to bottom right, red, yellow);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-8-1-1ä½¿ç”¨è§’åº¦"><a href="#3-8-1-1ä½¿ç”¨è§’åº¦" class="headerlink" title="3.8.1.1ä½¿ç”¨è§’åº¦"></a>3.8.1.1ä½¿ç”¨è§’åº¦</h4><p>å¦‚æœä½ æƒ³è¦åœ¨æ¸å˜çš„æ–¹å‘ä¸Šåšæ›´å¤šçš„æ§åˆ¶ï¼Œä½ å¯ä»¥å®šä¹‰ä¸€ä¸ªè§’åº¦ï¼Œè€Œä¸ç”¨é¢„å®šä¹‰æ–¹å‘ï¼ˆto bottomã€to topã€to rightã€to leftã€to bottom rightï¼Œç­‰ç­‰ï¼‰ã€‚</p>
<p><strong>è¯­æ³•</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(angle, color-stop1, color-stop2);</span><br></pre></td></tr></table></figure>

<p>è§’åº¦æ˜¯æŒ‡æ°´å¹³çº¿å’Œæ¸å˜çº¿ä¹‹é—´çš„è§’åº¦ï¼Œé€†æ—¶é’ˆæ–¹å‘è®¡ç®—ã€‚æ¢å¥è¯è¯´ï¼Œ0deg å°†åˆ›å»ºä¸€ä¸ªä»ä¸‹åˆ°ä¸Šçš„æ¸å˜ï¼Œ90deg å°†åˆ›å»ºä¸€ä¸ªä»å·¦åˆ°å³çš„æ¸å˜ã€‚</p>
<img src="/2023/11/05/CSS/1665674626937-5f37d708-7eb1-49df-8be1-735a5d44c5ac.png" class title="img">

<p>ä½†æ˜¯ï¼Œè¯·æ³¨æ„å¾ˆå¤šæµè§ˆå™¨ï¼ˆChromeã€Safariã€firefoxç­‰ï¼‰çš„ä½¿ç”¨äº†æ—§çš„æ ‡å‡†ï¼Œå³ 0deg å°†åˆ›å»ºä¸€ä¸ªä»å·¦åˆ°å³çš„æ¸å˜ï¼Œ90deg å°†åˆ›å»ºä¸€ä¸ªä»ä¸‹åˆ°ä¸Šçš„æ¸å˜ã€‚æ¢ç®—å…¬å¼ <strong>90 - x &#x3D; y</strong> å…¶ä¸­ x ä¸ºæ ‡å‡†è§’åº¦ï¼Œyä¸ºéæ ‡å‡†è§’åº¦ã€‚</p>
<p>ä¸‹é¢çš„å®ä¾‹æ¼”ç¤ºäº†å¦‚ä½•åœ¨çº¿æ€§æ¸å˜ä¸Šä½¿ç”¨è§’åº¦ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#grad</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(-<span class="number">90deg</span>, red, yellow);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-8-1-2ä½¿ç”¨å¤šä¸ªé¢œè‰²èŠ‚ç‚¹"><a href="#3-8-1-2ä½¿ç”¨å¤šä¸ªé¢œè‰²èŠ‚ç‚¹" class="headerlink" title="3.8.1.2ä½¿ç”¨å¤šä¸ªé¢œè‰²èŠ‚ç‚¹"></a>3.8.1.2ä½¿ç”¨å¤šä¸ªé¢œè‰²èŠ‚ç‚¹</h4><p>ä¸‹é¢çš„å®ä¾‹æ¼”ç¤ºäº†å¦‚ä½•è®¾ç½®å¤šä¸ªé¢œè‰²èŠ‚ç‚¹ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#grad</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(red, yellow, green);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸‹é¢çš„å®ä¾‹æ¼”ç¤ºäº†å¦‚ä½•åˆ›å»ºä¸€ä¸ªå¸¦æœ‰å½©è™¹é¢œè‰²å’Œæ–‡æœ¬çš„çº¿æ€§æ¸å˜ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#grad</span> &#123;</span><br><span class="line">  <span class="comment">/* æ ‡å‡†çš„è¯­æ³• */</span></span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(to right, red,orange,yellow,green,blue,indigo,violet);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-8-1-3ä½¿ç”¨é€æ˜åº¦ï¼ˆtransparentï¼‰"><a href="#3-8-1-3ä½¿ç”¨é€æ˜åº¦ï¼ˆtransparentï¼‰" class="headerlink" title="3.8.1.3ä½¿ç”¨é€æ˜åº¦ï¼ˆtransparentï¼‰"></a>3.8.1.3ä½¿ç”¨é€æ˜åº¦ï¼ˆtransparentï¼‰</h4><p>CSS3 æ¸å˜ä¹Ÿæ”¯æŒé€æ˜åº¦ï¼ˆtransparentï¼‰ï¼Œå¯ç”¨äºåˆ›å»ºå‡å¼±å˜æ·¡çš„æ•ˆæœã€‚</p>
<p>ä¸ºäº†æ·»åŠ é€æ˜åº¦ï¼Œæˆ‘ä»¬ä½¿ç”¨ rgba() å‡½æ•°æ¥å®šä¹‰é¢œè‰²èŠ‚ç‚¹ã€‚rgba() å‡½æ•°ä¸­çš„æœ€åä¸€ä¸ªå‚æ•°å¯ä»¥æ˜¯ä» 0 åˆ° 1 çš„å€¼ï¼Œå®ƒå®šä¹‰äº†é¢œè‰²çš„é€æ˜åº¦ï¼š0 è¡¨ç¤ºå®Œå…¨é€æ˜ï¼Œ1 è¡¨ç¤ºå®Œå…¨ä¸é€æ˜ã€‚</p>
<p>ä¸‹é¢çš„å®ä¾‹æ¼”ç¤ºäº†ä»å·¦è¾¹å¼€å§‹çš„çº¿æ€§æ¸å˜ã€‚èµ·ç‚¹æ˜¯å®Œå…¨é€æ˜ï¼Œæ…¢æ…¢è¿‡æ¸¡åˆ°å®Œå…¨ä¸é€æ˜çš„çº¢è‰²ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#grad</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(to right, <span class="built_in">rgba</span>(<span class="number">255</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>), <span class="built_in">rgba</span>(<span class="number">255</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-8-1-4é‡å¤çš„çº¿æ€§æ¸å˜"><a href="#3-8-1-4é‡å¤çš„çº¿æ€§æ¸å˜" class="headerlink" title="3.8.1.4é‡å¤çš„çº¿æ€§æ¸å˜"></a>3.8.1.4é‡å¤çš„çº¿æ€§æ¸å˜</h4><p>repeating-linear-gradient() å‡½æ•°ç”¨äºé‡å¤çº¿æ€§æ¸å˜ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#grad</span> &#123;</span><br><span class="line">  <span class="comment">/* æ ‡å‡†çš„è¯­æ³• */</span></span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">repeating-linear-gradient</span>(red, yellow <span class="number">10%</span>, green <span class="number">20%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-8-2å¾„å‘æ¸å˜"><a href="#3-8-2å¾„å‘æ¸å˜" class="headerlink" title="3.8.2å¾„å‘æ¸å˜"></a>3.8.2å¾„å‘æ¸å˜</h3><p>å¾„å‘æ¸å˜ç”±å®ƒçš„ä¸­å¿ƒå®šä¹‰ã€‚</p>
<p>ä¸ºäº†åˆ›å»ºä¸€ä¸ªå¾„å‘æ¸å˜ï¼Œä½ ä¹Ÿå¿…é¡»è‡³å°‘å®šä¹‰ä¸¤ç§é¢œè‰²èŠ‚ç‚¹ã€‚é¢œè‰²èŠ‚ç‚¹å³ä½ æƒ³è¦å‘ˆç°å¹³ç¨³è¿‡æ¸¡çš„é¢œè‰²ã€‚åŒæ—¶ï¼Œä½ ä¹Ÿå¯ä»¥æŒ‡å®šæ¸å˜çš„ä¸­å¿ƒã€å½¢çŠ¶ï¼ˆåœ†å½¢æˆ–æ¤­åœ†å½¢ï¼‰ã€å¤§å°ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¸å˜çš„ä¸­å¿ƒæ˜¯ centerï¼ˆè¡¨ç¤ºåœ¨ä¸­å¿ƒç‚¹ï¼‰ï¼Œæ¸å˜çš„å½¢çŠ¶æ˜¯ ellipseï¼ˆè¡¨ç¤ºæ¤­åœ†å½¢ï¼‰ï¼Œæ¸å˜çš„å¤§å°æ˜¯ farthest-cornerï¼ˆè¡¨ç¤ºåˆ°æœ€è¿œçš„è§’è½ï¼‰ã€‚</p>
<p><strong>å¾„å‘æ¸å˜çš„å®ä¾‹ï¼š</strong></p>
<img src="/2023/11/05/CSS/1665675131783-c9ac8550-c6cd-40ee-98aa-c13a53f27b78.png" class title="img">

<p><strong>è¯­æ³•</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">background-image</span>: <span class="built_in">radial-gradient</span>(shape size at position, start-color, ..., last-color);</span><br></pre></td></tr></table></figure>

<p><strong>å¾„å‘æ¸å˜ - é¢œè‰²èŠ‚ç‚¹å‡åŒ€åˆ†å¸ƒï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼‰</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#grad</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">radial-gradient</span>(red, yellow, green);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>å¾„å‘æ¸å˜ - é¢œè‰²èŠ‚ç‚¹ä¸å‡åŒ€åˆ†å¸ƒ</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#grad</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">radial-gradient</span>(red <span class="number">5%</span>, yellow <span class="number">15%</span>, green <span class="number">60%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-8-2-1è®¾ç½®å½¢çŠ¶"><a href="#3-8-2-1è®¾ç½®å½¢çŠ¶" class="headerlink" title="3.8.2.1è®¾ç½®å½¢çŠ¶"></a>3.8.2.1è®¾ç½®å½¢çŠ¶</h4><p>shape å‚æ•°å®šä¹‰äº†å½¢çŠ¶ã€‚å®ƒå¯ä»¥æ˜¯å€¼ circle æˆ– ellipseã€‚å…¶ä¸­ï¼Œcircle è¡¨ç¤ºåœ†å½¢ï¼Œellipse è¡¨ç¤ºæ¤­åœ†å½¢ã€‚é»˜è®¤å€¼æ˜¯ ellipseã€‚</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#grad</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">radial-gradient</span>(circle, red, yellow, green);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-8-2-2ä¸åŒå°ºå¯¸å¤§å°å…³é”®å­—çš„ä½¿ç”¨"><a href="#3-8-2-2ä¸åŒå°ºå¯¸å¤§å°å…³é”®å­—çš„ä½¿ç”¨" class="headerlink" title="3.8.2.2ä¸åŒå°ºå¯¸å¤§å°å…³é”®å­—çš„ä½¿ç”¨"></a>3.8.2.2ä¸åŒå°ºå¯¸å¤§å°å…³é”®å­—çš„ä½¿ç”¨</h4><p>size å‚æ•°å®šä¹‰äº†æ¸å˜çš„å¤§å°ã€‚å®ƒå¯ä»¥æ˜¯ä»¥ä¸‹å››ä¸ªå€¼ï¼š</p>
<ul>
<li><strong>closest-side</strong></li>
<li><strong>farthest-side</strong></li>
<li><strong>closest-corner</strong></li>
<li><strong>farthest-corner</strong></li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#grad1</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">radial-gradient</span>(closest-side at <span class="number">60%</span> <span class="number">55%</span>, red, yellow, black);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-id">#grad2</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">radial-gradient</span>(farthest-side at <span class="number">60%</span> <span class="number">55%</span>, red, yellow, black);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3-8-2-3é‡å¤çš„å¾„å‘æ¸å˜"><a href="#3-8-2-3é‡å¤çš„å¾„å‘æ¸å˜" class="headerlink" title="3.8.2.3é‡å¤çš„å¾„å‘æ¸å˜"></a>3.8.2.3é‡å¤çš„å¾„å‘æ¸å˜</h4><p>repeating-radial-gradient() å‡½æ•°ç”¨äºé‡å¤å¾„å‘æ¸å˜ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#grad</span> &#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">repeating-radial-gradient</span>(red, yellow <span class="number">10%</span>, green <span class="number">15%</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="4ã€ç›’å­æ¨¡å‹"><a href="#4ã€ç›’å­æ¨¡å‹" class="headerlink" title="4ã€ç›’å­æ¨¡å‹"></a>4ã€<a href="https://so.csdn.net/so/search?q=%E7%9B%92%E5%AD%90%E6%A8%A1%E5%9E%8B&spm=1001.2101.3001.7020">ç›’å­æ¨¡å‹</a></h1><h2 id="4-1ä»€ä¹ˆæ˜¯ç›’å­æ¨¡å‹"><a href="#4-1ä»€ä¹ˆæ˜¯ç›’å­æ¨¡å‹" class="headerlink" title="4.1ä»€ä¹ˆæ˜¯ç›’å­æ¨¡å‹"></a>4.1ä»€ä¹ˆæ˜¯ç›’å­æ¨¡å‹</h2><img src="/2023/11/05/CSS/1665666855833-5e1a2d8e-37f7-498e-a7eb-4a1b85df404e.png" class title="img">

<ol>
<li>marginï¼šå¤–è¾¹è·</li>
<li>paddingï¼šå†…è¾¹è·</li>
<li>borderï¼šè¾¹æ¡†</li>
</ol>
<h2 id="4-2ã€è¾¹æ¡†"><a href="#4-2ã€è¾¹æ¡†" class="headerlink" title="4.2ã€è¾¹æ¡†"></a>4.2ã€è¾¹æ¡†</h2><p>borderï¼šç²—ç»† æ ·å¼ é¢œè‰²</p>
<ol>
<li>è¾¹æ¡†çš„ç²—ç»†</li>
<li>è¾¹æ¡†çš„æ ·å¼</li>
<li>è¾¹æ¡†çš„é¢œè‰²</li>
</ol>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="comment">/*bodyæ€»æœ‰ä¸€ä¸ªé»˜è®¤çš„å¤–è¾¹æ¡†marginï¼š0,å¸¸è§çš„*/</span></span></span><br><span class="line"><span class="language-css">        <span class="comment">/*body&#123;</span></span></span><br><span class="line"><span class="comment"><span class="language-css">            margin: 0;</span></span></span><br><span class="line"><span class="comment"><span class="language-css">            padding: 0;</span></span></span><br><span class="line"><span class="comment"><span class="language-css">            text-decoration: none;</span></span></span><br><span class="line"><span class="comment"><span class="language-css">        &#125;*/</span></span></span><br><span class="line"><span class="language-css">        <span class="comment">/*border:ç²—ç»†ï¼Œæ ·å¼ï¼Œé¢œè‰²*/</span></span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#box</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">h2</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: cornflowerblue ;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">line-height</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">form</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: <span class="number">#008800</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">div</span><span class="selector-pseudo">:nth-of-type</span>(<span class="number">1</span>) <span class="selector-tag">input</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">3px</span> solid black;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">div</span><span class="selector-pseudo">:nth-of-type</span>(<span class="number">2</span>) <span class="selector-tag">input</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">3px</span> dashed yellow;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">div</span><span class="selector-pseudo">:nth-of-type</span>(<span class="number">3</span>) <span class="selector-tag">input</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">2px</span> dashed green;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>ä¼šå‘˜ç™»å½•<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;#&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>ç”¨æˆ·åï¼š<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>å¯†ç ï¼š<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>é‚®ç®±ï¼š<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ç›’å­çš„è®¡ç®—æ–¹å¼ï¼šä½ è¿™ä¸ªå…ƒç´ åˆ°åº•å¤šå¤§ï¼Ÿ</p>
<img src="/2023/11/05/CSS/1665666923611-ab43dc5e-dbaf-4c58-a01e-fe20327f9ba1.png" class title="img">

<p>margin-left&#x2F;right&#x2F;top&#x2F;bottomâ€“&gt;è¡¨ç¤ºå››è¾¹ï¼Œå¯åˆ†åˆ«è®¾ç½®ï¼Œä¹Ÿå¯ä»¥åŒæ—¶è®¾ç½®å¦‚ä¸‹</p>
<p>left-&gt;å·¦ right-&gt;å³ top-&gt;ä¸Š bottom-&gt;ä¸‹</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">margin</span>:<span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span><span class="comment">/*åˆ†åˆ«è¡¨ç¤ºä¸Šã€å³ã€ä¸‹ã€å·¦ï¼›ä»ä¸Šå¼€å§‹é¡ºæ—¶é’ˆ*/</span></span><br><span class="line"><span class="comment">/*ä¾‹1ï¼šå±…ä¸­*/</span></span><br><span class="line">margin:<span class="number">0</span> auto <span class="comment">/*autoè¡¨ç¤ºå·¦å³è‡ªåŠ¨*/</span></span><br><span class="line"><span class="comment">/*ä¾‹2ï¼š*/</span></span><br><span class="line">margin:<span class="number">4px</span><span class="comment">/*è¡¨ç¤ºä¸Šã€å³ã€ä¸‹ã€å·¦éƒ½ä¸º4px*/</span></span><br><span class="line"><span class="comment">/*ä¾‹3*/</span></span><br><span class="line">margin:<span class="number">10px</span> <span class="number">20px</span> <span class="number">30px</span><span class="comment">/*è¡¨ç¤ºä¸Šä¸º10pxï¼Œå·¦å³ä¸º20pxï¼Œä¸‹ä¸º30px*/</span></span><br></pre></td></tr></table></figure>

<p>ç›’å­çš„è®¡ç®—æ–¹å¼ï¼š</p>
<p>margin+border+padding+å†…å®¹çš„å¤§å°</p>
<p>æ€»ç»“ï¼š<br>bodyæ€»æœ‰ä¸€ä¸ªé»˜è®¤çš„å¤–è¾¹è· margin:0<br>å¸¸è§æ“ä½œï¼šåˆå§‹åŒ–</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">margin</span>:<span class="number">0</span>;</span><br><span class="line"><span class="attribute">padding</span>:<span class="number">0</span>;</span><br><span class="line"><span class="attribute">text-decoration</span>:none;<span class="comment">/*è¶…é“¾æ¥å»ä¸‹åˆ’çº¿*/</span></span><br></pre></td></tr></table></figure>

<h2 id="4-4ã€åœ†è§’è¾¹æ¡†â€”-border-radius"><a href="#4-4ã€åœ†è§’è¾¹æ¡†â€”-border-radius" class="headerlink" title="4.4ã€åœ†è§’è¾¹æ¡†â€”-border-radius"></a>4.4ã€åœ†è§’è¾¹æ¡†â€”-border-radius</h2><p>border-radiusæœ‰å››ä¸ªå‚æ•°ï¼ˆé¡ºæ—¶é’ˆï¼‰ï¼Œå·¦ä¸Šå¼€å§‹<br>åœ†åœˆï¼šåœ†è§’&#x3D;åŠå¾„</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    å·¦ä¸Š å³ä¸Š å³ä¸‹ å·¦ä¸‹ï¼Œé¡ºæ—¶é’ˆæ–¹å‘</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        åœ†åœˆï¼š åœ†è§’ = åŠå¾„</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">div</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">10px</span> solid red;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#div1</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">10px</span> solid red;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#div2</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">10px</span> solid red;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">100px</span> <span class="number">100px</span> <span class="number">0</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#div3</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">10px</span> solid red;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">100px</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">img</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/tx.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="4-5ã€ç›’å­é˜´å½±"><a href="#4-5ã€ç›’å­é˜´å½±" class="headerlink" title="4.5ã€ç›’å­é˜´å½±"></a>4.5ã€ç›’å­é˜´å½±</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--marginï¼š0 auto; å±…ä¸­</span></span><br><span class="line"><span class="comment">    è¦æ±‚ï¼šå—å…ƒç´ ï¼Œå—å…ƒç´ æœ‰å›ºå®šå®½åº¦--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">img</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">10px</span> <span class="number">10px</span> <span class="number">100px</span> yellow;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 500px;display: block;text-align: center &quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/tx.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æºç ä¹‹å®¶ï¼š<a href="https://www.mycodes.net/">https://www.mycodes.net/</a></p>
<p>æ¨¡æ¿ä¹‹å®¶ï¼š<a href="http://www.cssmoban.com/">http://www.cssmoban.com/</a></p>
<h1 id="5ã€æµ®åŠ¨"><a href="#5ã€æµ®åŠ¨" class="headerlink" title="5ã€æµ®åŠ¨"></a>5ã€æµ®åŠ¨</h1><h2 id="5-1æ ‡å‡†æ–‡æ¡£æµ"><a href="#5-1æ ‡å‡†æ–‡æ¡£æµ" class="headerlink" title="5.1æ ‡å‡†æ–‡æ¡£æµ"></a>5.1æ ‡å‡†æ–‡æ¡£æµ</h2><img src="/2023/11/05/CSS/1665667185428-d741f563-be7c-4ddf-ad7c-61fece71624f.png" class title="img">

<p>å—çº§å…ƒç´ ï¼šç‹¬å ä¸€è¡Œ h1~h6 ã€pã€divã€ åˆ—è¡¨â€¦</p>
<p>è¡Œå†…å…ƒç´ ï¼šä¸ç‹¬å ä¸€è¡Œ spanã€aã€imgã€strong</p>
<p>æ³¨ï¼š è¡Œå†…å…ƒç´ å¯ä»¥åŒ…å«åœ¨å—çº§å…ƒç´ ä¸­ï¼Œåä¹‹åˆ™ä¸å¯ä»¥ã€‚</p>
<h2 id="5-2ã€displayï¼ˆé‡è¦ï¼‰"><a href="#5-2ã€displayï¼ˆé‡è¦ï¼‰" class="headerlink" title="5.2ã€displayï¼ˆé‡è¦ï¼‰"></a>5.2ã€displayï¼ˆé‡è¦ï¼‰</h2><ol>
<li>blockï¼šå—å…ƒç´ </li>
<li>inlineï¼šè¡Œå†…å…ƒç´ </li>
<li>inline-blockï¼šæ˜¯å—å…ƒç´ ï¼Œä½†æ˜¯å¯ä»¥å†…è”ï¼Œåœ¨ä¸€è¡Œ</li>
<li>noneï¼šæ¶ˆå¤±</li>
</ol>
<p>è¿™ä¹Ÿæ˜¯ä¸€ç§å®ç°è¡Œå†…å…ƒç´ æ’åˆ—çš„æ–¹å¼ï¼Œä½†æ˜¯æˆ‘ä»¬å¾ˆå¤šæƒ…å†µç”¨float</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--block å—å…ƒç´ </span></span><br><span class="line"><span class="comment">        inline è¡Œå†…å…ƒç´ </span></span><br><span class="line"><span class="comment">        inline-block æ˜¯å—å…ƒç´ ï¼Œä½†æ˜¯å¯ä»¥å†…è” ï¼Œåœ¨ä¸€è¡Œ</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">div</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: inline-block;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">span</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: inline-block;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>divå—å…ƒç´ <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>spanè¡Œå†…å…ƒç´ <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>QQä¼šå‘˜é¡µé¢å¯¼èˆªç»ƒä¹ </p>
<img src="/2023/11/05/CSS/1665667358821-18b230ff-763e-40f9-a753-0ffa08f8dff7.png" class title="img">

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>QQä¼šå‘˜<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;css/style.css&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;wrap&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¤´éƒ¨--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">header</span> <span class="attr">class</span>=<span class="string">&quot;nav-header&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;head-contain&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;top-logo&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;img/logo.png&quot;</span> <span class="attr">width</span>=<span class="string">&quot;145&quot;</span> <span class="attr">height</span>=<span class="string">&quot;90&quot;</span> /&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">&quot;top-nav&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>åŠŸèƒ½ç‰¹æƒ<span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>æ¸¸æˆç‰¹æƒ<span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>ç”Ÿæ´»ç‰¹æƒ<span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>ä¼šå‘˜ç‰¹æƒ<span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>æˆé•¿ä½“ç³»<span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>å¹´è´¹ä¸“åŒº<span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>è¶…çº§ä¼šå‘˜<span class="tag">&lt;/<span class="name">a</span>&gt;</span> <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;top-right&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>ç™»å½•<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&quot;</span>&gt;</span>å¼€é€šè¶…çº§ä¼šå‘˜<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line">*&#123;</span><br><span class="line">    padding:0;</span><br><span class="line">    margin: 0;</span><br><span class="line">&#125;</span><br><span class="line">a&#123;</span><br><span class="line">    text-decoration: none;</span><br><span class="line">&#125;</span><br><span class="line">.nav-header&#123;</span><br><span class="line">    height: 90px;</span><br><span class="line">    width: 100%;</span><br><span class="line">    background: rgba(0,0,0,.6);</span><br><span class="line">&#125;</span><br><span class="line">.head-contain&#123;</span><br><span class="line">    width: 1180px;</span><br><span class="line">    height: 90px;</span><br><span class="line">    margin: 0 auto;</span><br><span class="line">    text-align: center;</span><br><span class="line">&#125;</span><br><span class="line">.top-logo,.top-nav,.top-nav li,.top-right&#123;</span><br><span class="line">    height: 90px;</span><br><span class="line">    display: inline-block;</span><br><span class="line">    vertical-align: top;</span><br><span class="line">&#125;</span><br><span class="line">.top-nav&#123;</span><br><span class="line">    margin: 0 48px;</span><br><span class="line">&#125;</span><br><span class="line">.top-nav li&#123;</span><br><span class="line">    line-height: 90px;</span><br><span class="line">    width: 90px;</span><br><span class="line">&#125;</span><br><span class="line">.top-nav li a&#123;</span><br><span class="line">    display: block;</span><br><span class="line">    text-align: center;</span><br><span class="line">    font-size: 16px;</span><br><span class="line">    color: #fff;</span><br><span class="line">&#125;</span><br><span class="line">.top-nav li a:hover&#123;</span><br><span class="line">    color: blue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.top-right a&#123;</span><br><span class="line">    display: inline-block;</span><br><span class="line">    font-size: 16px;</span><br><span class="line">    text-align: center;</span><br><span class="line">    margin-top: 25px;</span><br><span class="line">    border-radius: 35px;</span><br><span class="line">&#125;</span><br><span class="line">.top-right a:first-of-type&#123;</span><br><span class="line">    width: 93px;</span><br><span class="line">    height: 38px;</span><br><span class="line">    line-height: 38px;</span><br><span class="line">    color: #fad65c;</span><br><span class="line">    border: 1px #fad65c solid;</span><br><span class="line">&#125;</span><br><span class="line">.top-right a:first-of-type:hover&#123;</span><br><span class="line">    color: #986b0d;</span><br><span class="line">    background: #fad65c;</span><br><span class="line">&#125;</span><br><span class="line">.top-right a:last-of-type&#123;</span><br><span class="line">    width: 140px;</span><br><span class="line">    height: 40px;</span><br><span class="line">    font-weight: 700;</span><br><span class="line">    line-height: 40px;</span><br><span class="line">    background: #fad65c;</span><br><span class="line">    color: #986b0d;</span><br><span class="line">&#125;</span><br><span class="line">.top-right a:last-of-type:hover&#123;</span><br><span class="line">    background: #fddc6c;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img src="/2023/11/05/CSS/1665667387932-aef6cd5b-4874-4540-a877-8b51198c6c7c.png" class title="img">

<h2 id="5-3ã€floatï¼šleft-rightå·¦å³æµ®åŠ¨"><a href="#5-3ã€floatï¼šleft-rightå·¦å³æµ®åŠ¨" class="headerlink" title="5.3ã€floatï¼šleft&#x2F;rightå·¦å³æµ®åŠ¨"></a>5.3ã€floatï¼šleft&#x2F;rightå·¦å³æµ®åŠ¨</h2><p>clearï¼šboth</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;css/style.css&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layer01&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/1.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layer02&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/2.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layer03&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/3.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layer04&quot;</span>&gt;</span></span><br><span class="line">        æµ®åŠ¨çš„ç›’å­å¯ä»¥å‘å·¦æµ®åŠ¨ï¼Œä¹Ÿå¯ä»¥å‘å³æµ®åŠ¨ï¼ŒçŸ¥é“å®ƒçš„å¤–è¾¹ç¼˜ç¢°åˆ°åŒ…å«æˆ–å¦ä¸€ä¸ªæµ®åŠ¨ç›’å­ä¸ºæ­¢</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line">div&#123;</span><br><span class="line">    margin: 10px;</span><br><span class="line">    padding: 5px;</span><br><span class="line">&#125;</span><br><span class="line">#father&#123;</span><br><span class="line">    border: 1px #000 solid;</span><br><span class="line">&#125;</span><br><span class="line">.layer01&#123;</span><br><span class="line">    border: 1px #F00 dashed;</span><br><span class="line">    display: inline-block;</span><br><span class="line">    float: left;/*å‘å·¦æµ®åŠ¨*/</span><br><span class="line">    clear: both;/*æ¸…æ¥šæµ®åŠ¨*/</span><br><span class="line">&#125;</span><br><span class="line">.layer02&#123;</span><br><span class="line">    border: 1px #00F dashed;</span><br><span class="line">    display: inline-block;</span><br><span class="line">    float: left;</span><br><span class="line">    clear: both;</span><br><span class="line">&#125;</span><br><span class="line">.layer03&#123;</span><br><span class="line">    border: 1px #060 dashed;</span><br><span class="line">    display: inline-block;</span><br><span class="line">    float: left;</span><br><span class="line">    clear: both;</span><br><span class="line">&#125;</span><br><span class="line">.layer04&#123;</span><br><span class="line">    border: 1px #666 dashed;</span><br><span class="line">    font-size: 12px;</span><br><span class="line">    line-height: 23px;</span><br><span class="line">    float: left;</span><br><span class="line">    clear: both;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5-4ã€overflowåŠçˆ¶çº§è¾¹æ¡†å¡Œé™·é—®é¢˜"><a href="#5-4ã€overflowåŠçˆ¶çº§è¾¹æ¡†å¡Œé™·é—®é¢˜" class="headerlink" title="5.4ã€overflowåŠçˆ¶çº§è¾¹æ¡†å¡Œé™·é—®é¢˜"></a>5.4ã€overflowåŠçˆ¶çº§è¾¹æ¡†å¡Œé™·é—®é¢˜</h2><p>clearï¼š</p>
<p>rightï¼šå³ä¾§ä¸å…è®¸æœ‰æµ®åŠ¨å…ƒç´ <br>leftï¼šå·¦ä¾§ä¸å…è®¸æœ‰æµ®åŠ¨å…ƒç´ <br>bothï¼šä¸¤ä¾§ä¸å…è®¸æœ‰æµ®åŠ¨å…ƒç´ <br>noneï¼š</p>
<p>è§£å†³å¡Œé™·é—®é¢˜æ–¹æ¡ˆï¼š<br>æ–¹æ¡ˆä¸€ï¼šå¢åŠ çˆ¶çº§å…ƒç´ çš„é«˜åº¦ï¼›</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#father</span>&#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> <span class="number">#000</span> solid;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">800px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ–¹æ¡ˆäºŒï¼šå¢åŠ ä¸€ä¸ªç©ºçš„divæ ‡ç­¾ï¼Œæ¸…é™¤æµ®åŠ¨</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;css/style.css&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layer01&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/1.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layer02&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/2.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layer03&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/3.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;layer04&quot;</span>&gt;</span></span><br><span class="line">        æµ®åŠ¨çš„ç›’å­å¯ä»¥å‘å·¦æµ®åŠ¨ï¼Œä¹Ÿå¯ä»¥å‘å³æµ®åŠ¨ï¼ŒçŸ¥é“å®ƒçš„å¤–è¾¹ç¼˜ç¢°åˆ°åŒ…å«æˆ–å¦ä¸€ä¸ªæµ®åŠ¨ç›’å­ä¸ºæ­¢</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;clear&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line">div&#123;</span><br><span class="line">    margin: 10px;</span><br><span class="line">    padding: 5px;</span><br><span class="line">&#125;</span><br><span class="line">#father&#123;</span><br><span class="line">    border: 1px #000 solid;</span><br><span class="line">    height: 800px;</span><br><span class="line">&#125;</span><br><span class="line">.layer01&#123;</span><br><span class="line">    border: 1px #F00 dashed;</span><br><span class="line">    display: inline-block;</span><br><span class="line">    float: left;/*å‘å·¦æµ®åŠ¨*/</span><br><span class="line">&#125;</span><br><span class="line">.layer02&#123;</span><br><span class="line">    border: 1px #00F dashed;</span><br><span class="line">    display: inline-block;</span><br><span class="line">    float: left;</span><br><span class="line">&#125;</span><br><span class="line">.layer03&#123;</span><br><span class="line">    border: 1px #060 dashed;</span><br><span class="line">    display: inline-block;</span><br><span class="line">    float: right;</span><br><span class="line">&#125;</span><br><span class="line">/*</span><br><span class="line">clearï¼šrightï¼›å³ä¾§ä¸å…è®¸æœ‰æµ®åŠ¨å…ƒç´ </span><br><span class="line">clearï¼šleftï¼› å·¦ä¾§ä¸å…è®¸æœ‰æµ®åŠ¨å…ƒç´ </span><br><span class="line">clearï¼šbothï¼› ä¸¤ä¾§ä¸å…è®¸æœ‰æµ®åŠ¨å…ƒç´ </span><br><span class="line">clearï¼šnoneï¼›</span><br><span class="line"> */</span><br><span class="line">.layer04&#123;</span><br><span class="line">    border: 1px #666 dashed;</span><br><span class="line">    font-size: 12px;</span><br><span class="line">    line-height: 23px;</span><br><span class="line">    display: inline-block;</span><br><span class="line">    float: right;</span><br><span class="line">    clear: left;</span><br><span class="line">&#125;</span><br><span class="line">.clear&#123;</span><br><span class="line">    clear: both;</span><br><span class="line">    margin: 0;</span><br><span class="line">    padding: 0;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span> = <span class="string">&quot;clear&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">	<span class="selector-class">.clear</span>&#123;</span></span><br><span class="line"><span class="language-css">		<span class="attribute">clear</span>:both;</span></span><br><span class="line"><span class="language-css">		<span class="attribute">margin</span>:<span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">		<span class="attribute">padding</span>:<span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ–¹æ¡ˆä¸‰ï¼šåœ¨çˆ¶çº§å…ƒç´ ä¸­å¢åŠ ä¸€ä¸ªoverflowï¼šhidden</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">overflow</span>:hidden<span class="comment">/*éšè—*/</span></span><br><span class="line">overflowï¼šscoll<span class="comment">/*æ»šåŠ¨*/</span></span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;en&quot;</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line"></span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        #content&#123;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">150px</span>;</span><br><span class="line">            <span class="attribute">overflow</span>: scroll;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;<span class="selector-tag">div</span> id=&quot;<span class="attribute">content</span>&quot;&gt;</span><br><span class="line">    &lt;<span class="selector-tag">img</span> <span class="attribute">src</span>=&quot;images/<span class="number">1</span><span class="selector-class">.png</span>&quot; alt=&quot;&quot;&gt;</span><br><span class="line">    &lt;<span class="selector-tag">p</span>&gt;</span><br><span class="line">        æŸé›Œæ€§ç”Ÿç‰©é†‰å€’åœ¨è‰åœ°ä¸Šï¼Œè·¯äººå¯¹å…¶ä¸Šä¸‹å…¶æ‰‹ï¼Œå¹¶åœ¨è‰åœ°ä¸Šç¿»æ»šï¼Œä¸€ç•ªæŠ˜è…¾åæŸé›Œæ€§ç”Ÿç‰©è¿·è¿·ç³Šç³Šé†’æ¥æ­¥å±¥è¹’è·šåœ°ç¦»å¼€äº†</span><br><span class="line">    &lt;/<span class="selector-tag">p</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">html</span>&gt;</span><br></pre></td></tr></table></figure>

<p>æ–¹æ¡ˆå››ï¼šçˆ¶ç±»æ·»åŠ ä¸€ä¸ªä¼ªç±»:after</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#father</span><span class="selector-pseudo">:after</span>&#123;</span><br><span class="line">	<span class="attribute">content</span>:<span class="string">&#x27;&#x27;</span>;</span><br><span class="line">	<span class="attribute">display</span>:block;</span><br><span class="line">	<span class="attribute">clear</span>:both;</span><br><span class="line">&#125;</span><br><span class="line">&lt;!DOCTYPE <span class="selector-tag">html</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">html</span> lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-<span class="number">8</span>&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">    	<span class="selector-tag">div</span>&#123;</span><br><span class="line">            <span class="attribute">margin</span>: <span class="number">10px</span>;</span><br><span class="line">            <span class="attribute">padding</span>: <span class="number">5px</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-id">#father</span>&#123;</span><br><span class="line">            <span class="attribute">border</span>: <span class="number">1px</span> <span class="number">#000</span> solid;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-id">#father</span><span class="selector-pseudo">:after</span>&#123;</span><br><span class="line">            <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">            <span class="attribute">display</span>: block;</span><br><span class="line">            <span class="attribute">clear</span>: both;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-class">.layer01</span>&#123;</span><br><span class="line">            <span class="attribute">border</span>: <span class="number">1px</span> <span class="number">#F00</span> dashed;</span><br><span class="line">            <span class="attribute">display</span>: inline-block;</span><br><span class="line">            <span class="attribute">float</span>: left;<span class="comment">/*å‘å·¦æµ®åŠ¨*/</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-class">.layer02</span>&#123;</span><br><span class="line">            <span class="attribute">border</span>: <span class="number">1px</span> <span class="number">#00F</span> dashed;</span><br><span class="line">            <span class="attribute">display</span>: inline-block;</span><br><span class="line">            <span class="attribute">float</span>: left;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-class">.layer03</span>&#123;</span><br><span class="line">            <span class="attribute">border</span>: <span class="number">1px</span> <span class="number">#060</span> dashed;</span><br><span class="line">            <span class="attribute">display</span>: inline-block;</span><br><span class="line">            <span class="attribute">float</span>: right;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        clearï¼šrightï¼›å³ä¾§ä¸å…è®¸æœ‰æµ®åŠ¨å…ƒç´ </span></span><br><span class="line"><span class="comment">        clearï¼šleftï¼› å·¦ä¾§ä¸å…è®¸æœ‰æµ®åŠ¨å…ƒç´ </span></span><br><span class="line"><span class="comment">        clearï¼šbothï¼› ä¸¤ä¾§ä¸å…è®¸æœ‰æµ®åŠ¨å…ƒç´ </span></span><br><span class="line"><span class="comment">        clearï¼šnoneï¼›</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="selector-class">.layer04</span>&#123;</span><br><span class="line">            <span class="attribute">border</span>: <span class="number">1px</span> <span class="number">#666</span> dashed;</span><br><span class="line">            <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">            <span class="attribute">line-height</span>: <span class="number">23px</span>;</span><br><span class="line">            <span class="attribute">display</span>: inline-block;</span><br><span class="line">            <span class="attribute">float</span>: right;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">div</span> id=&quot;father&quot;&gt;</span><br><span class="line">    &lt;<span class="selector-tag">div</span> class=&quot;layer01&quot;&gt;&lt;<span class="selector-tag">img</span> <span class="attribute">src</span>=&quot;../lesson06/images/<span class="number">1</span><span class="selector-class">.png</span>&quot; alt=&quot;&quot;&gt;&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">div</span> class=&quot;layer02&quot;&gt;&lt;<span class="selector-tag">img</span> <span class="attribute">src</span>=&quot;images/<span class="number">2</span><span class="selector-class">.png</span>&quot; alt=&quot;&quot;&gt;&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">div</span> class=&quot;layer03&quot;&gt;&lt;<span class="selector-tag">img</span> <span class="attribute">src</span>=&quot;images/<span class="number">3</span><span class="selector-class">.png</span>&quot; alt=&quot;&quot;&gt;&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">div</span> class=&quot;layer04&quot;&gt;</span><br><span class="line">        æµ®åŠ¨çš„ç›’å­å¯ä»¥å‘å·¦æµ®åŠ¨ï¼Œä¹Ÿå¯ä»¥å‘å³æµ®åŠ¨ï¼ŒçŸ¥é“å®ƒçš„å¤–è¾¹ç¼˜ç¢°åˆ°åŒ…å«æˆ–å¦ä¸€ä¸ªæµ®åŠ¨ç›’å­ä¸ºæ­¢</span><br><span class="line">    &lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">div</span> class=&quot;<span class="attribute">clear</span>&quot;&gt;&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">html</span>&gt;</span><br></pre></td></tr></table></figure>

<p>å°ç»“ï¼š</p>
<ol>
<li>æµ®åŠ¨å…ƒç´ å¢åŠ ç©ºdivâ€”-ã€‹ç®€å•ã€ä»£ç å°½é‡é¿å…ç©ºdiv</li>
<li>è®¾ç½®çˆ¶å…ƒç´ çš„é«˜åº¦â€”â€“ã€‹ç®€å•ï¼Œå…ƒç´ å‡è®¾æ²¡æœ‰äº†å›ºå®šçš„é«˜åº¦ï¼Œå°±ä¼šè¶…å‡º</li>
<li>overflowâ€”-ã€‹ç®€å•ï¼Œä¸‹æ‹‰çš„ä¸€äº›åœºæ™¯é¿å…ä½¿ç”¨</li>
<li>çˆ¶ç±»æ·»åŠ ä¸€ä¸ªä¼ªç±»:afterï¼ˆæ¨èï¼‰â€”-ã€‹å†™æ³•ç¨å¾®å¤æ‚ï¼Œä½†æ˜¯æ²¡æœ‰å‰¯ä½œç”¨ï¼Œ<strong>æ¨èä½¿ç”¨</strong></li>
</ol>
<h2 id="5-5ã€displayä¸floatå¯¹æ¯”"><a href="#5-5ã€displayä¸floatå¯¹æ¯”" class="headerlink" title="5.5ã€displayä¸floatå¯¹æ¯”"></a>5.5ã€displayä¸floatå¯¹æ¯”</h2><ol>
<li><strong>displayï¼š</strong>æ–¹å‘ä¸å¯ä»¥æ§åˆ¶</li>
<li><strong>floatï¼š</strong>æµ®åŠ¨èµ·æ¥çš„è¯ä¼šè„±ç¦»æ ‡å‡†æ–‡æ¡£æµï¼Œæ‰€ä»¥è¦è§£å†³çˆ¶çº§è¾¹æ¡†å¡Œé™·çš„é—®é¢˜ã€‚</li>
</ol>
<h1 id="6ã€å®šä½"><a href="#6ã€å®šä½" class="headerlink" title="6ã€å®šä½"></a>6ã€å®šä½</h1><h2 id="6-1ã€ç›¸å¯¹å®šä½"><a href="#6-1ã€ç›¸å¯¹å®šä½" class="headerlink" title="6.1ã€ç›¸å¯¹å®šä½"></a>6.1ã€ç›¸å¯¹å®šä½</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç›¸å¯¹å®šä½</span></span><br><span class="line"><span class="comment">    ç›¸å¯¹äºè‡ªå·±åŸæ¥çš„ä½ç½®è¿›è¡Œåç§»~</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">body</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">div</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">12px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">line-height</span>: <span class="number">25px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#father</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#666</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#first</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#3cbda6</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#b27530</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: relative;<span class="comment">/*ç›¸å¯¹å®šä½ ä¸Šä¸‹å·¦å³*/</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: -<span class="number">20px</span>;<span class="comment">/*å‘ä¸Šåç§»20px*/</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">20px</span>;<span class="comment">/*å‘å³åç§»20*/</span></span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#second</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#0000FF</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#255066</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#third</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#008800</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#1c6615</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: relative;<span class="comment">/*ç›¸å¯¹å®šä½ ä¸Šä¸‹å·¦å³*/</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">bottom</span>: -<span class="number">20px</span>;<span class="comment">/*å‘ä¸‹åç§»20px*/</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">right</span>: <span class="number">20px</span>;<span class="comment">/*å‘å·¦åç§»20px*/</span></span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;first&quot;</span>&gt;</span>ç¬¬ä¸€ä¸ªç›’å­<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;second&quot;</span>&gt;</span>ç¬¬äºŒä¸ªç›’å­<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;third&quot;</span>&gt;</span>ç¬¬ä¸‰ä¸ªç›’å­<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ç›¸å¯¹å®šä½ï¼špositonï¼šrelstiveï¼›<br>ç›¸å¯¹äºåŸæ¥çš„ä½ç½®ï¼Œè¿›è¡ŒæŒ‡å®šçš„åç§»ï¼Œç›¸å¯¹å®šä½çš„è¯ï¼Œå®ƒä»ç„¶åœ¨æ ‡å‡†æ–‡æ¡£æµä¸­ï¼ŒåŸæ¥çš„ä½ç½®ä¼šè¢«ä¿ç•™</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">top</span>: -<span class="number">20px</span>;<span class="comment">/*å‘ä¸Šåç§»20px*/</span></span><br><span class="line"><span class="attribute">left</span>: <span class="number">20px</span>;<span class="comment">/*å‘å³åç§»20*/</span></span><br><span class="line"><span class="attribute">bottom</span>: -<span class="number">20px</span>;<span class="comment">/*å‘ä¸‹åç§»20px*/</span></span><br><span class="line"><span class="attribute">right</span>: <span class="number">20px</span>;<span class="comment">/*å‘å·¦åç§»20px*/</span></span><br></pre></td></tr></table></figure>

<p>ç»ƒä¹ é¢˜ï¼šè¿æ¥å¡</p>
<ul>
<li>ä½¿ç”¨divå’Œaæ ‡ç­¾å¸ƒå±€é¡µé¢</li>
<li>æ¯ä¸ªè¶…é“¾æ¥å®½åº¦å’Œé«˜åº¦éƒ½æ˜¯100pxï¼ŒèƒŒæ™¯é¢œè‰²ç²‰è‰²ï¼Œé¼ æ ‡æŒ‡é’ˆç§»ä¸Šå»å˜ä¸ºè“è‰²</li>
<li>ä½¿ç”¨ç›¸å¯¹å®šä½æ”¹å˜æ¯ä¸ªè¶…é“¾æ¥çš„ä½ç½®</li>
</ul>
<img src="/2023/11/05/CSS/1665667977407-ac1a8dbe-fd98-4d75-aaf3-8597de7304a6.png" class title="img">

<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE <span class="selector-tag">html</span>&gt;</span><br><span class="line">&lt;<span class="selector-tag">html</span> lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-<span class="number">8</span>&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        <span class="selector-id">#box</span>&#123;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">            <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">            <span class="attribute">border</span>: <span class="number">2px</span> solid red;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-tag">a</span>&#123;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">100px</span>;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">            <span class="attribute">text-decoration</span>: none;</span><br><span class="line">            <span class="attribute">background-color</span>: darkmagenta;</span><br><span class="line">            <span class="attribute">line-height</span>: <span class="number">100px</span>;</span><br><span class="line">            <span class="attribute">text-align</span>: center;</span><br><span class="line">            <span class="attribute">color</span>: white;</span><br><span class="line">            <span class="attribute">display</span>: block;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">            <span class="attribute">background</span>: <span class="number">#a13d30</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-class">.a2</span>,<span class="selector-class">.a4</span>&#123;</span><br><span class="line">            <span class="attribute">position</span>: relative;</span><br><span class="line">            <span class="attribute">left</span>: <span class="number">200px</span>;</span><br><span class="line">            <span class="attribute">top</span>: -<span class="number">100px</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="selector-class">.a5</span>&#123;</span><br><span class="line">            <span class="attribute">position</span>: relative;</span><br><span class="line">            <span class="attribute">left</span>: <span class="number">100px</span>;</span><br><span class="line">            <span class="attribute">top</span>: -<span class="number">300px</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;<span class="selector-tag">body</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;<span class="selector-tag">div</span> id=&quot;box&quot;&gt;</span><br><span class="line">    &lt;<span class="selector-tag">a</span> class=&quot;a1&quot; href=&quot;#&quot;&gt;é“¾æ¥<span class="number">1</span>&lt;/<span class="selector-tag">a</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">a</span> class=&quot;a2&quot; href=&quot;#&quot;&gt;é“¾æ¥<span class="number">2</span>&lt;/<span class="selector-tag">a</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">a</span> class=&quot;a3&quot; href=&quot;#&quot;&gt;é“¾æ¥<span class="number">3</span>&lt;/<span class="selector-tag">a</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">a</span> class=&quot;a4&quot; href=&quot;#&quot;&gt;é“¾æ¥<span class="number">4</span>&lt;/<span class="selector-tag">a</span>&gt;</span><br><span class="line">    &lt;<span class="selector-tag">a</span> class=&quot;a5&quot; href=&quot;#&quot;&gt;é“¾æ¥<span class="number">5</span>&lt;/<span class="selector-tag">a</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">div</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">body</span>&gt;</span><br><span class="line">&lt;/<span class="selector-tag">html</span>&gt;</span><br></pre></td></tr></table></figure>

<h2 id="6-2ã€ç»å¯¹å®šä½-absolute"><a href="#6-2ã€ç»å¯¹å®šä½-absolute" class="headerlink" title="6.2ã€ç»å¯¹å®šä½-absolute"></a>6.2ã€ç»å¯¹å®šä½-absolute</h2><p>å®šä½ï¼šåŸºäºxxxå®šä½ï¼Œä¸Šä¸‹å·¦å³~<br>1ã€æ²¡æœ‰çˆ¶çº§å…ƒç´ å®šä½çš„å‰æä¸‹ï¼Œç›¸å¯¹äºæµè§ˆå™¨å®šä½<br>2ã€å‡è®¾çˆ¶çº§å…ƒç´ å­˜åœ¨å®šä½ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šç›¸å¯¹äºçˆ¶çº§å…ƒç´ è¿›è¡Œåç§»<br>3ã€åœ¨çˆ¶çº§å…ƒç´ èŒƒå›´å†…ç§»åŠ¨<br>æ€»ç»“ï¼šç›¸å¯¹ä¸€çˆ¶çº§æˆ–æµè§ˆå™¨çš„ä½ç½®ï¼Œè¿›è¡ŒæŒ‡å®šçš„åç§»ï¼Œç»å¯¹å®šä½çš„è¯ï¼Œå®ƒä¸åœ¨æ ‡å‡†æ–‡æ¡£æµä¸­ï¼ŒåŸæ¥çš„ä½ç½®ä¸ä¼šè¢«ä¿ç•™</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">div</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">12px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">line-height</span>: <span class="number">25px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#father</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#666</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#first</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#a13d30</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> dashed <span class="number">#b27530</span>;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#second</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: green;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> dashed <span class="number">#0ece4f</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">right</span>:<span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>:<span class="number">30px</span></span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#third</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: red;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> dashed <span class="number">#ff1b87</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span> = <span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;first&quot;</span>&gt;</span>ç¬¬ä¸€ä¸ªç›’å­<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;second&quot;</span>&gt;</span>ç¬¬äºŒä¸ªç›’å­<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;third&quot;</span>&gt;</span>ç¬¬ä¸‰ä¸ªç›’å­<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="6-3ã€å›ºå®šå®šä½-fixed"><a href="#6-3ã€å›ºå®šå®šä½-fixed" class="headerlink" title="6.3ã€å›ºå®šå®šä½-fixed"></a>6.3ã€å›ºå®šå®šä½-fixed</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">body</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">1000px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">         <span class="selector-tag">div</span><span class="selector-pseudo">:nth-of-type</span>(<span class="number">1</span>)&#123;<span class="comment">/*ç»å¯¹å®šä½ï¼šæ²¡æœ‰ç›¸å¯¹çš„çˆ¶çº§å…ƒç´ ï¼Œæ‰€ä»¥ç›¸å¯¹äºæµè§ˆå™¨*/</span></span></span><br><span class="line"><span class="language-css">             <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">             <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">             <span class="attribute">background</span>:red;</span></span><br><span class="line"><span class="language-css">             <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">             <span class="attribute">right</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">             <span class="attribute">bottom</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">         &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">div</span><span class="selector-pseudo">:nth-of-type</span>(<span class="number">2</span>)&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">50px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background</span>: yellow;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">right</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">bottom</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>div1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>div2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="6-4ã€z-index"><a href="#6-4ã€z-index" class="headerlink" title="6.4ã€z-index"></a>6.4ã€z-index</h2><img src="/2023/11/05/CSS/1665668033981-623a3c27-4272-45ff-97cf-26b1fe08e042.png" class title="img">

<p>å›¾å±‚~<br>z-indexï¼šé»˜è®¤æ˜¯0ï¼Œæœ€é«˜æ— é™~999</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;css/style.css&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;content&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;images/bg.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;tipText&quot;</span>&gt;</span>å­¦ä¹ å¾®æœåŠ¡<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;tipBg&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>æ—¶é—´ï¼š2099-01=01<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>åœ°ç‚¹ï¼šæœˆçƒä¸€å·åŸºåœ°<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line">#content&#123;</span><br><span class="line">    width: 380;</span><br><span class="line">    padding: 0px;</span><br><span class="line">    margin: 0px;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">    font-size: 12px;</span><br><span class="line">    line-height: 25px;</span><br><span class="line">    border: 1px solid yellow;</span><br><span class="line">&#125;</span><br><span class="line">ul,li&#123;</span><br><span class="line">    padding: 0px;</span><br><span class="line">    margin: 0px;</span><br><span class="line">    list-style: none;</span><br><span class="line">&#125;</span><br><span class="line">/*çˆ¶çº§å…ƒç´ ç›¸å¯¹å®šä½*/</span><br><span class="line">#content ul&#123;</span><br><span class="line">    position: relative;</span><br><span class="line">&#125;</span><br><span class="line">.tipText,.tipBg&#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    width: 380px;</span><br><span class="line">    height: 25px;</span><br><span class="line">    top:216px</span><br><span class="line">&#125;</span><br><span class="line">.tipText&#123;</span><br><span class="line">    color: white;</span><br><span class="line">    z-index: 999;</span><br><span class="line">&#125;</span><br><span class="line">.tipBg&#123;</span><br><span class="line">    background: orange;</span><br><span class="line">    opacity: 0.5;/*èƒŒæ™¯é€æ˜åº¦*/</span><br><span class="line">    filter: alpha(opacity=50);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="7ã€æ–‡å­—æ•ˆæœ"><a href="#7ã€æ–‡å­—æ•ˆæœ" class="headerlink" title="7ã€æ–‡å­—æ•ˆæœ"></a>7ã€æ–‡å­—æ•ˆæœ</h1><h3 id="CSS3-æ–‡æœ¬æ•ˆæœ"><a href="#CSS3-æ–‡æœ¬æ•ˆæœ" class="headerlink" title="CSS3 æ–‡æœ¬æ•ˆæœ"></a>CSS3 æ–‡æœ¬æ•ˆæœ</h3><p>CSS3ä¸­åŒ…å«å‡ ä¸ªæ–°çš„æ–‡æœ¬ç‰¹å¾ã€‚</p>
<p>åœ¨æœ¬ç« ä¸­æ‚¨å°†äº†è§£ä»¥ä¸‹æ–‡æœ¬å±æ€§ï¼š</p>
<ul>
<li><strong>text-shadow</strong></li>
<li><strong>box-shadow</strong></li>
<li><strong>text-overflow</strong></li>
<li><strong>word-wrap</strong></li>
<li><strong>word-break</strong></li>
</ul>
<p><strong>æµè§ˆå™¨æ”¯æŒ</strong></p>
<table>
<thead>
<tr>
<th>å±æ€§</th>
<th>è°·æ­Œ</th>
<th>dege</th>
<th>ç«ç‹</th>
<th>Safari</th>
<th>Opera</th>
</tr>
</thead>
<tbody><tr>
<td>text-shadow</td>
<td>4.0</td>
<td>10.0</td>
<td>3.5</td>
<td>4.0</td>
<td>9.5</td>
</tr>
<tr>
<td>box-shadow</td>
<td>10.0 4.0 -webkit-</td>
<td>9.0</td>
<td>4.0 3.5 -moz-</td>
<td>5.1 3.1 -webkit-</td>
<td>10.5</td>
</tr>
<tr>
<td>text-overflow</td>
<td>4.0</td>
<td>6.0</td>
<td>7.0</td>
<td>3.1</td>
<td>11.0 9.0 -o-</td>
</tr>
<tr>
<td>word-wrap</td>
<td>23.0</td>
<td>5.5</td>
<td>3.5</td>
<td>6.1</td>
<td>12.1</td>
</tr>
<tr>
<td>word-break</td>
<td>4.0</td>
<td>5.5</td>
<td>15.0</td>
<td>3.1</td>
<td>15.0</td>
</tr>
</tbody></table>
<h3 id="CSS3-çš„æ–‡æœ¬é˜´å½±"><a href="#CSS3-çš„æ–‡æœ¬é˜´å½±" class="headerlink" title="CSS3 çš„æ–‡æœ¬é˜´å½±"></a>CSS3 çš„æ–‡æœ¬é˜´å½±</h3><p>CSS3 ä¸­ï¼Œtext-shadowå±æ€§é€‚ç”¨äºæ–‡æœ¬é˜´å½±ã€‚</p>
<img src="/2023/11/05/CSS/1665717621433-af939328-7dfe-448e-a16c-dc01cc4a252c.gif" class title="img">

<p>æ‚¨æŒ‡å®šäº†æ°´å¹³é˜´å½±ï¼Œå‚ç›´é˜´å½±ï¼Œæ¨¡ç³Šçš„è·ç¦»ï¼Œä»¥åŠé˜´å½±çš„é¢œè‰²ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">h1</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attribute">text-shadow</span>: <span class="number">5px</span> <span class="number">5px</span> <span class="number">5px</span> <span class="number">#FF0000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>CSS3 box-shadowå±æ€§</strong></p>
<p>CSS3 ä¸­ CSS3 box-shadow å±æ€§é€‚ç”¨äºç›’å­é˜´å½±</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">10px</span> <span class="number">10px</span> <span class="number">5px</span> <span class="number">#888888</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ¥ä¸‹æ¥ç»™é˜´å½±æ·»åŠ é¢œè‰²</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">10px</span> <span class="number">10px</span> grey;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ¥ä¸‹æ¥ç»™é˜´å½±æ·»åŠ ä¸€ä¸ªæ¨¡ç³Šæ•ˆæœ</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">10px</span> <span class="number">10px</span> <span class="number">5px</span> grey;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ä½ ä¹Ÿå¯ä»¥åœ¨ ::before å’Œ ::after ä¸¤ä¸ªä¼ªå…ƒç´ ä¸­æ·»åŠ é˜´å½±æ•ˆæœ</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#boxshadow</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="selector-tag">b</span> ox-shadow: <span class="number">1px</span> <span class="number">2px</span> <span class="number">4px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">5</span>);</span><br><span class="line">    pa dding: <span class="number">10px</span>;</span><br><span class="line">    bac kground: white;</span><br><span class="line">&#125; </span><br><span class="line"><span class="selector-id">#boxshadow</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">     <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">     <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#8a4419</span>;</span><br><span class="line">     <span class="attribute">border-style</span>: inset;</span><br><span class="line">&#125; </span><br><span class="line"><span class="selector-id">#boxshadow</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">     <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">z-index</span>: -<span class="number">1</span>; <span class="comment">/* hide shadow behind image */</span></span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">15px</span> <span class="number">20px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.3</span>); </span><br><span class="line">    <span class="attribute">width</span>: <span class="number">70%</span>; </span><br><span class="line">    <span class="attribute">left</span>: <span class="number">15%</span>; <span class="comment">/* one half of the remaining 30% */</span></span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>é˜´å½±çš„ä¸€ä¸ªä½¿ç”¨ç‰¹ä¾‹æ˜¯å¡ç‰‡æ•ˆæœ</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">div</span><span class="selector-class">.card</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">width</span>: <span class="number">250px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">8px</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>), <span class="number">0</span> <span class="number">6px</span> <span class="number">20px</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.19</span>);</span></span><br><span class="line"><span class="language-css">  <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">div</span><span class="selector-class">.header</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: <span class="number">#4CAF50</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">font-size</span>: <span class="number">40px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">div</span><span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">padding</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>å¡ç‰‡<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>box-shadow å±æ€§ç”¨æ¥å¯ä»¥åˆ›å»ºçº¸è´¨æ ·å¼å¡ç‰‡:<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>1<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>January 1, 2016<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">div</span><span class="selector-class">.polaroid</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">width</span>: <span class="number">250px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">8px</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>), <span class="number">0</span> <span class="number">6px</span> <span class="number">20px</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.19</span>);</span></span><br><span class="line"><span class="language-css">  <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">div</span><span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span> å¡ç‰‡<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>box-shadowå±æ€§å¯ä»¥ç”¨æ¥åˆ›å»ºçº¸è´¨æ ·å¼å¡ç‰‡:<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;polaroid&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;rock600x400.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;Norway&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width:100%&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Hardanger, Norway<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="CSS3-Text-Overflowå±æ€§"><a href="#CSS3-Text-Overflowå±æ€§" class="headerlink" title="CSS3 Text Overflowå±æ€§"></a>CSS3 Text Overflowå±æ€§</h3><p>CSS3æ–‡æœ¬æº¢å‡ºå±æ€§æŒ‡å®šåº”å‘ç”¨æˆ·å¦‚ä½•æ˜¾ç¤ºæº¢å‡ºå†…å®¹</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">p</span><span class="selector-class">.test1</span> &#123;</span><br><span class="line">    <span class="attribute">white-space</span>: nowrap; </span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>; </span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#000000</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">text-overflow</span>: clip; </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-tag">p</span><span class="selector-class">.test2</span> &#123;</span><br><span class="line">    <span class="attribute">white-space</span>: nowrap; </span><br><span class="line">    <span class="attribute">width</span>: <span class="number">200px</span>; </span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#000000</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">text-overflow</span>: ellipsis; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>CSS3çš„æ¢è¡Œ</strong></p>
<p>å¦‚æœæŸä¸ªå•è¯å¤ªé•¿ï¼Œä¸é€‚åˆåœ¨ä¸€ä¸ªåŒºåŸŸå†…ï¼Œå®ƒæ‰©å±•åˆ°å¤–é¢ï¼š</p>
<p>CSS3ä¸­ï¼Œè‡ªåŠ¨æ¢è¡Œå±æ€§å…è®¸æ‚¨å¼ºåˆ¶æ–‡æœ¬æ¢è¡Œ - å³ä½¿è¿™æ„å‘³ç€åˆ†è£‚å®ƒä¸­é—´çš„ä¸€ä¸ªå­—ï¼š</p>
<p>CSSä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;<span class="attribute">word-wrap</span>:break-word;&#125;</span><br></pre></td></tr></table></figure>

<p><strong>CSS3 å•è¯æ‹†åˆ†æ¢è¡Œ</strong></p>
<p>CSS3 å•è¯æ‹†åˆ†æ¢è¡Œå±æ€§æŒ‡å®šæ¢è¡Œè§„åˆ™ï¼š</p>
<p>CSSä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">p</span><span class="selector-class">.test1</span> &#123;</span><br><span class="line">    <span class="attribute">word-break</span>: keep-all;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="selector-tag">p</span><span class="selector-class">.test2</span> &#123;</span><br><span class="line">    <span class="attribute">word-break</span>: break-all;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* æ³¨æ„: word-break å±æ€§ä¸å…¼å®¹ Opera. */</span></span><br></pre></td></tr></table></figure>

<h3 id="æ–°æ–‡æœ¬å±æ€§"><a href="#æ–°æ–‡æœ¬å±æ€§" class="headerlink" title="æ–°æ–‡æœ¬å±æ€§"></a>æ–°æ–‡æœ¬å±æ€§</h3><table>
<thead>
<tr>
<th>å±æ€§</th>
<th>æè¿°</th>
<th>CSS</th>
</tr>
</thead>
<tbody><tr>
<td><a href="https://www.runoob.com/cssref/css3-pr-hanging-punctuation.html">hanging-punctuation</a></td>
<td>è§„å®šæ ‡ç‚¹å­—ç¬¦æ˜¯å¦ä½äºçº¿æ¡†ä¹‹å¤–ã€‚</td>
<td>3</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/cssref/css3-pr-punctuation-trim.html">punctuation-trim</a></td>
<td>è§„å®šæ˜¯å¦å¯¹æ ‡ç‚¹å­—ç¬¦è¿›è¡Œä¿®å‰ªã€‚</td>
<td>3</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/cssref/css3-pr-text-align-last.html">text-align-last</a></td>
<td>è®¾ç½®å¦‚ä½•å¯¹é½æœ€åä¸€è¡Œæˆ–ç´§æŒ¨ç€å¼ºåˆ¶æ¢è¡Œç¬¦ä¹‹å‰çš„è¡Œã€‚</td>
<td>3</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/css3/css3-pr-text-emphasis.html">text-emphasis</a></td>
<td>å‘å…ƒç´ çš„æ–‡æœ¬åº”ç”¨é‡ç‚¹æ ‡è®°ä»¥åŠé‡ç‚¹æ ‡è®°çš„å‰æ™¯è‰²ã€‚</td>
<td>3</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/cssref/css3-pr-text-justify.html">text-justify</a></td>
<td>è§„å®šå½“ text-align è®¾ç½®ä¸º â€œjustifyâ€ æ—¶æ‰€ä½¿ç”¨çš„å¯¹é½æ–¹æ³•ã€‚</td>
<td>3</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/cssref/css3-pr-text-outline.html">text-outline</a></td>
<td>è§„å®šæ–‡æœ¬çš„è½®å»“ã€‚</td>
<td>3</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/cssref/css3-pr-text-overflow.html">text-overflow</a></td>
<td>è§„å®šå½“æ–‡æœ¬æº¢å‡ºåŒ…å«å…ƒç´ æ—¶å‘ç”Ÿçš„äº‹æƒ…ã€‚</td>
<td>3</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/cssref/css3-pr-text-shadow.html">text-shadow</a></td>
<td>å‘æ–‡æœ¬æ·»åŠ é˜´å½±ã€‚</td>
<td>3</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/cssref/css3-pr-text-wrap.html">text-wrap</a></td>
<td>è§„å®šæ–‡æœ¬çš„æ¢è¡Œè§„åˆ™ã€‚</td>
<td>3</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/cssref/css3-pr-word-break.html">word-break</a></td>
<td>è§„å®šéä¸­æ—¥éŸ©æ–‡æœ¬çš„æ¢è¡Œè§„åˆ™ã€‚</td>
<td>3</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/cssref/css3-pr-word-wrap.html">word-wrap</a></td>
<td>å…è®¸å¯¹é•¿çš„ä¸å¯åˆ†å‰²çš„å•è¯è¿›è¡Œåˆ†å‰²å¹¶æ¢è¡Œåˆ°ä¸‹ä¸€è¡Œã€‚</td>
<td>3</td>
</tr>
</tbody></table>
<h2 id="7-1ã€å­—ä½“"><a href="#7-1ã€å­—ä½“" class="headerlink" title="7.1ã€å­—ä½“"></a>7.1ã€å­—ä½“</h2><h3 id="ä½¿ç”¨æ‚¨éœ€è¦çš„å­—ä½“"><a href="#ä½¿ç”¨æ‚¨éœ€è¦çš„å­—ä½“" class="headerlink" title="ä½¿ç”¨æ‚¨éœ€è¦çš„å­—ä½“"></a>ä½¿ç”¨æ‚¨éœ€è¦çš„å­—ä½“</h3><p>åœ¨æ–°çš„ @font-face è§„åˆ™ä¸­ï¼Œæ‚¨å¿…é¡»é¦–å…ˆå®šä¹‰å­—ä½“çš„åç§°ï¼ˆæ¯”å¦‚ myFirstFontï¼‰ï¼Œç„¶åæŒ‡å‘è¯¥å­—ä½“æ–‡ä»¶ã€‚</p>
<p><strong>å¦‚éœ€ä¸º HTML å…ƒç´ ä½¿ç”¨å­—ä½“ï¼Œè¯·é€šè¿‡ font-family å±æ€§æ¥å¼•ç”¨å­—ä½“çš„åç§° (myFirstFont)ï¼š</strong></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>DEMO<span class="tag">&lt;/<span class="name">title</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"> </span></span><br><span class="line"><span class="language-css"><span class="keyword">@font-face</span></span></span><br><span class="line"><span class="language-css">&#123;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">font-family</span>: myFirstFont;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&#x27;Sansation_Light.ttf&#x27;</span>)</span></span><br><span class="line"><span class="language-css">		,<span class="built_in">url</span>(<span class="string">&#x27;Sansation_Light.eot&#x27;</span>); <span class="comment">/* IE9 */</span></span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">div</span></span></span><br><span class="line"><span class="language-css">&#123;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">font-family</span>:myFirstFont;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>æ³¨æ„:<span class="tag">&lt;/<span class="name">b</span>&gt;</span> Internet Explorer 9 åªæ”¯æŒ .eot æ ¼å¼çš„å­—ä½“.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">ä½¿ç”¨ CSS3,ç½‘ç«™ç»ˆäºå¯ä»¥ä½¿ç”¨å­—ä½“ä»¥å¤–çš„é¢„å…ˆé€‰æ‹©â€œåˆæ³•â€å­—ä½“</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="ä½¿ç”¨ç²—ä½“æ–‡æœ¬"><a href="#ä½¿ç”¨ç²—ä½“æ–‡æœ¬" class="headerlink" title="ä½¿ç”¨ç²—ä½“æ–‡æœ¬"></a>ä½¿ç”¨ç²—ä½“æ–‡æœ¬</h3><p>æ‚¨å¿…é¡»æ·»åŠ å¦ä¸€ä¸ªåŒ…å«ç²—ä½“æ–‡å­—çš„@font-faceè§„åˆ™ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"> </span></span><br><span class="line"><span class="language-css"><span class="keyword">@font-face</span></span></span><br><span class="line"><span class="language-css">&#123;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">font-family</span>: myFirstFont;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">sansation_light.woff</span>);</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="keyword">@font-face</span></span></span><br><span class="line"><span class="language-css">&#123;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">font-family</span>: myFirstFont;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">sansation_bold.woff</span>);</span></span><br><span class="line"><span class="language-css">	<span class="attribute">font-weight</span>:bold;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">div</span></span></span><br><span class="line"><span class="language-css">&#123;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">font-family</span>:myFirstFont;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">	ä½¿ç”¨ CSS3,ç½‘ç«™ç»ˆäºå¯ä»¥ä½¿ç”¨å­—ä½“ä»¥å¤–çš„é¢„å…ˆé€‰æ‹©â€œåˆæ³•â€å­—ä½“ã€‚</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>æ³¨æ„:<span class="tag">&lt;/<span class="name">b</span>&gt;</span> Internet Explorer 8ä»¥åŠæ›´æ—©ç‰ˆæœ¬çš„æµè§ˆå™¨ @font-face rule.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è¯¥æ–‡ä»¶â€Sansation_Bold.ttfâ€æ˜¯å¦ä¸€ç§å­—ä½“æ–‡ä»¶ï¼ŒåŒ…å«Sansationå­—ä½“çš„ç²—ä½“å­—ã€‚</p>
<p>æµè§ˆå™¨ä½¿ç”¨è¿™ä¸€æ–‡æœ¬çš„å­—ä½“ç³»åˆ—â€myFirstFontâ€æ—¶åº”è¯¥å‘ˆç°ä¸ºç²—ä½“ã€‚</p>
<p>è¿™æ ·ä½ å°±å¯ä»¥æœ‰è®¸å¤šç›¸åŒçš„å­—ä½“@font-faceçš„è§„åˆ™ã€‚</p>
<h3 id="CSS3-å­—ä½“æè¿°"><a href="#CSS3-å­—ä½“æè¿°" class="headerlink" title="CSS3 å­—ä½“æè¿°"></a>CSS3 å­—ä½“æè¿°</h3><p>ä¸‹è¡¨åˆ—å‡ºäº†æ‰€æœ‰çš„å­—ä½“æè¿°å’Œé‡Œé¢çš„@font-faceè§„åˆ™å®šä¹‰ï¼š</p>
<table>
<thead>
<tr>
<th>æè¿°ç¬¦</th>
<th>å€¼</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>font-family</td>
<td><em>name</em></td>
<td>å¿…éœ€ã€‚è§„å®šå­—ä½“çš„åç§°ã€‚</td>
</tr>
<tr>
<td>src</td>
<td><em>URL</em></td>
<td>å¿…éœ€ã€‚å®šä¹‰å­—ä½“æ–‡ä»¶çš„ URLã€‚</td>
</tr>
<tr>
<td>font-stretch</td>
<td>normalcondensedultra-condensedextra-condensedsemi-condensedexpandedsemi-expandedextra-expandedultra-expanded</td>
<td>å¯é€‰ã€‚å®šä¹‰å¦‚ä½•æ‹‰ä¼¸å­—ä½“ã€‚é»˜è®¤æ˜¯ â€œnormalâ€ã€‚</td>
</tr>
<tr>
<td>font-style</td>
<td>normalitalicoblique</td>
<td>å¯é€‰ã€‚å®šä¹‰å­—ä½“çš„æ ·å¼ã€‚é»˜è®¤æ˜¯ â€œnormalâ€ã€‚</td>
</tr>
<tr>
<td>font-weight</td>
<td>normalbold100200300400500600700800900</td>
<td>å¯é€‰ã€‚å®šä¹‰å­—ä½“çš„ç²—ç»†ã€‚é»˜è®¤æ˜¯ â€œnormalâ€ã€‚</td>
</tr>
<tr>
<td>unicode-range</td>
<td><em>unicode-range</em></td>
<td>å¯é€‰ã€‚å®šä¹‰å­—ä½“æ”¯æŒçš„ UNICODE å­—ç¬¦èŒƒå›´ã€‚é»˜è®¤æ˜¯ â€œU+0-10FFFFâ€ã€‚</td>
</tr>
</tbody></table>
<h1 id="8ã€2Dã€3Dè½¬æ¢"><a href="#8ã€2Dã€3Dè½¬æ¢" class="headerlink" title="8ã€2Dã€3Dè½¬æ¢"></a>8ã€2Dã€3Dè½¬æ¢</h1><h2 id="2D-è½¬æ¢"><a href="#2D-è½¬æ¢" class="headerlink" title="2D è½¬æ¢"></a>2D è½¬æ¢</h2><h3 id="æµè§ˆå™¨æ”¯æŒ"><a href="#æµè§ˆå™¨æ”¯æŒ" class="headerlink" title="æµè§ˆå™¨æ”¯æŒ"></a>æµè§ˆå™¨æ”¯æŒ</h3><table>
<thead>
<tr>
<th>å±æ€§</th>
<th><img src="/2023/11/05/CSS/1665858095633-641a6799-d471-48e2-ad3e-2797bcf1199a.png" class title="img"></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>transform</td>
<td>36.0 4.0 -webkit-</td>
<td>10.0 9.0 -ms-</td>
<td>16.0 3.5 -moz-</td>
<td>3.2 -webkit-</td>
<td>23.0 15.0 -webkit- 12.1 10.5 -o-</td>
</tr>
<tr>
<td>transform-origin (two-value syntax)</td>
<td>36.0 4.0 -webkit-</td>
<td>10.0 9.0 -ms-</td>
<td>16.0 3.5 -moz-</td>
<td>3.2 -webkit-</td>
<td>23.0 15.0 -webkit- 12.1 10.5 -o-</td>
</tr>
</tbody></table>
<p>Internet Explorer 10, Firefox, å’Œ Operaæ”¯æŒtransform å±æ€§.</p>
<p>Chrome å’Œ Safari è¦æ±‚å‰ç¼€ -webkit- ç‰ˆæœ¬.</p>
<p><strong>æ³¨æ„ï¼š</strong> Internet Explorer 9 è¦æ±‚å‰ç¼€ -ms- ç‰ˆæœ¬.</p>
<h3 id="2D-è½¬æ¢æ–¹æ³•"><a href="#2D-è½¬æ¢æ–¹æ³•" class="headerlink" title="2D è½¬æ¢æ–¹æ³•"></a>2D è½¬æ¢æ–¹æ³•</h3><ul>
<li><strong>translate()</strong></li>
<li><strong>rotate()</strong></li>
<li><strong>scale()</strong></li>
<li><strong>skew()</strong></li>
<li><strong>matrix()</strong></li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">30deg</span>);</span><br><span class="line">-ms-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">30deg</span>); <span class="comment">/* IE 9 */</span></span><br><span class="line">-webkit-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">30deg</span>); <span class="comment">/* Safari and Chrome */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="translate-æ–¹æ³•"><a href="#translate-æ–¹æ³•" class="headerlink" title="translate() æ–¹æ³•"></a>translate() æ–¹æ³•</h4><img src="/2023/11/05/CSS/1665855807499-6c2a525f-a5e8-4a16-92bb-1f7d6bb9f0d1.gif" class title="img">

<p>translate()æ–¹æ³•ï¼Œæ ¹æ®å·¦(Xè½´)å’Œé¡¶éƒ¨(Yè½´)ä½ç½®ç»™å®šçš„å‚æ•°ï¼Œä»å½“å‰å…ƒç´ ä½ç½®ç§»åŠ¨ã€‚</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">translate</span>(<span class="number">50px</span>,<span class="number">100px</span>);</span><br><span class="line">-ms-<span class="attribute">transform</span>: <span class="built_in">translate</span>(<span class="number">50px</span>,<span class="number">100px</span>); <span class="comment">/* IE 9 */</span></span><br><span class="line">-webkit-<span class="attribute">transform</span>: <span class="built_in">translate</span>(<span class="number">50px</span>,<span class="number">100px</span>); <span class="comment">/* Safari and Chrome */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>translateå€¼ï¼ˆ50pxï¼Œ100pxï¼‰æ˜¯ä»å·¦è¾¹å…ƒç´ ç§»åŠ¨50ä¸ªåƒç´ ï¼Œå¹¶ä»é¡¶éƒ¨ç§»åŠ¨100åƒç´ ã€‚</p>
<h4 id="rotate-æ–¹æ³•"><a href="#rotate-æ–¹æ³•" class="headerlink" title="rotate() æ–¹æ³•"></a>rotate() æ–¹æ³•</h4><img src="/2023/11/05/CSS/1665855835943-b42a46db-64d7-4546-a2e3-079ed0858af5.gif" class title="img">

<p>rotate()æ–¹æ³•ï¼Œåœ¨ä¸€ä¸ªç»™å®šåº¦æ•°é¡ºæ—¶é’ˆæ—‹è½¬çš„å…ƒç´ ã€‚è´Ÿå€¼æ˜¯å…è®¸çš„ï¼Œè¿™æ ·æ˜¯å…ƒç´ é€†æ—¶é’ˆæ—‹è½¬ã€‚</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">30deg</span>);</span><br><span class="line">-ms-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">30deg</span>); <span class="comment">/* IE 9 */</span></span><br><span class="line">-webkit-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">30deg</span>); <span class="comment">/* Safari and Chrome */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>rotateå€¼ï¼ˆ30degï¼‰å…ƒç´ é¡ºæ—¶é’ˆæ—‹è½¬30åº¦ã€‚</p>
<h4 id="scale-æ–¹æ³•"><a href="#scale-æ–¹æ³•" class="headerlink" title="scale() æ–¹æ³•"></a>scale() æ–¹æ³•</h4><img src="/2023/11/05/CSS/1665855909485-e6fecd94-556a-4e9a-9ccd-d7afe72d28e8.gif" class title="img">

<p>scale()æ–¹æ³•ï¼Œè¯¥å…ƒç´ å¢åŠ æˆ–å‡å°‘çš„å¤§å°ï¼Œå–å†³äºå®½åº¦ï¼ˆXè½´ï¼‰å’Œé«˜åº¦ï¼ˆYè½´ï¼‰çš„å‚æ•°ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">-ms-<span class="attribute">transform</span>:<span class="built_in">scale</span>(<span class="number">2</span>,<span class="number">3</span>); <span class="comment">/* IE 9 */</span></span><br><span class="line">-webkit-<span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">2</span>,<span class="number">3</span>); <span class="comment">/* Safari */</span></span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">2</span>,<span class="number">3</span>); <span class="comment">/* æ ‡å‡†è¯­æ³• */</span></span><br></pre></td></tr></table></figure>

<p>scaleï¼ˆ2,3ï¼‰è½¬å˜å®½åº¦ä¸ºåŸæ¥çš„å¤§å°çš„2å€ï¼Œå’Œå…¶åŸå§‹å¤§å°3å€çš„é«˜åº¦ã€‚</p>
<h4 id="skew-æ–¹æ³•"><a href="#skew-æ–¹æ³•" class="headerlink" title="skew() æ–¹æ³•"></a>skew() æ–¹æ³•</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">transform</span>:<span class="built_in">skew</span>(&lt;angle&gt; [,&lt;angle&gt;]);</span><br></pre></td></tr></table></figure>

<p>åŒ…å«ä¸¤ä¸ªå‚æ•°å€¼ï¼Œåˆ†åˆ«è¡¨ç¤ºXè½´å’ŒYè½´å€¾æ–œçš„è§’åº¦ï¼Œå¦‚æœç¬¬äºŒä¸ªå‚æ•°ä¸ºç©ºï¼Œåˆ™é»˜è®¤ä¸º0ï¼Œå‚æ•°ä¸ºè´Ÿè¡¨ç¤ºå‘ç›¸åæ–¹å‘å€¾æ–œã€‚</p>
<ul>
<li>skewX(<angle>);è¡¨ç¤ºåªåœ¨Xè½´(æ°´å¹³æ–¹å‘)å€¾æ–œã€‚</angle></li>
<li>skewY(<angle>);è¡¨ç¤ºåªåœ¨Yè½´(å‚ç›´æ–¹å‘)å€¾æ–œã€‚</angle></li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">skew</span>(<span class="number">30deg</span>,<span class="number">20deg</span>);</span><br><span class="line">-ms-<span class="attribute">transform</span>: <span class="built_in">skew</span>(<span class="number">30deg</span>,<span class="number">20deg</span>); <span class="comment">/* IE 9 */</span></span><br><span class="line">-webkit-<span class="attribute">transform</span>: <span class="built_in">skew</span>(<span class="number">30deg</span>,<span class="number">20deg</span>); <span class="comment">/* Safari and Chrome */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>skew(30deg,20deg)</strong> å…ƒç´ åœ¨ <strong>X</strong> è½´å’Œ <strong>Y</strong> è½´ä¸Šå€¾æ–œ 20 åº¦ 30 åº¦ã€‚</p>
<h4 id="matrix-æ–¹æ³•"><a href="#matrix-æ–¹æ³•" class="headerlink" title="matrix() æ–¹æ³•"></a>matrix() æ–¹æ³•</h4><img src="/2023/11/05/CSS/1665856182461-7b169cca-a5dc-496e-825d-0b420531414d.gif" class title="img">

<p>matrix()æ–¹æ³•å’Œ2Då˜æ¢æ–¹æ³•åˆå¹¶æˆä¸€ä¸ªã€‚</p>
<p>matrix æ–¹æ³•æœ‰å…­ä¸ªå‚æ•°ï¼ŒåŒ…å«æ—‹è½¬ï¼Œç¼©æ”¾ï¼Œç§»åŠ¨ï¼ˆå¹³ç§»ï¼‰å’Œå€¾æ–œåŠŸèƒ½ã€‚</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="attribute">transform</span>:<span class="built_in">matrix</span>(<span class="number">0.866</span>,<span class="number">0.5</span>,-<span class="number">0.5</span>,<span class="number">0.866</span>,<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">-ms-<span class="attribute">transform</span>:<span class="built_in">matrix</span>(<span class="number">0.866</span>,<span class="number">0.5</span>,-<span class="number">0.5</span>,<span class="number">0.866</span>,<span class="number">0</span>,<span class="number">0</span>); <span class="comment">/* IE 9 */</span></span><br><span class="line">-webkit-<span class="attribute">transform</span>:<span class="built_in">matrix</span>(<span class="number">0.866</span>,<span class="number">0.5</span>,-<span class="number">0.5</span>,<span class="number">0.866</span>,<span class="number">0</span>,<span class="number">0</span>); <span class="comment">/* Safari and Chrome */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ–°è½¬æ¢å±æ€§"><a href="#æ–°è½¬æ¢å±æ€§" class="headerlink" title="æ–°è½¬æ¢å±æ€§"></a>æ–°è½¬æ¢å±æ€§</h3><p>ä»¥ä¸‹åˆ—å‡ºäº†æ‰€æœ‰çš„è½¬æ¢å±æ€§:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>æè¿°</th>
<th>CSS</th>
</tr>
</thead>
<tbody><tr>
<td><a href="https://www.runoob.com/cssref/css3-pr-transform.html">transform</a></td>
<td>é€‚ç”¨äº2Dæˆ–3Dè½¬æ¢çš„å…ƒç´ </td>
<td>3</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/cssref/css3-pr-transform-origin.html">transform-origin</a></td>
<td>å…è®¸æ‚¨æ›´æ”¹è½¬åŒ–å…ƒç´ ä½ç½®</td>
<td>3</td>
</tr>
</tbody></table>
<h3 id="2D-è½¬æ¢æ–¹æ³•-1"><a href="#2D-è½¬æ¢æ–¹æ³•-1" class="headerlink" title="2D è½¬æ¢æ–¹æ³•"></a>2D è½¬æ¢æ–¹æ³•</h3><table>
<thead>
<tr>
<th>å‡½æ•°</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>matrix(<em>n</em>,<em>n</em>,<em>n</em>,<em>n</em>,<em>n</em>,<em>n</em>)</td>
<td>å®šä¹‰ 2D è½¬æ¢ï¼Œä½¿ç”¨å…­ä¸ªå€¼çš„çŸ©é˜µã€‚</td>
</tr>
<tr>
<td>translate(<em>x</em>,<em>y</em>)</td>
<td>å®šä¹‰ 2D è½¬æ¢ï¼Œæ²¿ç€ X å’Œ Y è½´ç§»åŠ¨å…ƒç´ ã€‚</td>
</tr>
<tr>
<td>translateX(<em>n</em>)</td>
<td>å®šä¹‰ 2D è½¬æ¢ï¼Œæ²¿ç€ X è½´ç§»åŠ¨å…ƒç´ ã€‚</td>
</tr>
<tr>
<td>translateY(<em>n</em>)</td>
<td>å®šä¹‰ 2D è½¬æ¢ï¼Œæ²¿ç€ Y è½´ç§»åŠ¨å…ƒç´ ã€‚</td>
</tr>
<tr>
<td>scale(<em>x</em>,<em>y</em>)</td>
<td>å®šä¹‰ 2D ç¼©æ”¾è½¬æ¢ï¼Œæ”¹å˜å…ƒç´ çš„å®½åº¦å’Œé«˜åº¦ã€‚</td>
</tr>
<tr>
<td>scaleX(<em>n</em>)</td>
<td>å®šä¹‰ 2D ç¼©æ”¾è½¬æ¢ï¼Œæ”¹å˜å…ƒç´ çš„å®½åº¦ã€‚</td>
</tr>
<tr>
<td>scaleY(<em>n</em>)</td>
<td>å®šä¹‰ 2D ç¼©æ”¾è½¬æ¢ï¼Œæ”¹å˜å…ƒç´ çš„é«˜åº¦ã€‚</td>
</tr>
<tr>
<td>rotate(<em>angle</em>)</td>
<td>å®šä¹‰ 2D æ—‹è½¬ï¼Œåœ¨å‚æ•°ä¸­è§„å®šè§’åº¦ã€‚</td>
</tr>
<tr>
<td>skew(<em>x-angle</em>,<em>y-angle</em>)</td>
<td>å®šä¹‰ 2D å€¾æ–œè½¬æ¢ï¼Œæ²¿ç€ X å’Œ Y è½´ã€‚</td>
</tr>
<tr>
<td>skewX(<em>angle</em>)</td>
<td>å®šä¹‰ 2D å€¾æ–œè½¬æ¢ï¼Œæ²¿ç€ X è½´ã€‚</td>
</tr>
<tr>
<td>skewY(<em>angle</em>)</td>
<td>å®šä¹‰ 2D å€¾æ–œè½¬æ¢ï¼Œæ²¿ç€ Y è½´ã€‚</td>
</tr>
</tbody></table>
<h2 id="3D-è½¬æ¢"><a href="#3D-è½¬æ¢" class="headerlink" title="3D è½¬æ¢"></a>3D è½¬æ¢</h2><h3 id="æµè§ˆå™¨æ”¯æŒ-1"><a href="#æµè§ˆå™¨æ”¯æŒ-1" class="headerlink" title="æµè§ˆå™¨æ”¯æŒ"></a>æµè§ˆå™¨æ”¯æŒ</h3><p>è¡¨æ ¼ä¸­çš„æ•°å­—è¡¨ç¤ºæ”¯æŒè¯¥å±æ€§çš„ç¬¬ä¸€ä¸ªæµè§ˆå™¨ç‰ˆæœ¬å·ã€‚</p>
<p>ç´§è·Ÿåœ¨ -webkit-, -ms- æˆ– -moz- å‰çš„æ•°å­—ä¸ºæ”¯æŒè¯¥å‰ç¼€å±æ€§çš„ç¬¬ä¸€ä¸ªæµè§ˆå™¨ç‰ˆæœ¬å·ã€‚</p>
<table>
<thead>
<tr>
<th>å±æ€§</th>
<th><img src="/2023/11/05/CSS/1665858715971-6ba437ba-caa2-4539-b661-f7052101568e.png" class title="img"></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>transform</td>
<td>36.0 12.0 -webkit-</td>
<td>10.0</td>
<td>16.0 10.0 -moz-</td>
<td>4.0 -webkit-</td>
<td>23.0 15.0 -webkit-</td>
</tr>
<tr>
<td>transform-origin (three-value syntax)</td>
<td>36.0 12.0 -webkit-</td>
<td>10.0</td>
<td>16.0 10.0 -moz-</td>
<td>4.0 -webkit-</td>
<td>23.0 15.0 -webkit-</td>
</tr>
<tr>
<td>transform-style</td>
<td>36.0 12.0 -webkit-</td>
<td>11.0</td>
<td>16.0 10.0 -moz-</td>
<td>4.0 -webkit-</td>
<td>23.0 15.0 -webkit-</td>
</tr>
<tr>
<td>perspective</td>
<td>36.0 12.0 -webkit-</td>
<td>10.0</td>
<td>16.0 10.0 -moz-</td>
<td>4.0 -webkit-</td>
<td>23.0 15.0 -webkit-</td>
</tr>
<tr>
<td>perspective-origin</td>
<td>36.0 12.0 -webkit-</td>
<td>10.0</td>
<td>16.0 10.0 -moz-</td>
<td>4.0 -webkit-</td>
<td>23.0 15.0 -webkit-</td>
</tr>
<tr>
<td>backface-visibility</td>
<td>36.0 12.0 -webkit-</td>
<td>10.0</td>
<td>16.0 10.0 -moz-</td>
<td>4.0 -webkit-</td>
<td>23.0 15.0 -webkit-</td>
</tr>
</tbody></table>
<h3 id="3D-è½¬æ¢æ–¹æ³•"><a href="#3D-è½¬æ¢æ–¹æ³•" class="headerlink" title="3D è½¬æ¢æ–¹æ³•"></a>3D è½¬æ¢æ–¹æ³•</h3><ul>
<li><strong>rotateX()</strong></li>
<li><strong>rotateY()</strong></li>
</ul>
<h4 id="rotateX-æ–¹æ³•"><a href="#rotateX-æ–¹æ³•" class="headerlink" title="rotateX() æ–¹æ³•"></a>rotateX() æ–¹æ³•</h4><img src="/2023/11/05/CSS/1665858856736-adf4dd72-b490-49e6-ad2b-f68a0e2c5b28.gif" class title="img">

<p>rotateX()æ–¹æ³•ï¼Œå›´ç»•å…¶åœ¨ä¸€ä¸ªç»™å®šåº¦æ•°Xè½´æ—‹è½¬çš„å…ƒç´ ã€‚</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotateX</span>(<span class="number">120deg</span>);</span><br><span class="line">    -webkit-<span class="attribute">transform</span>: <span class="built_in">rotateX</span>(<span class="number">120deg</span>); <span class="comment">/* Safari ä¸ Chrome */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="rotateY-æ–¹æ³•"><a href="#rotateY-æ–¹æ³•" class="headerlink" title="rotateY() æ–¹æ³•"></a>rotateY() æ–¹æ³•</h4><img src="/2023/11/05/CSS/1665858928453-1c42577e-6c1c-499a-ba76-b6b677d37087.gif" class title="img">

<p>rotateY()æ–¹æ³•ï¼Œå›´ç»•å…¶åœ¨ä¸€ä¸ªç»™å®šåº¦æ•°Yè½´æ—‹è½¬çš„å…ƒç´ </p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotateY</span>(<span class="number">130deg</span>);</span><br><span class="line">    -webkit-<span class="attribute">transform</span>: <span class="built_in">rotateY</span>(<span class="number">130deg</span>); <span class="comment">/* Safari ä¸ Chrome */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="è½¬æ¢å±æ€§"><a href="#è½¬æ¢å±æ€§" class="headerlink" title="è½¬æ¢å±æ€§"></a>è½¬æ¢å±æ€§</h3><p>ä¸‹è¡¨åˆ—å‡ºäº†æ‰€æœ‰çš„è½¬æ¢å±æ€§ï¼š</p>
<table>
<thead>
<tr>
<th>å±æ€§</th>
<th>æè¿°</th>
<th>CSS</th>
</tr>
</thead>
<tbody><tr>
<td><a href="https://www.runoob.com/cssref/css3-pr-transform.html">transform</a></td>
<td>å‘å…ƒç´ åº”ç”¨ 2D æˆ– 3D è½¬æ¢ã€‚</td>
<td>3</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/cssref/css3-pr-transform-origin.html">transform-origin</a></td>
<td>å…è®¸ä½ æ”¹å˜è¢«è½¬æ¢å…ƒç´ çš„ä½ç½®ã€‚</td>
<td>3</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/cssref/css3-pr-transform-style.html">transform-style</a></td>
<td>è§„å®šè¢«åµŒå¥—å…ƒç´ å¦‚ä½•åœ¨ 3D ç©ºé—´ä¸­æ˜¾ç¤ºã€‚</td>
<td>3</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/cssref/css3-pr-perspective.html">perspective</a></td>
<td>è§„å®š 3D å…ƒç´ çš„é€è§†æ•ˆæœã€‚</td>
<td>3</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/cssref/css3-pr-perspective-origin.html">perspective-origin</a></td>
<td>è§„å®š 3D å…ƒç´ çš„åº•éƒ¨ä½ç½®ã€‚</td>
<td>3</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/cssref/css3-pr-backface-visibility.html">backface-visibility</a></td>
<td>å®šä¹‰å…ƒç´ åœ¨ä¸é¢å¯¹å±å¹•æ—¶æ˜¯å¦å¯è§ã€‚</td>
<td>3</td>
</tr>
</tbody></table>
<h3 id="3D-è½¬æ¢æ–¹æ³•-1"><a href="#3D-è½¬æ¢æ–¹æ³•-1" class="headerlink" title="3D è½¬æ¢æ–¹æ³•"></a>3D è½¬æ¢æ–¹æ³•</h3><table>
<thead>
<tr>
<th>å‡½æ•°</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>matrix3d(<em>n</em>,<em>n</em>,<em>n</em>,<em>n</em>,<em>n</em>,<em>n</em>, <em>n</em>,<em>n</em>,<em>n</em>,<em>n</em>,<em>n</em>,<em>n</em>,<em>n</em>,<em>n</em>,<em>n</em>,<em>n</em>)</td>
<td>å®šä¹‰ 3D è½¬æ¢ï¼Œä½¿ç”¨ 16 ä¸ªå€¼çš„ 4x4 çŸ©é˜µã€‚</td>
</tr>
<tr>
<td>translate3d(<em>x</em>,<em>y</em>,<em>z</em>)</td>
<td>å®šä¹‰ 3D è½¬åŒ–ã€‚</td>
</tr>
<tr>
<td>translateX(<em>x</em>)</td>
<td>å®šä¹‰ 3D è½¬åŒ–ï¼Œä»…ä½¿ç”¨ç”¨äº X è½´çš„å€¼ã€‚</td>
</tr>
<tr>
<td>translateY(<em>y</em>)</td>
<td>å®šä¹‰ 3D è½¬åŒ–ï¼Œä»…ä½¿ç”¨ç”¨äº Y è½´çš„å€¼ã€‚</td>
</tr>
<tr>
<td>translateZ(<em>z</em>)</td>
<td>å®šä¹‰ 3D è½¬åŒ–ï¼Œä»…ä½¿ç”¨ç”¨äº Z è½´çš„å€¼ã€‚</td>
</tr>
<tr>
<td>scale3d(<em>x</em>,<em>y</em>,<em>z</em>)</td>
<td>å®šä¹‰ 3D ç¼©æ”¾è½¬æ¢ã€‚</td>
</tr>
<tr>
<td>scaleX(<em>x</em>)</td>
<td>å®šä¹‰ 3D ç¼©æ”¾è½¬æ¢ï¼Œé€šè¿‡ç»™å®šä¸€ä¸ª X è½´çš„å€¼ã€‚</td>
</tr>
<tr>
<td>scaleY(<em>y</em>)</td>
<td>å®šä¹‰ 3D ç¼©æ”¾è½¬æ¢ï¼Œé€šè¿‡ç»™å®šä¸€ä¸ª Y è½´çš„å€¼ã€‚</td>
</tr>
<tr>
<td>scaleZ(<em>z</em>)</td>
<td>å®šä¹‰ 3D ç¼©æ”¾è½¬æ¢ï¼Œé€šè¿‡ç»™å®šä¸€ä¸ª Z è½´çš„å€¼ã€‚</td>
</tr>
<tr>
<td>rotate3d(<em>x</em>,<em>y</em>,<em>z</em>,<em>angle</em>)</td>
<td>å®šä¹‰ 3D æ—‹è½¬ã€‚</td>
</tr>
<tr>
<td>rotateX(<em>angle</em>)</td>
<td>å®šä¹‰æ²¿ X è½´çš„ 3D æ—‹è½¬ã€‚</td>
</tr>
<tr>
<td>rotateY(<em>angle</em>)</td>
<td>å®šä¹‰æ²¿ Y è½´çš„ 3D æ—‹è½¬ã€‚</td>
</tr>
<tr>
<td>rotateZ(<em>angle</em>)</td>
<td>å®šä¹‰æ²¿ Z è½´çš„ 3D æ—‹è½¬ã€‚</td>
</tr>
<tr>
<td>perspective(<em>n</em>)</td>
<td>å®šä¹‰ 3D è½¬æ¢å…ƒç´ çš„é€è§†è§†å›¾ã€‚</td>
</tr>
</tbody></table>
<h1 id="9ã€è¿‡æ¸¡"><a href="#9ã€è¿‡æ¸¡" class="headerlink" title="9ã€è¿‡æ¸¡"></a>9ã€è¿‡æ¸¡</h1><p><strong>CSS3 è¿‡æ¸¡</strong></p>
<p>CSS3ä¸­ï¼Œæˆ‘ä»¬ä¸ºäº†æ·»åŠ æŸç§æ•ˆæœå¯ä»¥ä»ä¸€ç§æ ·å¼è½¬å˜åˆ°å¦ä¸€ä¸ªçš„æ—¶å€™ï¼Œæ— éœ€ä½¿ç”¨FlashåŠ¨ç”»æˆ–JavaScriptã€‚</p>
<p><strong>æµè§ˆå™¨æ”¯æŒ</strong></p>
<p>è¡¨æ ¼ä¸­çš„æ•°å­—è¡¨ç¤ºæ”¯æŒè¯¥å±æ€§çš„ç¬¬ä¸€ä¸ªæµè§ˆå™¨ç‰ˆæœ¬å·ã€‚</p>
<p>ç´§è·Ÿåœ¨ -webkit-, -ms- æˆ– -moz- å‰çš„æ•°å­—ä¸ºæ”¯æŒè¯¥å‰ç¼€å±æ€§çš„ç¬¬ä¸€ä¸ªæµè§ˆå™¨ç‰ˆæœ¬å·ã€‚</p>
<img src="/2023/11/05/CSS/1666418240673-ac0f40c8-a3a4-47c7-b8b4-5e347fec3c79.png" class title="img">

<p><strong>å®ƒæ˜¯å¦‚ä½•å·¥ä½œï¼Ÿ</strong></p>
<p>CSS3 è¿‡æ¸¡æ˜¯å…ƒç´ ä»ä¸€ç§æ ·å¼é€æ¸æ”¹å˜ä¸ºå¦ä¸€ç§çš„æ•ˆæœã€‚</p>
<p>è¦å®ç°è¿™ä¸€ç‚¹ï¼Œå¿…é¡»è§„å®šä¸¤é¡¹å†…å®¹ï¼š</p>
<ul>
<li>æŒ‡å®šè¦æ·»åŠ æ•ˆæœçš„CSSå±æ€§</li>
<li>æŒ‡å®šæ•ˆæœçš„æŒç»­æ—¶é—´ã€‚</li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attribute">transition</span>: width <span class="number">2s</span>;</span><br><span class="line">    -webkit-<span class="attribute">transition</span>: width <span class="number">2s</span>; <span class="comment">/* Safari */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼š</strong> å¦‚æœæœªæŒ‡å®šçš„æœŸé™ï¼Œtransitionå°†æ²¡æœ‰ä»»ä½•æ•ˆæœï¼Œå› ä¸ºé»˜è®¤å€¼æ˜¯0ã€‚</p>
<p>æŒ‡å®šçš„CSSå±æ€§çš„å€¼æ›´æ”¹æ—¶æ•ˆæœä¼šå‘ç”Ÿå˜åŒ–ã€‚ä¸€ä¸ªå…¸å‹CSSå±æ€§çš„å˜åŒ–æ˜¯ç”¨æˆ·é¼ æ ‡æ”¾åœ¨ä¸€ä¸ªå…ƒç´ ä¸Šæ—¶ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">:hover</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">300px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼š</strong> å½“é¼ æ ‡å…‰æ ‡ç§»åŠ¨åˆ°è¯¥å…ƒç´ æ—¶ï¼Œå®ƒé€æ¸æ”¹å˜å®ƒåŸæœ‰æ ·å¼</p>
<p><strong>å¤šé¡¹æ”¹å˜</strong></p>
<p>è¦æ·»åŠ å¤šä¸ªæ ·å¼çš„å˜æ¢æ•ˆæœï¼Œæ·»åŠ çš„å±æ€§ç”±é€—å·åˆ†éš”ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attribute">transition</span>: width <span class="number">2s</span>, height <span class="number">2s</span>, transform <span class="number">2s</span>;</span><br><span class="line">    -webkit-<span class="attribute">transition</span>: width <span class="number">2s</span>, height <span class="number">2s</span>, -webkit-transform <span class="number">2s</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è¿‡æ¸¡å±æ€§</strong></p>
<p>ä¸‹è¡¨åˆ—å‡ºäº†æ‰€æœ‰çš„è¿‡æ¸¡å±æ€§:</p>
<table>
<thead>
<tr>
<th>å±æ€§</th>
<th>æè¿°</th>
<th>CSS</th>
</tr>
</thead>
<tbody><tr>
<td><a href="https://www.runoob.com/cssref/css3-pr-transition.html">transition</a></td>
<td>ç®€å†™å±æ€§ï¼Œç”¨äºåœ¨ä¸€ä¸ªå±æ€§ä¸­è®¾ç½®å››ä¸ªè¿‡æ¸¡å±æ€§ã€‚</td>
<td>3</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/cssref/css3-pr-transition-property.html">transition-property</a></td>
<td>è§„å®šåº”ç”¨è¿‡æ¸¡çš„ CSS å±æ€§çš„åç§°ã€‚</td>
<td>3</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/cssref/css3-pr-transition-duration.html">transition-duration</a></td>
<td>å®šä¹‰è¿‡æ¸¡æ•ˆæœèŠ±è´¹çš„æ—¶é—´ã€‚é»˜è®¤æ˜¯ 0ã€‚</td>
<td>3</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/cssref/css3-pr-transition-timing-function.html">transition-timing-function</a></td>
<td>è§„å®šè¿‡æ¸¡æ•ˆæœçš„æ—¶é—´æ›²çº¿ã€‚é»˜è®¤æ˜¯ â€œeaseâ€ã€‚</td>
<td>3</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/cssref/css3-pr-transition-delay.html">transition-delay</a></td>
<td>è§„å®šè¿‡æ¸¡æ•ˆæœä½•æ—¶å¼€å§‹ã€‚é»˜è®¤æ˜¯ 0ã€‚</td>
<td>3</td>
</tr>
</tbody></table>
<p>ä¸‹é¢çš„ä¸¤ä¸ªä¾‹å­è®¾ç½®æ‰€æœ‰è¿‡æ¸¡å±æ€§ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"> </span></span><br><span class="line"><span class="language-css"><span class="selector-tag">div</span></span></span><br><span class="line"><span class="language-css">&#123;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">width</span>:<span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">height</span>:<span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">background</span>:red;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">transition-property</span>:width;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">transition-duration</span>:<span class="number">1s</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">transition-timing-function</span>:linear;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">transition-delay</span>:<span class="number">2s</span>;</span></span><br><span class="line"><span class="language-css">	<span class="comment">/* Safari */</span></span></span><br><span class="line"><span class="language-css">	-webkit-<span class="attribute">transition-property</span>:width;</span></span><br><span class="line"><span class="language-css">	-webkit-<span class="attribute">transition-duration</span>:<span class="number">1s</span>;</span></span><br><span class="line"><span class="language-css">	-webkit-<span class="attribute">transition-timing-function</span>:linear;</span></span><br><span class="line"><span class="language-css">	-webkit-<span class="attribute">transition-delay</span>:<span class="number">2s</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">div</span><span class="selector-pseudo">:hover</span></span></span><br><span class="line"><span class="language-css">&#123;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">width</span>:<span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>æ³¨æ„ï¼š<span class="tag">&lt;/<span class="name">b</span>&gt;</span>è¯¥å®ä¾‹æ— æ³•åœ¨ Internet Explorer 9 åŠæ›´æ—© IE ç‰ˆæœ¬ä¸Šå·¥ä½œã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>é¼ æ ‡ç§»åŠ¨åˆ° div å…ƒç´ ä¸Šï¼ŒæŸ¥çœ‹è¿‡æ¸¡æ•ˆæœã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>æ³¨æ„ï¼š<span class="tag">&lt;/<span class="name">b</span>&gt;</span> è¿‡æ¸¡æ•ˆæœéœ€è¦ç­‰å¾…ä¸¤ç§’åæ‰å¼€å§‹ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"> </span></span><br><span class="line"><span class="language-css"><span class="selector-tag">div</span></span></span><br><span class="line"><span class="language-css">&#123;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">width</span>:<span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">height</span>:<span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">background</span>:red;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">transition</span>:width <span class="number">1s</span> linear <span class="number">2s</span>;</span></span><br><span class="line"><span class="language-css">	<span class="comment">/* Safari */</span></span></span><br><span class="line"><span class="language-css">	-webkit-<span class="attribute">transition</span>:width <span class="number">1s</span> linear <span class="number">2s</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-tag">div</span><span class="selector-pseudo">:hover</span></span></span><br><span class="line"><span class="language-css">&#123;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">width</span>:<span class="number">200px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>æ³¨æ„ï¼š<span class="tag">&lt;/<span class="name">b</span>&gt;</span>è¯¥å®ä¾‹æ— æ³•åœ¨ Internet Explorer 9 åŠæ›´æ—© IE ç‰ˆæœ¬ä¸Šå·¥ä½œã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>é¼ æ ‡ç§»åŠ¨åˆ° div å…ƒç´ ä¸Šï¼ŒæŸ¥çœ‹è¿‡æ¸¡æ•ˆæœã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>æ³¨æ„ï¼š<span class="tag">&lt;/<span class="name">b</span>&gt;</span> è¿‡æ¸¡æ•ˆæœéœ€è¦ç­‰å¾…ä¸¤ç§’åæ‰å¼€å§‹ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="10ã€åŠ¨ç”»"><a href="#10ã€åŠ¨ç”»" class="headerlink" title="10ã€åŠ¨ç”»"></a>10ã€åŠ¨ç”»</h1><p><strong>CSS3 åŠ¨ç”»</strong></p>
<p>CSS3 å¯ä»¥åˆ›å»ºåŠ¨ç”»ï¼Œå®ƒå¯ä»¥å–ä»£è®¸å¤šç½‘é¡µåŠ¨ç”»å›¾åƒã€Flash åŠ¨ç”»å’Œ JavaScript å®ç°çš„æ•ˆæœã€‚</p>
<p><strong>CSS3 @keyframes è§„åˆ™</strong></p>
<p>è¦åˆ›å»º CSS3 åŠ¨ç”»ï¼Œä½ éœ€è¦äº†è§£ @keyframes è§„åˆ™ã€‚</p>
<p>@keyframes è§„åˆ™æ˜¯åˆ›å»ºåŠ¨ç”»ã€‚</p>
<p>@keyframes è§„åˆ™å†…æŒ‡å®šä¸€ä¸ª CSS æ ·å¼å’ŒåŠ¨ç”»å°†é€æ­¥ä»ç›®å‰çš„æ ·å¼æ›´æ”¹ä¸ºæ–°çš„æ ·å¼ã€‚</p>
<p><strong>æµè§ˆå™¨æ”¯æŒ</strong></p>
<p>è¡¨æ ¼ä¸­çš„æ•°å­—è¡¨ç¤ºæ”¯æŒè¯¥å±æ€§çš„ç¬¬ä¸€ä¸ªæµè§ˆå™¨ç‰ˆæœ¬å·ã€‚</p>
<p>ç´§è·Ÿåœ¨ -webkit-, -ms- æˆ– -moz- å‰çš„æ•°å­—ä¸ºæ”¯æŒè¯¥å‰ç¼€å±æ€§çš„ç¬¬ä¸€ä¸ªæµè§ˆå™¨ç‰ˆæœ¬å·ã€‚</p>
<img src="/2023/11/05/CSS/1666419574600-4cee0997-08ea-414b-8ee0-44c748984331.png" class title="img">

<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@keyframes</span> myfirst</span><br><span class="line">&#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;<span class="attribute">background</span>: red;&#125;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;<span class="attribute">background</span>: yellow;&#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">@-webkit-keyframes</span> myfirst /* Safari ä¸ Chrome */</span><br><span class="line">&#123;</span><br><span class="line">    <span class="selector-tag">from</span> &#123;<span class="attribute">background</span>: red;&#125;</span><br><span class="line">    <span class="selector-tag">to</span> &#123;<span class="attribute">background</span>: yellow;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>CSS3 åŠ¨ç”»</strong></p>
<p>å½“åœ¨ <strong>@keyframes</strong> åˆ›å»ºåŠ¨ç”»ï¼ŒæŠŠå®ƒç»‘å®šåˆ°ä¸€ä¸ªé€‰æ‹©å™¨ï¼Œå¦åˆ™åŠ¨ç”»ä¸ä¼šæœ‰ä»»ä½•æ•ˆæœã€‚</p>
<p>æŒ‡å®šè‡³å°‘è¿™ä¸¤ä¸ªCSS3çš„åŠ¨ç”»å±æ€§ç»‘å®šå‘ä¸€ä¸ªé€‰æ‹©å™¨ï¼š</p>
<ul>
<li>è§„å®šåŠ¨ç”»çš„åç§°</li>
<li>è§„å®šåŠ¨ç”»çš„æ—¶é•¿</li>
</ul>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"> </span></span><br><span class="line"><span class="language-css"><span class="selector-tag">div</span></span></span><br><span class="line"><span class="language-css">&#123;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">width</span>:<span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">height</span>:<span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">background</span>:red;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">animation</span>:myfirst <span class="number">5s</span>;</span></span><br><span class="line"><span class="language-css">	-webkit-<span class="attribute">animation</span>:myfirst <span class="number">5s</span>; <span class="comment">/* Safari and Chrome */</span></span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="keyword">@keyframes</span> myfirst</span></span><br><span class="line"><span class="language-css">&#123;</span></span><br><span class="line"><span class="language-css">	<span class="selector-tag">from</span> &#123;<span class="attribute">background</span>:red;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="selector-tag">to</span> &#123;<span class="attribute">background</span>:yellow;&#125;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="keyword">@-webkit-keyframes</span> myfirst /* Safari <span class="keyword">and</span> Chrome */</span></span><br><span class="line"><span class="language-css">&#123;</span></span><br><span class="line"><span class="language-css">	<span class="selector-tag">from</span> &#123;<span class="attribute">background</span>:red;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="selector-tag">to</span> &#123;<span class="attribute">background</span>:yellow;&#125;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>æ³¨æ„:<span class="tag">&lt;/<span class="name">b</span>&gt;</span> è¯¥å®ä¾‹åœ¨ Internet Explorer 9 åŠæ›´æ—© IE ç‰ˆæœ¬æ˜¯æ— æ•ˆçš„ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„:</strong> æ‚¨å¿…é¡»å®šä¹‰åŠ¨ç”»çš„åç§°å’ŒåŠ¨ç”»çš„æŒç»­æ—¶é—´ã€‚å¦‚æœçœç•¥çš„æŒç»­æ—¶é—´ï¼ŒåŠ¨ç”»å°†æ— æ³•è¿è¡Œï¼Œå› ä¸ºé»˜è®¤å€¼æ˜¯0ã€‚</p>
<p><strong>CSS3åŠ¨ç”»æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<p>åŠ¨ç”»æ˜¯ä½¿å…ƒç´ ä»ä¸€ç§æ ·å¼é€æ¸å˜åŒ–ä¸ºå¦ä¸€ç§æ ·å¼çš„æ•ˆæœã€‚</p>
<p>æ‚¨å¯ä»¥æ”¹å˜ä»»æ„å¤šçš„æ ·å¼ä»»æ„å¤šçš„æ¬¡æ•°ã€‚</p>
<p>è¯·ç”¨ç™¾åˆ†æ¯”æ¥è§„å®šå˜åŒ–å‘ç”Ÿçš„æ—¶é—´ï¼Œæˆ–ç”¨å…³é”®è¯ â€œfromâ€ å’Œ â€œtoâ€ï¼Œç­‰åŒäº 0% å’Œ 100%ã€‚</p>
<p>0% æ˜¯åŠ¨ç”»çš„å¼€å§‹ï¼Œ100% æ˜¯åŠ¨ç”»çš„å®Œæˆã€‚</p>
<p>ä¸ºäº†å¾—åˆ°æœ€ä½³çš„æµè§ˆå™¨æ”¯æŒï¼Œæ‚¨åº”è¯¥å§‹ç»ˆå®šä¹‰ 0% å’Œ 100% é€‰æ‹©å™¨ã€‚</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>èœé¸Ÿæ•™ç¨‹(runoob.com)<span class="tag">&lt;/<span class="name">title</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"> </span></span><br><span class="line"><span class="language-css"><span class="selector-tag">div</span></span></span><br><span class="line"><span class="language-css">&#123;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">width</span>:<span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">height</span>:<span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">background</span>:red;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">animation</span>:myfirst <span class="number">5s</span>;</span></span><br><span class="line"><span class="language-css">	-moz-<span class="attribute">animation</span>:myfirst <span class="number">5s</span>; <span class="comment">/* Firefox */</span></span></span><br><span class="line"><span class="language-css">	-webkit-<span class="attribute">animation</span>:myfirst <span class="number">5s</span>; <span class="comment">/* Safari and Chrome */</span></span></span><br><span class="line"><span class="language-css">	-o-<span class="attribute">animation</span>:myfirst <span class="number">5s</span>; <span class="comment">/* Opera */</span></span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="keyword">@keyframes</span> myfirst</span></span><br><span class="line"><span class="language-css">&#123;</span></span><br><span class="line"><span class="language-css">	<span class="number">0%</span>   &#123;<span class="attribute">background</span>:red;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">25%</span>  &#123;<span class="attribute">background</span>:yellow;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">50%</span>  &#123;<span class="attribute">background</span>:blue;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">100%</span> &#123;<span class="attribute">background</span>:green;&#125;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="keyword">@-moz-keyframes</span> myfirst /* Firefox */</span></span><br><span class="line"><span class="language-css">&#123;</span></span><br><span class="line"><span class="language-css">	<span class="number">0%</span>   &#123;<span class="attribute">background</span>:red;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">25%</span>  &#123;<span class="attribute">background</span>:yellow;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">50%</span>  &#123;<span class="attribute">background</span>:blue;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">100%</span> &#123;<span class="attribute">background</span>:green;&#125;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="keyword">@-webkit-keyframes</span> myfirst /* Safari <span class="keyword">and</span> Chrome */</span></span><br><span class="line"><span class="language-css">&#123;</span></span><br><span class="line"><span class="language-css">	<span class="number">0%</span>   &#123;<span class="attribute">background</span>:red;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">25%</span>  &#123;<span class="attribute">background</span>:yellow;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">50%</span>  &#123;<span class="attribute">background</span>:blue;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">100%</span> &#123;<span class="attribute">background</span>:green;&#125;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="keyword">@-o-keyframes</span> myfirst /* Opera */</span></span><br><span class="line"><span class="language-css">&#123;</span></span><br><span class="line"><span class="language-css">	<span class="number">0%</span>   &#123;<span class="attribute">background</span>:red;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">25%</span>  &#123;<span class="attribute">background</span>:yellow;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">50%</span>  &#123;<span class="attribute">background</span>:blue;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">100%</span> &#123;<span class="attribute">background</span>:green;&#125;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>æ³¨é‡Šï¼š<span class="tag">&lt;/<span class="name">b</span>&gt;</span>å½“åŠ¨ç”»å®Œæˆæ—¶ï¼Œä¼šå˜å›åˆå§‹çš„æ ·å¼ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>æ³¨æ„:<span class="tag">&lt;/<span class="name">b</span>&gt;</span> è¯¥å®ä¾‹åœ¨ Internet Explorer 9 åŠæ›´æ—© IE ç‰ˆæœ¬æ˜¯æ— æ•ˆçš„ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"> </span></span><br><span class="line"><span class="language-css">      <span class="selector-tag">div</span></span></span><br><span class="line"><span class="language-css">      &#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>:<span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>:<span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background</span>:red;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">position</span>:relative;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">animation</span>:myfirst <span class="number">5s</span>;</span></span><br><span class="line"><span class="language-css">        -webkit-<span class="attribute">animation</span>:myfirst <span class="number">5s</span>; <span class="comment">/* Safari and Chrome */</span></span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="keyword">@keyframes</span> myfirst</span></span><br><span class="line"><span class="language-css">      &#123;</span></span><br><span class="line"><span class="language-css">        <span class="number">0%</span>   &#123;<span class="attribute">background</span>:red; <span class="attribute">left</span>:<span class="number">0px</span>; <span class="attribute">top</span>:<span class="number">0px</span>;&#125;</span></span><br><span class="line"><span class="language-css">        <span class="number">25%</span>  &#123;<span class="attribute">background</span>:yellow; <span class="attribute">left</span>:<span class="number">200px</span>; <span class="attribute">top</span>:<span class="number">0px</span>;&#125;</span></span><br><span class="line"><span class="language-css">        <span class="number">50%</span>  &#123;<span class="attribute">background</span>:blue; <span class="attribute">left</span>:<span class="number">200px</span>; <span class="attribute">top</span>:<span class="number">200px</span>;&#125;</span></span><br><span class="line"><span class="language-css">        <span class="number">75%</span>  &#123;<span class="attribute">background</span>:green; <span class="attribute">left</span>:<span class="number">0px</span>; <span class="attribute">top</span>:<span class="number">200px</span>;&#125;</span></span><br><span class="line"><span class="language-css">        <span class="number">100%</span> &#123;<span class="attribute">background</span>:red; <span class="attribute">left</span>:<span class="number">0px</span>; <span class="attribute">top</span>:<span class="number">0px</span>;&#125;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="keyword">@-webkit-keyframes</span> myfirst /* Safari <span class="keyword">and</span> Chrome */</span></span><br><span class="line"><span class="language-css">      &#123;</span></span><br><span class="line"><span class="language-css">        <span class="number">0%</span>   &#123;<span class="attribute">background</span>:red; <span class="attribute">left</span>:<span class="number">0px</span>; <span class="attribute">top</span>:<span class="number">0px</span>;&#125;</span></span><br><span class="line"><span class="language-css">      <span class="number">25%</span>  &#123;<span class="attribute">background</span>:yellow; <span class="attribute">left</span>:<span class="number">200px</span>; <span class="attribute">top</span>:<span class="number">0px</span>;&#125;</span></span><br><span class="line"><span class="language-css">      <span class="number">50%</span>  &#123;<span class="attribute">background</span>:blue; <span class="attribute">left</span>:<span class="number">200px</span>; <span class="attribute">top</span>:<span class="number">200px</span>;&#125;</span></span><br><span class="line"><span class="language-css">      <span class="number">75%</span>  &#123;<span class="attribute">background</span>:green; <span class="attribute">left</span>:<span class="number">0px</span>; <span class="attribute">top</span>:<span class="number">200px</span>;&#125;</span></span><br><span class="line"><span class="language-css">      <span class="number">100%</span> &#123;<span class="attribute">background</span>:red; <span class="attribute">left</span>:<span class="number">0px</span>; <span class="attribute">top</span>:<span class="number">0px</span>;&#125;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>æ³¨æ„:<span class="tag">&lt;/<span class="name">b</span>&gt;</span> è¯¥å®ä¾‹åœ¨ Internet Explorer 9 åŠæ›´æ—© IE ç‰ˆæœ¬æ˜¯æ— æ•ˆçš„ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="CSS3çš„åŠ¨ç”»å±æ€§"><a href="#CSS3çš„åŠ¨ç”»å±æ€§" class="headerlink" title="CSS3çš„åŠ¨ç”»å±æ€§"></a>CSS3çš„åŠ¨ç”»å±æ€§</h3><p>ä¸‹é¢çš„è¡¨æ ¼åˆ—å‡ºäº† @keyframes è§„åˆ™å’Œæ‰€æœ‰åŠ¨ç”»å±æ€§ï¼š</p>
<table>
<thead>
<tr>
<th>å±æ€§</th>
<th>æè¿°</th>
<th>CSS</th>
</tr>
</thead>
<tbody><tr>
<td><a href="https://www.runoob.com/cssref/css3-pr-animation-keyframes.html">@keyframes</a></td>
<td>è§„å®šåŠ¨ç”»ã€‚</td>
<td>3</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/cssref/css3-pr-animation.html">animation</a></td>
<td>æ‰€æœ‰åŠ¨ç”»å±æ€§çš„ç®€å†™å±æ€§ã€‚</td>
<td>3</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/cssref/css3-pr-animation-name.html">animation-name</a></td>
<td>è§„å®š @keyframes åŠ¨ç”»çš„åç§°ã€‚</td>
<td>3</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/cssref/css3-pr-animation-duration.html">animation-duration</a></td>
<td>è§„å®šåŠ¨ç”»å®Œæˆä¸€ä¸ªå‘¨æœŸæ‰€èŠ±è´¹çš„ç§’æˆ–æ¯«ç§’ã€‚é»˜è®¤æ˜¯ 0ã€‚</td>
<td>3</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/cssref/css3-pr-animation-timing-function.html">animation-timing-function</a></td>
<td>è§„å®šåŠ¨ç”»çš„é€Ÿåº¦æ›²çº¿ã€‚é»˜è®¤æ˜¯ â€œeaseâ€ã€‚</td>
<td>3</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/cssref/css3-pr-animation-fill-mode.html">animation-fill-mode</a></td>
<td>è§„å®šå½“åŠ¨ç”»ä¸æ’­æ”¾æ—¶ï¼ˆå½“åŠ¨ç”»å®Œæˆæ—¶ï¼Œæˆ–å½“åŠ¨ç”»æœ‰ä¸€ä¸ªå»¶è¿Ÿæœªå¼€å§‹æ’­æ”¾æ—¶ï¼‰ï¼Œè¦åº”ç”¨åˆ°å…ƒç´ çš„æ ·å¼ã€‚</td>
<td>3</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/cssref/css3-pr-animation-delay.html">animation-delay</a></td>
<td>è§„å®šåŠ¨ç”»ä½•æ—¶å¼€å§‹ã€‚é»˜è®¤æ˜¯ 0ã€‚</td>
<td>3</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/cssref/css3-pr-animation-iteration-count.html">animation-iteration-count</a></td>
<td>è§„å®šåŠ¨ç”»è¢«æ’­æ”¾çš„æ¬¡æ•°ã€‚é»˜è®¤æ˜¯ 1ã€‚</td>
<td>3</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/cssref/css3-pr-animation-direction.html">animation-direction</a></td>
<td>è§„å®šåŠ¨ç”»æ˜¯å¦åœ¨ä¸‹ä¸€å‘¨æœŸé€†å‘åœ°æ’­æ”¾ã€‚é»˜è®¤æ˜¯ â€œnormalâ€ã€‚</td>
<td>3</td>
</tr>
<tr>
<td><a href="https://www.runoob.com/cssref/css3-pr-animation-play-state.html">animation-play-state</a></td>
<td>è§„å®šåŠ¨ç”»æ˜¯å¦æ­£åœ¨è¿è¡Œæˆ–æš‚åœã€‚é»˜è®¤æ˜¯ â€œrunningâ€ã€‚</td>
<td>3</td>
</tr>
</tbody></table>
<p>ä¸‹é¢ä¸¤ä¸ªä¾‹å­è®¾ç½®æ‰€æœ‰åŠ¨ç”»å±æ€§ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"> </span></span><br><span class="line"><span class="language-css"><span class="selector-tag">div</span></span></span><br><span class="line"><span class="language-css">&#123;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">width</span>:<span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">height</span>:<span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">background</span>:red;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">position</span>:relative;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">animation-name</span>:myfirst;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">animation-duration</span>:<span class="number">5s</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">animation-timing-function</span>:linear;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">animation-delay</span>:<span class="number">2s</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">animation-iteration-count</span>:infinite;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">animation-direction</span>:alternate;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">animation-play-state</span>:running;</span></span><br><span class="line"><span class="language-css">	<span class="comment">/* Safari and Chrome: */</span></span></span><br><span class="line"><span class="language-css">	-webkit-<span class="attribute">animation-name</span>:myfirst;</span></span><br><span class="line"><span class="language-css">	-webkit-<span class="attribute">animation-duration</span>:<span class="number">5s</span>;</span></span><br><span class="line"><span class="language-css">	-webkit-<span class="attribute">animation-timing-function</span>:linear;</span></span><br><span class="line"><span class="language-css">	-webkit-<span class="attribute">animation-delay</span>:<span class="number">2s</span>;</span></span><br><span class="line"><span class="language-css">	-webkit-<span class="attribute">animation-iteration-count</span>:infinite;</span></span><br><span class="line"><span class="language-css">	-webkit-<span class="attribute">animation-direction</span>:alternate;</span></span><br><span class="line"><span class="language-css">	-webkit-<span class="attribute">animation-play-state</span>:running;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="keyword">@keyframes</span> myfirst</span></span><br><span class="line"><span class="language-css">&#123;</span></span><br><span class="line"><span class="language-css">	<span class="number">0%</span>   &#123;<span class="attribute">background</span>:red; <span class="attribute">left</span>:<span class="number">0px</span>; <span class="attribute">top</span>:<span class="number">0px</span>;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">25%</span>  &#123;<span class="attribute">background</span>:yellow; <span class="attribute">left</span>:<span class="number">200px</span>; <span class="attribute">top</span>:<span class="number">0px</span>;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">50%</span>  &#123;<span class="attribute">background</span>:blue; <span class="attribute">left</span>:<span class="number">200px</span>; <span class="attribute">top</span>:<span class="number">200px</span>;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">75%</span>  &#123;<span class="attribute">background</span>:green; <span class="attribute">left</span>:<span class="number">0px</span>; <span class="attribute">top</span>:<span class="number">200px</span>;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">100%</span> &#123;<span class="attribute">background</span>:red; <span class="attribute">left</span>:<span class="number">0px</span>; <span class="attribute">top</span>:<span class="number">0px</span>;&#125;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="keyword">@-webkit-keyframes</span> myfirst /* Safari <span class="keyword">and</span> Chrome */</span></span><br><span class="line"><span class="language-css">&#123;</span></span><br><span class="line"><span class="language-css">	<span class="number">0%</span>   &#123;<span class="attribute">background</span>:red; <span class="attribute">left</span>:<span class="number">0px</span>; <span class="attribute">top</span>:<span class="number">0px</span>;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">25%</span>  &#123;<span class="attribute">background</span>:yellow; <span class="attribute">left</span>:<span class="number">200px</span>; <span class="attribute">top</span>:<span class="number">0px</span>;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">50%</span>  &#123;<span class="attribute">background</span>:blue; <span class="attribute">left</span>:<span class="number">200px</span>; <span class="attribute">top</span>:<span class="number">200px</span>;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">75%</span>  &#123;<span class="attribute">background</span>:green; <span class="attribute">left</span>:<span class="number">0px</span>; <span class="attribute">top</span>:<span class="number">200px</span>;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">100%</span> &#123;<span class="attribute">background</span>:red; <span class="attribute">left</span>:<span class="number">0px</span>; <span class="attribute">top</span>:<span class="number">0px</span>;&#125;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>æ³¨æ„:<span class="tag">&lt;/<span class="name">b</span>&gt;</span> è¯¥å®ä¾‹åœ¨ Internet Explorer 9 åŠæ›´æ—© IE ç‰ˆæœ¬æ˜¯æ— æ•ˆçš„ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"> </span></span><br><span class="line"><span class="language-css"><span class="selector-tag">div</span></span></span><br><span class="line"><span class="language-css">&#123;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">width</span>:<span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">height</span>:<span class="number">100px</span>;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">background</span>:red;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">position</span>:relative;</span></span><br><span class="line"><span class="language-css">	<span class="attribute">animation</span>:myfirst <span class="number">5s</span> linear <span class="number">2s</span> infinite alternate;</span></span><br><span class="line"><span class="language-css">	<span class="comment">/* Firefox: */</span></span></span><br><span class="line"><span class="language-css">	-moz-<span class="attribute">animation</span>:myfirst <span class="number">5s</span> linear <span class="number">2s</span> infinite alternate;</span></span><br><span class="line"><span class="language-css">	<span class="comment">/* Safari and Chrome: */</span></span></span><br><span class="line"><span class="language-css">	-webkit-<span class="attribute">animation</span>:myfirst <span class="number">5s</span> linear <span class="number">2s</span> infinite alternate;</span></span><br><span class="line"><span class="language-css">	<span class="comment">/* Opera: */</span></span></span><br><span class="line"><span class="language-css">	-o-<span class="attribute">animation</span>:myfirst <span class="number">5s</span> linear <span class="number">2s</span> infinite alternate;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="keyword">@keyframes</span> myfirst</span></span><br><span class="line"><span class="language-css">&#123;</span></span><br><span class="line"><span class="language-css">	<span class="number">0%</span>   &#123;<span class="attribute">background</span>:red; <span class="attribute">left</span>:<span class="number">0px</span>; <span class="attribute">top</span>:<span class="number">0px</span>;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">25%</span>  &#123;<span class="attribute">background</span>:yellow; <span class="attribute">left</span>:<span class="number">200px</span>; <span class="attribute">top</span>:<span class="number">0px</span>;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">50%</span>  &#123;<span class="attribute">background</span>:blue; <span class="attribute">left</span>:<span class="number">200px</span>; <span class="attribute">top</span>:<span class="number">200px</span>;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">75%</span>  &#123;<span class="attribute">background</span>:green; <span class="attribute">left</span>:<span class="number">0px</span>; <span class="attribute">top</span>:<span class="number">200px</span>;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">100%</span> &#123;<span class="attribute">background</span>:red; <span class="attribute">left</span>:<span class="number">0px</span>; <span class="attribute">top</span>:<span class="number">0px</span>;&#125;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="keyword">@-moz-keyframes</span> myfirst /* Firefox */</span></span><br><span class="line"><span class="language-css">&#123;</span></span><br><span class="line"><span class="language-css">	<span class="number">0%</span>   &#123;<span class="attribute">background</span>:red; <span class="attribute">left</span>:<span class="number">0px</span>; <span class="attribute">top</span>:<span class="number">0px</span>;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">25%</span>  &#123;<span class="attribute">background</span>:yellow; <span class="attribute">left</span>:<span class="number">200px</span>; <span class="attribute">top</span>:<span class="number">0px</span>;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">50%</span>  &#123;<span class="attribute">background</span>:blue; <span class="attribute">left</span>:<span class="number">200px</span>; <span class="attribute">top</span>:<span class="number">200px</span>;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">75%</span>  &#123;<span class="attribute">background</span>:green; <span class="attribute">left</span>:<span class="number">0px</span>; <span class="attribute">top</span>:<span class="number">200px</span>;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">100%</span> &#123;<span class="attribute">background</span>:red; <span class="attribute">left</span>:<span class="number">0px</span>; <span class="attribute">top</span>:<span class="number">0px</span>;&#125;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="keyword">@-webkit-keyframes</span> myfirst /* Safari <span class="keyword">and</span> Chrome */</span></span><br><span class="line"><span class="language-css">&#123;</span></span><br><span class="line"><span class="language-css">	<span class="number">0%</span>   &#123;<span class="attribute">background</span>:red; <span class="attribute">left</span>:<span class="number">0px</span>; <span class="attribute">top</span>:<span class="number">0px</span>;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">25%</span>  &#123;<span class="attribute">background</span>:yellow; <span class="attribute">left</span>:<span class="number">200px</span>; <span class="attribute">top</span>:<span class="number">0px</span>;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">50%</span>  &#123;<span class="attribute">background</span>:blue; <span class="attribute">left</span>:<span class="number">200px</span>; <span class="attribute">top</span>:<span class="number">200px</span>;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">75%</span>  &#123;<span class="attribute">background</span>:green; <span class="attribute">left</span>:<span class="number">0px</span>; <span class="attribute">top</span>:<span class="number">200px</span>;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">100%</span> &#123;<span class="attribute">background</span>:red; <span class="attribute">left</span>:<span class="number">0px</span>; <span class="attribute">top</span>:<span class="number">0px</span>;&#125;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="keyword">@-o-keyframes</span> myfirst /* Opera */</span></span><br><span class="line"><span class="language-css">&#123;</span></span><br><span class="line"><span class="language-css">	<span class="number">0%</span>   &#123;<span class="attribute">background</span>:red; <span class="attribute">left</span>:<span class="number">0px</span>; <span class="attribute">top</span>:<span class="number">0px</span>;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">25%</span>  &#123;<span class="attribute">background</span>:yellow; <span class="attribute">left</span>:<span class="number">200px</span>; <span class="attribute">top</span>:<span class="number">0px</span>;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">50%</span>  &#123;<span class="attribute">background</span>:blue; <span class="attribute">left</span>:<span class="number">200px</span>; <span class="attribute">top</span>:<span class="number">200px</span>;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">75%</span>  &#123;<span class="attribute">background</span>:green; <span class="attribute">left</span>:<span class="number">0px</span>; <span class="attribute">top</span>:<span class="number">200px</span>;&#125;</span></span><br><span class="line"><span class="language-css">	<span class="number">100%</span> &#123;<span class="attribute">background</span>:red; <span class="attribute">left</span>:<span class="number">0px</span>; <span class="attribute">top</span>:<span class="number">0px</span>;&#125;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">b</span>&gt;</span>æ³¨æ„:<span class="tag">&lt;/<span class="name">b</span>&gt;</span> è¯¥å®ä¾‹åœ¨ Internet Explorer 9 åŠæ›´æ—© IE ç‰ˆæœ¬æ˜¯æ— æ•ˆçš„ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>html</title>
    <url>/2023/11/05/html/</url>
    <content><![CDATA[<center>HTML</center>

<span id="more"></span>

<h1 id="1-ç½‘é¡µSEO"><a href="#1-ç½‘é¡µSEO" class="headerlink" title="1.ç½‘é¡µSEO"></a>1.ç½‘é¡µSEO</h1><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">        &lt; body &gt;ã€&lt; /body&gt;ç­‰æˆå¯¹çš„æ ‡ç­¾ï¼Œåˆ†åˆ«å«åšå¼€æ”¾æ ‡ç­¾å’Œé—­åˆæ ‡ç­¾</span></span><br><span class="line"><span class="comment">        å•ç‹¬å‘ˆç°çš„æ ‡ç­¾ï¼ˆç©ºå…ƒç´ ï¼‰ï¼Œå¦‚&lt; hr/ &gt;;æ„ä¸ºç”¨/æ¥å…³é—­ç©ºå…ƒç´ </span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ç½‘é¡µå¤´éƒ¨ --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;keywords&quot;</span> <span class="attr">content</span>=<span class="string">&quot;totoroBlog,Python,è½¯ä»¶æµ‹è¯•&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;description&quot;</span> <span class="attr">content</span>=<span class="string">&quot;totoroçš„åšå®¢ï¼Œæ¬¢è¿è®¿é—®&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>SEOä¸ç½‘é¡µæ•´ä½“ç»“æ„<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ç½‘é¡µä¸»ä½“ --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    Hello,World!</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="2-åŸºæœ¬æ ‡ç­¾"><a href="#2-åŸºæœ¬æ ‡ç­¾" class="headerlink" title="2.åŸºæœ¬æ ‡ç­¾"></a>2.åŸºæœ¬æ ‡ç­¾</h1><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç”¨åšç½‘ç«™SEO --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;keywords&quot;</span> <span class="attr">content</span>=<span class="string">&quot;totoroBlog,Python,è½¯ä»¶æµ‹è¯•&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;description&quot;</span> <span class="attr">content</span>=<span class="string">&quot;totoroçš„åšå®¢ï¼Œæ¬¢è¿è®¿é—®&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>åŸºæœ¬æ ‡ç­¾<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ ‡é¢˜æ ‡ç­¾ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>ä¸€çº§æ ‡é¢˜<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>äºŒçº§æ ‡é¢˜<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>ä¸‰çº§æ ‡é¢˜<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h4</span>&gt;</span>å››çº§æ ‡é¢˜<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h5</span>&gt;</span>äº”çº§æ ‡é¢˜<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h6</span>&gt;</span>å…­çº§æ ‡é¢˜<span class="tag">&lt;/<span class="name">h6</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ®µè½æ ‡ç­¾ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>ç¬¬ä¸€æ®µè½<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>ç¬¬äºŒæ®µè½<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ¢è¡Œæ ‡ç­¾ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ¢è¡Œæ ‡ç­¾æ¯”è¾ƒç´§å‡‘ï¼Œæ®µè½æ ‡ç­¾æœ‰æ˜æ˜¾æ®µè½é—´è·--&gt;</span></span><br><span class="line">    å‡†å¤‡æ¢è¡Œï¼Œè¿™æ˜¯è¡Œå°¾<span class="tag">&lt;<span class="name">br</span>&gt;</span>æ–°è¡Œå¼€å¤´<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ°´å¹³çº¿æ ‡ç­¾ --&gt;</span></span><br><span class="line">    åä¸½çš„åˆ†éš”ç¬¦</span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--  --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç²—ä½“ã€æ–œä½“ã€ç²—æ–œä½“ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">strong</span>&gt;</span>I Love You<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">em</span>&gt;</span>I Love You<span class="tag">&lt;/<span class="name">em</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">strong</span>&gt;</span><span class="tag">&lt;<span class="name">em</span>&gt;</span>I Love You<span class="tag">&lt;/<span class="name">em</span>&gt;</span><span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç‰¹æ®Šç¬¦å· --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span>ç‰¹æ®Šç¬¦å·:<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    ç©ºæ ¼ï¼š1<span class="symbol">&amp;nbsp;</span>2<span class="symbol">&amp;nbsp;</span>3<span class="symbol">&amp;nbsp;</span>4<span class="symbol">&amp;nbsp;</span>5<span class="symbol">&amp;nbsp;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    æ‰‹åŠ¨ç©ºæ ¼ï¼š1 2 3    4       5<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    å¤§äºå·ï¼š<span class="symbol">&amp;gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    å°äºå·ï¼š<span class="symbol">&amp;lt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    ç‰ˆæƒç¬¦å·ï¼štotoroBlog<span class="symbol">&amp;copy;</span>2020<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="3-å›¾åƒæ ‡ç­¾"><a href="#3-å›¾åƒæ ‡ç­¾" class="headerlink" title="3.å›¾åƒæ ‡ç­¾"></a>3.å›¾åƒæ ‡ç­¾</h1><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>å›¾åƒæ ‡ç­¾<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å›¾åƒæ ‡ç­¾ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    src:èµ„æºåœ°å€</span></span><br><span class="line"><span class="comment">    ç›¸å¯¹åœ°å€ï¼Œç»å¯¹åœ°å€</span></span><br><span class="line"><span class="comment">    ../ä¸Šçº§åœ°å€</span></span><br><span class="line"><span class="comment">    altï¼šåœ¨å›¾ç‰‡åŠ è½½å¤±è´¥çš„æ—¶å€™ï¼Œå°±ä¼šç”¨æ–‡å­—ä»£æ›¿</span></span><br><span class="line"><span class="comment">    title:é¼ æ ‡æ‚¬åœåœ¨å›¾ç‰‡ä¸Šæ—¶ï¼Œæ‰€æ˜¾ç¤ºçš„åå­—</span></span><br><span class="line"><span class="comment">    width height: å›¾ç‰‡çš„é«˜å’Œå®½</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./src/img/å¾®ä¿¡å›¾ç‰‡_20201224160900.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;~_~ğŸ˜«,å›¾ç‰‡è¢«åæ‰äº†&quot;</span> <span class="attr">title</span>=<span class="string">&quot;ä½ æ—ºæˆ‘æ—ºå¤§å®¶æ—º&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./src/img/xxx.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;~_~ğŸ˜«,å›¾ç‰‡è¢«åæ‰äº†&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./src/img/å¾®ä¿¡å›¾ç‰‡_20201224160900.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;~_~ğŸ˜«,å›¾ç‰‡è¢«åæ‰äº†&quot;</span> <span class="attr">width</span>=<span class="string">&quot;128&quot;</span> <span class="attr">height</span>=<span class="string">&quot;128&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line">Â·</span><br></pre></td></tr></table></figure>

<h1 id="4-é“¾æ¥æ ‡ç­¾"><a href="#4-é“¾æ¥æ ‡ç­¾" class="headerlink" title="4.é“¾æ¥æ ‡ç­¾"></a>4.é“¾æ¥æ ‡ç­¾</h1><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>é“¾æ¥æ ‡ç­¾<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        é“¾æ¥æ ‡ç­¾ï¼š</span></span><br><span class="line"><span class="comment">        hrefï¼šè·³è½¬é¡µé¢çš„åœ°å€</span></span><br><span class="line"><span class="comment">        aæ ‡ç­¾å†…æ–‡å­—ï¼šå³æ˜¾ç¤ºçš„æ–‡å­—</span></span><br><span class="line"><span class="comment">            å¯ä»¥æŠŠå›¾ç‰‡æ”¾åœ¨aæ ‡ç­¾å†…ï¼Œç‚¹å‡»å›¾ç‰‡è·³è½¬ç½‘é¡µ</span></span><br><span class="line"><span class="comment">        titleï¼šé“¾æ¥æè¿°</span></span><br><span class="line"><span class="comment">        target:è¡¨ç¤ºåœ¨å“ªæ‰“å¼€æ–°ç½‘é¡µã€‚_self:å½“å‰æ ‡ç­¾æ‰“å¼€ _blank:æ–°çš„é¡µé¢ä¸­æ‰“å¼€</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">name</span>=<span class="string">&quot;top&quot;</span>&gt;</span>è¿™æ˜¯é¡¶éƒ¨<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://www.baidu.com&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">title</span>=<span class="string">&quot;ç™¾åº¦ä¸€ä¸‹&quot;</span>&gt;</span>ç™¾åº¦ä¸€ä¸‹<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://www.baidu.com&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./src/img/baidu.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;ğŸ¤£å›¾ç‰‡ä¸è§äº†&quot;</span> <span class="attr">title</span>=<span class="string">&quot;ç™¾åº¦ä¸€ä¸‹&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://www.baidu.com&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./src/img/baidu.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;ğŸ¤£å›¾ç‰‡ä¸è§äº†&quot;</span> <span class="attr">title</span>=<span class="string">&quot;ç™¾åº¦ä¸€ä¸‹&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://www.baidu.com&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./src/img/baidu.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;ğŸ¤£å›¾ç‰‡ä¸è§äº†&quot;</span> <span class="attr">title</span>=<span class="string">&quot;ç™¾åº¦ä¸€ä¸‹&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://www.baidu.com&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./src/img/baidu.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;ğŸ¤£å›¾ç‰‡ä¸è§äº†&quot;</span> <span class="attr">title</span>=<span class="string">&quot;ç™¾åº¦ä¸€ä¸‹&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://www.baidu.com&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;./src/img/baidu.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;ğŸ¤£å›¾ç‰‡ä¸è§äº†&quot;</span> <span class="attr">title</span>=<span class="string">&quot;ç™¾åº¦ä¸€ä¸‹&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- é”šæ ‡ç­¾ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#top&quot;</span>&gt;</span>å›åˆ°é¡¶éƒ¨<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ä¹Ÿå¯ä»¥åœ¨ç½‘å€åæ·»åŠ #å·è·³åˆ°å¯¹åº”ç½‘ç«™çš„å¯¹åº”ä½ç½® --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://www.cyc2018.xyz/#java&quot;</span>&gt;</span>Cyc2018#Java<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- åŠŸèƒ½æ€§é“¾æ¥ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;mailto:957584602@qq.com&quot;</span>&gt;</span>é‚®ç®±è”ç³»<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- QQé“¾æ¥ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span> <span class="attr">href</span>=<span class="string">&quot;http://wpa.qq.com/msgrd?v=3&amp;uin=957584602&amp;site=qq&amp;menu=yes&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">border</span>=<span class="string">&quot;0&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">src</span>=<span class="string">&quot;http://wpa.qq.com/pa?p=2:957584602:53&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;ç‚¹å‡»è¿™é‡Œç»™æˆ‘å‘æ¶ˆæ¯&quot;</span> <span class="attr">title</span>=<span class="string">&quot;ç‚¹å‡»è¿™é‡Œç»™æˆ‘å‘æ¶ˆæ¯&quot;</span> /&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ€»ç»“ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å—å…ƒç´ :æ— è®ºå†…å®¹å¤šå°‘ï¼Œè¯¥å…ƒç´ ç‹¬å ä¸€è¡Œ</span></span><br><span class="line"><span class="comment">        p hr h1~h6</span></span><br><span class="line"><span class="comment">        è¡Œå†…å…ƒç´ :å†…å®¹æ’‘å¼€å®½åº¦ï¼Œå·¦å³éƒ½æ˜¯è¡Œå†…å…ƒç´ çš„å¯ä»¥æ’åœ¨ä¸€è¡Œ</span></span><br><span class="line"><span class="comment">        a strong em</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="5-åˆ—è¡¨"><a href="#5-åˆ—è¡¨" class="headerlink" title="5.åˆ—è¡¨"></a>5.åˆ—è¡¨</h1><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>åˆ—è¡¨<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æœ‰åºåˆ—è¡¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>Python<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>Java<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>C++<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ— åºåˆ—è¡¨ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>Python<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>Java<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>C++<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- æ— åºåˆ—è¡¨åµŒå¥— --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>Python</span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span>åŸºç¡€éƒ¨åˆ†<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span>é«˜çº§éƒ¨åˆ†<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>Java</span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span>JavaSE<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span>JavaEE<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è‡ªå®šä¹‰åˆ—è¡¨ --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--è‡ªå®šä¹‰åˆ—è¡¨</span></span><br><span class="line"><span class="comment">        dlï¼šæ ‡ç­¾</span></span><br><span class="line"><span class="comment">        dtï¼šåˆ—è¡¨åç§°</span></span><br><span class="line"><span class="comment">        ddï¼šåˆ—è¡¨å†…å®¹</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dl</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dt</span>&gt;</span>å­¦ç§‘<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dd</span>&gt;</span>è¯­æ–‡<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dd</span>&gt;</span>æ•°å­¦<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dd</span>&gt;</span>è‹±è¯­<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="6-è¡¨æ ¼"><a href="#6-è¡¨æ ¼" class="headerlink" title="6.è¡¨æ ¼"></a>6.è¡¨æ ¼</h1><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>è¡¨æ ¼<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--è¡¨æ ¼table</span></span><br><span class="line"><span class="comment">        è¡Œ tr</span></span><br><span class="line"><span class="comment">        åˆ— td</span></span><br><span class="line"><span class="comment">        è¡¨å¤´ caption</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;1px&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">caption</span>&gt;</span>æˆ‘æ˜¯è¡¨æ ¼æ ‡é¢˜<span class="tag">&lt;/<span class="name">caption</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- è·¨è¡Œ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">rowspan</span>=<span class="string">&quot;2&quot;</span>&gt;</span>1-1<span class="tag">&lt;/<span class="name">td</span>&gt;</span>  <span class="comment">&lt;!-- 1-1è·¨ä¸¤è¡Œ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>1-2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>1-3<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- è·¨åˆ— --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">&quot;2&quot;</span>&gt;</span>2-1<span class="tag">&lt;/<span class="name">td</span>&gt;</span>  <span class="comment">&lt;!-- 2-1è·¨ä¸¤åˆ— --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>2-2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>2-3<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>3-1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>3-2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>3-3<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="7-åª’ä½“å…ƒç´ "><a href="#7-åª’ä½“å…ƒç´ " class="headerlink" title="7.åª’ä½“å…ƒç´ "></a>7.åª’ä½“å…ƒç´ </h1><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>åª’ä½“å…ƒç´ <span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è§†é¢‘å…ƒç´  --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--è§†é¢‘</span></span><br><span class="line"><span class="comment">		src èµ„æºè·¯å¾„</span></span><br><span class="line"><span class="comment">        controls æ§åˆ¶é¢æ¿</span></span><br><span class="line"><span class="comment">        autoplay è‡ªåŠ¨æ’­æ”¾</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">video</span> <span class="attr">src</span>=<span class="string">&quot;./src/video/è„‘ç”µæ•°æ®ç›¸ä¼¼åº¦æ¯”å¯¹.mp4&quot;</span> <span class="attr">controls</span> <span class="attr">width</span>=<span class="string">&quot;800&quot;</span> <span class="attr">height</span>=<span class="string">&quot;600&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- éŸ³é¢‘å…ƒç´  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">audio</span> <span class="attr">src</span>=<span class="string">&quot;./src/audio/ä¹…çŸ³è®© - å¤©ç©ºã®åŸãƒ©ãƒ”ãƒ¥ã‚¿ (å¤©ç©ºä¹‹åŸ).mp3&quot;</span> <span class="attr">controls</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="8-é¡µé¢ç»“æ„"><a href="#8-é¡µé¢ç»“æ„" class="headerlink" title="8.é¡µé¢ç»“æ„"></a>8.é¡µé¢ç»“æ„</h1><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>é¡µé¢ç»“æ„<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">        header	æ ‡é¢˜å¤´éƒ¨åŒºåŸŸçš„å†…å®¹ï¼ˆç”¨äºé¡µé¢æˆ–è€…é¡µé¢ä¸­çš„ä¸€å—åŒºåŸŸï¼‰</span></span><br><span class="line"><span class="comment">        footer	æ ‡è®°è„šéƒ¨åŒºåŸŸçš„å†…å®¹ï¼ˆç”¨äºæ•´ä¸ªé¡µé¢æˆ–é¡µé¢çš„ä¸€å—åŒºåŸŸï¼‰</span></span><br><span class="line"><span class="comment">        section	Webé¡µé¢ä¸­çš„ä¸€å—ç‹¬ç«‹åŒºåŸŸ</span></span><br><span class="line"><span class="comment">        article	ç‹¬ç«‹çš„æ–‡ç« å†…å®¹</span></span><br><span class="line"><span class="comment">        aside	ç›¸å…³å†…å®¹æˆ–åº”ç”¨</span></span><br><span class="line"><span class="comment">        nav	å¯¼èˆªç±»è¾…åŠ©å†…å®¹ </span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">header</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>ç½‘é¡µå¤´éƒ¨<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">section</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>ç‹¬ç«‹åŒºåŸŸ<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">footer</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>ç½‘é¡µè„šéƒ¨<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="9-å†…è”æ¡†æ¶"><a href="#9-å†…è”æ¡†æ¶" class="headerlink" title="9.å†…è”æ¡†æ¶"></a>9.å†…è”æ¡†æ¶</h1><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>å†…è”æ¡†æ¶<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">&quot;https://www.baidu.com&quot;</span> <span class="attr">frameborder</span>=<span class="string">&quot;0&quot;</span> <span class="attr">width</span>=<span class="string">&quot;800&quot;</span> <span class="attr">height</span>=<span class="string">&quot;600&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- bilibiliè§†é¢‘åˆ†äº« --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">&quot;//player.bilibili.com/player.html?aid=885854372&amp;bvid=BV19K4y1V7QJ&amp;cid=270583162&amp;page=1&quot;</span> <span class="attr">scrolling</span>=<span class="string">&quot;no&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">border</span>=<span class="string">&quot;0&quot;</span> <span class="attr">frameborder</span>=<span class="string">&quot;no&quot;</span> <span class="attr">framespacing</span>=<span class="string">&quot;0&quot;</span> <span class="attr">allowfullscreen</span>=<span class="string">&quot;true&quot;</span> <span class="attr">width</span>=<span class="string">&quot;800&quot;</span> <span class="attr">height</span>=<span class="string">&quot;600&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">&quot;//player.bilibili.com/player.html?aid=71816014&amp;bvid=BV11E411k76T&amp;cid=124600873&amp;page=1&quot;</span> <span class="attr">scrolling</span>=<span class="string">&quot;no&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">border</span>=<span class="string">&quot;0&quot;</span> <span class="attr">frameborder</span>=<span class="string">&quot;no&quot;</span> <span class="attr">framespacing</span>=<span class="string">&quot;0&quot;</span> <span class="attr">allowfullscreen</span>=<span class="string">&quot;true&quot;</span> <span class="attr">width</span>=<span class="string">&quot;800&quot;</span> <span class="attr">height</span>=<span class="string">&quot;600&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è‡ªå®šä¹‰è·³è½¬ åœ¨name=helloçš„iframeæ‰“å¼€åšå®¢å›­ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">&quot;&quot;</span> <span class="attr">frameborder</span>=<span class="string">&quot;0&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hello&quot;</span> <span class="attr">width</span>=<span class="string">&quot;500&quot;</span> <span class="attr">height</span>=<span class="string">&quot;1000&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;https://www.cnblogs.com/totoroblog&quot;</span> <span class="attr">target</span>=<span class="string">&quot;hello&quot;</span>&gt;</span>ç‚¹å‡»è¿›å…¥åšå®¢å›­<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="10-å­¦ä¹ è¡¨å•"><a href="#10-å­¦ä¹ è¡¨å•" class="headerlink" title="10.å­¦ä¹ è¡¨å•"></a>10.å­¦ä¹ è¡¨å•</h1><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>å­¦ä¹ è¡¨å•<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--è¡¨å•form</span></span><br><span class="line"><span class="comment">        actionï¼šè¡¨å•æäº¤çš„åŠ¨ä½œï¼Œå¯ä»¥æ˜¯äº¤ç»™ä¸€ä¸ªç½‘å€ï¼Œä¹Ÿå¯ä»¥æ˜¯äº¤ç»™ä¸€ä¸ªè¯·æ±‚å¤„ç†åœ°å€</span></span><br><span class="line"><span class="comment">        methodï¼špost getè¯·æ±‚æ–¹å¼</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;1.SEOä¸æ•´ä½“ç»“æ„.html&quot;</span> <span class="attr">method</span>=<span class="string">&quot;GET&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ–‡æœ¬è¾“å…¥æ¡†ï¼šinput type=&quot;text&quot;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>ç”¨æˆ·å:</span><br><span class="line">            <span class="comment">&lt;!-- placehoder	è¾“å…¥æ¡†å†…çš„æç¤ºä¿¡æ¯ --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥ç”¨æˆ·å&quot;</span> <span class="attr">maxlength</span>=<span class="string">&quot;10&quot;</span> <span class="attr">size</span>=<span class="string">&quot;20&quot;</span> <span class="attr">id</span>=<span class="string">&quot;mark&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>å¯†ç :</span><br><span class="line">            <span class="comment">&lt;!-- required	ä¸èƒ½ä¸ºç©º --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥å¯†ç &quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;reset&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--    radioå•é€‰æ¡†æ ‡ç­¾ valueå³å•é€‰æ¡†çš„å€¼ï¼Œåœ¨æäº¤æ—¶å¯¹åº”value</span></span><br><span class="line"><span class="comment">            nameï¼šå•é€‰æ¡†ç»„åï¼Œåœ¨åŒä¸€ä¸ªç»„å†…çš„radioæ ‡ç­¾åŒæ—¶åªèƒ½é€‰ä¸­ä¸€ä¸ªï¼Œnameå€¼åœ¨æäº¤æ—¶å¯¹åº”key</span></span><br><span class="line"><span class="comment">            checked:é»˜è®¤è¢«é€‰ä¸­</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>æ€§åˆ«:</span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;boy&quot;</span> <span class="attr">checked</span> &gt;</span>ç”·</span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;girl&quot;</span>&gt;</span>å¥³</span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>çˆ±å¥½:</span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;basketball&quot;</span>&gt;</span>ç¯®çƒ</span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;dance&quot;</span>&gt;</span>è·³èˆ</span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;singe&quot;</span>&gt;</span>å”±æ­Œ</span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>æ–‡å­—æŒ‰é’®ä¸å›¾ç‰‡æŒ‰é’®:</span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">name</span>=<span class="string">&quot;btn1&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æ–‡å­—æŒ‰é’®&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;image&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./src/img/baidu.png&quot;</span> <span class="attr">width</span>=<span class="string">&quot;200&quot;</span> <span class="attr">height</span>=<span class="string">&quot;100&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>å›½å®¶é€‰æ‹©:</span><br><span class="line">            <span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&quot;location&quot;</span> <span class="attr">id</span>=<span class="string">&quot;locat&quot;</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!--ä¸‹æ‹‰æ¡†ï¼šselected:é»˜è®¤é€‰é¡¹--&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;china&quot;</span> <span class="attr">selected</span>&gt;</span>ä¸­å›½<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;USA&quot;</span>&gt;</span>ç¾å›½<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;UK&quot;</span>&gt;</span>è‹±å›½<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>æ–‡æœ¬åŸŸ:</span><br><span class="line">            <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">name</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;text0&quot;</span> <span class="attr">cols</span>=<span class="string">&quot;30&quot;</span> <span class="attr">rows</span>=<span class="string">&quot;10&quot;</span>&gt;</span>æ–‡æœ¬å†…å®¹<span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>æ–‡ä»¶åŸŸ:</span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;files&quot;</span> <span class="attr">id</span>=<span class="string">&quot;f1&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">name</span>=<span class="string">&quot;upload&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ä¸Šä¼ &quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--é‚®ä»¶ï¼šä¼šç®€å•éªŒè¯æ˜¯å¦æ˜¯é‚®ç®±åœ°å€</span></span><br><span class="line"><span class="comment">            urlï¼šä¼šç®€å•éªŒè¯æ˜¯å¦æ˜¯ç½‘ç»œåœ°å€</span></span><br><span class="line"><span class="comment">            numberï¼šæ•°å­—éªŒè¯</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>é‚®ç®±:</span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>ç½‘å€:</span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;url&quot;</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ•°å­—éªŒè¯</span></span><br><span class="line"><span class="comment">           maxæœ€å¤§æ•°é‡</span></span><br><span class="line"><span class="comment">           min æœ€å°æ•°é‡</span></span><br><span class="line"><span class="comment">           step æ¯æ¬¡ç‚¹å‡»å¢åŠ æˆ–å‡å°‘çš„æ•°é‡--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>å•†å“æ•°é‡:</span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span> <span class="attr">name</span>=<span class="string">&quot;num&quot;</span> <span class="attr">max</span>=<span class="string">&quot;100&quot;</span> <span class="attr">min</span>=<span class="string">&quot;1&quot;</span> <span class="attr">step</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>éŸ³é‡:</span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;range&quot;</span> <span class="attr">name</span>=<span class="string">&quot;voice&quot;</span> <span class="attr">min</span>=<span class="string">&quot;0&quot;</span> <span class="attr">max</span>=<span class="string">&quot;100&quot;</span> <span class="attr">step</span>=<span class="string">&quot;2&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>æœç´¢:</span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;search&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>å¢å¼ºé¼ æ ‡å¯ç”¨æ€§(ç‚¹å‡»è·³è½¬):</span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;mark&quot;</span>&gt;</span>ç‚¹æˆ‘è¯•è¯•<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;reset&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ä¸€äº›å…¶ä»–å±æ€§</span></span><br><span class="line"><span class="comment">            readonly	åªè¯»ï¼Œä¸å¯æ›´æ”¹</span></span><br><span class="line"><span class="comment">            disable	ç¦ç”¨</span></span><br><span class="line"><span class="comment">            hidden	éšè—ï¼Œè™½ç„¶ä¸å¯è§ä½†æ˜¯ä¼šæäº¤</span></span><br><span class="line"><span class="comment">            id	æ ‡è¯†ç¬¦ï¼Œå¯ä»¥é…åˆlabelçš„forå±æ€§å¢åŠ é¼ æ ‡çš„å¯ç”¨æ€§</span></span><br><span class="line"><span class="comment">            patten	æ­£åˆ™è¡¨è¾¾å¼éªŒè¯</span></span><br><span class="line"><span class="comment">         --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id><a href="#" class="headerlink" title></a></h1>]]></content>
      <categories>
        <category>å‰ç«¯</category>
      </categories>
      <tags>
        <tag>å‰ç«¯</tag>
        <tag>html</tag>
      </tags>
  </entry>
  <entry>
    <title>mysql</title>
    <url>/2023/11/05/mysql/</url>
    <content><![CDATA[<img src="/2023/11/05/mysql/log.png" class title="MySQL">

<span id="more"></span>

<h3 id="1-æ“ä½œæ–‡ä»¶å¤¹ï¼ˆåº“ï¼‰"><a href="#1-æ“ä½œæ–‡ä»¶å¤¹ï¼ˆåº“ï¼‰" class="headerlink" title="1.æ“ä½œæ–‡ä»¶å¤¹ï¼ˆåº“ï¼‰"></a>1.æ“ä½œæ–‡ä»¶å¤¹ï¼ˆåº“ï¼‰</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">åˆ‡æ¢æ–‡ä»¶å¤¹ï¼šuse db1;</span><br><span class="line"></span><br><span class="line">æŸ¥çœ‹å½“å‰æ‰€åœ¨çš„æ–‡ä»¶å¤¹ï¼š<span class="keyword">select</span> database();</span><br></pre></td></tr></table></figure>

<h4 id="å¢"><a href="#å¢" class="headerlink" title="å¢"></a>å¢</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> database db1 charset utf8;</span><br></pre></td></tr></table></figure>

<h4 id="æŸ¥"><a href="#æŸ¥" class="headerlink" title="æŸ¥"></a>æŸ¥</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> database db1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">show</span>  database;</span><br></pre></td></tr></table></figure>

<h4 id="æ”¹"><a href="#æ”¹" class="headerlink" title="æ”¹"></a>æ”¹</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alter</span> database db1 charset gbk;</span><br></pre></td></tr></table></figure>

<h4 id="åˆ "><a href="#åˆ " class="headerlink" title="åˆ "></a>åˆ </h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">drop</span> database db1;</span><br></pre></td></tr></table></figure>

<h3 id="2-æ“ä½œæ–‡ä»¶ï¼ˆè¡¨ï¼‰"><a href="#2-æ“ä½œæ–‡ä»¶ï¼ˆè¡¨ï¼‰" class="headerlink" title="2.æ“ä½œæ–‡ä»¶ï¼ˆè¡¨ï¼‰"></a>2.æ“ä½œæ–‡ä»¶ï¼ˆè¡¨ï¼‰</h3><h4 id="å¢-1"><a href="#å¢-1" class="headerlink" title="å¢"></a>å¢</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t1(id <span class="type">int</span> ,name <span class="type">char</span>);</span><br></pre></td></tr></table></figure>

<h4 id="æŸ¥-1"><a href="#æŸ¥-1" class="headerlink" title="æŸ¥"></a>æŸ¥</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">table</span> t1;<span class="operator">/</span><span class="operator">/</span>æŸ¥çœ‹ä¸€ä¸ªè¡¨çš„è¯¦ç»†ä¿¡æ¯</span><br><span class="line"></span><br><span class="line"><span class="keyword">show</span> tables;</span><br><span class="line"></span><br><span class="line"><span class="keyword">desc</span> t1;<span class="operator">/</span><span class="operator">/</span>æŸ¥çœ‹è¡¨ç»“æ„</span><br></pre></td></tr></table></figure>

<h4 id="æ”¹-1"><a href="#æ”¹-1" class="headerlink" title="æ”¹"></a>æ”¹</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">ä¿®æ”¹å­—æ®µ</span><br><span class="line"></span><br><span class="line">  <span class="keyword">alter</span> <span class="keyword">table</span> t1 modify name <span class="type">char</span>(<span class="number">6</span>)    <span class="operator">/</span><span class="operator">/</span>ä¿®æ”¹å­—æ®µæ•°æ®ç±»å‹</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">alter</span> <span class="keyword">table</span> t1 change name NAME <span class="type">char</span>(<span class="number">7</span>);<span class="operator">/</span><span class="operator">/</span>ä¿®æ”¹å­—æ®µå</span><br><span class="line"> </span><br><span class="line">ä¿®æ”¹è¡¨å</span><br><span class="line"></span><br><span class="line">  <span class="keyword">alter</span> <span class="keyword">table</span> t1 rename T1;  <span class="operator">/</span><span class="operator">/</span>ä¿®æ”¹è¡¨å</span><br><span class="line">  </span><br><span class="line">å¢æ·»å­—æ®µ</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">alter</span>  <span class="keyword">table</span> t1 addd age  <span class="type">int</span>,<span class="keyword">add</span> sex <span class="type">char</span>(<span class="number">1</span>);</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">alter</span> <span class="keyword">table</span> t1 <span class="keyword">add</span> age <span class="type">int</span><span class="operator">*</span><span class="keyword">first</span><span class="operator">*</span>; <span class="operator">/</span><span class="operator">/</span>æ·»åŠ åˆ°é‚£ä¸ªä½ç½®</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">alter</span> <span class="keyword">table</span> t1 <span class="keyword">add</span> age <span class="type">int</span> after name; <span class="operator">/</span><span class="operator">/</span>æ–°å­—æ®µæ·»åŠ åˆ°é‚£ä¸ªå­—æ®µå</span><br><span class="line">   </span><br><span class="line"> åˆ é™¤å­—æ®µ</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">alter</span> <span class="keyword">table</span> t1 <span class="keyword">drop</span> name;</span><br><span class="line">   </span><br><span class="line">  </span><br></pre></td></tr></table></figure>

<h4 id="åˆ -1"><a href="#åˆ -1" class="headerlink" title="åˆ "></a>åˆ </h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> t1;</span><br></pre></td></tr></table></figure>

<h3 id="3-æ“ä½œæ–‡ä»¶å†…å®¹ï¼ˆè®°å½•ï¼‰"><a href="#3-æ“ä½œæ–‡ä»¶å†…å®¹ï¼ˆè®°å½•ï¼‰" class="headerlink" title="3.æ“ä½œæ–‡ä»¶å†…å®¹ï¼ˆè®°å½•ï¼‰"></a>3.æ“ä½œæ–‡ä»¶å†…å®¹ï¼ˆè®°å½•ï¼‰</h3><h4 id="å¢-2"><a href="#å¢-2" class="headerlink" title="å¢"></a>å¢</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">æŒ‡å®šå­—æ®µã€ä¸æŒ‡å®šå­—æ®µæ’å…¥å•æ¡ã€å¤šæ¡æ•°æ®</span><br><span class="line"></span><br><span class="line">	<span class="keyword">insert</span> <span class="keyword">into</span> t1(id,name) <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;egon1&#x27;</span>),(<span class="number">2</span>,<span class="string">&#x27;egon2&#x27;</span>),(<span class="number">3</span>,<span class="string">&#x27;egon3&#x27;</span>);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">insert</span> <span class="keyword">into</span> t1 <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;egon1&#x27;</span>),(<span class="number">2</span>,<span class="string">&#x27;egon2&#x27;</span>),(<span class="number">3</span>,<span class="string">&#x27;egon3&#x27;</span>);</span><br><span class="line"></span><br><span class="line">æ’å…¥æŸ¥è¯¢çš„ç»“æœ</span><br><span class="line"></span><br><span class="line">	<span class="keyword">insert</span> <span class="keyword">into</span> è¡¨åï¼ˆå­—æ®µ<span class="number">1</span>ï¼Œå­—æ®µ<span class="number">2.</span>..å­—æ®µnï¼‰ <span class="keyword">select</span> (å­—æ®µ<span class="number">1</span>ï¼Œå­—æ®µ<span class="number">2.</span>..å­—æ®µn) <span class="keyword">from</span>  è¡¨<span class="number">2</span> <span class="keyword">where</span>  ...;</span><br><span class="line"></span><br><span class="line">å¤åˆ¶è¡¨</span><br><span class="line"></span><br><span class="line">	<span class="keyword">create</span> <span class="keyword">table</span> t1 <span class="keyword">select</span> host,<span class="keyword">user</span> <span class="keyword">from</span> mysql.user;  <span class="operator">/</span><span class="operator">/</span>å°†æŸ¥å‡ºçš„è¡¨æ•°æ®å’Œè¡¨ç»“æ„ç»™æ–°å»ºçš„è¡¨æ ¼</span><br><span class="line"></span><br><span class="line">	<span class="keyword">create</span> <span class="keyword">table</span> t2 <span class="keyword">select</span> host,<span class="keyword">user</span> <span class="keyword">from</span> mysql.user <span class="keyword">where</span> <span class="number">1</span><span class="operator">&gt;</span><span class="number">5</span>;  <span class="operator">/</span><span class="operator">/</span> å°†æŸ¥å‡ºçš„è¡¨çš„ç»“æ„ç»™æ–°çš„è¡¨æ ¼</span><br><span class="line"></span><br><span class="line">	<span class="keyword">create</span> <span class="keyword">table</span> t3 <span class="keyword">like</span> mysql.user;  <span class="operator">/</span><span class="operator">/</span>å°†è¡¨çš„ç»“æ„ç»™æ–°çš„è¡¨æ ¼  ï¼ˆæˆ‘æœªå®ç°ï¼‰</span><br></pre></td></tr></table></figure>

<h4 id="æŸ¥-2"><a href="#æŸ¥-2" class="headerlink" title="æŸ¥"></a>æŸ¥</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">å•è¡¨æŸ¥è¯¢è¯­æ³•</span><br><span class="line"></span><br><span class="line">	<span class="keyword">select</span>  ï¼ˆ<span class="keyword">distinct</span>ï¼‰å­—æ®µ<span class="number">1</span>ï¼Œå­—æ®µ<span class="number">2</span>ï¼Œå­—æ®µ<span class="number">3</span> <span class="keyword">from</span> åº“.è¡¨  <span class="keyword">where</span> æ¡ä»¶ <span class="keyword">group</span> <span class="keyword">by</span> åˆ†ç»„æ¡ä»¶ <span class="keyword">having</span> è¿‡æ»¤ <span class="keyword">order</span> <span class="keyword">by</span> æ’åºå­—æ®µ limit nï¼›</span><br><span class="line"></span><br><span class="line">	<span class="keyword">select</span> id,name <span class="keyword">from</span> db1.t1;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> db1.t1;</span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span><span class="keyword">distinct</span>  å»é™¤æŸ¥è¯¢ç»“æœçš„é‡å¤ï¼Œå¦‚æŸ¥è¯¢å‘˜å·¥çš„éƒ¨é—¨å­—æ®µï¼Œå¯èƒ½ä¸€ä¸ªéƒ¨é—¨é‡å¤æ˜¾ç¤ºï¼Œç”¨<span class="keyword">distinct</span>ï¼Œè®©å…¶å•ä¸€æ˜¾ç¤ºã€‚</span><br></pre></td></tr></table></figure>

<img src="/2023/11/05/mysql/1646613302156-5c8a2f25-202a-42f7-acf6-7afd9ecdfeec.png" class title="img">

<img src="/2023/11/05/mysql/1646613030787-90e3599d-e844-4337-990d-79f81276d3a0.png" class title="img">

<img src="/2023/11/05/mysql/1646613315666-96c8465e-6866-4873-935e-de14585141e2.png" class title="img">

<h4 id="æ”¹-2"><a href="#æ”¹-2" class="headerlink" title="æ”¹"></a>æ”¹</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">update</span> db1.t1 <span class="keyword">set</span> name<span class="operator">=</span><span class="string">&#x27;sb&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">update</span> db1.t1 <span class="keyword">set</span> name<span class="operator">=</span><span class="string">&#x27;bing&#x27;</span> <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">2</span>;</span><br></pre></td></tr></table></figure>

<h4 id="åˆ -2"><a href="#åˆ -2" class="headerlink" title="åˆ "></a>åˆ </h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> t1; <span class="operator">/</span><span class="operator">/</span>åˆ é™¤æ•°æ®ï¼Œä½†æ˜¯è‡ªå¢é•¿çš„å­—æ®µä¸ä¼šæ¢å¤åˆ°åˆå€¼ï¼Œä¸€èˆ¬ä¸<span class="keyword">where</span>è¿ç”¨</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">delete</span> <span class="keyword">from</span> t1 <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">truncate</span> t1;<span class="operator">/</span><span class="operator">/</span>æŠŠæ–‡ä»¶æ‰€æœ‰æ•°æ®æ¸…ç©º</span><br><span class="line">ä»€ä¹ˆæ˜¯å­˜å‚¨å¼•æ“ï¼Ÿ</span><br><span class="line"></span><br><span class="line"><span class="operator">*</span><span class="operator">-</span><span class="operator">&gt;</span>å­˜å‚¨å¼•æ“å°±æ˜¯è¡¨çš„ç±»å‹<span class="operator">*</span></span><br></pre></td></tr></table></figure>

<h3 id="4ã€å­˜å‚¨å¼•æ“ã€æ•°æ®ç±»å‹"><a href="#4ã€å­˜å‚¨å¼•æ“ã€æ•°æ®ç±»å‹" class="headerlink" title="4ã€å­˜å‚¨å¼•æ“ã€æ•°æ®ç±»å‹"></a>4ã€å­˜å‚¨å¼•æ“ã€æ•°æ®ç±»å‹</h3><h4 id="æŸ¥çœ‹MySQLæ”¯æŒçš„å­˜å‚¨å¼•æ“"><a href="#æŸ¥çœ‹MySQLæ”¯æŒçš„å­˜å‚¨å¼•æ“" class="headerlink" title="æŸ¥çœ‹MySQLæ”¯æŒçš„å­˜å‚¨å¼•æ“"></a>æŸ¥çœ‹MySQLæ”¯æŒçš„å­˜å‚¨å¼•æ“</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">show</span> engines;  <span class="operator">/</span><span class="operator">/</span>æŸ¥çœ‹MySQLæ”¯æŒçš„å­˜å‚¨å¼•æ“</span><br></pre></td></tr></table></figure>

<h4 id="æŒ‡å®šè¡¨ç±»å‹-å­˜å‚¨å¼•æ“"><a href="#æŒ‡å®šè¡¨ç±»å‹-å­˜å‚¨å¼•æ“" class="headerlink" title="æŒ‡å®šè¡¨ç±»å‹&#x2F;å­˜å‚¨å¼•æ“"></a>æŒ‡å®šè¡¨ç±»å‹&#x2F;å­˜å‚¨å¼•æ“</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t1(id <span class="type">int</span>)engine<span class="operator">=</span>innodb; <span class="operator">/</span><span class="operator">/</span>æˆ‘ä»¬ç»å¸¸ç”¨çš„</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t2(id <span class="type">int</span>)engine<span class="operator">=</span>memory; <span class="operator">/</span><span class="operator">/</span>æ•°æ®ä¸¢è¿›å»å­˜åœ¨å†…å­˜é‡Œï¼ŒæœåŠ¡å™¨è½¯ä»¶å…³é—­å°±æ¸…ç©ºäº†</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t3(id <span class="type">int</span>)engine<span class="operator">=</span>blackhole; <span class="operator">/</span><span class="operator">/</span>é»‘æ´ æ•°æ®ä¸¢è¿›å»å°±æ²¡æœ‰</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t4(id <span class="type">int</span>)engine<span class="operator">=</span>myisam;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t1 <span class="keyword">values</span>(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t2 <span class="keyword">values</span>(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t3 <span class="keyword">values</span>(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t4 <span class="keyword">values</span>(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æŸ¥è¯¢è¡¨å¤ªä¹±æ—¶ï¼Œåé¢åŠ  \G</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> mysql.user\G;</span><br></pre></td></tr></table></figure>

<h4 id="int"><a href="#int" class="headerlink" title="int"></a>int</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t5(id <span class="type">int</span>(<span class="number">5</span>) unsigned zerofill); <span class="operator">/</span><span class="operator">/</span>åˆ›å»ºä¸€ä¸ªæ˜¾ç¤ºå®½åº¦ä¸º<span class="number">5</span>çš„æ•°æ®ï¼Œä¸è¶³äº”ä½çš„ç”¨<span class="number">0</span>è¡¥ä½</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t5(id <span class="type">int</span> unsigned); <span class="operator">/</span><span class="operator">/</span>æ²¡æœ‰æŒ‡å®šçš„è¯ï¼Œé»˜è®¤ä¸º<span class="number">10</span>ä½</span><br></pre></td></tr></table></figure>

<h4 id="float"><a href="#float" class="headerlink" title="float"></a>float</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="type">float</span>(M,D); Mæ˜¯ä¸€å…±çš„ä½æ•°ï¼ŒDå°æ•°ç‚¹å ä½æ•°</span><br></pre></td></tr></table></figure>

<h4 id="è¡¨ï¼ˆæ–‡ä»¶ï¼‰ç›¸å…³æ“ä½œ"><a href="#è¡¨ï¼ˆæ–‡ä»¶ï¼‰ç›¸å…³æ“ä½œ" class="headerlink" title="è¡¨ï¼ˆæ–‡ä»¶ï¼‰ç›¸å…³æ“ä½œ"></a>è¡¨ï¼ˆæ–‡ä»¶ï¼‰ç›¸å…³æ“ä½œ</h4><img src="/2023/11/05/mysql/1646613856961-49289c72-5658-49cb-9877-b928cd8b2de9.png" class title="img">



<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">now() <span class="comment">-----------------------------------å½“å‰æ—¶é—´</span></span><br></pre></td></tr></table></figure>

<img src="/2023/11/05/mysql/1646613890588-814ca224-de5e-40b3-8a25-d201b2e32f8a.png" class title="img">

<img src="/2023/11/05/mysql/1646613902229-85412f16-b5f7-49a6-897f-b62205771e81.png" class title="img">

<img src="/2023/11/05/mysql/1646613915881-4483b517-46b9-40d3-9a20-6d90f39ee8aa.png" class title="img">

<p>è™½ç„¶char åœ¨å­˜ å’Œ å–çš„æ—¶å€™é•¿åº¦ï¼ˆæ•°å€¼ï¼‰å¯ä»¥å˜ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥è®©ä»–ç°å‡ºåŸå½¢ã€‚<br>è®¾ç½®ï¼šSET sqlmode &#x3D; â€˜PADCHARTOFULL_LENGTHâ€™;</p>
<img src="/2023/11/05/mysql/1646613945361-3594b1ba-85d7-4adc-94af-bf9a5245c22d.png" class title="img">

<h4 id="æšä¸¾å’Œé›†åˆç±»å‹"><a href="#æšä¸¾å’Œé›†åˆç±»å‹" class="headerlink" title="æšä¸¾å’Œé›†åˆç±»å‹"></a>æšä¸¾å’Œé›†åˆç±»å‹</h4><img src="/2023/11/05/mysql/1646613960825-ee7cd99a-adfb-4bbb-9b70-649b86f4ce38.png" class title="img"><img src="/2023/11/05/mysql/1646613968163-c3feda3d-3d59-436e-86d5-257c4533230c.png" class title="img">



<h3 id="5ã€çº¦æŸæ¡ä»¶"><a href="#5ã€çº¦æŸæ¡ä»¶" class="headerlink" title="5ã€çº¦æŸæ¡ä»¶"></a>5ã€çº¦æŸæ¡ä»¶</h3><h4 id="çº¦æŸæ¡ä»¶not-null-å’Œ-default"><a href="#çº¦æŸæ¡ä»¶not-null-å’Œ-default" class="headerlink" title="çº¦æŸæ¡ä»¶not null å’Œ default"></a>çº¦æŸæ¡ä»¶not null å’Œ default</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t4(id <span class="type">int</span> unsigned zerofill);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t5(id <span class="type">int</span>,name <span class="type">char</span>(<span class="number">6</span>),sex enum(<span class="string">&#x27;male&#x27;</span>,<span class="string">&#x27;female&#x27;</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="string">&#x27;male&#x27;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t5( id,name) <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;bing&#x27;</span>);</span><br><span class="line"></span><br><span class="line">ä»¥ä¸‹è¿™ä¸ªé”™è¯¯å¯èƒ½æ˜¯æŸä¸ªå­—æ®µæœ‰ç©ºæ ¼ï¼šERROR <span class="number">1054</span> (<span class="number">42</span>S22): <span class="literal">Unknown</span> <span class="keyword">column</span> <span class="string">&#x27;male&#x27;</span> <span class="keyword">in</span> <span class="string">&#x27;field list&#x27;</span></span><br></pre></td></tr></table></figure>

<h4 id="çº¦æŸæ¡ä»¶-unique-key"><a href="#çº¦æŸæ¡ä»¶-unique-key" class="headerlink" title="çº¦æŸæ¡ä»¶ unique key"></a>çº¦æŸæ¡ä»¶ <a href="https://so.csdn.net/so/search?q=unique&spm=1001.2101.3001.7020">unique</a> key</h4><h5 id="å•åˆ—å”¯ä¸€"><a href="#å•åˆ—å”¯ä¸€" class="headerlink" title="å•åˆ—å”¯ä¸€"></a>å•åˆ—å”¯ä¸€</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">æ–¹å¼<span class="number">1</span></span><br><span class="line">	<span class="keyword">create</span> <span class="keyword">table</span> department(id <span class="type">int</span>,name <span class="type">char</span>(<span class="number">10</span>) <span class="keyword">unique</span>);</span><br><span class="line">	</span><br><span class="line">æ–¹å¼<span class="number">2</span></span><br><span class="line">	<span class="keyword">create</span> <span class="keyword">table</span> department(id <span class="type">int</span>,name <span class="type">char</span>(<span class="number">10</span>) ,<span class="keyword">unique</span>(name));</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">insert</span> <span class="keyword">into</span> department <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;IT&#x27;</span>),(<span class="number">2</span>,<span class="string">&#x27;OP&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h5 id="è”åˆå”¯ä¸€"><a href="#è”åˆå”¯ä¸€" class="headerlink" title="è”åˆå”¯ä¸€"></a>è”åˆå”¯ä¸€</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> services(id <span class="type">int</span> <span class="keyword">unique</span>,ip <span class="type">char</span>(<span class="number">15</span>),port <span class="type">int</span>,<span class="keyword">unique</span>(ip,port) );</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> services <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;192.168.11.10&#x27;</span>,<span class="number">80</span>),(<span class="number">2</span>,<span class="string">&#x27;192.168.11.10&#x27;</span>,<span class="number">81</span>),(<span class="number">3</span>,<span class="string">&#x27;192.168.11.13&#x27;</span>,<span class="number">80</span>);</span><br></pre></td></tr></table></figure>

<h4 id="çº¦æŸæ¡ä»¶primary-key-ï¼šï¼ˆnot-null-ã€uniqueï¼‰-ä¸èƒ½ä¸ºç©ºä¸”å”¯ä¸€"><a href="#çº¦æŸæ¡ä»¶primary-key-ï¼šï¼ˆnot-null-ã€uniqueï¼‰-ä¸èƒ½ä¸ºç©ºä¸”å”¯ä¸€" class="headerlink" title="çº¦æŸæ¡ä»¶primary key ï¼šï¼ˆnot null ã€uniqueï¼‰ ä¸èƒ½ä¸ºç©ºä¸”å”¯ä¸€"></a>çº¦æŸæ¡ä»¶primary key ï¼šï¼ˆnot null ã€uniqueï¼‰ ä¸èƒ½ä¸ºç©ºä¸”å”¯ä¸€</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">å­˜å‚¨å¼•æ“ï¼ˆinnodbï¼‰:å¯¹äºinnodbå­˜å‚¨å¼•æ“æ¥è¯´ï¼Œä¸€å¼ è¡¨å†…å¿…é¡»è¦æœ‰ä¸€ä¸ªä¸»é”®</span><br></pre></td></tr></table></figure>

<h5 id="å•åˆ—ä¸»é”®"><a href="#å•åˆ—ä¸»é”®" class="headerlink" title="å•åˆ—ä¸»é”®"></a>å•åˆ—ä¸»é”®</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t6(id <span class="type">int</span> <span class="keyword">primary</span> key,name <span class="type">char</span>(<span class="number">16</span>));</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t6 <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;bing&#x27;</span>),(<span class="number">2</span>,<span class="string">&#x27;chuan&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t6(name) <span class="keyword">values</span>(<span class="string">&#x27;xiu&#x27;</span>);<span class="operator">/</span><span class="operator">/</span>è€å¸ˆè®²ä¸ºç¬¬ä¸€æ¬¡é»˜è®¤ä¸º<span class="number">0</span>ï¼Œå…¶ä»–ä¸èƒ½å†æ’å…¥ã€‚</span><br><span class="line">#ERROR <span class="number">1364</span> (HY000): Field <span class="string">&#x27;id&#x27;</span> doesn<span class="string">&#x27;t have a default value</span></span><br></pre></td></tr></table></figure>

<h5 id="å¤åˆä¸»é”®"><a href="#å¤åˆä¸»é”®" class="headerlink" title="å¤åˆä¸»é”®"></a>å¤åˆä¸»é”®</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t7(ip <span class="type">char</span>(<span class="number">15</span>),port <span class="type">int</span>,<span class="keyword">primary</span> key(ip,port));</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t7 <span class="keyword">values</span>(<span class="string">&#x27;1.1.1.1&#x27;</span>,<span class="number">80</span>),(<span class="string">&#x27;1.1.1.1&#x27;</span>,<span class="number">81</span>);</span><br></pre></td></tr></table></figure>

<h4 id="çº¦æŸæ¡ä»¶-auto-increment"><a href="#çº¦æŸæ¡ä»¶-auto-increment" class="headerlink" title="çº¦æŸæ¡ä»¶ auto_increment"></a>çº¦æŸæ¡ä»¶ auto_increment</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t8(id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,name <span class="type">char</span>(<span class="number">15</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t8(name) <span class="keyword">values</span>(<span class="string">&#x27;nihao&#x27;</span>),(<span class="string">&#x27;buha&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="çº¦æŸæ¡ä»¶-foreign-key-å»ºç«‹è¡¨ä¹‹é—´çš„å…³ç³»"><a href="#çº¦æŸæ¡ä»¶-foreign-key-å»ºç«‹è¡¨ä¹‹é—´çš„å…³ç³»" class="headerlink" title="çº¦æŸæ¡ä»¶ foreign key:å»ºç«‹è¡¨ä¹‹é—´çš„å…³ç³»"></a>çº¦æŸæ¡ä»¶ foreign key:å»ºç«‹è¡¨ä¹‹é—´çš„å…³ç³»</h4><h5 id="1-å»ºç«‹è¡¨å…³ç³»"><a href="#1-å»ºç«‹è¡¨å…³ç³»" class="headerlink" title="1.å»ºç«‹è¡¨å…³ç³»"></a>1.å»ºç«‹è¡¨å…³ç³»</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#å…ˆå»ºè¢«å…³è”çš„è¡¨ï¼Œå¹¶ä¸”ä¿è¯è¢«å…³è”çš„å­—æ®µå”¯ä¸€</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> dep(id <span class="type">int</span> <span class="keyword">primary</span> key,name <span class="type">char</span>(<span class="number">10</span>),comment <span class="type">char</span>(<span class="number">20</span>));</span><br><span class="line"></span><br><span class="line">#åˆ›å»ºè¦å…³è”çš„è¡¨</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp(id <span class="type">int</span> <span class="keyword">primary</span> key,name <span class="type">char</span>(<span class="number">15</span>),sex enum(<span class="string">&#x27;male&#x27;</span>,<span class="string">&#x27;female&#x27;</span>),depid <span class="type">int</span>,<span class="keyword">foreign</span> key(depid) <span class="keyword">references</span> dep(id) <span class="keyword">on</span> <span class="keyword">delete</span> cascade <span class="keyword">on</span> <span class="keyword">update</span> cascade);<span class="operator">/</span><span class="operator">/</span><span class="keyword">on</span> <span class="keyword">delete</span> cascade åˆ é™¤åŒæ­¥<span class="comment">---ã€‹åˆ é™¤è¢«å…³è”çš„è¡¨ä¸­ç›¸å…³æ•°æ®ï¼Œå…³è”çš„è¡¨ç›¸åº”æ•°æ®ä¹Ÿä¼šåŒæ­¥åˆ é™¤ on update cascade æ›´æ–°åŒæ­¥---ã€‹æ›´æ–°è¢«å…³è”çš„è¡¨ä¸­ç›¸å…³æ•°æ®ï¼Œå…³è”çš„è¡¨ç›¸åº”æ•°æ®ä¹Ÿä¼šåŒæ­¥æ›´æ–°</span></span><br></pre></td></tr></table></figure>

<h5 id="2-æ’å…¥æ•°æ®"><a href="#2-æ’å…¥æ•°æ®" class="headerlink" title="2.æ’å…¥æ•°æ®"></a>2.æ’å…¥æ•°æ®</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#å…ˆå¾€è¢«å…³è”è¡¨æ’å…¥æ•°æ®</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> dep <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;IT&#x27;</span>,<span class="string">&#x27;æŠ€æœ¯éƒ¨é—¨&#x27;</span>),(<span class="number">2</span>,<span class="string">&#x27;é”€å”®&#x27;</span>,<span class="string">&#x27;é”€å”®éƒ¨é—¨&#x27;</span>);</span><br><span class="line"></span><br><span class="line">#å†å¾€å…³è”çš„è¡¨ä¸­æ’å…¥æ•°æ®</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;bing&#x27;</span>,<span class="string">&#x27;male&#x27;</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">#æ“ä½œè¢«å…³è”çš„è¡¨ åŒæ­¥æ›´æ–° åŒæ­¥åˆ é™¤</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> dep <span class="keyword">where</span> id <span class="operator">=</span><span class="number">1</span>;</span><br><span class="line"><span class="keyword">update</span> dep <span class="keyword">set</span> id<span class="operator">=</span><span class="number">202</span> <span class="keyword">where</span> id <span class="operator">=</span> <span class="number">2</span>;</span><br></pre></td></tr></table></figure>

<h3 id="6ã€è¡¨ä¹‹é—´çš„ä¸‰ç§å…³ç³»ï¼šå¤šå¯¹å¤šã€å¤šå¯¹ä¸€ã€ä¸€å¯¹ä¸€"><a href="#6ã€è¡¨ä¹‹é—´çš„ä¸‰ç§å…³ç³»ï¼šå¤šå¯¹å¤šã€å¤šå¯¹ä¸€ã€ä¸€å¯¹ä¸€" class="headerlink" title="6ã€è¡¨ä¹‹é—´çš„ä¸‰ç§å…³ç³»ï¼šå¤šå¯¹å¤šã€å¤šå¯¹ä¸€ã€ä¸€å¯¹ä¸€"></a>6ã€è¡¨ä¹‹é—´çš„ä¸‰ç§å…³ç³»ï¼šå¤šå¯¹å¤šã€å¤šå¯¹ä¸€ã€ä¸€å¯¹ä¸€</h3><h4 id="å¤šå¯¹ä¸€"><a href="#å¤šå¯¹ä¸€" class="headerlink" title="å¤šå¯¹ä¸€"></a>å¤šå¯¹ä¸€</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="operator">*</span><span class="operator">*</span>å‡ºç‰ˆç¤¾ ä¹¦ï¼ˆpressid <span class="type">int</span>,<span class="keyword">foreign</span> key(pressid) reference press(id)ï¼‰;<span class="operator">*</span><span class="operator">*</span><span class="operator">!</span>[åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https:<span class="operator">/</span><span class="operator">/</span>img<span class="operator">-</span>blog.csdnimg.cn<span class="operator">/</span><span class="number">20200811100644175.</span>png?x<span class="operator">-</span>oss<span class="operator">-</span>process<span class="operator">=</span>image<span class="operator">/</span>watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxMzAxNDI4,size_16,color_FFFFFF,t_70)</span><br></pre></td></tr></table></figure>

<h4 id="å¤šå¯¹å¤š"><a href="#å¤šå¯¹å¤š" class="headerlink" title="å¤šå¯¹å¤š"></a>å¤šå¯¹å¤š</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="operator">*</span><span class="operator">*</span>ä½œè€… ä¹¦<span class="operator">*</span><span class="operator">*</span>	<span class="operator">!</span>[åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https:<span class="operator">/</span><span class="operator">/</span>img<span class="operator">-</span>blog.csdnimg.cn<span class="operator">/</span><span class="number">20200811101017578.</span>png?x<span class="operator">-</span>oss<span class="operator">-</span>process<span class="operator">=</span>image<span class="operator">/</span>watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxMzAxNDI4,size_16,color_FFFFFF,t_70)</span><br><span class="line"><span class="operator">!</span>[åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https:<span class="operator">/</span><span class="operator">/</span>img<span class="operator">-</span>blog.csdnimg.cn<span class="operator">/</span><span class="number">20200811101117188.</span>png?x<span class="operator">-</span>oss<span class="operator">-</span>process<span class="operator">=</span>image<span class="operator">/</span>watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQxMzAxNDI4,size_16,color_FFFFFF,t_70)</span><br></pre></td></tr></table></figure>

<h4 id="ä¸€å¯¹ä¸€"><a href="#ä¸€å¯¹ä¸€" class="headerlink" title="ä¸€å¯¹ä¸€"></a>ä¸€å¯¹ä¸€</h4><img src="/2023/11/05/mysql/1646614626549-228bce41-a230-4de3-8d66-c69851580822.png" class title="img">

<img src="/2023/11/05/mysql/1646614695639-82d69349-2510-4c2b-abc7-056c43cdf98d.png" class title="img">

<img src="/2023/11/05/mysql/1646614705664-1af84336-a16c-4d9b-be01-fcb00ddcd3cd.png" class title="img">

<h3 id="7ã€æ•°æ®ï¼ˆè®°å½•ï¼‰ç›¸å…³æ“ä½œ"><a href="#7ã€æ•°æ®ï¼ˆè®°å½•ï¼‰ç›¸å…³æ“ä½œ" class="headerlink" title="7ã€æ•°æ®ï¼ˆè®°å½•ï¼‰ç›¸å…³æ“ä½œ"></a>7ã€æ•°æ®ï¼ˆè®°å½•ï¼‰ç›¸å…³æ“ä½œ</h3><h4 id="å•è¡¨æŸ¥è¯¢"><a href="#å•è¡¨æŸ¥è¯¢" class="headerlink" title="å•è¡¨æŸ¥è¯¢"></a>å•è¡¨æŸ¥è¯¢</h4><h5 id="where-çº¦æŸæ¡ä»¶"><a href="#where-çº¦æŸæ¡ä»¶" class="headerlink" title="where çº¦æŸæ¡ä»¶"></a>where çº¦æŸæ¡ä»¶</h5><img src="/2023/11/05/mysql/1646614767628-3da2416b-aee2-496e-a377-a604afcb18e2.png" class title="img">

<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span>  <span class="keyword">from</span> employ <span class="keyword">where</span> id <span class="operator">&gt;</span> <span class="number">7</span>;</span><br><span class="line"><span class="keyword">select</span> name,salary <span class="keyword">from</span> employee <span class="keyword">where</span> post <span class="operator">=</span> &quot;teacher&quot; <span class="keyword">and</span> salary <span class="operator">&gt;</span> <span class="number">8000</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> name,salary <span class="keyword">from</span> employee <span class="keyword">where</span> salary <span class="keyword">between</span> <span class="number">20000</span> <span class="keyword">and</span> <span class="number">30000</span>;</span><br><span class="line"><span class="keyword">select</span> name,salary <span class="keyword">from</span> employee <span class="keyword">where</span> salary <span class="keyword">not</span> <span class="keyword">between</span> <span class="number">20000</span> <span class="keyword">and</span> <span class="number">30000</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employ <span class="keyword">where</span> age <span class="operator">=</span> <span class="number">73</span> <span class="keyword">or</span> age <span class="operator">=</span> <span class="number">80</span> <span class="keyword">or</span> age <span class="operator">=</span> <span class="number">66</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employ <span class="keyword">where</span> age <span class="keyword">in</span>(<span class="number">73</span>,<span class="number">80</span>,<span class="number">66</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> name <span class="keyword">like</span> &quot;jin%&quot;; <span class="operator">%</span>ä»£è¡¨åé¢ä»»æ„å­—ç¬¦</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> name <span class="keyword">like</span> &quot;jin__&quot;; _ä»£è¡¨ä»»æ„ä¸€ä¸ªå­—ç¬¦</span><br></pre></td></tr></table></figure>

<h5 id="group-by-åˆ†ç»„"><a href="#group-by-åˆ†ç»„" class="headerlink" title="group by åˆ†ç»„"></a>group by åˆ†ç»„</h5><img src="/2023/11/05/mysql/1646614806032-02144204-b756-4ae2-996a-ce19b0198dc2.png" class title="img">

<p>mysql&gt; set global sqlmode &#x3D; â€œONLYFULLGROUPBYâ€;#è®¾ç½®è¿‡åï¼Œåªèƒ½å–åˆ†ç»„çš„å­—æ®µ<br>åˆ†ç»„è¿‡åï¼Œåªèƒ½å–åˆ†ç»„çš„å­—æ®µï¼Œä»¥åŠæ¯ä¸ªç»„èšåˆçš„ç»“æœ select post from employee group by post;</p>
<p>æ²¡æœ‰group byåˆ™é»˜è®¤æ•´ä½“ç®—ä½œä¸€ç»„ select max(salary) from employee;</p>
<p>èšåˆå‡½æ•°ï¼šmaxã€minã€avgã€sumã€count</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#æ¯ä¸ªèŒä½æœ‰å¤šå°‘ä¸ªå‘˜å·¥</span><br><span class="line"><span class="keyword">select</span> post ,<span class="built_in">count</span>(id) <span class="keyword">as</span> emp_count <span class="keyword">from</span> employee <span class="keyword">group</span> <span class="keyword">by</span> post;</span><br><span class="line"><span class="keyword">select</span> post ,<span class="built_in">max</span>(salary) <span class="keyword">as</span> emp_count <span class="keyword">from</span> employee <span class="keyword">group</span> <span class="keyword">by</span> post;</span><br><span class="line"><span class="keyword">select</span> post ,<span class="built_in">min</span>(salary) <span class="keyword">as</span> emp_count <span class="keyword">from</span> employee <span class="keyword">group</span> <span class="keyword">by</span> post;</span><br><span class="line"><span class="keyword">select</span> post ,ave(salary) <span class="keyword">as</span> emp_count <span class="keyword">from</span> employee <span class="keyword">group</span> <span class="keyword">by</span> post;</span><br><span class="line"><span class="keyword">select</span> post ,<span class="built_in">sum</span>(age) <span class="keyword">as</span> emp_count <span class="keyword">from</span> employee <span class="keyword">group</span> <span class="keyword">by</span> post;</span><br><span class="line"> </span><br><span class="line">#group_concat</span><br><span class="line"><span class="keyword">select</span> post,group_concat(name) <span class="keyword">from</span> employee <span class="keyword">group</span> <span class="keyword">by</span> post;</span><br></pre></td></tr></table></figure>

<img src="/2023/11/05/mysql/1646614866729-13cbd773-be55-462f-bbde-754cf93770bc.png" class title="img">

<h5 id="HAVINGè¿‡æ»¤"><a href="#HAVINGè¿‡æ»¤" class="headerlink" title="HAVINGè¿‡æ»¤"></a>HAVINGè¿‡æ»¤</h5><img src="/2023/11/05/mysql/1646614886515-a0d9b27b-d794-4afd-ba50-5a7715893c74.png" class title="img"><img src="/2023/11/05/mysql/1646614896847-544ebd26-1b47-418b-8c61-b1ce03a9677b.png" class title="img">

<h5 id="order-byæ’åº"><a href="#order-byæ’åº" class="headerlink" title="order byæ’åº"></a>order byæ’åº</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">order</span> <span class="keyword">by</span> age <span class="keyword">asc</span>;#å‡åº</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">order</span> <span class="keyword">by</span> age <span class="keyword">desc</span>;#é™åº</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">order</span> <span class="keyword">by</span> age <span class="keyword">asc</span>,id <span class="keyword">desc</span>;#å…ˆæŒ‰ç…§ageå‡åºæ’ï¼Œå¦‚æœageç›¸åŒåˆ™æŒ‰ç…§idé™åºæ’</span><br></pre></td></tr></table></figure>

<img src="/2023/11/05/mysql/1646614929860-83626158-4e9b-489b-9e00-2f1d31b48138.png" class title="img">

<h5 id="limit"><a href="#limit" class="headerlink" title="limit"></a>limit</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee limit <span class="number">3</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">desc</span> limit <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<img src="/2023/11/05/mysql/1646614980297-d95f183d-46af-42ca-a2ea-f318d44be4db.png" class title="img">

<p>0,5;ä»åˆå§‹ä½ç½®å–5æ¡</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="operator">*</span>è¯­æ³•é¡ºåº<span class="operator">*</span> </span><br><span class="line"><span class="keyword">select</span> ï¼ˆ<span class="keyword">distinct</span>ï¼‰å­—æ®µ<span class="number">1</span>ï¼Œå­—æ®µ<span class="number">2</span>ï¼Œå­—æ®µ<span class="number">3</span> <span class="keyword">from</span> åº“.è¡¨ <span class="keyword">where</span> æ¡ä»¶ <span class="keyword">group</span> <span class="keyword">by</span> åˆ†ç»„æ¡ä»¶ <span class="keyword">having</span> è¿‡æ»¤ <span class="keyword">order</span> <span class="keyword">by</span> æ’åºå­—æ®µ limit nï¼›</span><br><span class="line">		</span><br><span class="line"><span class="operator">*</span>æ‰§è¡Œé¡ºåº<span class="operator">*</span>  </span><br><span class="line"><span class="keyword">from</span>è¡¨<span class="number">1</span>ã€è¡¨<span class="number">2</span><span class="operator">-</span><span class="operator">&gt;</span><span class="keyword">on</span>å…³ç³»<span class="operator">-</span><span class="operator">&gt;</span>ï¼ˆå·¦å³å†…ï¼‰<span class="operator">-</span><span class="operator">&gt;</span><span class="keyword">where</span><span class="operator">-</span><span class="operator">&gt;</span><span class="keyword">group</span> <span class="keyword">by</span><span class="operator">-</span><span class="operator">&gt;</span><span class="keyword">having</span><span class="operator">-</span><span class="operator">&gt;</span><span class="keyword">select</span><span class="operator">-</span><span class="operator">&gt;</span><span class="keyword">distinct</span><span class="operator">-</span><span class="operator">&gt;</span>å­—æ®µ<span class="operator">-</span><span class="operator">&gt;</span><span class="keyword">order</span> <span class="keyword">by</span><span class="operator">-</span><span class="operator">&gt;</span>limit</span><br></pre></td></tr></table></figure>

<h5 id="like"><a href="#like" class="headerlink" title="like"></a>like</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> name <span class="keyword">like</span> &quot;jin%&quot;;</span><br><span class="line">#æ­£åˆ™è¡¨è¾¾å¼</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> name regexp &quot;^jin&quot; ;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">where</span> name regexp &quot;^jin.*(g|n)$&quot; ;#jinå¼€å¤´gã€nç»“å°¾</span><br></pre></td></tr></table></figure>

<h4 id="å¤šè¡¨æ•°æ®æŸ¥è¯¢"><a href="#å¤šè¡¨æ•°æ®æŸ¥è¯¢" class="headerlink" title="å¤šè¡¨æ•°æ®æŸ¥è¯¢"></a>å¤šè¡¨æ•°æ®æŸ¥è¯¢</h4><p>whereè¿è¡¨ ä¸å»ºè®®ç”¨ã€‚æœ‰ä¸‰ç§æ­£è§„çš„è¿è¡¨æ–¹å¼</p>
<img src="/2023/11/05/mysql/1646615063763-402c95db-3b77-40fa-a28b-1d5858d536f3.png" class title="img">

<h4 id="ä¸‰ç§è¿è¡¨æ–¹å¼ï¼šå†…è¿æ¥ã€å·¦è¿æ¥ã€å³è¿æ¥ã€å…¨å¤–è¿æ¥"><a href="#ä¸‰ç§è¿è¡¨æ–¹å¼ï¼šå†…è¿æ¥ã€å·¦è¿æ¥ã€å³è¿æ¥ã€å…¨å¤–è¿æ¥" class="headerlink" title="ä¸‰ç§è¿è¡¨æ–¹å¼ï¼šå†…è¿æ¥ã€å·¦è¿æ¥ã€å³è¿æ¥ã€å…¨å¤–è¿æ¥"></a>ä¸‰ç§è¿è¡¨æ–¹å¼ï¼šå†…è¿æ¥ã€å·¦è¿æ¥ã€å³è¿æ¥ã€å…¨å¤–è¿æ¥</h4><h5 id="å†…è¿æ¥ï¼šåªå–ä¸¤å¼ è¡¨çš„å…¬å…±éƒ¨åˆ†"><a href="#å†…è¿æ¥ï¼šåªå–ä¸¤å¼ è¡¨çš„å…¬å…±éƒ¨åˆ†" class="headerlink" title="å†…è¿æ¥ï¼šåªå–ä¸¤å¼ è¡¨çš„å…¬å…±éƒ¨åˆ†"></a>å†…è¿æ¥ï¼šåªå–ä¸¤å¼ è¡¨çš„å…¬å…±éƒ¨åˆ†</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">è¡¨<span class="number">1</span> <span class="keyword">inner</span> <span class="keyword">join</span> è¡¨<span class="number">2</span> <span class="keyword">on</span> è¡¨<span class="number">1.</span>å­—æ®µ <span class="operator">=</span> è¡¨<span class="number">2.</span>å­—æ®µ</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">inner</span> <span class="keyword">join</span> department <span class="keyword">on</span> employee .dep_id <span class="operator">=</span> department .id;</span><br></pre></td></tr></table></figure>

<h5 id="å·¦è¿æ¥ï¼šåœ¨å†…è¿æ¥çš„åŸºç¡€ä¸Šä¿ç•™å·¦è¡¨"><a href="#å·¦è¿æ¥ï¼šåœ¨å†…è¿æ¥çš„åŸºç¡€ä¸Šä¿ç•™å·¦è¡¨" class="headerlink" title="å·¦è¿æ¥ï¼šåœ¨å†…è¿æ¥çš„åŸºç¡€ä¸Šä¿ç•™å·¦è¡¨"></a>å·¦è¿æ¥ï¼šåœ¨å†…è¿æ¥çš„åŸºç¡€ä¸Šä¿ç•™å·¦è¡¨</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">è¡¨<span class="number">1</span> <span class="keyword">left</span> <span class="keyword">join</span> è¡¨<span class="number">2</span> <span class="keyword">on</span> è¡¨<span class="number">1.</span>å­—æ®µ <span class="operator">=</span> è¡¨<span class="number">2.</span>å­—æ®µ</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">left</span> <span class="keyword">join</span> department <span class="keyword">on</span> employee .dep_id <span class="operator">=</span> department .id;</span><br></pre></td></tr></table></figure>

<h5 id="å³è¿æ¥ï¼šåœ¨å†…è¿æ¥çš„åŸºç¡€ä¸Šä¿ç•™å³è¡¨"><a href="#å³è¿æ¥ï¼šåœ¨å†…è¿æ¥çš„åŸºç¡€ä¸Šä¿ç•™å³è¡¨" class="headerlink" title="å³è¿æ¥ï¼šåœ¨å†…è¿æ¥çš„åŸºç¡€ä¸Šä¿ç•™å³è¡¨"></a>å³è¿æ¥ï¼šåœ¨å†…è¿æ¥çš„åŸºç¡€ä¸Šä¿ç•™å³è¡¨</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">è¡¨<span class="number">1</span> <span class="keyword">right</span> <span class="keyword">join</span> è¡¨<span class="number">2</span> <span class="keyword">on</span> è¡¨<span class="number">1.</span>å­—æ®µ <span class="operator">=</span> è¡¨<span class="number">2.</span>å­—æ®µ</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">right</span> <span class="keyword">join</span> department <span class="keyword">on</span> employee .dep_id <span class="operator">=</span> department .id;</span><br></pre></td></tr></table></figure>

<h5 id="å…¨å¤–è¿æ¥ï¼šåœ¨å†…è¿æ¥çš„åŸºç¡€ä¸Šä¿ç•™å·¦å³ä¸¤è¡¨æ²¡æœ‰å¯¹åº”å…³ç³»çš„è®°å½•"><a href="#å…¨å¤–è¿æ¥ï¼šåœ¨å†…è¿æ¥çš„åŸºç¡€ä¸Šä¿ç•™å·¦å³ä¸¤è¡¨æ²¡æœ‰å¯¹åº”å…³ç³»çš„è®°å½•" class="headerlink" title="å…¨å¤–è¿æ¥ï¼šåœ¨å†…è¿æ¥çš„åŸºç¡€ä¸Šä¿ç•™å·¦å³ä¸¤è¡¨æ²¡æœ‰å¯¹åº”å…³ç³»çš„è®°å½•"></a>å…¨å¤–è¿æ¥ï¼šåœ¨å†…è¿æ¥çš„åŸºç¡€ä¸Šä¿ç•™å·¦å³ä¸¤è¡¨æ²¡æœ‰å¯¹åº”å…³ç³»çš„è®°å½•</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">è¡¨<span class="number">1</span> <span class="keyword">left</span> <span class="keyword">join</span> è¡¨<span class="number">2</span> <span class="keyword">on</span> è¡¨<span class="number">1.</span>å­—æ®µ <span class="operator">=</span> è¡¨<span class="number">2.</span>å­—æ®µ <span class="keyword">union</span> è¡¨<span class="number">1</span> <span class="keyword">right</span> <span class="keyword">join</span> è¡¨<span class="number">2</span> <span class="keyword">on</span> è¡¨<span class="number">1.</span>å­—æ®µ <span class="operator">=</span> è¡¨<span class="number">2.</span>å­—æ®µ<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">left</span> <span class="keyword">join</span> department <span class="keyword">on</span> employee .dep_id <span class="operator">=</span> department .id</span><br><span class="line"><span class="keyword">union</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employee <span class="keyword">right</span> <span class="keyword">join</span> department <span class="keyword">on</span> employee .dep_id <span class="operator">=</span> department .idï¼›</span><br></pre></td></tr></table></figure>

<img src="/2023/11/05/mysql/1646615204392-1166934c-ba98-4674-afd7-2996231e26a3.png" class title="img">

<img src="/2023/11/05/mysql/1646615211159-4c2d1e9a-e943-4896-a10c-065dc1224464.png" class title="img">

<img src="/2023/11/05/mysql/1646615229343-938d3b41-4d45-495c-9f0b-c625414054d4.png" class title="img">



<img src="/2023/11/05/mysql/1646615236629-dd7049af-311f-478d-a171-566f160f767b.png" class title="img">



<h3 id="8ã€selectå®Œæ•´è¯­æ³•"><a href="#8ã€selectå®Œæ•´è¯­æ³•" class="headerlink" title="8ã€selectå®Œæ•´è¯­æ³•"></a>8ã€selectå®Œæ•´è¯­æ³•</h3><img src="/2023/11/05/mysql/1646615259060-f9490429-d0a2-44be-9471-9a3ff0122cb2.png" class title="img">

<h3 id="9ã€selectæ‰§è¡Œé¡ºåº"><a href="#9ã€selectæ‰§è¡Œé¡ºåº" class="headerlink" title="9ã€selectæ‰§è¡Œé¡ºåº"></a>9ã€selectæ‰§è¡Œé¡ºåº</h3><img src="/2023/11/05/mysql/1646615278188-340a4170-01e8-4c8a-ba93-2fe95ce77951.png" class title="img">

<h3 id="10ã€å­æŸ¥è¯¢"><a href="#10ã€å­æŸ¥è¯¢" class="headerlink" title="10ã€å­æŸ¥è¯¢"></a>10ã€å­æŸ¥è¯¢</h3><img src="/2023/11/05/mysql/1646615301842-ef9b09ee-c034-43e1-be39-11690a8727ad.png" class title="img">

<img src="/2023/11/05/mysql/1646615309721-9532eacd-6e8e-4a92-84df-983096854dda.png" class title="img">

<img src="/2023/11/05/mysql/1646615316796-024659f0-f654-4ce0-8a4d-065b85fcf28c.png" class title="img">

<img src="/2023/11/05/mysql/1646615322901-d5390c5c-dc15-4a17-aeeb-d6bfae4c7850.png" class title="img">

<p>where exists();æ˜¯å¦å­˜åœ¨ true false</p>
<img src="/2023/11/05/mysql/1646615336696-5fb8ec93-c741-44dd-8542-46af74103160.png" class title="img">

<img src="/2023/11/05/mysql/1646615344438-02425201-1159-4283-bb69-d84ad6a5db5a.png" class title="img">

<h3 id="11ã€æƒé™ç®¡ç†"><a href="#11ã€æƒé™ç®¡ç†" class="headerlink" title="11ã€æƒé™ç®¡ç†"></a>11ã€æƒé™ç®¡ç†</h3><h4 id="1-åˆ›å»ºè´¦å·"><a href="#1-åˆ›å»ºè´¦å·" class="headerlink" title="1.åˆ›å»ºè´¦å·"></a>1.åˆ›å»ºè´¦å·</h4><h5 id="æœ¬åœ°å¸å·"><a href="#æœ¬åœ°å¸å·" class="headerlink" title="æœ¬åœ°å¸å·"></a>æœ¬åœ°å¸å·</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> <span class="string">&#x27;egon1&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;123&#x27;</span>;# mysql <span class="operator">-</span>uegon1 <span class="operator">-</span>p123</span><br></pre></td></tr></table></figure>

<h5 id="è¿œç¨‹è´¦å·"><a href="#è¿œç¨‹è´¦å·" class="headerlink" title="è¿œç¨‹è´¦å·"></a>è¿œç¨‹è´¦å·</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> <span class="string">&#x27;egon2&#x27;</span>@<span class="string">&#x27;192.168.31.10&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;123&#x27;</span>;# mysql <span class="operator">-</span>uegon2 <span class="operator">-</span>p123 <span class="operator">-</span>h æœåŠ¡ç«¯ip</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> <span class="string">&#x27;egon3&#x27;</span>@<span class="string">&#x27;192.168.31.%&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;123&#x27;</span>;# mysql <span class="operator">-</span>uegon2 <span class="operator">-</span>p123 <span class="operator">-</span>h æœåŠ¡ç«¯ip</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> <span class="string">&#x27;egon4&#x27;</span>@<span class="string">&#x27;%&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;123&#x27;</span>;# mysql <span class="operator">-</span>uegon2 <span class="operator">-</span>p123 <span class="operator">-</span>h æœåŠ¡ç«¯ip</span><br></pre></td></tr></table></figure>

<img src="/2023/11/05/mysql/1646615405670-618a4ad9-003e-41f5-a618-4ddd152ec022.png" class title="img">

<img src="/2023/11/05/mysql/1646615411750-fc028f5c-94ff-421d-923f-2ef5b73940ec.png" class title="img">

<h4 id="2-æˆæƒ"><a href="#2-æˆæƒ" class="headerlink" title="2.æˆæƒ"></a>2.æˆæƒ</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">user</span>ï¼›<span class="operator">*</span> . <span class="operator">*</span></span><br><span class="line">db;db1.<span class="operator">*</span> tables_priv</span><br><span class="line">db1.t1 columus_priv</span><br><span class="line">id,name</span><br></pre></td></tr></table></figure>

<h5 id="æŸ¥çœ‹æƒé™"><a href="#æŸ¥çœ‹æƒé™" class="headerlink" title="æŸ¥çœ‹æƒé™"></a>æŸ¥çœ‹æƒé™</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> mysql.user\G æŸ¥çœ‹ç”¨æˆ·æƒé™</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> mysql.db\G æŸ¥çœ‹åº“çš„ç”¨æˆ·æƒé™</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> mysql.tables_priv\G æŸ¥çœ‹è¡¨çš„ç”¨æˆ·æƒé™</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> mysql.columus_priv\G æŸ¥çœ‹è¡¨å­—æ®µçš„ç”¨æˆ·æƒé™</span><br></pre></td></tr></table></figure>

<h5 id="æ”¾æƒé™-select-æŸ¥çœ‹æƒé™-update-æ›´æ–°æƒé™"><a href="#æ”¾æƒé™-select-æŸ¥çœ‹æƒé™-update-æ›´æ–°æƒé™" class="headerlink" title="æ”¾æƒé™ (select-&gt;æŸ¥çœ‹æƒé™ update-&gt;æ›´æ–°æƒé™)"></a>æ”¾æƒé™ (select-&gt;æŸ¥çœ‹æƒé™ update-&gt;æ›´æ–°æƒé™)</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">æ”¾æ‰€æœ‰æƒé™</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">all</span> <span class="keyword">on</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">to</span> <span class="string">&#x27;egon1&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>;</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">select</span> <span class="keyword">on</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">to</span> <span class="string">&#x27;egon1&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>;</span><br><span class="line"></span><br><span class="line">æ”¾åº“æƒé™</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">select</span> <span class="keyword">on</span> db1.<span class="operator">*</span> <span class="keyword">to</span> <span class="string">&#x27;egon1&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>;</span><br><span class="line"></span><br><span class="line">æ”¾è¡¨æƒé™</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">select</span> <span class="keyword">on</span> db1.t1 <span class="keyword">to</span> <span class="string">&#x27;egon1&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>;</span><br><span class="line"></span><br><span class="line">æ”¾å­—æ®µæƒé™</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">select</span>(id,name),<span class="keyword">update</span>(age) <span class="keyword">on</span> db1.t1 <span class="keyword">to</span> <span class="string">&#x27;egon1&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h5 id="å›æ”¶æƒé™"><a href="#å›æ”¶æƒé™" class="headerlink" title="å›æ”¶æƒé™"></a>å›æ”¶æƒé™</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">å›æ”¶æ‰€æœ‰æƒé™</span><br><span class="line"><span class="keyword">revoke</span> <span class="keyword">select</span> <span class="keyword">on</span> <span class="operator">*</span>. <span class="operator">*</span> <span class="keyword">from</span> <span class="string">&#x27;egon1&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>;</span><br><span class="line">å›æ”¶åº“æƒé™</span><br><span class="line"><span class="keyword">revoke</span> <span class="keyword">select</span> <span class="keyword">on</span> db1. <span class="operator">*</span> <span class="keyword">from</span> <span class="string">&#x27;egon1&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>;</span><br><span class="line">å›æ”¶è¡¨æƒé™</span><br><span class="line"><span class="keyword">revoke</span> <span class="keyword">select</span> <span class="keyword">on</span> db1.t1 <span class="keyword">from</span> <span class="string">&#x27;egon1&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="12ã€ç™»å½•åŠŸèƒ½è®¾è®¡"><a href="#12ã€ç™»å½•åŠŸèƒ½è®¾è®¡" class="headerlink" title="12ã€ç™»å½•åŠŸèƒ½è®¾è®¡"></a>12ã€ç™»å½•åŠŸèƒ½è®¾è®¡</h3><h4 id="æœ‰é—®é¢˜çš„"><a href="#æœ‰é—®é¢˜çš„" class="headerlink" title="æœ‰é—®é¢˜çš„"></a>æœ‰é—®é¢˜çš„</h4><img src="/2023/11/05/mysql/1646615548107-827a6ab4-a9cf-442e-9ba8-8c5c41e282a1.png" class title="img">

<h4 id="ä¿®æ­£è¿‡çš„"><a href="#ä¿®æ­£è¿‡çš„" class="headerlink" title="ä¿®æ­£è¿‡çš„"></a>ä¿®æ­£è¿‡çš„</h4><img src="/2023/11/05/mysql/1646615560443-5584da48-ef81-43af-80e2-14ce51a2bc4d.png" class title="img">




<h4 id="å¢ã€åˆ ã€æ”¹ã€æŸ¥"><a href="#å¢ã€åˆ ã€æ”¹ã€æŸ¥" class="headerlink" title="å¢ã€åˆ ã€æ”¹ã€æŸ¥"></a>å¢ã€åˆ ã€æ”¹ã€æŸ¥</h4><img src="/2023/11/05/mysql/1646615580947-2e0b8def-006c-4935-bd89-78577134d3aa.png" class title="img">

<h3 id="13ã€è§†å›¾ï¼ˆå°†è¿æ¥-çš„è™šæ‹Ÿè¡¨å­˜å‚¨èµ·æ¥ï¼‰"><a href="#13ã€è§†å›¾ï¼ˆå°†è¿æ¥-çš„è™šæ‹Ÿè¡¨å­˜å‚¨èµ·æ¥ï¼‰" class="headerlink" title="13ã€è§†å›¾ï¼ˆå°†è¿æ¥ çš„è™šæ‹Ÿè¡¨å­˜å‚¨èµ·æ¥ï¼‰"></a>13ã€è§†å›¾ï¼ˆå°†è¿æ¥ çš„è™šæ‹Ÿè¡¨å­˜å‚¨èµ·æ¥ï¼‰</h3><img src="/2023/11/05/mysql/1646615593375-29e7259c-feba-47d8-b591-10535dffa157.png" class title="img">

<h3 id="14ã€å­˜å‚¨è¿‡ç¨‹"><a href="#14ã€å­˜å‚¨è¿‡ç¨‹" class="headerlink" title="14ã€å­˜å‚¨è¿‡ç¨‹"></a>14ã€å­˜å‚¨è¿‡ç¨‹</h3><h5 id="æ— å‚"><a href="#æ— å‚" class="headerlink" title="æ— å‚"></a>æ— å‚</h5><img src="/2023/11/05/mysql/1646615610722-82b12bac-fb59-4ef1-a81a-6cf161624cc5.png" class title="img">

<img src="/2023/11/05/mysql/1646615639346-220c8adf-2417-4313-a6dd-365aa95ac9c8.png" class title="img">

<h5 id="æœ‰å‚"><a href="#æœ‰å‚" class="headerlink" title="æœ‰å‚"></a>æœ‰å‚</h5><img src="/2023/11/05/mysql/1646615654200-89e09a98-d1b3-4582-a2ab-3e4cf799d817.png" class title="img">

<img src="/2023/11/05/mysql/1646615665367-63c6d439-7b69-4c08-9ff5-b0cfe485309e.png" class title="img">

<img src="/2023/11/05/mysql/1646615672826-b45d9e0f-9e6b-4c81-9b15-6915f9ecc1f6.png" class title="img">

<h3 id="15ã€äº‹åŠ¡"><a href="#15ã€äº‹åŠ¡" class="headerlink" title="15ã€äº‹åŠ¡"></a>15ã€äº‹åŠ¡</h3><img src="/2023/11/05/mysql/1646615690040-43bf07e4-9ce3-41f2-b94d-44f9387106e2.png" class title="img">

<img src="/2023/11/05/mysql/1646615700003-538f6b46-6c35-4937-bbef-7a16bd343f7a.png" class title="img">
]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
      <tags>
        <tag>mysql</tag>
        <tag>æ•°æ®åº“</tag>
      </tags>
  </entry>
  <entry>
    <title>spring</title>
    <url>/2023/11/04/spring/</url>
    <content><![CDATA[<img src="/2023/11/04/spring/log.png" class title="log">

<span id="more"></span>

<h2 id="1ã€Spring"><a href="#1ã€Spring" class="headerlink" title="1ã€Spring"></a>1ã€Spring</h2><h3 id="éœ€è¦çš„ä¾èµ–"><a href="#éœ€è¦çš„ä¾èµ–" class="headerlink" title="éœ€è¦çš„ä¾èµ–"></a>éœ€è¦çš„ä¾èµ–</h3><p>å®˜ç½‘ï¼š<a href="https://spring.io/projects/spring-framework#overview">https://spring.io/projects/spring-framework#overview</a></p>
<p>å®˜æ–¹ä¸‹è½½åœ°å€ï¼š<a href="https://repo.spring.io/release/org/springframework/spring/">https://repo.spring.io/release/org/springframework/spring/</a></p>
<p>GitHubï¼š<a href="https://github.com/spring-projects/spring-framework">https://github.com/spring-projects/spring-framework</a></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="1-2-ä¼˜ç‚¹"><a href="#1-2-ä¼˜ç‚¹" class="headerlink" title="1.2 ä¼˜ç‚¹"></a>1.2 ä¼˜ç‚¹</h3><ul>
<li>Springæ˜¯ä¸€ä¸ªå¼€æºçš„å…è´¹çš„æ¡†æ¶ï¼ˆå®¹å™¨ï¼‰ï¼</li>
<li>Springæ˜¯ä¸€ä¸ªè½»é‡çº§çš„ã€éå…¥ä¾µå¼çš„æ¡†æ¶ï¼</li>
<li>æ§åˆ¶åè½¬ï¼ˆIOCï¼‰ï¼Œé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰ï¼</li>
<li>æ”¯æŒäº‹åŠ¡çš„å¤„ç†ï¼Œå¯¹æ¡†æ¶æ•´åˆçš„æ”¯æŒï¼</li>
</ul>
<p>æ€»ç»“ä¸€å¥è¯ï¼šSpringå°±æ˜¯ä¸€ä¸ªè½»é‡çº§çš„æ§åˆ¶åè½¬ï¼ˆIOCï¼‰å’Œé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAOPï¼‰çš„æ¡†æ¶ï¼</p>
<h3 id="1-3-ç»„æˆ"><a href="#1-3-ç»„æˆ" class="headerlink" title="1.3 ç»„æˆ"></a>1.3 ç»„æˆ</h3><img src="/2023/11/04/spring/1674448089643-e9e4e26f-4d0b-46d9-bafc-3418df3b173b-16990987450951.png" class title="img">

<h3 id="1-4-æ‹“å±•"><a href="#1-4-æ‹“å±•" class="headerlink" title="1.4 æ‹“å±•"></a>1.4 æ‹“å±•</h3><p>ç°ä»£åŒ–çš„Javaå¼€å‘ï¼è¯´ç™½å°±æ˜¯åŸºäºSpringçš„å¼€å‘ï¼</p>
<img src="/2023/11/04/spring/1674453356043-5f51fe6d-1b09-4abb-a8f0-62e6d0910764-16990987450962.png" class title="img">

<ul>
<li><p>Spring Boot		</p>
</li>
<li><ul>
<li>ä¸€ä¸ªå¿«é€Ÿå¼€å‘çš„è„šæ‰‹æ¶ã€‚</li>
<li>åŸºäºSpringBootå¯ä»¥å¿«é€Ÿçš„å¼€å‘å•ä¸ªå¾®æœåŠ¡ã€‚</li>
<li>çº¦å®šå¤§äºé…ç½®ã€‚</li>
</ul>
</li>
<li><p>Spring Cloud</p>
</li>
<li><ul>
<li>SpringCloudæ˜¯åŸºäºSpringBootå®ç°çš„ã€‚</li>
</ul>
</li>
</ul>
<p>å› ä¸ºç°åœ¨å¤§å¤šæ•°å…¬å¸éƒ½åœ¨ä½¿ç”¨SpringBootè¿›è¡Œå¿«é€Ÿå¼€å‘ï¼Œå­¦ä¹ SpringBootçš„å‰æï¼Œéœ€è¦å®Œå…¨æŒæ¡SpringåŠSpringMVCï¼æ‰¿ä¸Šå¯ä¸‹çš„ä½œç”¨ï¼</p>
<p><strong>å¼Šç«¯ï¼šå‘å±•äº†å¤ªä¹…ä¹‹åï¼Œè¿èƒŒäº†åŸæ¥çš„ç†å¿µï¼é…ç½®ååˆ†ç¹çï¼Œäººç§°ï¼šâ€œé…ç½®åœ°ç‹±ï¼â€</strong></p>
<h2 id="2ã€IOCç†è®ºæ¨å¯¼"><a href="#2ã€IOCç†è®ºæ¨å¯¼" class="headerlink" title="2ã€IOCç†è®ºæ¨å¯¼"></a>2ã€IOCç†è®ºæ¨å¯¼</h2><ol>
<li>UserDao æ¥å£</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">getUser</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>2UserDaoImpl å®ç°ç±»</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDaoImpl</span> <span class="keyword">implements</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getUser</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;é»˜è®¤è·å–ç”¨æˆ·æ•°æ®&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>UserService ä¸šåŠ¡æ¥å£</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">getUser</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>UserServiceImpl ä¸šåŠ¡å®ç°ç±»</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserDaoImpl</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getUser</span><span class="params">()</span> &#123;</span><br><span class="line">        userDao.getUser();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>æµ‹è¯•</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç”¨æˆ·å®é™…è°ƒç”¨çš„æ˜¯ä¸šåŠ¡å±‚ï¼Œdaoå±‚ä»–ä»¬ä¸éœ€è¦æ¥è§¦ï¼</span></span><br><span class="line">        <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserServiceImpl</span>();</span><br><span class="line">        userService.getUser();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨æˆ‘ä»¬ä¹‹å‰çš„ä¸šåŠ¡ä¸­ï¼Œç”¨æˆ·çš„éœ€æ±‚å¯èƒ½ä¼šå½±å“æˆ‘ä»¬åŸæ¥çš„ä»£ç ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®ç”¨æˆ·çš„éœ€æ±‚å»ä¿®æ”¹åŸä»£ç ï¼å¦‚æœç¨‹åºä»£ç é‡ååˆ†å¤§ï¼Œä¿®æ”¹ä¸€æ¬¡çš„æˆæœ¬ä»£ä»·ååˆ†æ˜‚è´µï¼</p>
<img src="/2023/11/04/spring/1675156734114-ca6eb938-36be-44ff-8dd4-d6a4c3360949-16990987450973.png" class title="img">

<p>æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªSetæ¥å£å®ç°ï¼Œå·²ç»å‘ç”Ÿäº†é©å‘½æ€§çš„å˜åŒ–ï¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ©ç”¨setè¿›è¡ŒåŠ¨æ€å®ç°å€¼çš„æ³¨å…¥ï¼</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserDao</span><span class="params">(UserDao userDao)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.userDao = userDao;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>ä¹‹å‰ï¼Œç¨‹åºæ˜¯ä¸»åŠ¨åˆ›å»ºå¯¹è±¡ï¼æ§åˆ¶æƒåœ¨ç¨‹åºçŒ¿æ‰‹ä¸Šï¼</li>
<li>ä½¿ç”¨äº†setæ³¨å…¥åï¼Œç¨‹åºä¸å†å…·æœ‰ä¸»åŠ¨æ€§ï¼Œè€Œæ˜¯å˜æˆäº†è¢«åŠ¨çš„æ¥æ”¶å¯¹è±¡ï¼</li>
</ul>
<p>è¿™ç§æ€æƒ³ï¼Œä»æœ¬è´¨ä¸Šè§£å†³äº†é—®é¢˜ï¼Œæˆ‘ä»¬ç¨‹åºçŒ¿ä¸ç”¨å†å»ç®¡ç†å¯¹è±¡çš„åˆ›å»ºäº†ã€‚ç³»ç»Ÿçš„è€¦åˆæ€§å¤§å¤§é™ä½~ï¼Œå¯ä»¥æ›´åŠ ä¸“æ³¨çš„åœ¨ä¸šåŠ¡çš„å®ç°ä¸Šï¼è¿™æ˜¯IOCçš„åŸå‹ï¼</p>
<img src="/2023/11/04/spring/1675156783073-9682d9ee-6579-41e9-9ec4-04bb6db3afb2-16990987450974.png" class title="img">

<h3 id="IOCæœ¬è´¨"><a href="#IOCæœ¬è´¨" class="headerlink" title="IOCæœ¬è´¨"></a>IOCæœ¬è´¨</h3><p><strong>æ§åˆ¶åè½¬IoCï¼ˆInversion of Controlï¼‰ï¼Œæ˜¯ä¸€ç§è®¾è®¡æ€æƒ³ï¼ŒDIï¼ˆä¾èµ–æ³¨å…¥ï¼‰æ˜¯å®ç°IoCçš„ä¸€ç§æ–¹æ³•</strong>ï¼Œä¹Ÿæœ‰äººè®¤ä¸ºDIåªæ˜¯IoCçš„å¦ä¸€ç§è¯´æ³•ã€‚æ²¡æœ‰IoCçš„ç¨‹åºä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œå¯¹è±¡çš„åˆ›å»ºä¸å¯¹è±¡é—´çš„ä¾èµ–å…³ç³»å®Œå…¨ç¡¬ç¼–ç åœ¨ç¨‹åºä¸­ï¼Œå¯¹è±¡çš„åˆ›å»ºç”±ç¨‹åºè‡ªå·±æ§åˆ¶ï¼Œæ§åˆ¶åè½¬åå°†å¯¹è±¡çš„åˆ›å»ºè½¬ç§»ç»™ç¬¬ä¸‰æ–¹ï¼Œä¸ªäººè®¤ä¸ºæ‰€è°“æ§åˆ¶åè½¬å°±æ˜¯ï¼šè·å¾—ä¾èµ–å¯¹è±¡çš„æ–¹å¼åè½¬äº†ã€‚</p>
<p>é‡‡ç”¨XMLæ–¹å¼é…ç½®Beançš„æ—¶å€™ï¼ŒBeançš„å®šä¹‰ä¿¡æ¯æ˜¯å’Œå®ç°åˆ†ç¦»çš„ï¼Œè€Œé‡‡ç”¨æ³¨è§£çš„æ–¹å¼å¯ä»¥æŠŠä¸¤è€…åˆä¸ºä¸€ä½“ï¼ŒBeançš„å®šä¹‰ä¿¡æ¯ç›´æ¥ä»¥æ³¨è§£çš„å½¢å¼å®šä¹‰åœ¨å®ç°ç±»ä¸­ï¼Œä»è€Œè¾¾åˆ°äº†é›¶é…ç½®çš„ç›®çš„ã€‚</p>
<p><strong>æ§åˆ¶åè½¬æ˜¯ä¸€ç§é€šè¿‡æè¿°ï¼ˆXMLæˆ–æ³¨è§£ï¼‰å¹¶é€šè¿‡ç¬¬ä¸‰æ–¹å»ç”Ÿäº§æˆ–è·å–ç‰¹å®šå¯¹è±¡çš„æ–¹å¼ã€‚åœ¨Springä¸­å®ç°æ§åˆ¶åè½¬çš„æ˜¯IoCå®¹å™¨ï¼Œå…¶å®ç°æ–¹æ³•æ˜¯ä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼ŒDIï¼‰ã€‚</strong></p>
<h2 id="3ã€HelloSpring"><a href="#3ã€HelloSpring" class="headerlink" title="3ã€HelloSpring"></a>3ã€HelloSpring</h2><ol>
<li>æ–°å»ºä¸€ä¸ªmavené¡¹ç›®ï¼Œç¼–å†™å®ä½“ç±»</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Hello</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String str;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getStr</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> str;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setStr</span><span class="params">(String str)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.str = str;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;str=&#x27;&quot;</span> + str + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>ç¼–å†™xmlé…ç½®æ–‡ä»¶</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--ä½¿ç”¨Springæ¥åˆ›å»ºå¯¹è±¡ï¼Œåœ¨Springè¿™äº›éƒ½ç§°ä¸ºBean</span></span><br><span class="line"><span class="comment">    ç±»å‹ å˜é‡å = new ç±»å‹();</span></span><br><span class="line"><span class="comment">    Hello hello = new Hello();</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    id = å˜é‡å</span></span><br><span class="line"><span class="comment">    class = newçš„å¯¹è±¡</span></span><br><span class="line"><span class="comment">    property ç›¸å½“äºç»™å¯¹è±¡ä¸­çš„å±æ€§è®¾ç½®ä¸€ä¸ªå€¼ï¼</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;hello&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wu.pojo.Hello&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;str&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Spring&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>æµ‹è¯•</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//è·å–Springçš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼</span></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;beans.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æˆ‘ä»¬çš„å¯¹è±¡ç°åœ¨éƒ½åœ¨Springä¸­çš„ç®¡ç†äº†ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ï¼Œç›´æ¥å»é‡Œé¢å–å‡ºæ¥å°±å¯ä»¥ï¼</span></span><br><span class="line">        <span class="type">Hello</span> <span class="variable">hello</span> <span class="operator">=</span> (Hello) context.getBean(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">        System.out.println(hello.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ€è€ƒé—®é¢˜ï¼Ÿ</strong></p>
<ul>
<li>Helloå¯¹è±¡æ˜¯è°åˆ›å»ºçš„ï¼Ÿ<br>Helloå¯¹è±¡æ˜¯ç”±Springåˆ›å»ºçš„ã€‚</li>
<li>Helloå¯¹è±¡çš„å±æ€§æ˜¯æ€ä¹ˆè®¾ç½®çš„ï¼Ÿ<br>Helloå¯¹è±¡çš„å±æ€§æ˜¯ç”±Springå®¹å™¨è®¾ç½®çš„ã€‚</li>
</ul>
<p>è¿™ä¸ªè¿‡ç¨‹å°±å«æ§åˆ¶åè½¬ï¼š </p>
<p><strong>æ§åˆ¶</strong>ï¼šè°æ¥æ§åˆ¶å¯¹è±¡çš„åˆ›å»ºï¼Œä¼ ç»Ÿåº”ç”¨ç¨‹åºçš„å¯¹è±¡æ˜¯ç”±ç¨‹åºæœ¬èº«æ§åˆ¶åˆ›å»ºçš„ï¼Œä½¿ç”¨Springåï¼Œå¯¹è±¡æ˜¯ç”±Springæ¥åˆ›å»ºçš„ã€‚</p>
<p><strong>åè½¬</strong>ï¼šç¨‹åºæœ¬èº«ä¸åˆ›å»ºå¯¹è±¡ï¼Œè€Œå˜æˆè¢«åŠ¨çš„æ¥æ”¶å¯¹è±¡ã€‚</p>
<p>**ä¾èµ–æ³¨å…¥:**å°±æ˜¯åˆ©ç”¨setæ–¹æ³•æ¥è¿›è¡Œæ³¨å…¥çš„ã€‚</p>
<p>IOCæ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³ï¼Œç”±ä¸»åŠ¨çš„ç¼–ç¨‹å˜æˆè¢«åŠ¨çš„æ¥æ”¶ã€‚</p>
<p>å¯ä»¥é€šè¿‡new ClassPathXmlApplicationContextå»æµè§ˆä¸€ä¸‹åº•å±‚æºç ã€‚</p>
<p><strong>OKï¼Œåˆ°äº†ç°åœ¨ï¼Œæˆ‘ä»¬å½»åº•ä¸ç”¨åœ¨ç¨‹åºä¸­å»æ”¹åŠ¨äº†ï¼Œè¦å®ç°ä¸åŒçš„æ“ä½œï¼Œåªéœ€è¦åœ¨xmlé…ç½®æ–‡ä»¶ä¸­è¿›è¡Œä¿®æ”¹ï¼Œæ‰€è°“çš„IOCï¼Œä¸€å¥è¯æå®šï¼šå¯¹è±¡ç”±Springæ¥åˆ›å»ºï¼Œç®¡ç†ï¼Œè£…é…ï¼</strong></p>
<h2 id="4ã€IOCåˆ›å»ºå¯¹è±¡çš„æ–¹å¼"><a href="#4ã€IOCåˆ›å»ºå¯¹è±¡çš„æ–¹å¼" class="headerlink" title="4ã€IOCåˆ›å»ºå¯¹è±¡çš„æ–¹å¼"></a>4ã€IOCåˆ›å»ºå¯¹è±¡çš„æ–¹å¼</h2><ol>
<li><p>ä½¿ç”¨æ— å‚æ„é€ åˆ›å»ºå¯¹è±¡ï¼Œé»˜è®¤ï¼</p>
</li>
<li><p>å‡è®¾æˆ‘ä»¬è¦ä½¿ç”¨æœ‰å‚æ„é€ åˆ›å»ºå¯¹è±¡ã€‚</p>
</li>
<li><ol>
<li>ä¸‹æ ‡èµ‹å€¼</li>
</ol>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--ç¬¬ä¸€ç§æ–¹å¼ï¼šä¸‹æ ‡èµ‹å€¼    --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wu.pojo.User&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">&quot;0&quot;</span> <span class="attr">value</span>=<span class="string">&quot;xiaowuè¯´Java&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li><ol>
<li>ç±»å‹</li>
</ol>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--ç¬¬äºŒç§æ–¹å¼ï¼šé€šè¿‡ç±»å‹çš„åˆ›å»ºï¼Œä¸å»ºè®®ä½¿ç”¨    --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wu.pojo.User&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">type</span>=<span class="string">&quot;java.lang.String&quot;</span> <span class="attr">value</span>=<span class="string">&quot;lifa&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li><ol>
<li>å‚æ•°å</li>
</ol>
</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--ç¬¬ä¸‰ç§æ–¹å¼ï¼šç›´æ¥é€šè¿‡å‚æ•°åæ¥è®¾ç½®    --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wu.pojo.User&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;æå‘&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ€»ç»“ï¼šåœ¨é…ç½®æ–‡ä»¶åŠ è½½çš„æ—¶å€™ï¼Œå®¹å™¨ä¸­ç®¡ç†çš„å¯¹è±¡å°±å·²ç»åˆå§‹åŒ–äº†ï¼</p>
<h2 id="5ã€Springé…ç½®"><a href="#5ã€Springé…ç½®" class="headerlink" title="5ã€Springé…ç½®"></a>5ã€Springé…ç½®</h2><h3 id="5-1-åˆ«å"><a href="#5-1-åˆ«å" class="headerlink" title="5.1 åˆ«å"></a>5.1 åˆ«å</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--åˆ«åï¼Œå¦‚æœæ·»åŠ äº†åˆ«åï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨åˆ«åè·å–åˆ°è¿™ä¸ªå¯¹è±¡--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">alias</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;userNew&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="5-2-Beançš„é…ç½®"><a href="#5-2-Beançš„é…ç½®" class="headerlink" title="5.2 Beançš„é…ç½®"></a>5.2 Beançš„é…ç½®</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">idï¼šbeançš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œä¹Ÿå°±æ˜¯ç›¸å½“äºæˆ‘ä»¬å­¦çš„å¯¹è±¡å</span></span><br><span class="line"><span class="comment">classï¼šbeanå¯¹è±¡æ‰€å¯¹åº”çš„å…¨é™å®šåï¼šåŒ…å+ç±»å</span></span><br><span class="line"><span class="comment">nameï¼šä¹Ÿæ˜¯åˆ«åï¼Œè€Œä¸”nameå¯ä»¥åŒæ—¶å–å¤šä¸ªåˆ«å</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userT&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.kuang.pojo.UserT&quot;</span> <span class="attr">name</span>=<span class="string">&quot;user2 u2,u3;u4&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;xiaowu&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="5-3-import"><a href="#5-3-import" class="headerlink" title="5.3 import"></a>5.3 import</h3><p>è¿™ä¸ªimportã€‚ä¸€èˆ¬ç”¨äºå›¢é˜Ÿå¼€å‘ä½¿ç”¨ï¼Œå®ƒå¯ä»¥å°†å¤šä¸ªé…ç½®æ–‡ä»¶ï¼Œå¯¼å…¥åˆå¹¶ä¸ºä¸€ä¸ªã€‚<br>å‡è®¾ï¼Œç°åœ¨é¡¹ç›®ä¸­æœ‰å¤šä¸ªäººå¼€å‘ï¼Œè¿™ä¸‰ä¸ªäººè´Ÿè´£ä¸åŒçš„ç±»å¼€å‘ï¼Œä¸åŒçš„ç±»éœ€è¦æ³¨å†Œåœ¨ä¸åŒçš„beanä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨importå°†æ‰€æœ‰äººçš„beans.xmlåˆå¹¶ä¸ºä¸€ä¸ªæ€»çš„ï¼</p>
<ul>
<li>å¼ ä¸‰</li>
<li>æå››</li>
<li>ç‹äº”</li>
<li>applicationContext.xml</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;bean.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;bean2.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;bean3.xml&quot;</span>/&gt;</span> </span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨çš„æ—¶å€™ï¼Œç›´æ¥ä½¿ç”¨æ€»çš„é…ç½®å°±å¯ä»¥äº†ã€‚</p>
<h2 id="6ã€ä¾èµ–æ³¨å…¥"><a href="#6ã€ä¾èµ–æ³¨å…¥" class="headerlink" title="6ã€ä¾èµ–æ³¨å…¥"></a>6ã€ä¾èµ–æ³¨å…¥</h2><h3 id="6-1-æ„é€ å™¨æ³¨å…¥"><a href="#6-1-æ„é€ å™¨æ³¨å…¥" class="headerlink" title="6.1 æ„é€ å™¨æ³¨å…¥"></a>6.1 æ„é€ å™¨æ³¨å…¥</h3><p>å‰é¢å·²ç»ä»‹ç»è¿‡ï¼Œå‚è€ƒ<strong>4ã€IOCåˆ›å»ºå¯¹è±¡çš„æ–¹å¼</strong></p>
<h3 id="6-2-Setæ–¹å¼æ³¨å…¥ã€é‡ç‚¹ã€‘"><a href="#6-2-Setæ–¹å¼æ³¨å…¥ã€é‡ç‚¹ã€‘" class="headerlink" title="6.2 Setæ–¹å¼æ³¨å…¥ã€é‡ç‚¹ã€‘"></a>6.2 Setæ–¹å¼æ³¨å…¥ã€é‡ç‚¹ã€‘</h3><ul>
<li><p>ä¾èµ–æ³¨å…¥ï¼šSetæ³¨å…¥</p>
</li>
<li><ul>
<li>ä¾èµ–ï¼šbeanå¯¹è±¡çš„åˆ›å»ºä¾èµ–äºå®¹å™¨ï¼</li>
<li>æ³¨å…¥ï¼šbeanå¯¹è±¡ä¸­çš„æ‰€æœ‰å±æ€§ï¼Œç”±å®¹å™¨æ¥æ³¨å…¥ï¼</li>
</ul>
</li>
</ul>
<p>ã€ç¯å¢ƒæ­å»ºã€‘</p>
<ol>
<li>å¤æ‚ç±»å‹</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Address</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getAddress</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAddress</span><span class="params">(String address)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Address&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;address=&#x27;&quot;</span> + address + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>çœŸå®æµ‹è¯•å¯¹è±¡</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.pojo;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Address address;</span><br><span class="line">    <span class="keyword">private</span> String[] books;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; hobbys;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, String&gt; card;</span><br><span class="line">    <span class="keyword">private</span> Set&lt;String&gt; games;</span><br><span class="line">    <span class="keyword">private</span> String wife;</span><br><span class="line">    <span class="keyword">private</span> Properties info;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Address <span class="title function_">getAddress</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAddress</span><span class="params">(Address address)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.address = address;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String[] getBooks() &#123;</span><br><span class="line">        <span class="keyword">return</span> books;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBooks</span><span class="params">(String[] books)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.books = books;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;String&gt; <span class="title function_">getHobbys</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> hobbys;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setHobbys</span><span class="params">(List&lt;String&gt; hobbys)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.hobbys = hobbys;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Map&lt;String, String&gt; <span class="title function_">getCard</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> card;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCard</span><span class="params">(Map&lt;String, String&gt; card)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.card = card;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Set&lt;String&gt; <span class="title function_">getGames</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> games;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGames</span><span class="params">(Set&lt;String&gt; games)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.games = games;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getWife</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> wife;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setWife</span><span class="params">(String wife)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.wife = wife;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Properties <span class="title function_">getInfo</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> info;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setInfo</span><span class="params">(Properties info)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.info = info;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Student&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, address=&quot;</span> + address.toString() +</span><br><span class="line">                <span class="string">&quot;, books=&quot;</span> + Arrays.toString(books) +</span><br><span class="line">                <span class="string">&quot;, hobbys=&quot;</span> + hobbys +</span><br><span class="line">                <span class="string">&quot;, card=&quot;</span> + card +</span><br><span class="line">                <span class="string">&quot;, games=&quot;</span> + games +</span><br><span class="line">                <span class="string">&quot;, wife=&#x27;&quot;</span> + wife + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, info=&quot;</span> + info +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>beans.xml</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line">   </span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;student&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wu.pojo.Student&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--ç¬¬ä¸€ç§ï¼Œæ™®é€šå€¼æ³¨å…¥ï¼Œvalue--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;xiaowu&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>æµ‹è¯•ç±»</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;beans.xml&quot;</span>);</span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> (Student) context.getBean(<span class="string">&quot;student&quot;</span>);</span><br><span class="line">         System.out.println(student.getName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>å®Œå–„æ³¨å…¥ä¿¡æ¯</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;address&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wu.pojo.Address&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span> <span class="attr">value</span>=<span class="string">&quot;ä¸­å›½æ¹–å—æ ªæ´²æ”¸å¿&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;student&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wu.pojo.Student&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--ç¬¬ä¸€ç§ï¼Œæ™®é€šå€¼æ³¨å…¥ï¼Œvalue--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;xiaowu&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--ç¬¬äºŒç§ï¼ŒBeanæ³¨å…¥ï¼Œref  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;address&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;address&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--æ•°ç»„æ³¨å…¥--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;books&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>é‡‘ç“¶æ¢…<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>ä¸‰å›½æ¼”ä¹‰<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>æ°´æµ’ä¼ <span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>è¥¿æ¸¸è®°<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--Listé›†åˆ--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;hobbys&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>æ•²ä»£ç <span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>æå­¦ä¹ <span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>å¬æ­Œ<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--Map--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;card&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">map</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;èº«ä»½è¯&quot;</span> <span class="attr">value</span>=<span class="string">&quot;430223200305035514&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">&quot;é“¶è¡Œå¡&quot;</span> <span class="attr">value</span>=<span class="string">&quot;697753954286482937&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--Set--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;games&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>LOL<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>COC<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>BOB<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--nullå€¼æ³¨å…¥--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;wife&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">null</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--Property--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;info&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;å­¦å·&quot;</span>&gt;</span>202101130529<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;æ€§åˆ«&quot;</span>&gt;</span>ç”·æ€§<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;å§“å&quot;</span>&gt;</span>xiaowu<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;beans.xml&quot;</span>);</span><br><span class="line">        <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> (Student) context.getBean(<span class="string">&quot;student&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">all</span> <span class="operator">=</span> student.toString();</span><br><span class="line">        System.out.println(all);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-3-æ‹“å±•æ–¹å¼æ³¨å…¥"><a href="#6-3-æ‹“å±•æ–¹å¼æ³¨å…¥" class="headerlink" title="6.3 æ‹“å±•æ–¹å¼æ³¨å…¥"></a>6.3 æ‹“å±•æ–¹å¼æ³¨å…¥</h3><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨på‘½åç©ºé—´å’Œcå‘½åç©ºé—´è¿›è¡Œæ³¨å…¥<br>å®˜æ–¹è§£é‡Šï¼š</p>
<img src="/2023/11/04/spring/1675239262803-6e23a2c0-3d73-439e-b495-48eabe6867f6-16990987450975.png" class title="img">

<p>ä½¿ç”¨ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:p</span>=<span class="string">&quot;http://www.springframework.org/schema/p&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:c</span>=<span class="string">&quot;http://www.springframework.org/schema/c&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--på‘½åç©ºé—´æ³¨å…¥ï¼Œå¯ä»¥ç›´æ¥æ³¨å…¥å±æ€§å€¼ï¼šproperty--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wu.pojo.User&quot;</span> <span class="attr">p:age</span>=<span class="string">&quot;20&quot;</span> <span class="attr">p:name</span>=<span class="string">&quot;xiaowu&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--cå‘½åç©ºé—´æ³¨å…¥ï¼Œå¯ä»¥ç›´æ¥æ³¨å…¥å±æ€§å€¼ï¼šconstructs--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wu.pojo.User&quot;</span> <span class="attr">c:age</span>=<span class="string">&quot;19&quot;</span> <span class="attr">c:name</span>=<span class="string">&quot;xiaowu2&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">UserTest</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;UserBeans.xml&quot;</span>);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;user&quot;</span>, User.class);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">UserTest2</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;UserBeans.xml&quot;</span>);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;user2&quot;</span>, User.class);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ç‚¹ï¼špå‘½åå’Œcå‘½åç©ºé—´ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œéœ€è¦å¯¼å…¥xmlçº¦æŸï¼</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">xmlns:p=&quot;http://www.springframework.org/schema/p&quot;</span><br><span class="line">xmlns:c=&quot;http://www.springframework.org/schema/c&quot;</span><br></pre></td></tr></table></figure>

<h3 id="6-4-beançš„ä½œç”¨åŸŸ"><a href="#6-4-beançš„ä½œç”¨åŸŸ" class="headerlink" title="6.4 beançš„ä½œç”¨åŸŸ"></a>6.4 beançš„ä½œç”¨åŸŸ</h3><img src="/2023/11/04/spring/1675239455088-4d474802-77e1-468d-a08f-c1ff22b94f79-16990987450976.png" class title="img">

<ol>
<li>å•ä¾‹æ¨¡å¼ï¼ˆSpringé»˜è®¤æœºåˆ¶ï¼‰</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--å•ä¾‹æ¨¡å¼ï¼šspringé»˜è®¤æœºåˆ¶--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user3&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wu.pojo.User&quot;</span>  <span class="attr">scope</span>=<span class="string">&quot;singleton&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>åŸå‹æ¨¡å¼ï¼šæ¯æ¬¡ä»å®¹å™¨ä¸­getçš„æ—¶å€™ï¼Œéƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°å¯¹è±¡ï¼</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--åŸå‹æ¨¡å¼ï¼šæ¯æ¬¡ä»å®¹å™¨ä¸­getçš„æ—¶å€™ï¼Œéƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°å¯¹è±¡ï¼--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user4&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wu.pojo.User&quot;</span>  <span class="attr">scope</span>=<span class="string">&quot;prototype&quot;</span>/&gt;</span></span><br><span class="line"> @Test</span><br><span class="line">    public void UserTest3() &#123;</span><br><span class="line"></span><br><span class="line">        /*å•ä¾‹æ¨¡å¼ä¸‹ï¼Œgetå¯¹è±¡å¯ä»¥é‡å¤ä½¿ç”¨*/</span><br><span class="line">        ApplicationContext context = new ClassPathXmlApplicationContext(&quot;UserBeans.xml&quot;);</span><br><span class="line">        User user = context.getBean(&quot;user3&quot;, User.class);</span><br><span class="line">        User user1 = context.getBean(&quot;user3&quot;, User.class);</span><br><span class="line">        System.out.println(user.hashCode());</span><br><span class="line">        System.out.println(user1.hashCode());</span><br><span class="line">        System.out.println(user == user1);</span><br><span class="line"></span><br><span class="line">        /*åŸå‹æ¨¡å¼ä¸‹ï¼Œgetçš„æ—¶å€™ä¼šäº§ç”Ÿæ–°å¯¹è±¡*/</span><br><span class="line">        ApplicationContext context1 = new ClassPathXmlApplicationContext(&quot;UserBeans.xml&quot;);</span><br><span class="line">        User user2 = context1.getBean(&quot;user4&quot;, User.class);</span><br><span class="line">        User user3 = context1.getBean(&quot;user4&quot;, User.class);</span><br><span class="line">        System.out.println(user2.hashCode());</span><br><span class="line">        System.out.println(user3.hashCode());</span><br><span class="line">        System.out.println(user2 == user3);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>å…¶ä½™çš„requestã€sessionã€applicationã€è¿™äº›åªèƒ½åœ¨webå¼€å‘ä¸­ä½¿ç”¨åˆ°ï¼</li>
</ol>
<h2 id="7ã€Beançš„è‡ªåŠ¨è£…é…"><a href="#7ã€Beançš„è‡ªåŠ¨è£…é…" class="headerlink" title="7ã€Beançš„è‡ªåŠ¨è£…é…"></a>7ã€Beançš„è‡ªåŠ¨è£…é…</h2><ul>
<li>è‡ªåŠ¨è£…é…æ˜¯Springæ»¡è¶³beanä¾èµ–ä¸€ç§æ–¹å¼ï¼</li>
<li>Springä¼šåœ¨ä¸Šä¸‹æ–‡ä¸­è‡ªåŠ¨å¯»æ‰¾ï¼Œå¹¶è‡ªåŠ¨ç»™beanè£…é…å±æ€§ï¼</li>
</ul>
<p>åœ¨Springä¸­æœ‰ä¸‰ç§è£…é…çš„æ–¹å¼ï¼š</p>
<ol>
<li>åœ¨xmlä¸­æ˜¾å¼çš„é…ç½®ï¼›</li>
<li>åœ¨javaä¸­æ˜¾å¼é…ç½®ï¼›</li>
<li>éšå¼çš„è‡ªåŠ¨è£…é…beanã€é‡è¦ã€‘</li>
</ol>
<h3 id="7-1-æµ‹è¯•"><a href="#7-1-æµ‹è¯•" class="headerlink" title="7.1 æµ‹è¯•"></a>7.1 æµ‹è¯•</h3><p>ç¯å¢ƒæ­å»ºï¼šåˆ›å»ºé¡¹ç›®ï¼Œä¸€ä¸ªäººæœ‰ä¸¤ä¸ªå® ç‰©ï¼</p>
<p>å®ä½“ç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Cat</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">shout</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å–µå–µï¼ï¼ï¼~&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dog</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">shout</span><span class="params">()</span>&#123;</span><br><span class="line">     System.out.println(<span class="string">&quot;æ—ºæ—ºï¼ï¼ï¼~&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">People</span> &#123;</span><br><span class="line">    <span class="keyword">private</span>  Dog dog;</span><br><span class="line">    <span class="keyword">private</span>  Cat cat;</span><br><span class="line">    <span class="keyword">private</span>  String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Dog <span class="title function_">getDog</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> dog;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDog</span><span class="params">(Dog dog)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.dog = dog;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Cat <span class="title function_">getCat</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> cat;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCat</span><span class="params">(Cat cat)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.cat = cat;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;People&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;dog=&quot;</span> + dog +</span><br><span class="line">                <span class="string">&quot;, cat=&quot;</span> + cat +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>beans.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;cat&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wu.pojo.Cat&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wu.pojo.Dog&quot;</span>/&gt;</span></span><br><span class="line">   </span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wu.pojo.People&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;xiaowu&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;cat&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;cat&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dog&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dog&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="7-2-ByNameè‡ªåŠ¨è£…é…"><a href="#7-2-ByNameè‡ªåŠ¨è£…é…" class="headerlink" title="7.2 ByNameè‡ªåŠ¨è£…é…"></a>7.2 ByNameè‡ªåŠ¨è£…é…</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;cat&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wu.pojo.Cat&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dog&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wu.pojo.Dog&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">     byNameï¼šä¼šè‡ªåŠ¨åœ¨å®¹å™¨ä¸Šä¸‹æ–‡ä¸­æŸ¥æ‰¾ï¼Œå’Œè‡ªå·±å¯¹è±¡setæ–¹æ³•åé¢çš„å€¼å¯¹åº”çš„bean idï¼</span></span><br><span class="line"><span class="comment">         --&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wu.pojo.People&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byName&quot;</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;xiaowu&quot;</span>/&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="7-3-ByTypeè‡ªåŠ¨è£…é…"><a href="#7-3-ByTypeè‡ªåŠ¨è£…é…" class="headerlink" title="7.3 ByTypeè‡ªåŠ¨è£…é…"></a>7.3 ByTypeè‡ªåŠ¨è£…é…</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.wu.pojo.Cat&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;com.wu.pojo.Dog&quot;</span>/&gt;</span></span><br><span class="line">   <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">       byTypeï¼šä¼šåœ¨å®¹å™¨ä¸Šä¸‹æ–‡ä¸­æŸ¥æ‰¾ï¼Œå’Œè‡ªå·±å¯¹è±¡å±æ€§ç±»å‹ç›¸åŒçš„beanï¼ï¼ˆå¯ä»¥çœç•¥bean idä¸å†™ï¼‰</span></span><br><span class="line"><span class="comment">       --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;user&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wu.pojo.People&quot;</span> <span class="attr">autowire</span>=<span class="string">&quot;byType&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;name&quot;</span> <span class="attr">value</span>=<span class="string">&quot;xiaowu&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">@Test</span><br><span class="line">   public void Test() &#123;</span><br><span class="line">       ApplicationContext context = new ClassPathXmlApplicationContext(&quot;beans.xml&quot;);</span><br><span class="line">       People user = context.getBean(&quot;user&quot;, People.class);</span><br><span class="line">       user.getDog().shout();</span><br><span class="line">       user.getCat().shout();</span><br><span class="line">       System.out.println(user.getName());</span><br><span class="line"></span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>å°ç»“ï¼š</p>
<ul>
<li>ByNameçš„æ—¶å€™ï¼Œéœ€è¦ä¿è¯æ‰€æœ‰beançš„idå”¯ä¸€ï¼Œå¹¶ä¸”è¿™ä¸ªbeanéœ€è¦å’Œè‡ªåŠ¨æ³¨å…¥çš„å±æ€§çš„setæ–¹æ³•çš„å€¼ä¸€è‡´ï¼</li>
<li>ByTypeçš„æ—¶å€™ï¼Œéœ€è¦ä¿è¯æ‰€æœ‰beançš„classå”¯ä¸€ï¼Œå¹¶ä¸”è¿™ä¸ªbeanéœ€è¦å’Œè‡ªåŠ¨æ³¨å…¥çš„å±æ€§çš„ç±»å‹ä¸€è‡´ï¼</li>
</ul>
<h3 id="7-4-ä½¿ç”¨æ³¨è§£å®ç°è‡ªåŠ¨è£…é…"><a href="#7-4-ä½¿ç”¨æ³¨è§£å®ç°è‡ªåŠ¨è£…é…" class="headerlink" title="7.4 ä½¿ç”¨æ³¨è§£å®ç°è‡ªåŠ¨è£…é…"></a>7.4 ä½¿ç”¨æ³¨è§£å®ç°è‡ªåŠ¨è£…é…</h3><p>jdk1.5æ”¯æŒçš„æ³¨è§£ï¼ŒSpring2.5å°±æ”¯æŒæ³¨è§£äº†ï¼</p>
<p>è¦ä½¿ç”¨æ³¨è§£é¡»çŸ¥ï¼š</p>
<ol>
<li>å¯¼å…¥çº¦æŸ</li>
<li>é…ç½®æ³¨è§£çš„æ”¯æŒ</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">	        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">	        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">	        https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">&lt;!--å¼€å¯æ³¨è§£çš„æ”¯æŒ    --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>@Autowired</strong></p>
<p>ç›´æ¥åœ¨å±æ€§ä¸Šä½¿ç”¨å³å¯ï¼ä¹Ÿå¯ä»¥åœ¨setæ–¹æ³•ä¸Šä½¿ç”¨ï¼</p>
<p>ä½¿ç”¨Autowiredæˆ‘ä»¬å°±å¯ä»¥ä¸ç”¨ç¼–å†™setæ–¹æ³•äº†ï¼Œå‰ææ˜¯ä½ è¿™ä¸ªè‡ªåŠ¨é…ç½®çš„å±æ€§åœ¨IOCï¼ˆSpringï¼‰å®¹å™¨ä¸­å­˜åœ¨ï¼Œä¸”ç¬¦åˆåå­—ByNameï¼</p>
<p><strong>ç§‘æ™®ï¼š</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">@Nullable å­—æ®µæ ‡è®°äº†äº†è¿™ä¸ªæ³¨è§£ï¼Œè¯´æ˜è¿™ä¸ªå­—æ®µå¯ä»¥ä¸ºnull;</span><br><span class="line">public @interface Autowired &#123;</span><br><span class="line">    boolean required() default true;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ä»£ç </p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">People</span> &#123;</span><br><span class="line">    <span class="comment">//å¦‚æœæ˜¾å¼å®šä¹‰äº†Autowiredçš„requiredå±æ€§ä¸ºfalseï¼Œè¯´æ˜è¿™ä¸ªå¯¹è±¡å¯ä»¥ä¸ºnullï¼Œå¦åˆ™ä¸å…è®¸ä¸ºç©º</span></span><br><span class="line">    <span class="meta">@Autowired(required = false)</span></span><br><span class="line">    <span class="keyword">private</span> Cat cat;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœ@Autowiredè‡ªåŠ¨è£…é…çš„ç¯å¢ƒæ¯”è¾ƒå¤æ‚ï¼Œè‡ªåŠ¨è£…é…æ— æ³•é€šè¿‡ä¸€ä¸ªæ³¨è§£ã€@Autowiredã€‘å®Œæˆçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨@Qualifier(value &#x3D; â€œxxxâ€)å»é…ç½®@Autowiredçš„ä½¿ç”¨ï¼ŒæŒ‡å®šä¸€ä¸ªå”¯ä¸€çš„beanå¯¹è±¡æ³¨å…¥ï¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">People</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Qualifier(value = &quot;cat111&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Cat cat;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="meta">@Qualifier(value = &quot;dog222&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>@Resource</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">People</span> &#123;</span><br><span class="line">   <span class="comment">/* @Resourceä¹Ÿå¯ä»¥é€šè¿‡nameæ¥æŒ‡å®šä¸€ä¸ªå”¯ä¸€çš„beanå¯¹è±¡æ³¨å…¥*/</span></span><br><span class="line">    <span class="meta">@Resource(name=&quot;cat111&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Cat cat;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> Dog dog;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å°ç»“ï¼š</p>
<p>@Resourceå’Œ@Autowiredçš„åŒºåˆ«ï¼š</p>
<ul>
<li>éƒ½æ˜¯ç”¨æ¥è‡ªåŠ¨è£…é…çš„ï¼Œéƒ½å¯ä»¥æ”¾åœ¨å±æ€§å­—æ®µä¸Š</li>
<li>@Autowiredé€šè¿‡byTypeçš„æ–¹å¼å®ç°ï¼Œè€Œä¸”å¿…é¡»è¦æ±‚è¿™ä¸ªå¯¹è±¡å­˜åœ¨ï¼ã€å¸¸ç”¨ã€‘</li>
<li>@Resourceé»˜è®¤é€šè¿‡byNameçš„æ–¹å¼å®ç°ï¼Œå¦‚æœæ‰¾ä¸åˆ°åå­—ï¼Œåˆ™é€šè¿‡byTypeå®ç°ï¼å¦‚æœä¸¤ä¸ªéƒ½æ‰¾ä¸åˆ°çš„æƒ…å†µä¸‹ï¼Œå°±æŠ¥é”™ï¼ã€å¸¸ç”¨ã€‘</li>
<li>æ‰§è¡Œé¡ºåºä¸åŒï¼š@Autowiredé€šè¿‡byTypeçš„æ–¹å¼å®ç°ã€‚</li>
</ul>
<h2 id="8ã€ä½¿ç”¨æ³¨è§£å¼€å‘"><a href="#8ã€ä½¿ç”¨æ³¨è§£å¼€å‘" class="headerlink" title="8ã€ä½¿ç”¨æ³¨è§£å¼€å‘"></a>8ã€ä½¿ç”¨æ³¨è§£å¼€å‘</h2><p>åœ¨Spring4ä¹‹åï¼Œè¦ä½¿ç”¨æ³¨è§£å¼€å‘ï¼Œå¿…é¡»è¦ä¿è¯aopçš„åŒ…å¯¼å…¥äº†</p>
<img src="/2023/11/04/spring/1675304845230-1bc8912a-7f5f-4598-88a0-83a00e76d920-16990987450977.png" class title="img">

<p>ä½¿ç”¨æ³¨è§£éœ€è¦å¯¼å…¥contextçº¦æŸï¼Œå¢åŠ æ³¨è§£çš„æ”¯æŒï¼</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">	        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">	        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">	        https://www.springframework.org/schema/context/spring-context.xsd&quot;</span>&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">&lt;!--å¼€å¯æ³¨è§£çš„æ”¯æŒ    --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>bean</li>
<li>å±æ€§å¦‚ä½•æ³¨å…¥</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ç­‰ä»·äº&lt;bean id=&quot;user&quot; class=&quot;com.wu.pojo.User&quot;/&gt;</span></span><br><span class="line"><span class="comment">//@Component ç»„ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç›¸å½“äº  &lt;property name=&quot;name&quot; value=&quot;xiaowu&quot;/&gt;</span></span><br><span class="line">    <span class="meta">@Value(&quot;xiaowu&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>è¡ç”Ÿçš„æ³¨è§£</li>
</ol>
<p>@Componentæœ‰å‡ ä¸ªè¡ç”Ÿæ³¨è§£ï¼Œæˆ‘ä»¬åœ¨webå¼€å‘ä¸­ï¼Œä¼šæŒ‰ç…§mvcä¸‰å±‚æ¶æ„åˆ†å±‚ï¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">dao [<span class="meta">@Repository</span>]</span><br><span class="line">service [<span class="meta">@Service</span>]</span><br><span class="line">controller [<span class="meta">@Controller</span>]</span><br></pre></td></tr></table></figure>

<p>è¿™å››ä¸ªæ³¨è§£åŠŸèƒ½éƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯ä»£è¡¨å°†æŸä¸ªç±»æ³¨å†Œåˆ°Springä¸­ï¼Œè£…é…Bean</p>
<ol>
<li>è‡ªåŠ¨è£…é…</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">- <span class="meta">@Autowired</span>ï¼šè‡ªåŠ¨è£…é…é€šè¿‡ç±»å‹ï¼Œåå­—ã€‚å¦‚æœAutowiredä¸èƒ½å”¯ä¸€è‡ªåŠ¨è£…é…ä¸Šå±æ€§ï¼Œåˆ™éœ€è¦é€šè¿‡<span class="meta">@Qualifier(value = &quot;xxx&quot;)</span>å»é…ç½®ã€‚</span><br><span class="line">- <span class="meta">@Nullable</span> å­—æ®µæ ‡è®°äº†äº†è¿™ä¸ªæ³¨è§£ï¼Œè¯´æ˜è¿™ä¸ªå­—æ®µå¯ä»¥ä¸º<span class="literal">null</span>;</span><br><span class="line">- <span class="meta">@Resource</span>ï¼šè‡ªåŠ¨è£…é…é€šè¿‡åå­—ï¼Œç±»å‹ã€‚</span><br></pre></td></tr></table></figure>

<ol>
<li>ä½œç”¨åŸŸ</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// @Scope(&quot;xxx&quot;)ï¼šä½œç”¨åŸŸ</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Scope(&quot;prototype&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç›¸å½“äº  &lt;property name=&quot;name&quot; value=&quot;xiaowu&quot;/&gt;</span></span><br><span class="line">    <span class="meta">@Value(&quot;xiaowu&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>å°ç»“</li>
</ol>
<p><strong>xmlä¸æ³¨è§£ï¼š</strong></p>
<p>xmlæ›´åŠ ä¸‡èƒ½ï¼Œé€‚ç”¨äºä»»ä½•åœºåˆï¼ç»´æŠ¤ç®€å•æ–¹ä¾¿<br>æ³¨è§£ä¸æ˜¯è‡ªå·±ç±»ä½¿ç”¨ä¸äº†ï¼Œç»´æŠ¤ç›¸é˜Ÿå¤æ‚ï¼</p>
<p><strong>xmlä¸æ³¨è§£æœ€ä½³å®è·µï¼š</strong></p>
<p>xmlç”¨æ¥ç®¡ç†beanï¼›<br>æ³¨è§£åªè´Ÿè´£å®Œæˆå±æ€§çš„æ³¨å…¥ï¼›<br>æˆ‘ä»¬åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œåªéœ€è¦æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼šå¿…é¡»è®©æ³¨è§£ç”Ÿæ•ˆï¼Œå°±éœ€è¦å¼€å¯æ³¨è§£çš„æ”¯æŒ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--æŒ‡å®šè¦æ‰«æçš„åŒ…ï¼Œè¿™ä¸ªåŒ…ä¸‹çš„æ³¨è§£å°±ä¼šç”Ÿæ•ˆ--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">&quot;com.wu&quot;</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--å¼€å¯æ³¨è§£çš„æ”¯æŒ    --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:annotation-config</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="9ã€ä½¿ç”¨Javaçš„æ–¹å¼é…ç½®Spring"><a href="#9ã€ä½¿ç”¨Javaçš„æ–¹å¼é…ç½®Spring" class="headerlink" title="9ã€ä½¿ç”¨Javaçš„æ–¹å¼é…ç½®Spring"></a>9ã€ä½¿ç”¨Javaçš„æ–¹å¼é…ç½®Spring</h2><p>æˆ‘ä»¬ç°åœ¨è¦å®Œå…¨ä¸ä½¿ç”¨Springçš„xmlé…ç½®äº†ï¼Œå…¨æƒäº¤ç»™Javaæ¥åšï¼<br>JavaConfigæ˜¯Springçš„ä¸€ä¸ªå­é¡¹ç›®ï¼Œåœ¨Spring4ä¹‹åï¼Œå®ƒæˆä¸ºäº†ä¸€ä¸ªæ ¸å¿ƒåŠŸèƒ½ï¼</p>
<img src="/2023/11/04/spring/1675345320338-270c3973-9809-4551-9003-c0df757f3b2f-16990987450978.png" class title="img">

<p>å®ä½“ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"></span><br><span class="line"><span class="comment">//@Controlleræ„æ€æ˜¯ï¼Œè¯´æ˜è¿™ä¸ªç±»è¢«springå®¹å™¨æ¥ç®¡äº†ï¼Œæ³¨å†Œåˆ°å®¹å™¨ä¸­</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;xiaowu&quot;)</span><span class="comment">//å±æ€§æ³¨å…¥å€¼</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é…ç½®æ–‡ä»¶</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.wu.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ComponentScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Import;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿™ä¸ªä¹Ÿä¼šSpringå®¹å™¨æ‰˜ç®¡ï¼Œæ³¨å†Œåˆ°å®¹å™¨ä¸­ï¼Œå› ä¸ºå®ƒæœ¬æ¥å°±æ˜¯ä¸€ä¸ª@Component</span></span><br><span class="line"><span class="comment">//@Configurationä»£è¡¨è¿™æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œå°±æ˜¯æˆ‘ä»¬çš„beans.xml</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(&quot;com.wu.pojo&quot;)</span></span><br><span class="line"><span class="meta">@Import(WuConfig2.class)</span><span class="comment">//å¼•ç”¨é…ç½®ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WuConfig</span> &#123;</span><br><span class="line">    <span class="comment">//æ³¨å†Œä¸€ä¸ªbeanï¼Œç›¸å½“äºä¹‹å‰å†™çš„beanæ ‡ç­¾</span></span><br><span class="line">    <span class="comment">//è¿™ä¸ªæ–¹æ³•åå­—ï¼Œå°±ç›¸å½“äºbeanæ ‡ç­¾çš„id</span></span><br><span class="line">    <span class="comment">//è¿™ä¸ªæ–¹æ³•è¿”å›å€¼ï¼Œå°±ç›¸å½“äºbeanæ ‡ç­¾é‡Œçš„classçš„å±æ€§</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">getUser</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">User</span>();<span class="comment">//å°±æ˜¯è¦è¿”å›æ³¨å…¥åˆ°beançš„å¯¹è±¡ï¼</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span>  <span class="keyword">void</span> <span class="title function_">Test</span> <span class="params">()</span>&#123;</span><br><span class="line">        <span class="comment">//å¦‚æœå®Œå…¨ä½¿ç”¨äº†é…ç½®ç±»æ–¹å¼å»åšï¼Œæˆ‘ä»¬å°±åªèƒ½é€šè¿‡ AnnotationConfig ä¸Šä¸‹æ–‡æ¥è·å–å®¹å™¨ï¼Œé€šè¿‡é…ç½®ç±»çš„classå¯¹è±¡åŠ è½½ï¼</span></span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(WuConfig.class);</span><br><span class="line">        <span class="type">User</span> <span class="variable">getUser</span> <span class="operator">=</span> (User) context.getBean(<span class="string">&quot;getUser&quot;</span>);</span><br><span class="line">        System.out.println(getUser.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ç§çº¯Javaçš„é…ç½®æ–¹å¼ï¼Œåœ¨SpringBootä¸­éšå¤„å¯è§ï¼</p>
<h2 id="10ã€ä»£ç†æ¨¡å¼"><a href="#10ã€ä»£ç†æ¨¡å¼" class="headerlink" title="10ã€ä»£ç†æ¨¡å¼"></a>10ã€ä»£ç†æ¨¡å¼</h2><p>ä¸ºä»€ä¹ˆè¦å­¦ä¹ ä»£ç†æ¨¡å¼ï¼Ÿå› ä¸ºè¿™å°±æ˜¯SpringAOPçš„åº•å±‚ï¼ã€SpringAOPå’ŒSpringMVCã€‘</p>
<p>ä»£ç†æ¨¡å¼çš„åˆ†ç±»ï¼š</p>
<ul>
<li>é™æ€ä»£ç†</li>
<li>åŠ¨æ€ä»£ç†<img src="/2023/11/04/spring/1675396473993-aefb2d24-4708-4af4-a757-8c47d100cb3e-16990987450979.png" class title="img"></li>
</ul>
<h3 id="10-1-é™æ€ä»£ç†"><a href="#10-1-é™æ€ä»£ç†" class="headerlink" title="10.1 é™æ€ä»£ç†"></a>10.1 é™æ€ä»£ç†</h3><p>è§’è‰²åˆ†æï¼š</p>
<ul>
<li>æŠ½è±¡è§’è‰²ï¼šä¸€èˆ¬ä¼šä½¿ç”¨æ¥å£æˆ–è€…æŠ½è±¡ç±»æ¥è§£å†³</li>
<li>çœŸå®è§’è‰²ï¼šè¢«ä»£ç†çš„è§’è‰²</li>
<li>ä»£ç†è§’è‰²ï¼šä»£ç†çœŸå®è§’è‰²ï¼Œä»£ç†çœŸå®è§’è‰²åï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šåšä¸€äº›é™„å±æ“ä½œ</li>
<li>å®¢æˆ·ï¼šè®¿é—®ä»£ç†å¯¹è±¡çš„äººï¼</li>
</ul>
<p>ä»£ç æ­¥éª¤ï¼š</p>
<ol>
<li>æ¥å£</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.demo01;</span><br><span class="line"><span class="comment">//ç§Ÿæˆ¿</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Rent</span> &#123;</span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rent</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>çœŸå®è§’è‰²</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.demo01;</span><br><span class="line"><span class="comment">//æˆ¿ä¸œ</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Host</span>  <span class="keyword">implements</span> <span class="title class_">Rent</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rent</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æˆ¿ä¸œè¦å‡ºç§Ÿæˆ¿å­&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>ä»£ç†è§’è‰²</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.demo01;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä»£ç†</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Proxy</span> <span class="keyword">implements</span> <span class="title class_">Rent</span> &#123;</span><br><span class="line">    <span class="keyword">private</span>  Host host;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Proxy</span><span class="params">(Host host)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.host = host;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Proxy</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rent</span><span class="params">()</span> &#123;</span><br><span class="line">        host.rent();</span><br><span class="line">        seeHouse();</span><br><span class="line">        hetong();</span><br><span class="line">        fare();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//çœ‹æˆ¿</span></span><br><span class="line">    <span class="keyword">public</span>  <span class="keyword">void</span> <span class="title function_">seeHouse</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸­ä»‹å¸¦ä½ çœ‹æˆ¿&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç­¾åˆåŒ</span></span><br><span class="line">    <span class="keyword">public</span>  <span class="keyword">void</span> <span class="title function_">hetong</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ç­¾ç§ŸèµåˆåŒ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ”¶ä¸­ä»‹è´¹</span></span><br><span class="line">    <span class="keyword">public</span>  <span class="keyword">void</span> <span class="title function_">fare</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ”¶ä¸­ä»‹è´¹&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>å®¢æˆ·ç«¯è®¿é—®ä»£ç†è§’è‰²</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.demo01;</span><br><span class="line"><span class="comment">//å®¢æˆ·</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Host</span> <span class="variable">host</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">Host</span>();</span><br><span class="line">       <span class="comment">//ä»£ç†ï¼Œä¸­ä»‹å¸®æˆ¿ä¸œå‡ºç§Ÿæˆ¿å­ï¼Œå¹¶ä¸”ä»£ç†è§’è‰²ä¸€èˆ¬ä¼šæœ‰ä¸€äº›é™„å±æ“ä½œï¼</span></span><br><span class="line">        <span class="type">Proxy</span> <span class="variable">proxy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Proxy</span>(host);</span><br><span class="line">        proxy.rent();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»£ç†æ¨¡å¼çš„å¥½å¤„ï¼š</p>
<ul>
<li>å¯ä»¥ä½¿çœŸå®è§’è‰²çš„æ“ä½œæ›´åŠ çº¯ç²¹ï¼ä¸ç”¨å»å…³æ³¨ä¸€äº›å…¬å…±çš„ä¸šåŠ¡</li>
<li>å…¬å…±è§’è‰²å°±äº¤ç»™ä»£ç†è§’è‰²ï¼å®ç°äº†ä¸šåŠ¡çš„åˆ†å·¥ï¼</li>
<li>å…¬å…±ä¸šåŠ¡å‘ç”Ÿæ‰©å±•çš„æ—¶å€™ï¼Œæ–¹ä¾¿é›†ä¸­ç®¡ç†ï¼</li>
</ul>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>ä¸€ä¸ªçœŸå®è§’è‰²å°±ä¼šäº§ç”Ÿä¸€ä¸ªä»£ç†è§’è‰²ï¼Œä»£ç é‡ä¼šç¿»å€ï¼Œå¼€å‘æ•ˆç‡ä¼šå˜ä½</li>
</ul>
<h3 id="10-2-åŠ æ·±ç†è§£"><a href="#10-2-åŠ æ·±ç†è§£" class="headerlink" title="10.2 åŠ æ·±ç†è§£"></a>10.2 åŠ æ·±ç†è§£</h3><p>ä»£ç æ­¥éª¤ï¼š</p>
<ol>
<li>æ¥å£</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">query</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>çœŸå®è§’è‰²</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//çœŸå®è§’è‰²</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å¢åŠ äº†ä¸€ä¸ªç”¨æˆ·ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;åˆ é™¤äº†ä¸€ä¸ªç”¨æˆ·ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¿®æ”¹äº†ä¸€ä¸ªç”¨æˆ·ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">query</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æŸ¥è¯¢äº†ä¸€ä¸ªç”¨æˆ·ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>ä»£ç†è§’è‰²</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceProxy</span> <span class="keyword">implements</span> <span class="title class_">UserService</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> UserServiceImpl userService;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserService</span><span class="params">(UserServiceImpl userService)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userService = userService;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">        log(<span class="string">&quot;add&quot;</span>);</span><br><span class="line">        userService.add();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span> &#123;</span><br><span class="line">        log(<span class="string">&quot;delete&quot;</span>);</span><br><span class="line">        userService.delete();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span> &#123;</span><br><span class="line">        log(<span class="string">&quot;update&quot;</span>);</span><br><span class="line">        userService.update();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">query</span><span class="params">()</span> &#123;</span><br><span class="line">        log(<span class="string">&quot;query&quot;</span>);</span><br><span class="line">        userService.query();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">log</span><span class="params">(String msg)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;[Debug] ä½¿ç”¨äº†ä¸€ä¸ª&quot;</span>+msg+<span class="string">&quot;æ–¹æ³•&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>å®¢æˆ·ç«¯è®¿é—®ä»£ç†è§’è‰²</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">UserServiceImpl</span> <span class="variable">userService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserServiceImpl</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">UserServiceProxy</span> <span class="variable">proxy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserServiceProxy</span>();</span><br><span class="line">        proxy.setUserService(userService);</span><br><span class="line"></span><br><span class="line">        proxy.delete();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>èŠèŠAOP</p>
<img src="/2023/11/04/spring/1675405582250-be4dddeb-8ae2-496f-9614-ae79327ebccb-169909874509711.png" class title="img">

<h3 id="10-3-åŠ¨æ€ä»£ç†"><a href="#10-3-åŠ¨æ€ä»£ç†" class="headerlink" title="10.3 åŠ¨æ€ä»£ç†"></a>10.3 åŠ¨æ€ä»£ç†</h3><ul>
<li><p>åŠ¨æ€ä»£ç†å’Œé™æ€ä»£ç†è§’è‰²ä¸€æ ·</p>
</li>
<li><p>åŠ¨æ€ä»£ç†çš„ä»£ç†ç±»æ˜¯åŠ¨æ€ç”Ÿæˆçš„ï¼Œä¸æ˜¯æˆ‘ä»¬ç›´æ¥å†™å¥½çš„ï¼</p>
</li>
<li><p>åŠ¨æ€ä»£ç†åˆ†ä¸ºä¸¤å¤§ç±»ï¼šåŸºäºæ¥å£çš„åŠ¨æ€ä»£ç†ï¼ŒåŸºäºç±»çš„åŠ¨æ€ä»£ç†</p>
</li>
<li><ul>
<li>åŸºäºæ¥å£ â€” JDKåŠ¨æ€ä»£ç†ã€æˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨ã€‘</li>
<li>åŸºäºç±»ï¼šcglib</li>
<li>javaå­—èŠ‚ç å®ç°ï¼šjavassist</li>
</ul>
</li>
</ul>
<p>éœ€è¦äº†è§£ä¸¤ä¸ªç±»ï¼šProxyï¼šä»£ç†ï¼›InvocationHandlerï¼šè°ƒç”¨å¤„ç†ç¨‹åºã€‚</p>
<p>ä»£ç æ­¥éª¤ï¼š</p>
<ol>
<li>æ¥å£</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ç§Ÿæˆ¿</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Rent</span> &#123;</span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rent</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>çœŸå®è§’è‰²</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Host</span>  <span class="keyword">implements</span> <span class="title class_">Rent</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rent</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æˆ¿ä¸œè¦å‡ºç§Ÿæˆ¿å­&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>ProxyInvocationHandlerç±»</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationHandler;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Proxy;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åŠ¨æ€ä»£ç†ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProxyInvocationHandler</span> <span class="keyword">implements</span> <span class="title class_">InvocationHandler</span> &#123;</span><br><span class="line">    <span class="comment">//è¢«ä»£ç†çš„æ¥å£</span></span><br><span class="line">    <span class="keyword">private</span> Rent rent;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setRent</span><span class="params">(Rent rent)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.rent = rent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”Ÿæˆå¾—åˆ°ä»£ç†ç±»</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getProxy</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Proxy.newProxyInstance(<span class="built_in">this</span>.getClass().getClassLoader(),rent.getClass().getInterfaces(),<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¤„ç†ä»£ç†å®ä¾‹ï¼Œå¹¶è¿”å›ç»“æœ</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="comment">//åŠ¨æ€ä»£ç†çš„æœ¬è´¨ï¼Œå°±æ˜¯ä½¿ç”¨åå°„æœºåˆ¶å®ç°ï¼</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> method.invoke(rent,args);</span><br><span class="line">        seeHose();</span><br><span class="line">        fee();</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">seeHose</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸­ä»‹å¸¦ç€çœ‹æˆ¿å­ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fee</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä¸­ä»‹æ”¶å–è´¹ç”¨ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>æµ‹è¯•</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//çœŸå®è§’è‰²</span></span><br><span class="line">        <span class="type">Host</span> <span class="variable">host</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Host</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//ä»£ç†è§’è‰²ï¼šç°åœ¨æ²¡æœ‰</span></span><br><span class="line">        <span class="type">ProxyInvocationHandler</span> <span class="variable">pih</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProxyInvocationHandler</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//é€šè¿‡è°ƒç”¨ç¨‹åºå¤„ç†è§’è‰²æ¥å¤„ç†æˆ‘ä»¬è¦è°ƒç”¨çš„æ¥å£å¯¹è±¡ï¼</span></span><br><span class="line">        pih.setRent(host);</span><br><span class="line">        <span class="type">Rent</span> <span class="variable">proxy</span> <span class="operator">=</span> (Rent) pih.getProxy(); <span class="comment">//è¿™é‡Œçš„proxyå°±æ˜¯åŠ¨æ€ç”Ÿæˆçš„ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰å†™</span></span><br><span class="line">        proxy.rent();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æç‚¼å‡ºProxyInvocationHandlerä½œä¸ºå·¥å…·ç±»</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.reflect.InvocationHandler;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Proxy;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åŠ¨æ€ä»£ç†ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProxyInvocationHandler</span> <span class="keyword">implements</span> <span class="title class_">InvocationHandler</span> &#123;</span><br><span class="line">    <span class="comment">//è¢«ä»£ç†çš„æ¥å£</span></span><br><span class="line">    <span class="keyword">private</span> Object target;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setTarget</span><span class="params">(Object target)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.target = target;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç”Ÿæˆå¾—åˆ°ä»£ç†ç±»</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getProxy</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Proxy.newProxyInstance(<span class="built_in">this</span>.getClass().getClassLoader(),target.getClass().getInterfaces(),<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å¤„ç†ä»£ç†å®ä¾‹ï¼Œå¹¶è¿”å›ç»“æœ:</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        log(method.getName());</span><br><span class="line"></span><br><span class="line">        <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> method.invoke(target,args);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span>  <span class="keyword">void</span> <span class="title function_">log</span><span class="params">(String msg)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;[Debug]æ‰§è¡Œäº†&quot;</span>+msg+<span class="string">&quot;æ–¹æ³•&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åŠ¨æ€ä»£ç†çš„å¥½å¤„ï¼š</p>
<ul>
<li>å¯ä»¥ä½¿çœŸå®è§’è‰²çš„æ“ä½œæ›´åŠ çº¯ç²¹ï¼ä¸ç”¨å»å…³æ³¨ä¸€äº›å…¬å…±çš„ä¸šåŠ¡</li>
<li>å…¬å…±è§’è‰²å°±äº¤ç»™ä»£ç†è§’è‰²ï¼å®ç°äº†ä¸šåŠ¡çš„åˆ†å·¥ï¼</li>
<li>å…¬å…±ä¸šåŠ¡å‘ç”Ÿæ‰©å±•çš„æ—¶å€™ï¼Œæ–¹ä¾¿é›†ä¸­ç®¡ç†ï¼</li>
<li>ä¸€ä¸ªåŠ¨æ€ä»£ç†ç±»ä»£ç†çš„æ˜¯ä¸€ä¸ªæ¥å£ï¼Œä¸€èˆ¬å°±æ˜¯å¯¹åº”çš„ä¸€ç±»ä¸šåŠ¡</li>
<li>ä¸€ä¸ªåŠ¨æ€ä»£ç†ç±»å¯ä»¥ä»£ç†å¤šä¸ªç±»ï¼Œåªè¦æ˜¯å®ç°äº†åŒä¸€ä¸ªæ¥å£å³å¯ï¼</li>
</ul>
<h2 id="11ã€AOP"><a href="#11ã€AOP" class="headerlink" title="11ã€AOP"></a>11ã€AOP</h2><h3 id="11-1-ä»€ä¹ˆæ˜¯AOP"><a href="#11-1-ä»€ä¹ˆæ˜¯AOP" class="headerlink" title="11.1 ä»€ä¹ˆæ˜¯AOP"></a>11.1 ä»€ä¹ˆæ˜¯AOP</h3><p>AOPï¼ˆAspect Oriented Programmingï¼‰æ„ä¸ºï¼šé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œé€šè¿‡é¢„ç¼–è¯‘æ–¹å¼å’Œè¿è¡ŒæœŸåŠ¨æ€ä»£ç†å®ç°ç¨‹åºåŠŸèƒ½çš„ç»Ÿä¸€ç»´æŠ¤çš„ä¸€ç§æŠ€æœ¯ã€‚AOPæ˜¯OOPçš„å»¶ç»­ï¼Œæ˜¯è½¯ä»¶å¼€å‘ä¸­çš„ä¸€ä¸ªçƒ­ç‚¹ï¼Œä¹Ÿæ˜¯Springæ¡†æ¶ä¸­çš„ä¸€ä¸ªé‡è¦å†…å®¹ï¼Œæ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ç§è¡ç”ŸèŒƒå‹ã€‚åˆ©ç”¨AOPå¯ä»¥å¯¹ä¸šåŠ¡é€»è¾‘çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œéš”ç¦»ï¼Œä»è€Œä½¿å¾—ä¸šåŠ¡é€»è¾‘å„éƒ¨åˆ†ä¹‹é—´çš„è€¦åˆåº¦é™ä½ï¼Œæé«˜ç¨‹åºçš„å¯é‡ç”¨æ€§ï¼ŒåŒæ—¶æé«˜äº†å¼€å‘çš„æ•ˆç‡ã€‚</p>
<img src="/2023/11/04/spring/1675562937529-895f4231-54cf-4ee0-8c0e-63d9b9e798b7-169909874509710.png" class title="img">


<h3 id="11-2-AOPåœ¨Springä¸­çš„ä½œç”¨"><a href="#11-2-AOPåœ¨Springä¸­çš„ä½œç”¨" class="headerlink" title="11.2 AOPåœ¨Springä¸­çš„ä½œç”¨"></a>11.2 AOPåœ¨Springä¸­çš„ä½œç”¨</h3><p>æä¾›å£°æ˜å¼äº‹åŠ¡ï¼›å…è®¸ç”¨æˆ·è‡ªå®šä¹‰åˆ‡é¢</p>
<ul>
<li>æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼šè·¨è¶Šåº”ç”¨ç¨‹åºå¤šä¸ªæ¨¡å—çš„æ–¹æ³•æˆ–åŠŸèƒ½ã€‚å³æ˜¯ï¼Œä¸æˆ‘ä»¬ä¸šåŠ¡é€»è¾‘æ— å…³çš„ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦å…³æ³¨çš„éƒ¨åˆ†ï¼Œå°±æ˜¯æ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚å¦‚æ—¥å¿—ï¼Œå®‰å…¨ï¼Œç¼“å­˜ï¼Œäº‹åŠ¡ç­‰ç­‰â€¦</li>
<li>åˆ‡é¢ï¼ˆASPECTï¼‰ï¼šæ¨ªåˆ‡å…³æ³¨ç‚¹è¢«æ¨¡å—åŒ–çš„ç‰¹æ®Šå¯¹è±¡ã€‚å³ï¼Œå®ƒæ˜¯ä¸€ä¸ªç±»ã€‚</li>
<li>é€šçŸ¥ï¼ˆAdviceï¼‰ï¼šåˆ‡é¢å¿…é¡»è¦å®Œæˆçš„å·¥ä½œã€‚å³ï¼Œå®ƒæ˜¯ç±»ä¸­çš„ä¸€ä¸ªæ–¹æ³•ã€‚</li>
<li>ç›®æ ‡ï¼ˆTargetï¼‰ï¼šè¢«é€šçŸ¥å¯¹è±¡ã€‚</li>
<li>ä»£ç†ï¼ˆProxyï¼‰ï¼šå‘ç›®æ ‡å¯¹è±¡åº”ç”¨é€šçŸ¥ä¹‹ååˆ›å»ºçš„å¯¹è±¡ã€‚</li>
<li>åˆ‡å…¥ç‚¹ï¼ˆPointCutï¼‰ï¼šåˆ‡é¢é€šçŸ¥æ‰§è¡Œçš„â€œåœ°ç‚¹â€çš„å®šä¹‰ã€‚</li>
<li>è¿æ¥ç‚¹ï¼ˆJointPointï¼‰ï¼šä¸åˆ‡å…¥ç‚¹åŒ¹é…çš„æ‰§è¡Œç‚¹ã€‚</li>
</ul>
<img src="/2023/11/04/spring/1675563513254-8e87b01b-5dee-4355-ba29-094f496e3228-169909874509812.png" class title="img">

<p>SpringAOPä¸­ï¼Œé€šè¿‡Adviceå®šä¹‰æ¨ªåˆ‡é€»è¾‘ï¼ŒSpringä¸­æ”¯æŒ5ç§ç±»å‹çš„Adviceï¼š</p>
<img src="/2023/11/04/spring/1675563714741-70c0c98a-f152-489c-98da-e82c9768ee94-169909874509813.png" class title="img">

<img src="/2023/11/04/spring/1675563740090-cce90c8f-d29c-4199-a39f-caeda349d6bc-169909874509816.png" class title="img">

<p>å³AOPåœ¨ä¸æ”¹å˜åŸæœ‰ä»£ç çš„æƒ…å†µä¸‹ï¼Œå»å¢åŠ æ–°çš„åŠŸèƒ½ã€‚</p>
<h3 id="11-3-ä½¿ç”¨Springå®ç°AOP"><a href="#11-3-ä½¿ç”¨Springå®ç°AOP" class="headerlink" title="11.3 ä½¿ç”¨Springå®ç°AOP"></a>11.3 ä½¿ç”¨Springå®ç°AOP</h3><p>ã€é‡ç‚¹ã€‘ä½¿ç”¨AOPç»‡å…¥ï¼Œéœ€è¦å¯¼å…¥ä¸€ä¸ªä¾èµ–åŒ…ï¼</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.aspectj/aspectjweaver --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>æ–¹å¼ä¸€ï¼š</strong> ä½¿ç”¨Springçš„APIæ¥å£ã€ä¸»è¦æ˜¯SpringAPIæ¥å£å®ç°ã€‘</p>
<ol>
<li>åœ¨serviceåŒ…ä¸‹ï¼Œå®šä¹‰UserServiceä¸šåŠ¡æ¥å£å’ŒUserServiceImplå®ç°ç±»</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">select</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å¢åŠ äº†ä¸€ä¸ªç”¨æˆ·ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;åˆ é™¤äº†ä¸€ä¸ªç”¨æˆ·ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ›´æ–°äº†ä¸€ä¸ªç”¨æˆ·ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">select</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æŸ¥è¯¢äº†ä¸€ä¸ªç”¨æˆ·ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>åœ¨logåŒ…ä¸‹ï¼Œå®šä¹‰æˆ‘ä»¬çš„å¢å¼ºç±»ï¼Œä¸€ä¸ªLogå‰ç½®å¢å¼ºå’Œä¸€ä¸ªAfterLogåç½®å¢å¼ºç±»</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Log</span> <span class="keyword">implements</span> <span class="title class_">MethodBeforeAdvice</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//method: è¦æ‰§è¡Œçš„ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•</span></span><br><span class="line">    <span class="comment">//argsï¼šå‚æ•°</span></span><br><span class="line">    <span class="comment">//targetï¼šç›®æ ‡å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">(Method method, Object[] agrs, Object target)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(target.getClass().getName()+<span class="string">&quot;çš„&quot;</span>+method.getName()+<span class="string">&quot;è¢«æ‰§è¡Œäº†&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AfterLog</span> <span class="keyword">implements</span> <span class="title class_">AfterReturningAdvice</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//returnValueï¼š è¿”å›å€¼</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturning</span><span class="params">(Object returnValue, Method method, Object[] args, Object target)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ‰§è¡Œäº†&quot;</span>+method.getName()+<span class="string">&quot;æ–¹æ³•ï¼Œè¿”å›ç»“æœä¸ºï¼š&quot;</span>+returnValue);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>æœ€åå»springçš„æ–‡ä»¶ä¸­æ³¨å†Œ , å¹¶å®ç°aopåˆ‡å…¥å®ç° , æ³¨æ„å¯¼å…¥çº¦æŸï¼Œé…ç½®applicationContext.xmlæ–‡ä»¶</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//æ”¾ç½®Springå¤´éƒ¨beansæ ‡ç­¾é‡Œ</span><br><span class="line">xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;</span><br><span class="line"></span><br><span class="line">//ä¸‹é¢çš„ç›´æ¥å¤åˆ¶åˆ°xsi:schemaLocationæ ‡ç­¾ä¸­</span><br><span class="line">http://www.springframework.org/schema/aop</span><br><span class="line">https://www.springframework.org/schema/aop/spring-aop.xsd</span><br><span class="line"></span><br><span class="line">//æ–¹æ³•äºŒ</span><br><span class="line">ç›´æ¥&lt;aop: æŒ‰alt+å›è½¦ è‡ªåŠ¨å¯¼å…¥ ä½†æ˜¯xsi:schemaLocationæ ‡ç­¾ä¸­éœ€è¦æ‰‹åŠ¨å¤åˆ¶ä¿®æ”¹</span><br><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;</span><br><span class="line">  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; </span><br><span class="line">  xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;</span><br><span class="line">  xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans</span><br><span class="line">  https://www.springframework.org/schema/beans/spring-beans.xsd</span><br><span class="line">  http://www.springframework.org/schema/aop</span><br><span class="line">  https://www.springframework.org/schema/aop/spring-aop.xsd&quot;&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!--æ³¨å†Œbean--&gt;</span><br><span class="line">  &lt;bean id=&quot;userService&quot; class=&quot;com.wu.service.UserServiceImpl&quot;/&gt;</span><br><span class="line">  &lt;bean id=&quot;log&quot; class=&quot;com.wu.log.Log&quot;/&gt;</span><br><span class="line">  &lt;bean id=&quot;afterLog&quot; class=&quot;com.wu.log.AfterLog &quot;/&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!--æ–¹å¼ä¸€ï¼šä½¿ç”¨åŸç”ŸSpring APIæ¥å£--&gt;</span><br><span class="line">  &lt;!--é…ç½®aop:éœ€è¦å¯¼å…¥aopçš„çº¦æŸ--&gt;</span><br><span class="line">  &lt;aop:config&gt;</span><br><span class="line">    &lt;!--åˆ‡å…¥ç‚¹ï¼šexpression:è¡¨è¾¾å¼,execution(è¦æ‰§è¡Œçš„ä½ç½®ï¼* * * * *)--&gt;</span><br><span class="line">    &lt;aop:pointcut id=&quot;pointcut&quot; expression=&quot;execution(* com.wu.service.UserServiceImpl.*(..))&quot;/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--æ‰§è¡Œç¯ç»•å¢åŠ ï¼--&gt;</span><br><span class="line">    &lt;aop:advisor advice-ref=&quot;log&quot; pointcut-ref=&quot;pointcut&quot;/&gt;</span><br><span class="line">    &lt;aop:advisor advice-ref=&quot;afterLog&quot; pointcut-ref=&quot;pointcut&quot;/&gt;</span><br><span class="line">  &lt;/aop:config&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure>

<ol>
<li>æµ‹è¯•</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">Test</span><span class="params">()</span>&#123;</span><br><span class="line">       <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line">       <span class="comment">//åŠ¨æ€ä»£ç†çš„æ˜¯æ¥å£ï¼šæ³¨æ„ç‚¹</span></span><br><span class="line">        <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> (UserService) context.getBean(<span class="string">&quot;userService&quot;</span>);</span><br><span class="line"></span><br><span class="line">        userService.add();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ–¹å¼äºŒï¼š</strong> è‡ªå®šä¹‰ç±»æ¥å®ç°AOPã€ä¸»è¦æ˜¯åˆ‡é¢å®šä¹‰ã€‘</p>
<ol>
<li>åœ¨diyåŒ…ä¸‹å®šä¹‰è‡ªå·±çš„DiyPointCutåˆ‡å…¥ç±»</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DiyPointCut</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;======æ–¹æ³•æ‰§è¡Œå‰======&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span>  <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;======æ–¹æ³•æ‰§è¡Œå======&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>å»springä¸­é…ç½®æ–‡ä»¶</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ–¹å¼äºŒï¼šè‡ªå®šä¹‰ç±»--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;diy&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wu.diy.DiyPointCut&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--è‡ªå®šä¹‰åˆ‡é¢ï¼Œrefï¼šè¦å¼•ç”¨çš„ç±»--&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">aop:aspect</span> <span class="attr">ref</span>=<span class="string">&quot;diy&quot;</span>&gt;</span></span><br><span class="line">         <span class="comment">&lt;!--åˆ‡å…¥ç‚¹--&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;point&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.wu.service.UserServiceImpl.*(..))&quot;</span>/&gt;</span></span><br><span class="line">         <span class="comment">&lt;!--é€šçŸ¥--&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">aop:before</span> <span class="attr">method</span>=<span class="string">&quot;before&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;point&quot;</span>/&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">aop:after</span> <span class="attr">method</span>=<span class="string">&quot;after&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;point&quot;</span>/&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">aop:aspect</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>æµ‹è¯•</li>
</ol>
<p><strong>æ–¹å¼ä¸‰ï¼š</strong> ä½¿ç”¨æ³¨è§£å®ç°ï¼</p>
<ol>
<li>åœ¨annotationåŒ…ä¸‹å®šä¹‰æ³¨è§£å®ç°çš„AnnotationPointCutå¢å¼ºç±»</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Aspect</span> <span class="comment">//æ ‡æ³¨è¿™ä¸ªç±»æ˜¯ä¸€ä¸ªåˆ‡é¢</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AnnotationPointCut</span> &#123;</span><br><span class="line">    <span class="meta">@Before(&quot;execution(* com.wu.service.UserServiceImpl.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;======æ–¹æ³•æ‰§è¡Œå‰======&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@After(&quot;execution(* com.wu.service.UserServiceImpl.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;======æ–¹æ³•æ‰§è¡Œå======&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Around(&quot;execution(* com.wu.service.UserServiceImpl.*(..))&quot;)</span></span><br><span class="line">    <span class="comment">//åœ¨ç¯ç»•å¢å¼ºä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç»™å®šä¸€ä¸ªå‚æ•°ï¼Œä»£è¡¨æˆ‘ä»¬è¦è·å–å¤„ç†åˆ‡å…¥çš„ç‚¹</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">around</span><span class="params">(ProceedingJoinPoint joinPoint)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–¹æ³•ç¯ç»•å‰&quot;</span>);</span><br><span class="line">        <span class="type">Signature</span> <span class="variable">signature</span> <span class="operator">=</span> joinPoint.getSignature();<span class="comment">//è·å¾—ç­¾å</span></span><br><span class="line">        System.out.println(<span class="string">&quot;signature:&quot;</span> + signature);</span><br><span class="line">        <span class="comment">//æ‰§è¡Œæ–¹æ³•</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">proceed</span> <span class="operator">=</span> joinPoint.proceed();</span><br><span class="line">        System.out.println(<span class="string">&quot;æ–¹æ³•ç¯ç»•å&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;proceed:&quot;</span> + proceed);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>åœ¨Springé…ç½®æ–‡ä»¶ä¸­ï¼Œæ³¨å†Œbeanï¼Œå¹¶å¢åŠ æ”¯æŒæ³¨è§£çš„é…ç½®ã€‚</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ–¹å¼ä¸‰ï¼šä½¿ç”¨æ³¨è§£--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;annotationPointCut&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wu.annotation.AnnotationPointCut&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="comment">&lt;!--å¼€å¯æ³¨è§£æ”¯æŒï¼ JDK(é»˜è®¤æ˜¯ proxy-target-class=&quot;false&quot;)  cglibï¼ˆproxy-target-class=&quot;true&quot;ï¼‰--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>æµ‹è¯•</li>
</ol>
<h2 id="12ã€æ•´åˆMyBatis"><a href="#12ã€æ•´åˆMyBatis" class="headerlink" title="12ã€æ•´åˆMyBatis"></a>12ã€æ•´åˆMyBatis</h2><p>æ­¥éª¤ï¼š</p>
<ol>
<li>å¯¼å…¥ç›¸å…³jaråŒ…</li>
</ol>
<ul>
<li>junit</li>
<li>mybatis</li>
<li>mysqlæ•°æ®åº“</li>
<li>springç›¸å…³</li>
<li>aopç»‡å…¥å™¨</li>
<li>mybatis-springæ•´åˆåŒ…ã€é‡ç‚¹ã€‘åœ¨æ­¤è¿˜å¯¼å…¥äº†lombokåŒ…ã€‚</li>
<li>é…ç½®Mavené™æ€èµ„æºè¿‡æ»¤é—®é¢˜ï¼</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--junit--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--mybatis--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--mysql--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--spring-mvc--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--Springæ“ä½œæ•°æ®åº“çš„è¯ï¼Œè¿˜éœ€è¦ä¸€ä¸ªspring-jdbc--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-jdbc --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--aopç»‡å…¥--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.8.13<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--springæ•´åˆmybatis--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis-spring --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--lombok--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é™æ€èµ„æºè¿‡æ»¤--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">resources</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">resource</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">directory</span>&gt;</span>src/main/java<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">includes</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.properties<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">include</span>&gt;</span>**/*.xml<span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">includes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">filtering</span>&gt;</span>true<span class="tag">&lt;/<span class="name">filtering</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>ç¼–å†™é…ç½®æ–‡ä»¶</li>
<li>æµ‹è¯•</li>
</ol>
<h3 id="12-1-å›å¿†mybatis"><a href="#12-1-å›å¿†mybatis" class="headerlink" title="12.1 å›å¿†mybatis"></a>12.1 å›å¿†mybatis</h3><ol>
<li>ç¼–å†™pojoå®ä½“ç±»</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span>  String id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String pwd;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>ç¼–å†™å®ç°mybatisçš„é…ç½®æ–‡ä»¶</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">       <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">       <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.wu.pojo&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">               <span class="comment">&lt;!--å› ä¸ºmavenå¯¼å…¥çš„mysqlæ˜¯5.1.47çš„jaråŒ…ï¼Œæ‰€ä»¥ä¸éœ€è¦åŠ cj --&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?useSSL=false<span class="symbol">&amp;amp;</span>useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=utf8&quot;</span>/&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">               <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"></span><br><span class="line">   <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.wu.dao&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>ç¼–å†™UserMapperæ¥å£</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">selectUser</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>ç¼–å†™UserMapper.xmlæ–‡ä»¶</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.wu.mapper.UserMapper&quot;</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectUser&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;user&quot;</span>&gt;</span></span><br><span class="line">         select  * from USER ;</span><br><span class="line">     <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>æµ‹è¯•</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">Test</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">      <span class="comment">/*   String resources=&quot;mybatis-config.xml&quot;;</span></span><br><span class="line"><span class="comment">       InputStream in = Resources.getResourceAsStream(resources);</span></span><br><span class="line"><span class="comment">        SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(in);</span></span><br><span class="line"><span class="comment">        SqlSession sqlSession = sqlSessionFactory.openSession(true);</span></span><br><span class="line"><span class="comment">        UserMapper mapper = sqlSession.getMapper(UserMapper.class);</span></span><br><span class="line"><span class="comment">        List&lt;User&gt; userList = mapper.selectUser();</span></span><br><span class="line"><span class="comment">        for (User user : userList) &#123;</span></span><br><span class="line"><span class="comment">            System.out.println(user);</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">        sqlSession.close();</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//ç¬¬äºŒç§ç©æ³•</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">in1</span> <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">        List&lt;User&gt; userList1 = <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(in1).openSession(<span class="literal">true</span>).getMapper(UserMapper.class).selectUser();</span><br><span class="line">        <span class="keyword">for</span> (User user : userList1) &#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="12-2-Mybatis-Spring"><a href="#12-2-Mybatis-Spring" class="headerlink" title="12.2 Mybatis-Spring"></a>12.2 Mybatis-Spring</h3><p><strong>ä»€ä¹ˆæ˜¯MyBatis-Springï¼Ÿ</strong></p>
<p>MyBatis-Spring ä¼šå¸®åŠ©ä½ å°† MyBatis ä»£ç æ— ç¼åœ°æ•´åˆåˆ° Spring ä¸­ã€‚</p>
<p>æ–‡æ¡£é“¾æ¥ï¼š<a href="http://mybatis.org/spring/zh/index.html">http://mybatis.org/spring/zh/index.html</a></p>
<p>å¦‚æœä½¿ç”¨ Maven ä½œä¸ºæ„å»ºå·¥å…·ï¼Œä»…éœ€è¦åœ¨ pom.xml ä¸­åŠ å…¥ä»¥ä¸‹ä»£ç å³å¯ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis-spring --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>æ•´åˆå®ç°ä¸€ï¼š</strong></p>
<ol>
<li>å¼•å…¥Springé…ç½®æ–‡ä»¶spring-dao.xml</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;GBK&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>é…ç½®æ•°æ®æºæ›¿æ¢mybaitsçš„æ•°æ®æº</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--DataSourceï¼šä½¿ç”¨Springçš„æ•°æ®æºæ›¿æ¢Mybatisçš„é…ç½® c3p0 dbcp druid</span></span><br><span class="line"><span class="comment">     è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨Springæä¾›çš„JDBC : org.springframework.jdbc.datasource</span></span><br><span class="line"><span class="comment">   --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span>    </span><br><span class="line">       <span class="comment">&lt;!--å› ä¸ºmavenå¯¼å…¥çš„mysqlæ˜¯5.1.47çš„jaråŒ…ï¼Œæ‰€ä»¥ä¸éœ€è¦åŠ cj --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?useSSL=false<span class="symbol">&amp;amp;</span>useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>é…ç½®SqlSessionFactoryï¼Œå…³è”MyBatis</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--sqlSessionFactory--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span> /&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--å…³è”mybatisé…ç½®æ–‡ä»¶--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;configLocation&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mybatis-config.xml&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mapperLocations&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:com/wu/mapper/*.xml&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>æ³¨å†ŒsqlSessionTemplateï¼Œå…³è”sqlSessionFactory</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--SqlSessionTemplate:å°±æ˜¯æˆ‘ä»¬çš„sqlSession--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSession&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionTemplate&quot;</span>&gt;</span></span><br><span class="line">       <span class="comment">&lt;!--åªèƒ½ä½¿ç”¨æ„é€ å™¨æ³¨å…¥sqlSessionFactoryï¼Œå› ä¸ºå®ƒæ²¡æœ‰setæ–¹æ³•--&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">&quot;0&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>éœ€è¦UserMapperæ¥å£çš„UserMapperImpl å®ç°ç±»ï¼Œç§æœ‰åŒ–sqlSessionTemplate</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserMapperImpl</span> <span class="keyword">implements</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æˆ‘ä»¬çš„æ‰€æœ‰æ“ä½œï¼Œéƒ½ä½¿ç”¨sqlSessionæ¥æ‰§è¡Œï¼Œåœ¨åŸæ¥ï¼Œç°åœ¨éƒ½ä½¿ç”¨SqlSessionTemplate</span></span><br><span class="line">    <span class="keyword">private</span> SqlSessionTemplate sqlSession;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSqlSession</span><span class="params">(SqlSessionTemplate sqlSession)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.sqlSession = sqlSession;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">selectUser</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">        <span class="keyword">return</span> mapper.selectUser();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>å°†è‡ªå·±å†™çš„å®ç°ç±»ï¼Œæ³¨å…¥åˆ°Springé…ç½®æ–‡ä»¶ä¸­ã€‚</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userMapper&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wu.mapper.UserMapperImpl&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sqlSession&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sqlSession&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>æµ‹è¯•ä½¿ç”¨å³å¯ï¼</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">Test</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;spring-dao.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">UserMapper</span> <span class="variable">userMapper</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;userMapper&quot;</span>, UserMapper.class);</span><br><span class="line">        <span class="keyword">for</span> (User user : userMapper.selectUser()) &#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç»“æœæˆåŠŸè¾“å‡ºï¼ç°åœ¨æˆ‘ä»¬çš„Mybatisé…ç½®æ–‡ä»¶çš„çŠ¶æ€ï¼å‘ç°éƒ½å¯ä»¥è¢«Springæ•´åˆï¼</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.wu.pojo&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>åˆ†å·¥springé…ç½®æ–‡ä»¶</strong></p>
<p>æˆ‘ä»¬å¯ä»¥å°†daoæ“ä½œå’Œæ³¨å†Œå®ä½“ç±»æ“ä½œåˆ†å¼€æ¥å†™</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;GBK&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--   å°†daoæ“ä½œçš„xmlå…³è” --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;spring-dao.xml&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--æ³¨å…¥å®ä½“ç±»--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userMapper&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wu.mapper.UserMapperImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sqlSession&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sqlSession&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userMapper2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wu.mapper.UserMapperImpl2&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sqlSessionFactory&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;GBK&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--DataSourceï¼šä½¿ç”¨Springçš„æ•°æ®æºæ›¿æ¢Mybatisçš„é…ç½® c3p0 dbcp druid</span></span><br><span class="line"><span class="comment">      è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨Springæä¾›çš„JDBC : org.springframework.jdbc.datasource</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?useSSL=false<span class="symbol">&amp;amp;</span>useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--sqlSessionFactory--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å…³è”mybatisé…ç½®æ–‡ä»¶--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;configLocation&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mybatis-config.xml&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mapperLocations&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:com/wu/mapper/*.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--SqlSessionTemplate:å°±æ˜¯æˆ‘ä»¬çš„sqlSession--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSession&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionTemplate&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--åªèƒ½ä½¿ç”¨æ„é€ å™¨æ³¨å…¥sqlSessionFactoryï¼Œå› ä¸ºå®ƒæ²¡æœ‰setæ–¹æ³•--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">index</span>=<span class="string">&quot;0&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>è¿™æ ·æˆ‘ä»¬åœ¨æµ‹è¯•çš„æ—¶å€™åªéœ€è¦è°ƒç”¨ä¸“é—¨è´Ÿè´£æ³¨å†Œbeançš„xmlå°±è¡Œ</strong></p>
<p> ApplicationContext context &#x3D; new ClassPathXmlApplicationContext(â€œapplicationContext.xmlâ€);</p>
<p><strong>æ•´åˆå®ç°äºŒï¼š</strong></p>
<p>mybatis-spring1.2.3ç‰ˆä»¥ä¸Šçš„æ‰æœ‰è¿™ä¸ªï¼Œå®˜æ–¹æ–‡æ¡£æˆªå›¾ï¼š</p>
<img src="/2023/11/04/spring/1675653882691-601ccad8-5cb4-4aa1-9b12-7fb49e22bb1f-169909874509814.png" class title="img">

<p>æµ‹è¯•ï¼š</p>
<p>1.ç¼–å†™UserMapperImpl2</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserMapperImpl2</span> <span class="keyword">extends</span> <span class="title class_">SqlSessionDaoSupport</span> <span class="keyword">implements</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">selectUser</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getSqlSession().getMapper(UserMapper.class).selectUser();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.æ³¨å†Œåˆ°springçš„é…ç½®æ–‡ä»¶ä¸­</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userMapper2&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wu.mapper.UserMapperImpl2&quot;</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sqlSessionFactory&quot;</span>/&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>3.æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">Test2</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">      <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;applicationContext.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line">      <span class="type">UserMapper</span> <span class="variable">userMapper</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;userMapper2&quot;</span>, UserMapper.class);</span><br><span class="line">      List&lt;User&gt; userList = userMapper.selectUser();</span><br><span class="line">      <span class="keyword">for</span> (User user : userList) &#123;</span><br><span class="line">          System.out.println(user);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼šæ–¹å¼äºŒç»§æ‰¿äº†SqlSessionDaoSupportç±»ï¼Œå†…ç½®getSqlsession()æ–¹æ³•çš„æ“ä½œï¼Œçœå»äº†æ–¹æ³•ä¸€ä¸­çš„å®ä½“ç±»ç§æœ‰åŒ–sqlSessionTemplateå’Œspringé…ç½®ä¸­çš„æ³¨å†ŒSqlsession beançš„æ“ä½œ</p>
<img src="/2023/11/04/spring/1675656656446-03749ba9-8352-499f-a0fa-d76edaa93b33-169909874509815.png" class title="img">

<p>å†™å®Œå®ä½“ç±»ï¼Œå»springæ³¨å†Œbeanï¼Œä¸ç”¨å†™æ³¨å†Œsessionçš„æ“ä½œï¼Œå› ä¸ºå½“å‰bean setçš„å€¼å¯¹è±¡å°±æ˜¯sqlSessionFactory</p>
<img src="/2023/11/04/spring/1675656498855-3514a6c0-7856-4624-8a71-c29973396e4e-169909874509817.png" class title="img">

<h2 id="13ã€å£°æ˜å¼äº‹åŠ¡"><a href="#13ã€å£°æ˜å¼äº‹åŠ¡" class="headerlink" title="13ã€å£°æ˜å¼äº‹åŠ¡"></a>13ã€å£°æ˜å¼äº‹åŠ¡</h2><h3 id="13-1-å›é¡¾äº‹åŠ¡"><a href="#13-1-å›é¡¾äº‹åŠ¡" class="headerlink" title="13.1 å›é¡¾äº‹åŠ¡"></a>13.1 å›é¡¾äº‹åŠ¡</h3><ul>
<li>æŠŠä¸€ç»„ä¸šåŠ¡å½“æˆä¸€ä¸ªä¸šåŠ¡æ¥åšï¼›è¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥ï¼</li>
<li>äº‹åŠ¡åœ¨é¡¹ç›®å¼€å‘ä¸­ï¼Œååˆ†çš„é‡è¦ï¼Œæ¶‰åŠåˆ°æ•°æ®çš„ä¸€è‡´æ€§é—®é¢˜ï¼Œä¸èƒ½é©¬è™ï¼</li>
<li>ç¡®ä¿å®Œæ•´æ€§å’Œä¸€è‡´æ€§ã€‚</li>
</ul>
<p><strong>äº‹åŠ¡ACIDåŸåˆ™ï¼š</strong></p>
<ul>
<li><p>åŸå­æ€§ï¼ˆatomicityï¼‰</p>
</li>
<li><ul>
<li>äº‹åŠ¡æ˜¯åŸå­æ€§æ“ä½œï¼Œç”±ä¸€ç³»åˆ—åŠ¨ä½œç»„æˆï¼Œäº‹åŠ¡çš„åŸå­æ€§ç¡®ä¿åŠ¨ä½œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå®Œå…¨ä¸èµ·ä½œç”¨ã€‚</li>
</ul>
</li>
<li><p>ä¸€è‡´æ€§ï¼ˆconsistencyï¼‰</p>
</li>
<li><ul>
<li>ä¸€æ—¦æ‰€æœ‰äº‹åŠ¡åŠ¨ä½œå®Œæˆï¼Œäº‹åŠ¡å°±è¦è¢«æäº¤ã€‚æ•°æ®å’Œèµ„æºå¤„äºä¸€ç§æ»¡è¶³ä¸šåŠ¡è§„åˆ™çš„ä¸€è‡´æ€§çŠ¶æ€ä¸­ã€‚</li>
</ul>
</li>
<li><p>éš”ç¦»æ€§ï¼ˆisolationï¼‰</p>
</li>
<li><ul>
<li>å¯èƒ½å¤šä¸ªäº‹åŠ¡ä¼šåŒæ—¶å¤„ç†ç›¸åŒçš„æ•°æ®ï¼Œå› æ­¤æ¯ä¸ªäº‹åŠ¡éƒ½åº”è¯¥ä¸å…¶ä»–äº‹åŠ¡éš”ç¦»å¼€æ¥ï¼Œé˜²æ­¢æ•°æ®æŸåã€‚</li>
</ul>
</li>
<li><p>æŒä¹…æ€§ï¼ˆdurabilityï¼‰</p>
</li>
<li><ul>
<li>äº‹åŠ¡ä¸€æ—¦å®Œæˆï¼Œæ— è®ºç³»ç»Ÿå‘ç”Ÿä»€ä¹ˆé”™è¯¯ï¼Œç»“æœéƒ½ä¸ä¼šå—åˆ°å½±å“ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œäº‹åŠ¡çš„ç»“æœè¢«å†™åˆ°æŒä¹…åŒ–å­˜å‚¨å™¨ä¸­ã€‚</li>
</ul>
</li>
</ul>
<p><strong>æµ‹è¯•ï¼š</strong></p>
<p>1.å°†ä¸Šé¢çš„ä»£ç æ‹·è´åˆ°ä¸€ä¸ªæ–°é¡¹ç›®ä¸­<br>åœ¨ä¹‹å‰çš„æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬ç»™userMapperæ¥å£æ–°å¢ä¸¤ä¸ªæ–¹æ³•ï¼Œåˆ é™¤å’Œå¢åŠ ç”¨æˆ·ï¼›</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ·»åŠ ä¸€ä¸ªç”¨æˆ·</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">addUser</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ ¹æ®idåˆ é™¤ç”¨æˆ·</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">deleteUser</span><span class="params">(<span class="type">int</span> id)</span>;</span><br></pre></td></tr></table></figure>

<p>2.UserMapperæ–‡ä»¶ï¼Œæˆ‘ä»¬æ•…æ„æŠŠ deletes å†™é”™ï¼Œæµ‹è¯•ï¼</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.wu.pojo.User&quot;</span>&gt;</span></span><br><span class="line">      insert into user (id,name,pwd) values (#&#123;id&#125;,#&#123;name&#125;,#&#123;pwd&#125;)</span><br><span class="line">  <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">      deletes from user where id = #&#123;id&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>3.ç¼–å†™æ¥å£çš„UserMapperImplå®ç°ç±»ï¼Œåœ¨å®ç°ç±»ä¸­ï¼Œæˆ‘ä»¬å»æ“ä½œä¸€æ³¢</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserMapperImpl</span> <span class="keyword">extends</span> <span class="title class_">SqlSessionDaoSupport</span> <span class="keyword">implements</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¢åŠ ä¸€äº›æ“ä½œ</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">selectUser</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="number">10</span>, <span class="string">&quot;baby&quot;</span>, <span class="string">&quot;666666&quot;</span>);</span><br><span class="line">        <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> getSqlSession().getMapper(UserMapper.class);</span><br><span class="line">        mapper.addUser(user);</span><br><span class="line">        mapper.deleteUser(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> mapper.selectUser();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ–°å¢</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">addUser</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getSqlSession().getMapper(UserMapper.class).addUser(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ é™¤</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">deleteUser</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> getSqlSession().getMapper(UserMapper.class).deleteUser(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4.é…ç½®springæ ¸å¿ƒxml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;GBK&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--å½“å‰çš„xmlï¼Œå€¼è´Ÿè´£springçš„beanæ³¨å…¥--&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">import</span> <span class="attr">resource</span>=<span class="string">&quot;spring-dao.xml&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--æ³¨å†Œbeanå®ä½“ç±»--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;userMapper&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.wu.mapper.UserMapperImpl&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;sqlSessionFactory&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;GBK&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">        https://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       &quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--DataSourceï¼šä½¿ç”¨Springçš„æ•°æ®æºæ›¿æ¢Mybatisçš„é…ç½® c3p0 dbcp druid</span></span><br><span class="line"><span class="comment">      è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨Springæä¾›çš„JDBC : org.springframework.jdbc.datasource</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?useSSL=false<span class="symbol">&amp;amp;</span>useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--sqlSessionFactory--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--å…³è”mybatisé…ç½®æ–‡ä»¶--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;configLocation&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:mybatis-config.xml&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mapperLocations&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:com/wu/mapper/*.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--UserMapperImplç»§æ‰¿äº†SqlSessionDaoSupportç±»ï¼Œå†…ç½®æœ‰getSqlSession()æ–¹æ³•ï¼Œæ‰€ä»¥ä¸‹é¢çš„æ³¨å†Œbeanå¯ä»¥ä¸ç”¨--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--SqlSessionTemplate:å°±æ˜¯æˆ‘ä»¬çš„sqlSession--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;bean id=&quot;sqlSession&quot; class=&quot;org.mybatis.spring.SqlSessionTemplate&quot;&gt;</span></span><br><span class="line"><span class="comment">        &amp;lt;!&amp;ndash;åªèƒ½ä½¿ç”¨æ„é€ å™¨æ³¨å…¥sqlSessionFactoryï¼Œå› ä¸ºå®ƒæ²¡æœ‰setæ–¹æ³•&amp;ndash;&amp;gt;</span></span><br><span class="line"><span class="comment">        &lt;constructor-arg index=&quot;0&quot; ref=&quot;sqlSessionFactory&quot; /&gt;</span></span><br><span class="line"><span class="comment">    &lt;/bean&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>5.æµ‹è¯•</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;xiaowu.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">UserMapper</span> <span class="variable">userMapper</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;userMapper&quot;</span>, UserMapper.class);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (User user : userMapper.selectUser()) &#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æŠ¥é”™ï¼šsqlå¼‚å¸¸ï¼Œdeleteå†™é”™äº†</p>
<p>ç»“æœ ï¼šæ•°æ®åº“ç»“æœæ˜¾ç¤ºæ’å…¥æˆåŠŸï¼</p>
<p>æ²¡æœ‰è¿›è¡Œäº‹åŠ¡çš„ç®¡ç†ï¼›æˆ‘ä»¬æƒ³è®©ä»–ä»¬éƒ½æˆåŠŸæ‰æˆåŠŸï¼Œæœ‰ä¸€ä¸ªå¤±è´¥ï¼Œå°±éƒ½å¤±è´¥ï¼Œæˆ‘ä»¬å°±åº”è¯¥éœ€è¦äº‹åŠ¡ï¼</p>
<p>ä»¥å‰æˆ‘ä»¬éƒ½éœ€è¦è‡ªå·±æ‰‹åŠ¨ç®¡ç†äº‹åŠ¡ï¼Œååˆ†éº»çƒ¦ï¼</p>
<p>ä½†æ˜¯Springç»™æˆ‘ä»¬æä¾›äº†äº‹åŠ¡ç®¡ç†ï¼Œæˆ‘ä»¬åªéœ€è¦é…ç½®å³å¯ï¼›</p>
<h3 id="13-2-Springä¸­çš„äº‹åŠ¡ç®¡ç†"><a href="#13-2-Springä¸­çš„äº‹åŠ¡ç®¡ç†" class="headerlink" title="13.2 Springä¸­çš„äº‹åŠ¡ç®¡ç†"></a>13.2 Springä¸­çš„äº‹åŠ¡ç®¡ç†</h3><p>Springåœ¨ä¸åŒçš„äº‹åŠ¡ç®¡ç†APIä¹‹ä¸Šå®šä¹‰äº†ä¸€ä¸ªæŠ½è±¡å±‚ï¼Œä½¿å¾—å¼€å‘äººå‘˜ä¸å¿…äº†è§£åº•å±‚çš„äº‹åŠ¡ç®¡ç†APIå°±å¯ä»¥ä½¿ç”¨Springçš„äº‹åŠ¡ç®¡ç†æœºåˆ¶ã€‚Springæ”¯æŒç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†å’Œå£°æ˜å¼çš„äº‹åŠ¡ç®¡ç†ã€‚</p>
<p><strong>ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†</strong></p>
<ul>
<li>å°†äº‹åŠ¡ç®¡ç†ä»£ç åµŒåˆ°ä¸šåŠ¡æ–¹æ³•ä¸­æ¥æ§åˆ¶äº‹åŠ¡çš„æäº¤å’Œå›æ»š</li>
<li>ç¼ºç‚¹ï¼šå¿…é¡»åœ¨æ¯ä¸ªäº‹åŠ¡æ“ä½œä¸šåŠ¡é€»è¾‘ä¸­åŒ…å«é¢å¤–çš„äº‹åŠ¡ç®¡ç†ä»£ç </li>
</ul>
<p><strong>å£°æ˜å¼äº‹åŠ¡ç®¡ç†</strong></p>
<ul>
<li>ä¸€èˆ¬æƒ…å†µä¸‹æ¯”ç¼–ç¨‹å¼äº‹åŠ¡å¥½ç”¨ã€‚</li>
<li>å°†äº‹åŠ¡ç®¡ç†ä»£ç ä»ä¸šåŠ¡æ–¹æ³•ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œä»¥å£°æ˜çš„æ–¹å¼æ¥å®ç°äº‹åŠ¡ç®¡ç†ã€‚</li>
<li>å°†äº‹åŠ¡ç®¡ç†ä½œä¸ºæ¨ªåˆ‡å…³æ³¨ç‚¹ï¼Œé€šè¿‡aopæ–¹æ³•æ¨¡å—åŒ–ã€‚Springä¸­é€šè¿‡Spring AOPæ¡†æ¶æ”¯æŒå£°æ˜å¼äº‹åŠ¡ç®¡ç†ã€‚</li>
</ul>
<p><strong>1. ä½¿ç”¨Springç®¡ç†äº‹åŠ¡ï¼Œæ³¨æ„å¤´æ–‡ä»¶çš„çº¦æŸå¯¼å…¥ : tx</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;</span><br><span class="line"></span><br><span class="line">http://www.springframework.org/schema/tx</span><br><span class="line">http://www.springframework.org/schema/tx/spring-tx.xsd&quot;&gt;</span><br></pre></td></tr></table></figure>

<p><strong>2. JDBCäº‹åŠ¡</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>3. é…ç½®å¥½äº‹åŠ¡ç®¡ç†å™¨åæˆ‘ä»¬éœ€è¦å»é…ç½®äº‹åŠ¡çš„é€šçŸ¥</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--ç»“åˆAOPå®ç°äº‹åŠ¡çš„ç»‡å…¥--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--é…ç½®äº‹åŠ¡é€šçŸ¥--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">&quot;txAdvice&quot;</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--ç»™é‚£äº›æ–¹æ³•é…ç½®äº‹åŠ¡--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--é…ç½®äº‹åŠ¡çš„ä¼ æ’­ç‰¹æ€§ï¼š propagationï¼š--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;add&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;delete&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;update&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;query&quot;</span> <span class="attr">read-only</span>=<span class="string">&quot;true&quot;</span>/&gt;</span><span class="comment">&lt;!--å°†å¸¦queryçš„æ–¹æ³•è®¾ç½®ä¸ºåªè¯»ï¼Œä¸èƒ½å¯¹æ•°æ®åº“å®ç°å¢åˆ æ”¹çš„æ“ä½œ--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;*&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>springäº‹åŠ¡ä¼ æ’­ç‰¹æ€§ï¼š</strong></p>
<p>äº‹åŠ¡ä¼ æ’­è¡Œä¸ºå°±æ˜¯å¤šä¸ªäº‹åŠ¡æ–¹æ³•ç›¸äº’è°ƒç”¨æ—¶ï¼Œäº‹åŠ¡å¦‚ä½•åœ¨è¿™äº›æ–¹æ³•é—´ä¼ æ’­ã€‚springæ”¯æŒ7ç§äº‹åŠ¡ä¼ æ’­è¡Œä¸ºï¼š</p>
<ul>
<li>propagation_requierdï¼šå¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œå°±æ–°å»ºä¸€ä¸ªäº‹åŠ¡ï¼Œå¦‚æœå·²å­˜åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ï¼ŒåŠ å…¥åˆ°è¿™ä¸ªäº‹åŠ¡ä¸­ï¼Œè¿™æ˜¯æœ€å¸¸è§çš„é€‰æ‹©ã€‚</li>
<li>propagation_supportsï¼šæ”¯æŒå½“å‰äº‹åŠ¡ï¼Œå¦‚æœæ²¡æœ‰å½“å‰äº‹åŠ¡ï¼Œå°±ä»¥éäº‹åŠ¡æ–¹æ³•æ‰§è¡Œã€‚</li>
<li>propagation_mandatoryï¼šä½¿ç”¨å½“å‰äº‹åŠ¡ï¼Œå¦‚æœæ²¡æœ‰å½“å‰äº‹åŠ¡ï¼Œå°±æŠ›å‡ºå¼‚å¸¸ã€‚</li>
<li>propagation_required_newï¼šæ–°å»ºäº‹åŠ¡ï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼ŒæŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·ã€‚</li>
<li>propagation_not_supportedï¼šä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œæ“ä½œï¼Œå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œå°±æŠŠå½“å‰äº‹åŠ¡æŒ‚èµ·ã€‚</li>
<li>propagation_neverï¼šä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œæ“ä½œï¼Œå¦‚æœå½“å‰äº‹åŠ¡å­˜åœ¨åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚</li>
<li>propagation_nestedï¼šå¦‚æœå½“å‰å­˜åœ¨äº‹åŠ¡ï¼Œåˆ™åœ¨åµŒå¥—äº‹åŠ¡å†…æ‰§è¡Œã€‚å¦‚æœå½“å‰æ²¡æœ‰äº‹åŠ¡ï¼Œåˆ™æ‰§è¡Œä¸propagation_requiredç±»ä¼¼çš„æ“ä½œã€‚</li>
</ul>
<p>Spring é»˜è®¤çš„äº‹åŠ¡ä¼ æ’­è¡Œä¸ºæ˜¯ propagation_REQUIREDï¼Œå®ƒé€‚åˆäºç»å¤§å¤šæ•°çš„æƒ…å†µã€‚</p>
<p>å°±å¥½æ¯”ï¼Œæˆ‘ä»¬åˆšæ‰çš„å‡ ä¸ªæ–¹æ³•å­˜åœ¨è°ƒç”¨ï¼Œæ‰€ä»¥ä¼šè¢«æ”¾åœ¨ä¸€ç»„äº‹åŠ¡å½“ä¸­ï¼</p>
<p><strong>4. é…ç½®AOPï¼Œå¯¼å…¥aopçš„å¤´æ–‡ä»¶</strong></p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--é…ç½®äº‹åŠ¡åˆ‡å…¥--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;txPointCut&quot;</span> <span class="attr">expression</span>=<span class="string">&quot;execution(* com.kuang.mapper.*.*(..))&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;txAdvice&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;txPointCut&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>5. åˆ æ‰åˆšæ‰æ’å…¥çš„æ•°æ®ï¼Œå†æ¬¡æµ‹è¯•ï¼</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassPathXmlApplicationContext</span>(<span class="string">&quot;xiaowu.xml&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">UserMapper</span> <span class="variable">userMapper</span> <span class="operator">=</span> context.getBean(<span class="string">&quot;userMapper&quot;</span>, UserMapper.class);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (User user : userMapper.selectUser()) &#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ€è€ƒï¼š</strong></p>
<p>ä¸ºä»€ä¹ˆéœ€è¦äº‹åŠ¡ï¼Ÿ</p>
<ul>
<li>å¦‚æœä¸é…ç½®äº‹åŠ¡ï¼Œå¯èƒ½å­˜åœ¨æ•°æ®æäº¤ä¸ä¸€è‡´çš„æƒ…å†µï¼›</li>
<li>å¦‚æœæˆ‘ä»¬ä¸åœ¨Springä¸­å»é…ç½®å£°æ˜å¼äº‹åŠ¡ï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨ä»£ç ä¸­æ‰‹åŠ¨é…ç½®äº‹åŠ¡ï¼</li>
<li>äº‹åŠ¡åœ¨é¡¹ç›®çš„å¼€å‘ä¸­ååˆ†é‡è¦ï¼Œæ¶‰åŠåˆ°æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§é—®é¢˜ï¼Œä¸å®¹é©¬è™ï¼</li>
</ul>
]]></content>
      <categories>
        <category>javaæ¡†æ¶</category>
      </categories>
      <tags>
        <tag>java</tag>
        <tag>åç«¯</tag>
        <tag>springæ¡†æ¶</tag>
      </tags>
  </entry>
  <entry>
    <title>mybatis</title>
    <url>/2023/11/04/mybatis/</url>
    <content><![CDATA[<img src="/2023/11/04/mybatis/log.png" class title="log">

<span id="more"></span>

<h3 id="1-1ã€ä»€ä¹ˆæ˜¯Mybatis"><a href="#1-1ã€ä»€ä¹ˆæ˜¯Mybatis" class="headerlink" title="1.1ã€ä»€ä¹ˆæ˜¯Mybatis"></a>1.1ã€ä»€ä¹ˆæ˜¯Mybatis</h3><ul>
<li><p>MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„<strong>æŒä¹…å±‚æ¡†æ¶!</strong></p>
</li>
<li><p>å®ƒæ”¯æŒå®šåˆ¶åŒ– SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„ã€‚</p>
</li>
<li><p>MyBatis é¿å…äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç å’Œæ‰‹åŠ¨è®¾ç½®å‚æ•°ä»¥åŠè·å–ç»“æœé›†ã€‚</p>
</li>
<li><p>MyBatis å¯ä»¥ä½¿ç”¨ç®€å•çš„ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸç”Ÿç±»å‹ã€æ¥å£å’Œ Java çš„ POJOï¼ˆPlain Old Java Objectsï¼Œæ™®é€šè€å¼ Java å¯¹è±¡ï¼‰ä¸ºæ•°æ®åº“ä¸­çš„è®°å½•ã€‚</p>
</li>
<li><p>MyBatis æœ¬æ˜¯<a href="https://baike.baidu.com/item/apache/6265">apache</a>çš„ä¸€ä¸ªå¼€æºé¡¹ç›®<a href="https://baike.baidu.com/item/iBatis">iBatis</a>, 2010å¹´è¿™ä¸ªé¡¹ç›®ç”±apache software foundation è¿ç§»åˆ°äº†google codeï¼Œå¹¶ä¸”æ”¹åä¸ºMyBatis ã€‚</p>
</li>
<li><p>2013å¹´11æœˆè¿ç§»åˆ°Githubã€‚</p>
</li>
</ul>
<p>å¦‚ä½•è·å¾—Mybatisï¼Ÿ</p>
<ul>
<li>mavenä»“åº“ï¼š</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Github ï¼š <a href="https://github.com/mybatis/mybatis-3/releases">https://github.com/mybatis/mybatis-3/releases</a></li>
<li>ä¸­æ–‡æ–‡æ¡£ï¼š<a href="https://mybatis.org/mybatis-3/zh/index.html">https://mybatis.org/mybatis-3/zh/index.html</a></li>
</ul>
<h3 id="1-2ã€æŒä¹…åŒ–"><a href="#1-2ã€æŒä¹…åŒ–" class="headerlink" title="1.2ã€æŒä¹…åŒ–"></a>1.2ã€æŒä¹…åŒ–</h3><p>æ•°æ®æŒä¹…åŒ–</p>
<ul>
<li>æŒä¹…åŒ–å°±æ˜¯å°†ç¨‹åºçš„æ•°æ®åœ¨æŒä¹…çŠ¶æ€å’Œç¬æ—¶çŠ¶æ€è½¬åŒ–çš„è¿‡ç¨‹</li>
<li>å†…å­˜ï¼š<strong>æ–­ç”µå³å¤±</strong></li>
<li>æ•°æ®åº“(Jdbc)ï¼Œioæ–‡ä»¶æŒä¹…åŒ–ã€‚</li>
<li>ç”Ÿæ´»ï¼šå†·è—. ç½å¤´</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦éœ€è¦æŒä¹…åŒ–ï¼Ÿ</strong></p>
<ul>
<li>æœ‰ä¸€äº›å¯¹è±¡ï¼Œä¸èƒ½è®©ä»–ä¸¢æ‰ã€‚</li>
<li>å†…å­˜å¤ªè´µäº†</li>
</ul>
<h3 id="1-3ã€æŒä¹…å±‚"><a href="#1-3ã€æŒä¹…å±‚" class="headerlink" title="1.3ã€æŒä¹…å±‚"></a>1.3ã€æŒä¹…å±‚</h3><p>Daoå±‚ï¼ŒServiceå±‚ï¼ŒControllerå±‚â€¦.</p>
<ul>
<li>å®ŒæˆæŒä¹…åŒ–å·¥ä½œçš„ä»£ç å—</li>
<li>å±‚ç•Œé™ååˆ†æ˜æ˜¾ã€‚</li>
</ul>
<h3 id="1-4-ä¸ºä»€ä¹ˆéœ€è¦Mybatisï¼Ÿ"><a href="#1-4-ä¸ºä»€ä¹ˆéœ€è¦Mybatisï¼Ÿ" class="headerlink" title="1.4 ä¸ºä»€ä¹ˆéœ€è¦Mybatisï¼Ÿ"></a>1.4 ä¸ºä»€ä¹ˆéœ€è¦Mybatisï¼Ÿ</h3><ul>
<li><p>å¸®åŠ©ç¨‹åºçŒ¿å°†æ•°æ®å­˜å…¥åˆ°æ•°æ®åº“ä¸­ã€‚</p>
</li>
<li><p>æ–¹ä¾¿</p>
</li>
<li><p>ä¼ ç»Ÿçš„JDBCä»£ç å¤ªå¤æ‚äº†ã€‚ç®€åŒ–ã€‚æ¡†æ¶ã€‚è‡ªåŠ¨åŒ–ã€‚</p>
</li>
<li><p>ä¸ç”¨Mybatisä¹Ÿå¯ä»¥ã€‚æ›´å®¹æ˜“ä¸Šæ‰‹ã€‚ <strong>æŠ€æœ¯æ²¡æœ‰é«˜ä½ä¹‹åˆ†</strong></p>
</li>
<li><p>ä¼˜ç‚¹ï¼š</p>
</li>
<li><ul>
<li>ç®€å•æ˜“å­¦</li>
<li>çµæ´»</li>
<li>sqlå’Œä»£ç çš„åˆ†ç¦»ï¼Œæé«˜äº†å¯ç»´æŠ¤æ€§ã€‚</li>
<li>æä¾›æ˜ å°„æ ‡ç­¾ï¼Œæ”¯æŒå¯¹è±¡ä¸æ•°æ®åº“çš„ormå­—æ®µå…³ç³»æ˜ å°„</li>
<li>æä¾›å¯¹è±¡å…³ç³»æ˜ å°„æ ‡ç­¾ï¼Œæ”¯æŒå¯¹è±¡å…³ç³»ç»„å»ºç»´æŠ¤</li>
<li>æä¾›xmlæ ‡ç­¾ï¼Œæ”¯æŒç¼–å†™åŠ¨æ€sqlã€‚</li>
</ul>
</li>
</ul>
<p><strong>æœ€é‡è¦çš„ä¸€ç‚¹ï¼šä½¿ç”¨çš„äººå¤šï¼</strong></p>
<p>Spring SpringMVC SpringBoot</p>
<p>æ€è·¯ï¼šæ­å»ºç¯å¢ƒâ€“&gt;å¯¼å…¥Mybatisâ€“&gt;ç¼–å†™ä»£ç â€“&gt;æµ‹è¯•ï¼</p>
<h2 id="2ã€ç¬¬ä¸€ä¸ªmybatisç¨‹åº"><a href="#2ã€ç¬¬ä¸€ä¸ªmybatisç¨‹åº" class="headerlink" title="2ã€ç¬¬ä¸€ä¸ªmybatisç¨‹åº"></a>2ã€ç¬¬ä¸€ä¸ªmybatisç¨‹åº</h2><h3 id="2-1ã€æ­å»ºç¯å¢ƒ"><a href="#2-1ã€æ­å»ºç¯å¢ƒ" class="headerlink" title="2.1ã€æ­å»ºç¯å¢ƒ"></a>2.1ã€æ­å»ºç¯å¢ƒ</h3><p>æ­å»ºæ•°æ®åº“</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE `mybatis`;</span><br><span class="line"></span><br><span class="line">USE `mybatis`;</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `<span class="keyword">user</span>`(</span><br><span class="line">  `id` <span class="type">INT</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">  `name` <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `pwd` <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span></span><br><span class="line">)ENGINE<span class="operator">=</span>INNODB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `<span class="keyword">user</span>`(`id`,`name`,`pwd`) <span class="keyword">VALUES</span> </span><br><span class="line">(<span class="number">1</span>,<span class="string">&#x27;å°å´&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>),</span><br><span class="line">(<span class="number">2</span>,<span class="string">&#x27;å¼ ä¸‰&#x27;</span>,<span class="string">&#x27;123456&#x27;</span>),</span><br><span class="line">(<span class="number">3</span>,<span class="string">&#x27;æå››&#x27;</span>,<span class="string">&#x27;123890&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>æ–°å»ºé¡¹ç›®</p>
<ol>
<li>æ–°å»ºä¸€ä¸ªæ™®é€šçš„mavené¡¹ç›®</li>
<li>åˆ é™¤srcç›®å½•</li>
<li>å¯¼å…¥mavenä¾èµ–</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¯¼å…¥ä¾èµ–--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--mysqlé©±åŠ¨--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>8.0.27<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--mybatis--&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--junit--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-2ã€åˆ›å»ºä¸€ä¸ªæ¨¡å—"><a href="#2-2ã€åˆ›å»ºä¸€ä¸ªæ¨¡å—" class="headerlink" title="2.2ã€åˆ›å»ºä¸€ä¸ªæ¨¡å—"></a>2.2ã€åˆ›å»ºä¸€ä¸ªæ¨¡å—</h3><ul>
<li>ç¼–å†™mybatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--configurationæ ¸å¿ƒé…ç½®æ–‡ä»¶--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis?useSSL=true<span class="symbol">&amp;amp;</span>useUnicode=true<span class="symbol">&amp;amp;</span>characterEncoding=UTF-8&quot;</span>/&gt;</span>	</span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>ç¼–å†™mybatiså·¥å…·ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//sqlSessionFactory --&gt; sqlSession</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisUtils</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SqlSessionFactory sqlSessionFactory;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//ä½¿ç”¨Mybatisç¬¬ä¸€æ­¥ï¼šè·å–sqlSessionFactoryå¯¹è±¡</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">resource</span> <span class="operator">=</span> <span class="string">&quot;mybatis-config.xml&quot;</span>;</span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> Resources.getResourceAsStream(resource);</span><br><span class="line">            sqlSessionFactory = <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(inputStream);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æ—¢ç„¶æœ‰äº† SqlSessionFactoryï¼Œé¡¾åæ€ä¹‰ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä»ä¸­è·å¾— SqlSession çš„å®ä¾‹äº†ã€‚</span></span><br><span class="line">    <span class="comment">// SqlSession å®Œå…¨åŒ…å«äº†é¢å‘æ•°æ®åº“æ‰§è¡Œ SQL å‘½ä»¤æ‰€éœ€çš„æ‰€æœ‰æ–¹æ³•ã€‚</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SqlSession  <span class="title function_">getSqlSession</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sqlSessionFactory.openSession();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-3ã€ç¼–å†™ä»£ç "><a href="#2-3ã€ç¼–å†™ä»£ç " class="headerlink" title="2.3ã€ç¼–å†™ä»£ç "></a>2.3ã€ç¼–å†™ä»£ç </h3><ul>
<li>å®ä½“ç±»</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wu.pojo;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®ä½“ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String pwd;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(<span class="type">int</span> id, String name, String pwd)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.pwd = pwd;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(<span class="type">int</span> id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPwd</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> pwd;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPwd</span><span class="params">(String pwd)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.pwd = pwd;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, pwd=&#x27;&quot;</span> + pwd + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Daoæ¥å£</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    List&lt;User&gt; <span class="title function_">getUserList</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>æ¥å£å®ç°ç±»ç”±åŸæ¥çš„UserDaoImplè½¬å˜ä¸ºä¸€ä¸ª Mapperé…ç½®æ–‡ä»¶.</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line">        <span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">                <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">                <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--namespace=ç»‘å®šä¸€ä¸ªå¯¹åº”çš„Dao/Mapperæ¥å£--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.wu.dao.UserDao&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--selectæŸ¥è¯¢è¯­å¥--&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserList&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.wu.pojo.User&quot;</span>&gt;</span></span><br><span class="line">       select * from mybatis.user</span><br><span class="line">   <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-4ã€æµ‹è¯•"><a href="#2-4ã€æµ‹è¯•" class="headerlink" title="2.4ã€æµ‹è¯•"></a>2.4ã€æµ‹è¯•</h3><p>æ³¨æ„ç‚¹ï¼š</p>
<p>org.apache.ibatis.binding.BindingException: Type interface com.kuang.dao.UserDao is not known to the MapperRegistry.</p>
<p><strong>MapperRegistryæ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<p>æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œ mappers</p>
<ul>
<li>junitæµ‹è¯•</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">//ç¬¬ä¸€æ­¥ï¼šè·å¾—SqlSessionå¯¹è±¡</span></span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtils.getSqlSession();</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æ–¹å¼ä¸€ï¼šgetMapper</span></span><br><span class="line">    <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> sqlSession.getMapper(UserDao.class);</span><br><span class="line">    List&lt;User&gt; userList = userDao.getUserList();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (User user : userList) &#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//å…³é—­SqlSession</span></span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½ ä»¬å¯ä»¥èƒ½ä¼šé‡åˆ°çš„é—®é¢˜ï¼š</p>
<ol>
<li>é…ç½®æ–‡ä»¶æ²¡æœ‰æ³¨å†Œ</li>
<li>ç»‘å®šæ¥å£é”™è¯¯ã€‚</li>
<li>æ–¹æ³•åä¸å¯¹</li>
<li>è¿”å›ç±»å‹ä¸å¯¹</li>
<li>Mavenå¯¼å‡ºèµ„æºé—®é¢˜</li>
</ol>
<h2 id="3ã€CRUD"><a href="#3ã€CRUD" class="headerlink" title="3ã€CRUD"></a>3ã€CRUD</h2><h3 id="1ã€namespace"><a href="#1ã€namespace" class="headerlink" title="1ã€namespace"></a>1ã€namespace</h3><p>namespaceä¸­çš„åŒ…åè¦å’Œ Dao&#x2F;mapper æ¥å£çš„åŒ…åä¸€è‡´ï¼</p>
<h3 id="2ã€select"><a href="#2ã€select" class="headerlink" title="2ã€select"></a>2ã€select</h3><p>é€‰æ‹©ï¼ŒæŸ¥è¯¢è¯­å¥;</p>
<ul>
<li>id : å°±æ˜¯å¯¹åº”çš„namespaceä¸­çš„æ–¹æ³•åï¼›</li>
<li>resultTypeï¼šSqlè¯­å¥æ‰§è¡Œçš„è¿”å›å€¼ï¼</li>
<li>parameterType ï¼š å‚æ•°ç±»å‹ï¼</li>
</ul>
<ol>
<li>ç¼–å†™æ¥å£</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ ¹æ®IDæŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line">User <span class="title function_">getUserById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br></pre></td></tr></table></figure>

<ol>
<li>ç¼–å†™å¯¹åº”çš„mapperä¸­çš„sqlè¯­å¥</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserById&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.wu.pojo.User&quot;</span>&gt;</span></span><br><span class="line">  select * from mybatis.user where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>æµ‹è¯•</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getUserById</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtils.getSqlSession();</span><br><span class="line">    </span><br><span class="line">    <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    </span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> mapper.getUserById(<span class="number">1</span>);</span><br><span class="line">    System.out.println(user);</span><br><span class="line">    </span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3ã€Insert"><a href="#3ã€Insert" class="headerlink" title="3ã€Insert"></a>3ã€Insert</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¯¹è±¡ä¸­çš„å±æ€§ï¼Œå¯ä»¥ç›´æ¥å–å‡ºæ¥--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;addUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.wu.pojo.User&quot;</span>&gt;</span></span><br><span class="line">  insert into mybatis.user (id, name, pwd) values (#&#123;id&#125;,#&#123;name&#125;,#&#123;pwd&#125;);</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="4ã€update"><a href="#4ã€update" class="headerlink" title="4ã€update"></a>4ã€update</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;com.wu.pojo.User&quot;</span>&gt;</span></span><br><span class="line">    update mybatis.user set name=#&#123;name&#125;,pwd=#&#123;pwd&#125;  where id = #&#123;id&#125; ;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="5ã€Delete"><a href="#5ã€Delete" class="headerlink" title="5ã€Delete"></a>5ã€Delete</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteUser&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">    delete from mybatis.user where id = #&#123;id&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ç‚¹ï¼š</p>
<ul>
<li>å¢åˆ æ”¹éœ€è¦æäº¤äº‹åŠ¡ï¼</li>
</ul>
<h3 id="6ã€åˆ†æé”™è¯¯"><a href="#6ã€åˆ†æé”™è¯¯" class="headerlink" title="6ã€åˆ†æé”™è¯¯"></a>6ã€åˆ†æé”™è¯¯</h3><ul>
<li>æ ‡ç­¾ä¸è¦åŒ¹é…é”™</li>
<li>resource ç»‘å®šmapperï¼Œéœ€è¦ä½¿ç”¨è·¯å¾„ï¼</li>
<li>ç¨‹åºé…ç½®æ–‡ä»¶å¿…é¡»ç¬¦åˆè§„èŒƒï¼</li>
<li>NullPointerExceptionï¼Œæ²¡æœ‰æ³¨å†Œåˆ°èµ„æº!</li>
<li>è¾“å‡ºçš„xmlæ–‡ä»¶ä¸­å­˜åœ¨ä¸­æ–‡ä¹±ç é—®é¢˜ï¼</li>
<li>mavenèµ„æºæ²¡æœ‰å¯¼å‡ºé—®é¢˜ï¼</li>
</ul>
<h3 id="7ã€ä¸‡èƒ½Map"><a href="#7ã€ä¸‡èƒ½Map" class="headerlink" title="7ã€ä¸‡èƒ½Map"></a>7ã€ä¸‡èƒ½Map</h3><p>å‡è®¾ï¼Œæˆ‘ä»¬çš„å®ä½“ç±»ï¼Œæˆ–è€…æ•°æ®åº“ä¸­çš„è¡¨ï¼Œå­—æ®µæˆ–è€…å‚æ•°è¿‡å¤šï¼Œæˆ‘ä»¬åº”å½“è€ƒè™‘ä½¿ç”¨Mapï¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä¸‡èƒ½çš„Map</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">addUser2</span><span class="params">(Map&lt;String,Object&gt; map)</span>;</span><br><span class="line">&lt;!--å¯¹è±¡ä¸­çš„å±æ€§ï¼Œå¯ä»¥ç›´æ¥å–å‡ºæ¥    ä¼ é€’mapçš„key--&gt;</span><br><span class="line">&lt;insert id=<span class="string">&quot;addUser&quot;</span> parameterType=<span class="string">&quot;map&quot;</span>&gt;</span><br><span class="line">  insert into mybatis.user (id, pwd) values (#&#123;userid&#125;,#&#123;passWord&#125;);</span><br><span class="line">&lt;/insert&gt;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addUser2</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtils.getSqlSession();</span><br><span class="line">    </span><br><span class="line">    <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    Map&lt;String, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Object&gt;();</span><br><span class="line">    </span><br><span class="line">    map.put(<span class="string">&quot;userid&quot;</span>,<span class="number">5</span>);</span><br><span class="line">    map.put(<span class="string">&quot;passWord&quot;</span>,<span class="string">&quot;2222333&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    mapper.addUser2(map);</span><br><span class="line">    </span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Mapä¼ é€’å‚æ•°ï¼Œç›´æ¥åœ¨sqlä¸­å–å‡ºkeyå³å¯ï¼ ã€parameterType&#x3D;â€mapâ€ã€‘</p>
<p>å¯¹è±¡ä¼ é€’å‚æ•°ï¼Œç›´æ¥åœ¨sqlä¸­å–å¯¹è±¡çš„å±æ€§å³å¯ï¼ã€parameterType&#x3D;â€Objectâ€ã€‘</p>
<p>åªæœ‰ä¸€ä¸ªåŸºæœ¬ç±»å‹å‚æ•°çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ç›´æ¥åœ¨sqlä¸­å–åˆ°ï¼</p>
<p>å¤šä¸ªå‚æ•°ç”¨Mapï¼Œ<strong>æˆ–è€…æ³¨è§£ï¼</strong></p>
<h3 id="8ã€æ€è€ƒé¢˜"><a href="#8ã€æ€è€ƒé¢˜" class="headerlink" title="8ã€æ€è€ƒé¢˜"></a>8ã€æ€è€ƒé¢˜</h3><p>æ¨¡ç³ŠæŸ¥è¯¢æ€ä¹ˆå†™ï¼Ÿ</p>
<ol>
<li>Javaä»£ç æ‰§è¡Œçš„æ—¶å€™ï¼Œä¼ é€’é€šé…ç¬¦ % %</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;User&gt; userList = mapper.getUserLike(<span class="string">&quot;%æ%&quot;</span>); </span><br></pre></td></tr></table></figure>

<ol>
<li>åœ¨sqlæ‹¼æ¥ä¸­ä½¿ç”¨é€šé…ç¬¦ï¼</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> mybatis.user <span class="keyword">where</span> name <span class="keyword">like</span> &quot;%&quot;#&#123;<span class="keyword">value</span>&#125;&quot;%&quot;</span><br></pre></td></tr></table></figure>

<h2 id="4ã€é…ç½®è§£æ"><a href="#4ã€é…ç½®è§£æ" class="headerlink" title="4ã€é…ç½®è§£æ"></a>4ã€é…ç½®è§£æ</h2><h3 id="1ã€æ ¸å¿ƒé…ç½®æ–‡ä»¶"><a href="#1ã€æ ¸å¿ƒé…ç½®æ–‡ä»¶" class="headerlink" title="1ã€æ ¸å¿ƒé…ç½®æ–‡ä»¶"></a>1ã€æ ¸å¿ƒé…ç½®æ–‡ä»¶</h3><ul>
<li>mybatis-config.xml</li>
<li>MyBatis çš„é…ç½®æ–‡ä»¶åŒ…å«äº†ä¼šæ·±æ·±å½±å“ MyBatis è¡Œä¸ºçš„è®¾ç½®å’Œå±æ€§ä¿¡æ¯ã€‚</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">configurationï¼ˆé…ç½®ï¼‰</span><br><span class="line">propertiesï¼ˆå±æ€§ï¼‰</span><br><span class="line">settingsï¼ˆè®¾ç½®ï¼‰</span><br><span class="line">typeAliasesï¼ˆç±»å‹åˆ«åï¼‰</span><br><span class="line">typeHandlersï¼ˆç±»å‹å¤„ç†å™¨ï¼‰</span><br><span class="line">objectFactoryï¼ˆå¯¹è±¡å·¥å‚ï¼‰</span><br><span class="line">pluginsï¼ˆæ’ä»¶ï¼‰</span><br><span class="line">environmentsï¼ˆç¯å¢ƒé…ç½®ï¼‰</span><br><span class="line">environmentï¼ˆç¯å¢ƒå˜é‡ï¼‰</span><br><span class="line">transactionManagerï¼ˆäº‹åŠ¡ç®¡ç†å™¨ï¼‰</span><br><span class="line">dataSourceï¼ˆæ•°æ®æºï¼‰</span><br><span class="line">databaseIdProviderï¼ˆæ•°æ®åº“å‚å•†æ ‡è¯†ï¼‰</span><br><span class="line">mappersï¼ˆæ˜ å°„å™¨ï¼‰</span><br></pre></td></tr></table></figure>

<h3 id="2ã€ç¯å¢ƒé…ç½®ï¼ˆenvironmentsï¼‰"><a href="#2ã€ç¯å¢ƒé…ç½®ï¼ˆenvironmentsï¼‰" class="headerlink" title="2ã€ç¯å¢ƒé…ç½®ï¼ˆenvironmentsï¼‰"></a>2ã€ç¯å¢ƒé…ç½®ï¼ˆenvironmentsï¼‰</h3><p>MyBatis å¯ä»¥é…ç½®æˆé€‚åº”å¤šç§ç¯å¢ƒ</p>
<p><strong>ä¸è¿‡è¦è®°ä½ï¼šå°½ç®¡å¯ä»¥é…ç½®å¤šä¸ªç¯å¢ƒï¼Œä½†æ¯ä¸ª SqlSessionFactory å®ä¾‹åªèƒ½é€‰æ‹©ä¸€ç§ç¯å¢ƒã€‚</strong></p>
<p>å­¦ä¼šä½¿ç”¨é…ç½®å¤šå¥—è¿è¡Œç¯å¢ƒï¼</p>
<p>Mybatisé»˜è®¤çš„äº‹åŠ¡ç®¡ç†å™¨å°±æ˜¯ JDBC ï¼Œ è¿æ¥æ±  ï¼š POOLEDMyBatis å¯ä»¥é…ç½®æˆé€‚åº”å¤šç§ç¯å¢ƒ</p>
<p><strong>ä¸è¿‡è¦è®°ä½ï¼šå°½ç®¡å¯ä»¥é…ç½®å¤šä¸ªç¯å¢ƒï¼Œä½†æ¯ä¸ª SqlSessionFactory å®ä¾‹åªèƒ½é€‰æ‹©ä¸€ç§ç¯å¢ƒã€‚</strong></p>
<p>å­¦ä¼šä½¿ç”¨é…ç½®å¤šå¥—è¿è¡Œç¯å¢ƒï¼</p>
<p>Mybatisé»˜è®¤çš„äº‹åŠ¡ç®¡ç†å™¨å°±æ˜¯ JDBC ï¼Œ è¿æ¥æ±  ï¼š POOLED</p>
<h3 id="3ã€å±æ€§ï¼ˆpropertiesï¼‰"><a href="#3ã€å±æ€§ï¼ˆpropertiesï¼‰" class="headerlink" title="3ã€å±æ€§ï¼ˆpropertiesï¼‰"></a>3ã€å±æ€§ï¼ˆpropertiesï¼‰</h3><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡propertieså±æ€§æ¥å®ç°å¼•ç”¨é…ç½®æ–‡ä»¶</p>
<p>è¿™äº›å±æ€§éƒ½æ˜¯å¯å¤–éƒ¨é…ç½®ä¸”å¯åŠ¨æ€æ›¿æ¢çš„ï¼Œæ—¢å¯ä»¥åœ¨å…¸å‹çš„ Java å±æ€§æ–‡ä»¶ä¸­é…ç½®ï¼Œäº¦å¯é€šè¿‡ properties å…ƒç´ çš„å­å…ƒç´ æ¥ä¼ é€’ã€‚ã€db.propertiesã€‘</p>
<img src="/2023/11/04/mybatis/1658190842415-0654a70f-d622-4245-b48d-bf6c93f6458e-169918431537512.png" class title="img">

<p>ç¼–å†™ä¸€ä¸ªé…ç½®æ–‡ä»¶</p>
<p>db.properties</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://localhost:3306/mybatis?useSSL=true&amp;useUnicode=true&amp;characterEncoding=UTF-8</span></span><br><span class="line"><span class="attr">username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">123456</span></span><br></pre></td></tr></table></figure>

<p>åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ˜ å…¥</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¼•å…¥å¤–éƒ¨é…ç½®æ–‡ä»¶--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">&quot;db.properties&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;pwd&quot;</span> <span class="attr">value</span>=<span class="string">&quot;11111&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>å¯ä»¥ç›´æ¥å¼•å…¥å¤–éƒ¨æ–‡ä»¶</li>
<li>å¯ä»¥åœ¨å…¶ä¸­å¢åŠ ä¸€äº›å±æ€§é…ç½®</li>
<li>å¦‚æœä¸¤ä¸ªæ–‡ä»¶æœ‰åŒä¸€ä¸ªå­—æ®µï¼Œä¼˜å…ˆä½¿ç”¨å¤–éƒ¨é…ç½®æ–‡ä»¶çš„ï¼</li>
</ul>
<h3 id="4ã€ç±»å‹åˆ«åï¼ˆtypeAliasesï¼‰"><a href="#4ã€ç±»å‹åˆ«åï¼ˆtypeAliasesï¼‰" class="headerlink" title="4ã€ç±»å‹åˆ«åï¼ˆtypeAliasesï¼‰"></a>4ã€ç±»å‹åˆ«åï¼ˆtypeAliasesï¼‰</h3><ul>
<li>ç±»å‹åˆ«åæ˜¯ä¸º Java ç±»å‹è®¾ç½®ä¸€ä¸ªçŸ­çš„åå­—ã€‚â€˜</li>
<li>å­˜åœ¨çš„æ„ä¹‰ä»…åœ¨äºç”¨æ¥å‡å°‘ç±»å®Œå…¨é™å®šåçš„å†—ä½™ã€‚</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¯ä»¥ç»™å®ä½“ç±»èµ·åˆ«å--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">typeAlias</span> <span class="attr">type</span>=<span class="string">&quot;com.wu.pojo.User&quot;</span> <span class="attr">alias</span>=<span class="string">&quot;User&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªåŒ…åï¼ŒMyBatis ä¼šåœ¨åŒ…åä¸‹é¢æœç´¢éœ€è¦çš„ Java Beanï¼Œæ¯”å¦‚ï¼š</p>
<p>æ‰«æå®ä½“ç±»çš„åŒ…ï¼Œå®ƒçš„é»˜è®¤åˆ«åå°±ä¸ºè¿™ä¸ªç±»çš„ ç±»åï¼Œé¦–å­—æ¯å°å†™ï¼</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--å¯ä»¥ç»™å®ä½“ç±»èµ·åˆ«å--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.wu.pojo&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">  </span><br></pre></td></tr></table></figure>

<p>åœ¨å®ä½“ç±»æ¯”è¾ƒå°‘çš„æ—¶å€™ï¼Œä½¿ç”¨ç¬¬ä¸€ç§æ–¹å¼ã€‚</p>
<p>å¦‚æœå®ä½“ç±»ååˆ†å¤šï¼Œå»ºè®®ä½¿ç”¨ç¬¬äºŒç§ã€‚</p>
<p>ç¬¬ä¸€ç§å¯ä»¥DIYåˆ«åï¼Œç¬¬äºŒç§åˆ™Â·ä¸è¡ŒÂ·ï¼Œå¦‚æœéè¦æ”¹ï¼Œéœ€è¦åœ¨å®ä½“ä¸Šå¢åŠ æ³¨è§£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Alias(&quot;user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5ã€è®¾ç½®"><a href="#5ã€è®¾ç½®" class="headerlink" title="5ã€è®¾ç½®"></a>5ã€è®¾ç½®</h3><p>è¿™æ˜¯ MyBatis ä¸­æä¸ºé‡è¦çš„è°ƒæ•´è®¾ç½®ï¼Œå®ƒä»¬ä¼šæ”¹å˜ MyBatis çš„è¿è¡Œæ—¶è¡Œä¸ºã€‚</p>
<img src="/2023/11/04/mybatis/1658191121063-d916538d-096c-4749-88fc-a5401e3aa6ce-169918431537514.png" class title="img">

<img src="/2023/11/04/mybatis/1658191130508-9c402146-a925-4bb1-bc1b-8b4fdf22d0ec-169918431537616.png" class title="img">

<h3 id="6ã€å…¶ä»–é…ç½®"><a href="#6ã€å…¶ä»–é…ç½®" class="headerlink" title="6ã€å…¶ä»–é…ç½®"></a>6ã€å…¶ä»–é…ç½®</h3><ul>
<li><p><a href="https://mybatis.org/mybatis-3/zh/configuration.html#typeHandlers">typeHandlersï¼ˆç±»å‹å¤„ç†å™¨ï¼‰</a></p>
</li>
<li><p><a href="https://mybatis.org/mybatis-3/zh/configuration.html#objectFactory">objectFactoryï¼ˆå¯¹è±¡å·¥å‚ï¼‰</a></p>
</li>
<li><p>pluginsæ’ä»¶</p>
</li>
<li><ul>
<li>mybatis-generator-core</li>
<li>mybatis-plus</li>
<li>é€šç”¨mapper</li>
</ul>
</li>
</ul>
<h3 id="7ã€æ˜ å°„å™¨ï¼ˆmappersï¼‰"><a href="#7ã€æ˜ å°„å™¨ï¼ˆmappersï¼‰" class="headerlink" title="7ã€æ˜ å°„å™¨ï¼ˆmappersï¼‰"></a>7ã€æ˜ å°„å™¨ï¼ˆmappersï¼‰</h3><p>MapperRegistryï¼šæ³¨å†Œç»‘å®šæˆ‘ä»¬çš„Mapperæ–‡ä»¶ï¼›</p>
<p>æ–¹å¼ä¸€ï¼š ã€æ¨èä½¿ç”¨ã€‘</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ¯ä¸€ä¸ªMapper.XMLéƒ½éœ€è¦åœ¨Mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œï¼--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/wu/dao/UserMapper.xml&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ–¹å¼äºŒï¼šä½¿ç”¨classæ–‡ä»¶ç»‘å®šæ³¨å†Œ</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ¯ä¸€ä¸ªMapper.XMLéƒ½éœ€è¦åœ¨Mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œï¼--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;com.wu.dao.UserMapper&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ç‚¹ï¼š</p>
<ul>
<li>æ¥å£å’Œä»–çš„Mapperé…ç½®æ–‡ä»¶å¿…é¡»åŒåï¼</li>
<li>æ¥å£å’Œä»–çš„Mapperé…ç½®æ–‡ä»¶å¿…é¡»åœ¨åŒä¸€ä¸ªåŒ…ä¸‹ï¼</li>
</ul>
<p>æ–¹å¼ä¸‰ï¼šä½¿ç”¨æ‰«æåŒ…è¿›è¡Œæ³¨å…¥ç»‘å®š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ¯ä¸€ä¸ªMapper.XMLéƒ½éœ€è¦åœ¨Mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œï¼--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">&quot;com.wu.dao&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ç‚¹ï¼š</p>
<ul>
<li>æ¥å£å’Œä»–çš„Mapperé…ç½®æ–‡ä»¶å¿…é¡»åŒåï¼</li>
<li>æ¥å£å’Œä»–çš„Mapperé…ç½®æ–‡ä»¶å¿…é¡»åœ¨åŒä¸€ä¸ªåŒ…ä¸‹ï¼</li>
</ul>
<p>ç»ƒä¹ æ—¶é—´ï¼š</p>
<ul>
<li>å°†æ•°æ®åº“é…ç½®æ–‡ä»¶å¤–éƒ¨å¼•å…¥</li>
<li>å®ä½“ç±»åˆ«å</li>
<li>ä¿è¯UserMapper æ¥å£ å’Œ UserMapper .xml æ”¹ä¸ºä¸€è‡´ï¼å¹¶ä¸”æ”¾åœ¨åŒä¸€ä¸ªåŒ…ä¸‹ï¼</li>
</ul>
<h3 id="8ã€ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸ"><a href="#8ã€ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸ" class="headerlink" title="8ã€ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸ"></a>8ã€ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸ</h3><img src="/2023/11/04/mybatis/1658191229630-a8b1a290-1aad-4b89-a9d8-b9a8b4e11c02-169918431537618.png" class title="img">

<p>ç”Ÿå‘½å‘¨æœŸï¼Œå’Œä½œç”¨åŸŸï¼Œæ˜¯è‡³å…³é‡è¦çš„ï¼Œå› ä¸ºé”™è¯¯çš„ä½¿ç”¨ä¼šå¯¼è‡´éå¸¸ä¸¥é‡çš„<strong>å¹¶å‘é—®é¢˜</strong>ã€‚</p>
<p><strong>SqlSessionFactoryBuilderï¼š</strong></p>
<ul>
<li>ä¸€æ—¦åˆ›å»ºäº† SqlSessionFactoryï¼Œå°±ä¸å†éœ€è¦å®ƒäº†</li>
<li>å±€éƒ¨å˜é‡</li>
</ul>
<p><strong>SqlSessionFactoryï¼š</strong></p>
<ul>
<li>è¯´ç™½äº†å°±æ˜¯å¯ä»¥æƒ³è±¡ä¸º ï¼šæ•°æ®åº“è¿æ¥æ± </li>
<li>SqlSessionFactory ä¸€æ—¦è¢«åˆ›å»ºå°±åº”è¯¥åœ¨åº”ç”¨çš„è¿è¡ŒæœŸé—´ä¸€ç›´å­˜åœ¨ï¼Œ<strong>æ²¡æœ‰ä»»ä½•ç†ç”±ä¸¢å¼ƒå®ƒæˆ–é‡æ–°åˆ›å»ºå¦ä¸€ä¸ªå®ä¾‹ã€‚</strong></li>
<li>å› æ­¤ SqlSessionFactory çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯åº”ç”¨ä½œç”¨åŸŸã€‚</li>
<li>æœ€ç®€å•çš„å°±æ˜¯ä½¿ç”¨<strong>å•ä¾‹æ¨¡å¼</strong>æˆ–è€…é™æ€å•ä¾‹æ¨¡å¼ã€‚</li>
</ul>
<p><strong>SqlSession</strong></p>
<ul>
<li>è¿æ¥åˆ°è¿æ¥æ± çš„ä¸€ä¸ªè¯·æ±‚ï¼</li>
<li>SqlSession çš„å®ä¾‹ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› æ­¤æ˜¯ä¸èƒ½è¢«å…±äº«çš„ï¼Œæ‰€ä»¥å®ƒçš„æœ€ä½³çš„ä½œç”¨åŸŸæ˜¯è¯·æ±‚æˆ–æ–¹æ³•ä½œç”¨åŸŸã€‚</li>
<li>ç”¨å®Œä¹‹åéœ€è¦èµ¶ç´§å…³é—­ï¼Œå¦åˆ™èµ„æºè¢«å ç”¨ï¼</li>
</ul>
<img src="/2023/11/04/mybatis/1658191254653-56cd8a26-43b9-49d7-a0a7-af8928a4f5ee-169918431537620.png" class title="img">

<p>è¿™é‡Œé¢çš„æ¯ä¸€ä¸ªMapperï¼Œå°±ä»£è¡¨ä¸€ä¸ªå…·ä½“çš„ä¸šåŠ¡ï¼</p>
<h2 id="5ã€è§£å†³å±æ€§åå’Œå­—æ®µåä¸ä¸€è‡´"><a href="#5ã€è§£å†³å±æ€§åå’Œå­—æ®µåä¸ä¸€è‡´" class="headerlink" title="5ã€è§£å†³å±æ€§åå’Œå­—æ®µåä¸ä¸€è‡´"></a>5ã€è§£å†³å±æ€§åå’Œå­—æ®µåä¸ä¸€è‡´</h2><h3 id="1ã€-é—®é¢˜"><a href="#1ã€-é—®é¢˜" class="headerlink" title="1ã€ é—®é¢˜"></a>1ã€ é—®é¢˜</h3><p>æ•°æ®åº“ä¸­çš„å­—æ®µ</p>
<img src="/2023/11/04/mybatis/1658191311157-469c922e-38d7-418e-add2-9fe2cafaecc5-169918432521422.png" class title="img">

<p>æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œæ‹·è´ä¹‹å‰çš„ï¼Œæµ‹è¯•å®ä½“ç±»å­—æ®µä¸ä¸€è‡´çš„æƒ…å†µ</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•å‡ºç°é—®é¢˜</p>
<img src="/2023/11/04/mybatis/1658191356730-30f2374b-3c6a-4b11-a937-4bab940a7c97-169918432521524.png" class title="img">

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">//    select * from mybatis.user where id = #&#123;id&#125;</span><br><span class="line">//ç±»å‹å¤„ç†å™¨</span><br><span class="line">//    select id,name,pwd from mybatis.user where id = #&#123;id&#125;</span><br></pre></td></tr></table></figure>

<p>è§£å†³æ–¹æ³•ï¼š</p>
<ul>
<li>èµ·åˆ«å</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.wu.pojo.User&quot;</span>&gt;</span></span><br><span class="line">    select id,name,pwd as password from mybatis.user where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2ã€resultMap"><a href="#2ã€resultMap" class="headerlink" title="2ã€resultMap"></a>2ã€resultMap</h3><p>ç»“æœé›†æ˜ å°„</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">id</span>   name   <span class="built_in">pwd</span></span><br><span class="line"><span class="built_in">id</span>   name   password</span><br><span class="line">&lt;!--ç»“æœé›†æ˜ å°„--&gt;</span><br><span class="line">&lt;resultMap <span class="built_in">id</span>=<span class="string">&quot;UserMap&quot;</span> <span class="built_in">type</span>=<span class="string">&quot;User&quot;</span>&gt;</span><br><span class="line">  &lt;!--columnæ•°æ®åº“ä¸­çš„å­—æ®µï¼Œpropertyå®ä½“ç±»ä¸­çš„å±æ€§--&gt;</span><br><span class="line">  &lt;result column=<span class="string">&quot;id&quot;</span> property=<span class="string">&quot;id&quot;</span>/&gt;</span><br><span class="line">  &lt;result column=<span class="string">&quot;name&quot;</span> property=<span class="string">&quot;name&quot;</span>/&gt;</span><br><span class="line">  &lt;result column=<span class="string">&quot;pwd&quot;</span> property=<span class="string">&quot;password&quot;</span>/&gt;</span><br><span class="line">&lt;/resultMap&gt;</span><br><span class="line"></span><br><span class="line">&lt;<span class="keyword">select</span> <span class="built_in">id</span>=<span class="string">&quot;getUserById&quot;</span> resultMap=<span class="string">&quot;UserMap&quot;</span>&gt;</span><br><span class="line">  <span class="keyword">select</span> * from mybatis.user <span class="built_in">where</span> <span class="built_in">id</span> = <span class="comment">#&#123;id&#125;</span></span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>resultMap å…ƒç´ æ˜¯ MyBatis ä¸­æœ€é‡è¦æœ€å¼ºå¤§çš„å…ƒç´ </li>
<li>ResultMap çš„è®¾è®¡æ€æƒ³æ˜¯ï¼Œå¯¹äºç®€å•çš„è¯­å¥æ ¹æœ¬ä¸éœ€è¦é…ç½®æ˜¾å¼çš„ç»“æœæ˜ å°„ï¼Œè€Œå¯¹äºå¤æ‚ä¸€ç‚¹çš„è¯­å¥åªéœ€è¦æè¿°å®ƒä»¬çš„å…³ç³»å°±è¡Œäº†ã€‚</li>
<li>ResultMap æœ€ä¼˜ç§€çš„åœ°æ–¹åœ¨äºï¼Œè™½ç„¶ä½ å·²ç»å¯¹å®ƒç›¸å½“äº†è§£äº†ï¼Œä½†æ˜¯æ ¹æœ¬å°±ä¸éœ€è¦æ˜¾å¼åœ°ç”¨åˆ°ä»–ä»¬ã€‚</li>
<li>å¦‚æœä¸–ç•Œæ€»æ˜¯è¿™ä¹ˆç®€å•å°±å¥½äº†ã€‚</li>
</ul>
<h2 id="6ã€æ—¥å¿—"><a href="#6ã€æ—¥å¿—" class="headerlink" title="6ã€æ—¥å¿—"></a>6ã€æ—¥å¿—</h2><h3 id="6-1ã€æ—¥å¿—å·¥å‚"><a href="#6-1ã€æ—¥å¿—å·¥å‚" class="headerlink" title="6.1ã€æ—¥å¿—å·¥å‚"></a>6.1ã€æ—¥å¿—å·¥å‚</h3><p>å¦‚æœä¸€ä¸ªæ•°æ®åº“æ“ä½œï¼Œå‡ºç°äº†å¼‚å¸¸ï¼Œæˆ‘ä»¬éœ€è¦æ’é”™ã€‚æ—¥å¿—å°±æ˜¯æœ€å¥½çš„åŠ©æ‰‹ï¼</p>
<p>æ›¾ç»ï¼šsout ã€debug</p>
<p>ç°åœ¨ï¼šæ—¥å¿—å·¥å‚ï¼</p>
<img src="/2023/11/04/mybatis/1658191662072-829b560e-b7e4-43bb-bfbd-0a0d0fdeba1e-169918433557526.png" class title="img">

<ul>
<li>SLF4J</li>
<li>LOG4J ã€æŒæ¡ã€‘</li>
<li>LOG4J2</li>
<li>JDK_LOGGING</li>
<li>COMMONS_LOGGING</li>
<li>STDOUT_LOGGING ã€æŒæ¡ã€‘</li>
<li>NO_LOGGING</li>
</ul>
<p>åœ¨Mybatisä¸­å…·ä½“ä½¿ç”¨é‚£ä¸ªä¸€æ—¥å¿—å®ç°ï¼Œåœ¨è®¾ç½®ä¸­è®¾å®šï¼</p>
<p><strong>STDOUT_LOGGINGæ ‡å‡†æ—¥å¿—è¾“å‡º</strong></p>
<p>åœ¨mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­ï¼Œé…ç½®æˆ‘ä»¬çš„æ—¥å¿—ï¼</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;STDOUT_LOGGING&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>

<img src="/2023/11/04/mybatis/1658191706900-62779f11-53ec-479a-a693-2b3ec9a262fe-169918433557628.png" class title="img">

<h3 id="6-2ã€Log4j"><a href="#6-2ã€Log4j" class="headerlink" title="6.2ã€Log4j"></a>6.2ã€Log4j</h3><p>ä»€ä¹ˆæ˜¯Log4jï¼Ÿ</p>
<ul>
<li>Log4jæ˜¯<a href="https://baike.baidu.com/item/Apache/8512995">Apache</a>çš„ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œé€šè¿‡ä½¿ç”¨Log4jï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶æ—¥å¿—ä¿¡æ¯è¾“é€çš„ç›®çš„åœ°æ˜¯<a href="https://baike.baidu.com/item/%E6%8E%A7%E5%88%B6%E5%8F%B0/2438626">æ§åˆ¶å°</a>ã€æ–‡ä»¶ã€<a href="https://baike.baidu.com/item/GUI">GUI</a>ç»„ä»¶</li>
<li>æˆ‘ä»¬ä¹Ÿå¯ä»¥æ§åˆ¶æ¯ä¸€æ¡æ—¥å¿—çš„è¾“å‡ºæ ¼å¼ï¼›</li>
<li>é€šè¿‡å®šä¹‰æ¯ä¸€æ¡æ—¥å¿—ä¿¡æ¯çš„çº§åˆ«ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ›´åŠ ç»†è‡´åœ°æ§åˆ¶æ—¥å¿—çš„ç”Ÿæˆè¿‡ç¨‹ã€‚</li>
<li>é€šè¿‡ä¸€ä¸ª<a href="https://baike.baidu.com/item/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/286550">é…ç½®æ–‡ä»¶</a>æ¥çµæ´»åœ°è¿›è¡Œé…ç½®ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹åº”ç”¨çš„ä»£ç ã€‚</li>
</ul>
<ol>
<li>å…ˆå¯¼å…¥log4jçš„åŒ…</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/log4j/log4j --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>log4j.properties</li>
</ol>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å°†ç­‰çº§ä¸ºDEBUGçš„æ—¥å¿—ä¿¡æ¯è¾“å‡ºåˆ°consoleå’Œfileè¿™ä¸¤ä¸ªç›®çš„åœ°ï¼Œconsoleå’Œfileçš„å®šä¹‰åœ¨ä¸‹é¢çš„ä»£ç </span></span><br><span class="line"><span class="attr">log4j.rootLogger</span>=<span class="string">DEBUG,console,file</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#æ§åˆ¶å°è¾“å‡ºçš„ç›¸å…³è®¾ç½®</span></span><br><span class="line"><span class="attr">log4j.appender.console</span> = <span class="string">org.apache.log4j.ConsoleAppender</span></span><br><span class="line"><span class="attr">log4j.appender.console.Target</span> = <span class="string">System.out</span></span><br><span class="line"><span class="attr">log4j.appender.console.Threshold</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="attr">log4j.appender.console.layout</span> = <span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="attr">log4j.appender.console.layout.ConversionPattern</span>=<span class="string">[%c]-%m%n</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#æ–‡ä»¶è¾“å‡ºçš„ç›¸å…³è®¾ç½®</span></span><br><span class="line"><span class="attr">log4j.appender.file</span> = <span class="string">org.apache.log4j.RollingFileAppender</span></span><br><span class="line"><span class="attr">log4j.appender.file.File</span>=<span class="string">./log/wu.log</span></span><br><span class="line"><span class="attr">log4j.appender.file.MaxFileSize</span>=<span class="string">10mb</span></span><br><span class="line"><span class="attr">log4j.appender.file.Threshold</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="attr">log4j.appender.file.layout</span>=<span class="string">org.apache.log4j.PatternLayout</span></span><br><span class="line"><span class="attr">log4j.appender.file.layout.ConversionPattern</span>=<span class="string">[%p][%d&#123;yy-MM-dd&#125;][%c]%m%n</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#æ—¥å¿—è¾“å‡ºçº§åˆ«</span></span><br><span class="line"><span class="attr">log4j.logger.org.mybatis</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="attr">log4j.logger.java.sql</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="attr">log4j.logger.java.sql.Statement</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="attr">log4j.logger.java.sql.ResultSet</span>=<span class="string">DEBUG</span></span><br><span class="line"><span class="attr">log4j.logger.java.sql.PreparedStatement</span>=<span class="string">DEBUG</span></span><br></pre></td></tr></table></figure>

<ol>
<li>é…ç½®log4jä¸ºæ—¥å¿—çš„å®ç°</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;logImpl&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>Log4jçš„ä½¿ç”¨ï¼ï¼Œç›´æ¥æµ‹è¯•è¿è¡Œåˆšæ‰çš„æŸ¥è¯¢</li>
</ol>
<img src="/2023/11/04/mybatis/1658192021457-78a8304e-40f7-48d7-9a62-7580553d8ce7-169918433557930.png" class title="img">

<p><strong>ç®€å•ä½¿ç”¨</strong></p>
<ol>
<li>åœ¨è¦ä½¿ç”¨Log4j çš„ç±»ä¸­ï¼Œå¯¼å…¥åŒ… import org.apache.log4j.Logger;</li>
<li>æ—¥å¿—å¯¹è±¡ï¼Œå‚æ•°ä¸ºå½“å‰ç±»çš„class</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> Logger.getLogger(UserDaoTest.class); </span><br></pre></td></tr></table></figure>

<ol>
<li>æ—¥å¿—çº§åˆ«</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">logger.info(<span class="string">&quot;info:è¿›å…¥äº†testLog4j&quot;</span>);</span><br><span class="line">logger.debug(<span class="string">&quot;debug:è¿›å…¥äº†testLog4j&quot;</span>);</span><br><span class="line">logger.error(<span class="string">&quot;error:è¿›å…¥äº†testLog4j&quot;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="7ã€åˆ†é¡µ"><a href="#7ã€åˆ†é¡µ" class="headerlink" title="7ã€åˆ†é¡µ"></a>7ã€åˆ†é¡µ</h2><p><strong>æ€è€ƒï¼šä¸ºä»€ä¹ˆè¦åˆ†é¡µï¼Ÿ</strong></p>
<ul>
<li>å‡å°‘æ•°æ®çš„å¤„ç†é‡</li>
</ul>
<h3 id="7-1ã€ä½¿ç”¨Limitåˆ†é¡µ"><a href="#7-1ã€ä½¿ç”¨Limitåˆ†é¡µ" class="headerlink" title="7.1ã€ä½¿ç”¨Limitåˆ†é¡µ"></a>7.1ã€ä½¿ç”¨Limitåˆ†é¡µ</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">è¯­æ³•ï¼š<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span> limit startIndex,pageSize;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span> limit <span class="number">3</span>;  #[<span class="number">0</span>,n]</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨Mybatiså®ç°åˆ†é¡µï¼Œæ ¸å¿ƒSQL</p>
<ol>
<li>æ¥å£</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åˆ†é¡µ</span></span><br><span class="line">List&lt;User&gt; <span class="title function_">getUserByLimit</span><span class="params">(Map&lt;String,Integer&gt; map)</span>;</span><br></pre></td></tr></table></figure>

<ol>
<li>Mapper.xml</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--//åˆ†é¡µ--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getUserByLimit&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;UserMap&quot;</span>&gt;</span></span><br><span class="line">  select * from  mybatis.user limit #&#123;startIndex&#125;,#&#123;pageSize&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>æµ‹è¯•</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getUserByLimit</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtils.getSqlSession();</span><br><span class="line">    <span class="type">UserMapper</span> <span class="variable">mapper</span> <span class="operator">=</span> sqlSession.getMapper(UserMapper.class);</span><br><span class="line">    </span><br><span class="line">    HashMap&lt;String, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String, Integer&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;startIndex&quot;</span>,<span class="number">1</span>);</span><br><span class="line">    map.put(<span class="string">&quot;pageSize&quot;</span>,<span class="number">2</span>);</span><br><span class="line">    </span><br><span class="line">    List&lt;User&gt; userList =  mapper.getUserByLimit(map);</span><br><span class="line">    <span class="keyword">for</span> (User user : userList) &#123;</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    sqlSession.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-2ã€RowBoundsåˆ†é¡µ"><a href="#7-2ã€RowBoundsåˆ†é¡µ" class="headerlink" title="7.2ã€RowBoundsåˆ†é¡µ"></a>7.2ã€RowBoundsåˆ†é¡µ</h3><p>ä¸å†ä½¿ç”¨SQLå®ç°åˆ†é¡µ</p>
<ol>
<li>æ¥å£</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;User&gt; <span class="title function_">getUserByRowBounds</span><span class="params">()</span>; </span><br></pre></td></tr></table></figure>

<ol>
<li>mapper.xml</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">&lt;!--åˆ†é¡µ<span class="number">2</span>--&gt;</span><br><span class="line">&lt;select id=<span class="string">&quot;getUserByRowBounds&quot;</span> resultMap=<span class="string">&quot;UserMap&quot;</span>&gt;</span><br><span class="line">    select * from  mybatis.user</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>

<ol>
<li>æµ‹è¯•</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">getUserByRowBounds</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> MybatisUtils.getSqlSession();</span><br><span class="line"></span><br><span class="line"><span class="comment">//RowBoundså®ç°</span></span><br><span class="line"><span class="type">RowBounds</span> <span class="variable">rowBounds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RowBounds</span>(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//é€šè¿‡Javaä»£ç å±‚é¢å®ç°åˆ†é¡µ</span></span><br><span class="line">List&lt;User&gt; userList = sqlSession.selectList(<span class="string">&quot;com.wu.dao.UserMapper.getUserByRowBounds&quot;</span>,<span class="literal">null</span>,rowBounds);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (User user : userList) &#123;</span><br><span class="line">    System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    sqlSession.close();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-3ã€åˆ†é¡µæ’ä»¶"><a href="#7-3ã€åˆ†é¡µæ’ä»¶" class="headerlink" title="7.3ã€åˆ†é¡µæ’ä»¶"></a>7.3ã€åˆ†é¡µæ’ä»¶</h3><img src="/2023/11/04/mybatis/1658192478406-d8178d52-dd80-4fae-930a-1b5e27bf0da3-169918434439032.png" class title="img">

<p>äº†è§£å³å¯ï¼Œä¸‡ä¸€ ä»¥åå…¬å¸çš„æ¶æ„å¸ˆï¼Œè¯´è¦ä½¿ç”¨ï¼Œä½ éœ€è¦çŸ¥é“å®ƒæ˜¯ä»€ä¹ˆä¸œè¥¿ï¼</p>
<h2 id="8ã€ä½¿ç”¨æ³¨è§£å¼€å‘"><a href="#8ã€ä½¿ç”¨æ³¨è§£å¼€å‘" class="headerlink" title="8ã€ä½¿ç”¨æ³¨è§£å¼€å‘"></a>8ã€ä½¿ç”¨æ³¨è§£å¼€å‘</h2><h3 id="8-1ã€é¢å‘æ¥å£ç¼–ç¨‹"><a href="#8-1ã€é¢å‘æ¥å£ç¼–ç¨‹" class="headerlink" title="8.1ã€é¢å‘æ¥å£ç¼–ç¨‹"></a>8.1ã€é¢å‘æ¥å£ç¼–ç¨‹</h3><ul>
<li>å¤§å®¶ä¹‹å‰éƒ½å­¦è¿‡é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œä¹Ÿå­¦ä¹ è¿‡æ¥å£ï¼Œä½†åœ¨çœŸæ­£çš„å¼€å‘ä¸­ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬ä¼šé€‰æ‹©é¢å‘æ¥å£ç¼–ç¨‹</li>
<li>æ ¹æœ¬åŸå›  : è§£è€¦ , å¯æ‹“å±• , æé«˜å¤ç”¨ , åˆ†å±‚å¼€å‘ä¸­ , ä¸Šå±‚ä¸ç”¨ç®¡å…·ä½“çš„å®ç° , å¤§å®¶éƒ½éµå®ˆå…±åŒçš„æ ‡å‡† , ä½¿å¾—å¼€å‘å˜å¾—å®¹æ˜“ , è§„èŒƒæ€§æ›´å¥½</li>
<li>åœ¨ä¸€ä¸ªé¢å‘å¯¹è±¡çš„ç³»ç»Ÿä¸­ï¼Œç³»ç»Ÿçš„å„ç§åŠŸèƒ½æ˜¯ç”±è®¸è®¸å¤šå¤šçš„ä¸åŒå¯¹è±¡åä½œå®Œæˆçš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå„ä¸ªå¯¹è±¡å†…éƒ¨æ˜¯å¦‚ä½•å®ç°è‡ªå·±çš„,å¯¹ç³»ç»Ÿè®¾è®¡äººå‘˜æ¥è®²å°±ä¸é‚£ä¹ˆé‡è¦äº†ï¼›</li>
<li>è€Œå„ä¸ªå¯¹è±¡ä¹‹é—´çš„åä½œå…³ç³»åˆ™æˆä¸ºç³»ç»Ÿè®¾è®¡çš„å…³é”®ã€‚å°åˆ°ä¸åŒç±»ä¹‹é—´çš„é€šä¿¡ï¼Œå¤§åˆ°å„æ¨¡å—ä¹‹é—´çš„äº¤äº’ï¼Œåœ¨ç³»ç»Ÿè®¾è®¡ä¹‹åˆéƒ½æ˜¯è¦ç€é‡è€ƒè™‘çš„ï¼Œè¿™ä¹Ÿæ˜¯ç³»ç»Ÿè®¾è®¡çš„ä¸»è¦å·¥ä½œå†…å®¹ã€‚é¢å‘æ¥å£ç¼–ç¨‹å°±æ˜¯æŒ‡æŒ‰ç…§è¿™ç§æ€æƒ³æ¥ç¼–ç¨‹ã€‚</li>
</ul>
<p>å…³äºæ¥å£çš„ç†è§£</p>
<ul>
<li>æ¥å£ä»æ›´æ·±å±‚æ¬¡çš„ç†è§£ï¼Œåº”æ˜¯å®šä¹‰ï¼ˆè§„èŒƒï¼Œçº¦æŸï¼‰ä¸å®ç°ï¼ˆåå®åˆ†ç¦»çš„åŸåˆ™ï¼‰çš„åˆ†ç¦»ã€‚</li>
<li>æ¥å£çš„æœ¬èº«åæ˜ äº†ç³»ç»Ÿè®¾è®¡äººå‘˜å¯¹ç³»ç»Ÿçš„æŠ½è±¡ç†è§£ã€‚</li>
<li>æ¥å£åº”æœ‰ä¸¤ç±»ï¼š</li>
<li>ç¬¬ä¸€ç±»æ˜¯å¯¹ä¸€ä¸ªä¸ªä½“çš„æŠ½è±¡ï¼Œå®ƒå¯å¯¹åº”ä¸ºä¸€ä¸ªæŠ½è±¡ä½“(abstract class)ï¼›</li>
<li>ç¬¬äºŒç±»æ˜¯å¯¹ä¸€ä¸ªä¸ªä½“æŸä¸€æ–¹é¢çš„æŠ½è±¡ï¼Œå³å½¢æˆä¸€ä¸ªæŠ½è±¡é¢ï¼ˆinterfaceï¼‰ï¼›</li>
<li>ä¸€ä¸ªä½“æœ‰å¯èƒ½æœ‰å¤šä¸ªæŠ½è±¡é¢ã€‚æŠ½è±¡ä½“ä¸æŠ½è±¡é¢æ˜¯æœ‰åŒºåˆ«çš„ã€‚</li>
</ul>
<p>ä¸‰ä¸ªé¢å‘åŒºåˆ«</p>
<ul>
<li>é¢å‘å¯¹è±¡æ˜¯æŒ‡ï¼Œæˆ‘ä»¬è€ƒè™‘é—®é¢˜æ—¶ï¼Œä»¥å¯¹è±¡ä¸ºå•ä½ï¼Œè€ƒè™‘å®ƒçš„å±æ€§åŠæ–¹æ³• .</li>
<li>é¢å‘è¿‡ç¨‹æ˜¯æŒ‡ï¼Œæˆ‘ä»¬è€ƒè™‘é—®é¢˜æ—¶ï¼Œä»¥ä¸€ä¸ªå…·ä½“çš„æµç¨‹ï¼ˆäº‹åŠ¡è¿‡ç¨‹ï¼‰ä¸ºå•ä½ï¼Œè€ƒè™‘å®ƒçš„å®ç° .</li>
<li>æ¥å£è®¾è®¡ä¸éæ¥å£è®¾è®¡æ˜¯é’ˆå¯¹å¤ç”¨æŠ€æœ¯è€Œè¨€çš„ï¼Œä¸é¢å‘å¯¹è±¡ï¼ˆè¿‡ç¨‹ï¼‰ä¸æ˜¯ä¸€ä¸ªé—®é¢˜.æ›´å¤šçš„ä½“ç°å°±æ˜¯å¯¹ç³»ç»Ÿæ•´ä½“çš„æ¶æ„</li>
</ul>
<h3 id="8-2ã€ä½¿ç”¨æ³¨è§£å¼€å‘"><a href="#8-2ã€ä½¿ç”¨æ³¨è§£å¼€å‘" class="headerlink" title="8.2ã€ä½¿ç”¨æ³¨è§£å¼€å‘"></a>8.2ã€ä½¿ç”¨æ³¨è§£å¼€å‘</h3><ol>
<li>æ³¨è§£åœ¨æ¥å£ä¸Šå®ç°</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Select(&quot;select * from user&quot;)</span> </span><br><span class="line">List&lt;User&gt; <span class="title function_">getUsers</span><span class="params">()</span>; </span><br></pre></td></tr></table></figure>

<ol>
<li>éœ€è¦å†æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­ç»‘å®šæ¥å£ï¼</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--ç»‘å®šæ¥å£--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span>    </span><br><span class="line">  <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">class</span>=<span class="string">&quot;com.wu.dao.UserMapper&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span> </span><br></pre></td></tr></table></figure>

<ol>
<li>æµ‹è¯•</li>
</ol>
<p>æœ¬è´¨ï¼šåå°„æœºåˆ¶å®ç°</p>
<p>åº•å±‚ï¼šåŠ¨æ€ä»£ç†ï¼</p>
<img src="/2023/11/04/mybatis/1658192880878-af3b2526-9c83-4115-9024-4e227364714d.png" class title="img">

<p><strong>Mybatisè¯¦ç»†çš„æ‰§è¡Œæµç¨‹ï¼</strong></p>
<img src="/2023/11/04/mybatis/1658192895900-34c01e88-832b-4496-a3b6-dbb7fcbac74c.png" class title="img">

<h3 id="8-3ã€CRUD"><a href="#8-3ã€CRUD" class="headerlink" title="8.3ã€CRUD"></a>8.3ã€CRUD</h3><p>æˆ‘ä»¬å¯ä»¥åœ¨å·¥å…·ç±»åˆ›å»ºçš„æ—¶å€™å®ç°è‡ªåŠ¨æäº¤äº‹åŠ¡ï¼</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> SqlSession  <span class="title function_">getSqlSession</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> sqlSessionFactory.openSession(<span class="literal">true</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¼–å†™æ¥å£ï¼Œå¢åŠ æ³¨è§£</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;select * from user&quot;)</span></span><br><span class="line">    List&lt;User&gt; <span class="title function_">getUsers</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ–¹æ³•å­˜åœ¨å¤šä¸ªå‚æ•°ï¼Œæ‰€æœ‰çš„å‚æ•°å‰é¢å¿…é¡»åŠ ä¸Š @Param(&quot;id&quot;)æ³¨è§£</span></span><br><span class="line">    <span class="meta">@Select(&quot;select * from user where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    User <span class="title function_">getUserByID</span><span class="params">(<span class="meta">@Param(&quot;id&quot;)</span> <span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Insert(&quot;insert into user(id,name,pwd) values (#&#123;id&#125;,#&#123;name&#125;,#&#123;password&#125;)&quot;)</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">addUser</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Update(&quot;update user set name=#&#123;name&#125;,pwd=#&#123;password&#125; where id = #&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">updateUser</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Delete(&quot;delete from user where id = #&#123;uid&#125;&quot;)</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">deleteUser</span><span class="params">(<span class="meta">@Param(&quot;uid&quot;)</span> <span class="type">int</span> id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ç±»</p>
<p>ã€æ³¨æ„ï¼šæˆ‘ä»¬å¿…é¡»è¦è®²æ¥å£æ³¨å†Œç»‘å®šåˆ°æˆ‘ä»¬çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­ï¼ã€‘</p>
<p><strong>å…³äº@Param() æ³¨è§£</strong></p>
<ul>
<li>åŸºæœ¬ç±»å‹çš„å‚æ•°æˆ–è€…Stringç±»å‹ï¼Œéœ€è¦åŠ ä¸Š</li>
<li>å¼•ç”¨ç±»å‹ä¸éœ€è¦åŠ </li>
<li>å¦‚æœåªæœ‰ä¸€ä¸ªåŸºæœ¬ç±»å‹çš„è¯ï¼Œå¯ä»¥å¿½ç•¥ï¼Œä½†æ˜¯å»ºè®®å¤§å®¶éƒ½åŠ ä¸Šï¼</li>
<li>æˆ‘ä»¬åœ¨SQLä¸­å¼•ç”¨çš„å°±æ˜¯æˆ‘ä»¬è¿™é‡Œçš„ @Param() ä¸­è®¾å®šçš„å±æ€§åï¼</li>
</ul>
<p><strong>#{} ${} åŒºåˆ«</strong></p>
<h2 id="9ã€Lombok"><a href="#9ã€Lombok" class="headerlink" title="9ã€Lombok"></a>9ã€Lombok</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Project Lombok is a java library that automatically plugs into your editor and build tools, spicing up your java.</span><br><span class="line">Never write another getter or equals method again, with one annotation your <span class="keyword">class</span> <span class="title class_">has</span> a fully featured builder, Automate your logging variables, and much more.</span><br></pre></td></tr></table></figure>

<ul>
<li>java library</li>
<li>plugs</li>
<li>build tools</li>
<li>with one annotation your class</li>
</ul>
<p>ä½¿ç”¨æ­¥éª¤ï¼š</p>
<ol>
<li>åœ¨IDEAä¸­å®‰è£…Lombokæ’ä»¶ï¼</li>
<li>åœ¨é¡¹ç›®ä¸­å¯¼å…¥lombokçš„jaråŒ…</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>åœ¨å®ä½“ç±»ä¸ŠåŠ æ³¨è§£å³å¯ï¼</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@Getter</span> and <span class="meta">@Setter</span></span><br><span class="line"><span class="meta">@FieldNameConstants</span></span><br><span class="line"><span class="meta">@ToString</span></span><br><span class="line"><span class="meta">@EqualsAndHashCode</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span>, <span class="meta">@RequiredArgsConstructor</span> and <span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@Log</span>, <span class="meta">@Log4j</span>, <span class="meta">@Log4j2</span>, <span class="meta">@Slf4j</span>, <span class="meta">@XSlf4j</span>, <span class="meta">@CommonsLog</span>, <span class="meta">@JBossLog</span>, <span class="meta">@Flogger</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Builder</span></span><br><span class="line"><span class="meta">@Singular</span></span><br><span class="line"><span class="meta">@Delegate</span></span><br><span class="line"><span class="meta">@Value</span></span><br><span class="line"><span class="meta">@Accessors</span></span><br><span class="line"><span class="meta">@Wither</span></span><br><span class="line"><span class="meta">@SneakyThrows</span></span><br></pre></td></tr></table></figure>

<p>è¯´æ˜ï¼š</p>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="variable">@Data</span>ï¼šæ— å‚æ„é€ ï¼Œgetã€setã€tostringã€hashcodeï¼Œequals</span><br><span class="line"><span class="variable">@AllArgsConstructor</span></span><br><span class="line"><span class="variable">@NoArgsConstructor</span></span><br><span class="line"><span class="variable">@EqualsAndHashCode</span></span><br><span class="line"><span class="variable">@ToString</span></span><br><span class="line"><span class="variable">@Getter</span></span><br></pre></td></tr></table></figure>

<h2 id="10ã€å¤šå¯¹ä¸€å¤„ç†"><a href="#10ã€å¤šå¯¹ä¸€å¤„ç†" class="headerlink" title="10ã€å¤šå¯¹ä¸€å¤„ç†"></a>10ã€å¤šå¯¹ä¸€å¤„ç†</h2><p>å¤šå¯¹ä¸€ï¼š</p>
<img src="/2023/11/04/mybatis/1658193481435-a9cb2fe3-5694-4aec-965e-e06ff7f5ffa8.png" class title="img">

<ul>
<li>å¤šä¸ªå­¦ç”Ÿï¼Œå¯¹åº”ä¸€ä¸ªè€å¸ˆ</li>
<li>å¯¹äºå­¦ç”Ÿè¿™è¾¹è€Œè¨€ï¼Œ <strong>å…³è”</strong> .. å¤šä¸ªå­¦ç”Ÿï¼Œå…³è”ä¸€ä¸ªè€å¸ˆ ã€å¤šå¯¹ä¸€ã€‘</li>
<li>å¯¹äºè€å¸ˆè€Œè¨€ï¼Œ <strong>é›†åˆ</strong> ï¼Œ ä¸€ä¸ªè€å¸ˆï¼Œæœ‰å¾ˆå¤šå­¦ç”Ÿ ã€ä¸€å¯¹å¤šã€‘</li>
</ul>
<img src="/2023/11/04/mybatis/1658193501349-0d4fd35a-bbdb-49d8-ab5d-c2cddd8895bb.png" class title="img">

<p>SQLï¼š</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `teacher` (</span><br><span class="line">  `id` <span class="type">INT</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `name` <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>INNODB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> teacher(`id`, `name`) <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;å°å´&#x27;</span>); </span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `student` (</span><br><span class="line">  `id` <span class="type">INT</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `name` <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `tid` <span class="type">INT</span>(<span class="number">10</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">  KEY `fktid` (`tid`),</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> `fktid` <span class="keyword">FOREIGN</span> KEY (`tid`) <span class="keyword">REFERENCES</span> `teacher` (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>INNODB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student` (`id`, `name`, `tid`) <span class="keyword">VALUES</span> (<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;å°æ˜&#x27;</span>, <span class="string">&#x27;1&#x27;</span>); </span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student` (`id`, `name`, `tid`) <span class="keyword">VALUES</span> (<span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;å°çº¢&#x27;</span>, <span class="string">&#x27;1&#x27;</span>); </span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student` (`id`, `name`, `tid`) <span class="keyword">VALUES</span> (<span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;å°å¼ &#x27;</span>, <span class="string">&#x27;1&#x27;</span>); </span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student` (`id`, `name`, `tid`) <span class="keyword">VALUES</span> (<span class="string">&#x27;4&#x27;</span>, <span class="string">&#x27;å°æ&#x27;</span>, <span class="string">&#x27;1&#x27;</span>); </span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student` (`id`, `name`, `tid`) <span class="keyword">VALUES</span> (<span class="string">&#x27;5&#x27;</span>, <span class="string">&#x27;å°ç‹&#x27;</span>, <span class="string">&#x27;1&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="æµ‹è¯•ç¯å¢ƒæ­å»º"><a href="#æµ‹è¯•ç¯å¢ƒæ­å»º" class="headerlink" title="æµ‹è¯•ç¯å¢ƒæ­å»º"></a>æµ‹è¯•ç¯å¢ƒæ­å»º</h3><ol>
<li>å¯¼å…¥lombok</li>
<li>æ–°å»ºå®ä½“ç±» Teacherï¼ŒStudent</li>
<li>å»ºç«‹Mapperæ¥å£</li>
<li>å»ºç«‹Mapper.XMLæ–‡ä»¶</li>
<li>åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­ç»‘å®šæ³¨å†Œæˆ‘ä»¬çš„Mapperæ¥å£æˆ–è€…æ–‡ä»¶ï¼ã€æ–¹å¼å¾ˆå¤šï¼Œéšå¿ƒé€‰ã€‘</li>
<li>æµ‹è¯•æŸ¥è¯¢æ˜¯å¦èƒ½å¤ŸæˆåŠŸï¼</li>
</ol>
<h3 id="æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†"><a href="#æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†" class="headerlink" title="æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†"></a>æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    æ€è·¯:</span></span><br><span class="line"><span class="comment">        1. æŸ¥è¯¢æ‰€æœ‰çš„å­¦ç”Ÿä¿¡æ¯</span></span><br><span class="line"><span class="comment">        2. æ ¹æ®æŸ¥è¯¢å‡ºæ¥çš„å­¦ç”Ÿçš„tidï¼Œå¯»æ‰¾å¯¹åº”çš„è€å¸ˆï¼  å­æŸ¥è¯¢</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getStudent&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;StudentTeacher&quot;</span>&gt;</span></span><br><span class="line">    select * from student</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;StudentTeacher&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¤æ‚çš„å±æ€§ï¼Œæˆ‘ä»¬éœ€è¦å•ç‹¬å¤„ç† å¯¹è±¡ï¼š association é›†åˆï¼š collection --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;teacher&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tid&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;Teacher&quot;</span> <span class="attr">select</span>=<span class="string">&quot;getTeacher&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getTeacher&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Teacher&quot;</span>&gt;</span></span><br><span class="line">    select * from teacher where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†"><a href="#æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†" class="headerlink" title="æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†"></a>æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getStudent2&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;StudentTeacher2&quot;</span>&gt;</span></span><br><span class="line">    select s.id sid,s.name sname,t.name tname</span><br><span class="line">    from student s,teacher t</span><br><span class="line">    where s.tid = t.id;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;StudentTeacher2&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sid&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sname&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;teacher&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;Teacher&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tname&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å›é¡¾Mysql å¤šå¯¹ä¸€æŸ¥è¯¢æ–¹å¼ï¼š</p>
<ul>
<li>å­æŸ¥è¯¢</li>
<li>è”è¡¨æŸ¥è¯¢</li>
</ul>
<h2 id="11ã€ä¸€å¯¹å¤šå¤„ç†"><a href="#11ã€ä¸€å¯¹å¤šå¤„ç†" class="headerlink" title="11ã€ä¸€å¯¹å¤šå¤„ç†"></a>11ã€ä¸€å¯¹å¤šå¤„ç†</h2><p>æ¯”å¦‚ï¼šä¸€ä¸ªè€å¸ˆæ‹¥æœ‰å¤šä¸ªå­¦ç”Ÿï¼</p>
<p>å¯¹äºè€å¸ˆè€Œè¨€ï¼Œå°±æ˜¯ä¸€å¯¹å¤šçš„å…³ç³»!</p>
<h3 id="ç¯å¢ƒæ­å»º"><a href="#ç¯å¢ƒæ­å»º" class="headerlink" title="ç¯å¢ƒæ­å»º"></a>ç¯å¢ƒæ­å»º</h3><ol>
<li>ç¯å¢ƒæ­å»ºï¼Œå’Œåˆšæ‰ä¸€æ ·</li>
</ol>
<p><strong>å®ä½“ç±»</strong></p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> tid;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Teacher</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¸€ä¸ªè€å¸ˆæ‹¥æœ‰å¤šä¸ªå­¦ç”Ÿ</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Student&gt; students;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†-1"><a href="#æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†-1" class="headerlink" title="æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†"></a>æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--æŒ‰ç»“æœåµŒå¥—æŸ¥è¯¢--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getTeacher&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;TeacherStudent&quot;</span>&gt;</span></span><br><span class="line">    select s.id sid, s.name sname, t.name tname,t.id tid</span><br><span class="line">    from student s,teacher t</span><br><span class="line">    where s.tid = t.id and t.id = #&#123;tid&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;TeacherStudent&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Teacher&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tid&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tname&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--å¤æ‚çš„å±æ€§ï¼Œæˆ‘ä»¬éœ€è¦å•ç‹¬å¤„ç† å¯¹è±¡ï¼š association é›†åˆï¼š collection</span></span><br><span class="line"><span class="comment">    javaType=&quot;&quot; æŒ‡å®šå±æ€§çš„ç±»å‹ï¼</span></span><br><span class="line"><span class="comment">    é›†åˆä¸­çš„æ³›å‹ä¿¡æ¯ï¼Œæˆ‘ä»¬ä½¿ç”¨ofTypeè·å–</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;students&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sid&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> <span class="attr">column</span>=<span class="string">&quot;sname&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">property</span>=<span class="string">&quot;tid&quot;</span> <span class="attr">column</span>=<span class="string">&quot;tid&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†-1"><a href="#æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†-1" class="headerlink" title="æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†"></a>æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç†</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getTeacher2&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;TeacherStudent2&quot;</span>&gt;</span></span><br><span class="line">    select * from mybatis.teacher where id = #&#123;tid&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;TeacherStudent2&quot;</span> <span class="attr">type</span>=<span class="string">&quot;Teacher&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;students&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;ArrayList&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;Student&quot;</span> <span class="attr">select</span>=<span class="string">&quot;getStudentByTeacherId&quot;</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getStudentByTeacherId&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;Student&quot;</span>&gt;</span></span><br><span class="line">    select * from mybatis.student where tid = #&#123;tid&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><ol>
<li><p>å…³è” - association ã€å¤šå¯¹ä¸€ã€‘</p>
</li>
<li><p>é›†åˆ - collection ã€ä¸€å¯¹å¤šã€‘</p>
</li>
<li><p>javaType &amp; ofType</p>
</li>
<li><ol>
<li>JavaType ç”¨æ¥æŒ‡å®šå®ä½“ç±»ä¸­å±æ€§çš„ç±»å‹</li>
<li>ofType ç”¨æ¥æŒ‡å®šæ˜ å°„åˆ°Listæˆ–è€…é›†åˆä¸­çš„ pojoç±»å‹ï¼Œæ³›å‹ä¸­çš„çº¦æŸç±»å‹ï¼</li>
</ol>
</li>
</ol>
<p>æ³¨æ„ç‚¹ï¼š</p>
<ul>
<li>ä¿è¯SQLçš„å¯è¯»æ€§ï¼Œå°½é‡ä¿è¯é€šä¿—æ˜“æ‡‚</li>
<li>æ³¨æ„ä¸€å¯¹å¤šå’Œå¤šå¯¹ä¸€ä¸­ï¼Œå±æ€§åå’Œå­—æ®µçš„é—®é¢˜ï¼</li>
<li>å¦‚æœé—®é¢˜ä¸å¥½æ’æŸ¥é”™è¯¯ï¼Œå¯ä»¥ä½¿ç”¨æ—¥å¿— ï¼Œ å»ºè®®ä½¿ç”¨ Log4j</li>
</ul>
<p><strong>æ…¢SQL 1s 1000s</strong></p>
<p>é¢è¯•é«˜é¢‘</p>
<ul>
<li>Mysqlå¼•æ“</li>
<li>InnoDBåº•å±‚åŸç†</li>
<li>ç´¢å¼•</li>
<li>ç´¢å¼•ä¼˜åŒ–ï¼</li>
</ul>
<h2 id="12ã€åŠ¨æ€SQL"><a href="#12ã€åŠ¨æ€SQL" class="headerlink" title="12ã€åŠ¨æ€SQL"></a>12ã€åŠ¨æ€SQL</h2><p><strong>ä»€ä¹ˆæ˜¯åŠ¨æ€SQLï¼šåŠ¨æ€SQLå°±æ˜¯æŒ‡æ ¹æ®ä¸åŒçš„æ¡ä»¶ç”Ÿæˆä¸åŒçš„SQLè¯­å¥</strong></p>
<p>åˆ©ç”¨åŠ¨æ€ SQL è¿™ä¸€ç‰¹æ€§å¯ä»¥å½»åº•æ‘†è„±è¿™ç§ç—›è‹¦ã€‚</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">åŠ¨æ€ SQL å…ƒç´ å’Œ JSTL æˆ–åŸºäºç±»ä¼¼ XML çš„æ–‡æœ¬å¤„ç†å™¨ç›¸ä¼¼ã€‚åœ¨ MyBatis ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œæœ‰å¾ˆå¤šå…ƒç´ éœ€è¦èŠ±æ—¶é—´äº†è§£ã€‚MyBatis 3 å¤§å¤§ç²¾ç®€äº†å…ƒç´ ç§ç±»ï¼Œç°åœ¨åªéœ€å­¦ä¹ åŸæ¥ä¸€åŠçš„å…ƒç´ ä¾¿å¯ã€‚MyBatis é‡‡ç”¨åŠŸèƒ½å¼ºå¤§çš„åŸºäº OGNL çš„è¡¨è¾¾å¼æ¥æ·˜æ±°å…¶å®ƒå¤§éƒ¨åˆ†å…ƒç´ ã€‚</span><br><span class="line"></span><br><span class="line">if</span><br><span class="line">choose (when, otherwise)</span><br><span class="line">trim (where, set)</span><br><span class="line">foreach</span><br></pre></td></tr></table></figure>

<h3 id="æ­å»ºç¯å¢ƒ"><a href="#æ­å»ºç¯å¢ƒ" class="headerlink" title="æ­å»ºç¯å¢ƒ"></a>æ­å»ºç¯å¢ƒ</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `blog` (</span><br><span class="line">  `id` <span class="type">varchar</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;åšå®¢id&#x27;</span>,</span><br><span class="line">  `title` <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;åšå®¢æ ‡é¢˜&#x27;</span>,</span><br><span class="line">  `author` <span class="type">varchar</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;åšå®¢ä½œè€…&#x27;</span>,</span><br><span class="line">  `create_time` datetime <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">  `views` <span class="type">int</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;æµè§ˆé‡&#x27;</span></span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8</span><br></pre></td></tr></table></figure>

<p>åˆ›å»ºä¸€ä¸ªåŸºç¡€å·¥ç¨‹</p>
<ol>
<li>å¯¼åŒ…</li>
<li>ç¼–å†™é…ç½®æ–‡ä»¶</li>
<li>ç¼–å†™å®ä½“ç±»</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Blog</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line">    <span class="keyword">private</span> String author;</span><br><span class="line">    <span class="keyword">private</span> Date createTime;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> views;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>ç¼–å†™å®ä½“ç±»å¯¹åº”Mapperæ¥å£ å’Œ Mapper.XMLæ–‡ä»¶</li>
</ol>
<h3 id="IF"><a href="#IF" class="headerlink" title="IF"></a>IF</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryBlogIF&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;blog&quot;</span>&gt;</span></span><br><span class="line">    select * from mybatis.blog where 1=1</span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">        and title = #&#123;title&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author != null&quot;</span>&gt;</span></span><br><span class="line">        and author = #&#123;author&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="choose-when-otherwise"><a href="#choose-when-otherwise" class="headerlink" title="choose (when, otherwise)"></a>choose (when, otherwise)</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryBlogChoose&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;blog&quot;</span>&gt;</span></span><br><span class="line">    select * from mybatis.blog</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">choose</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">                title = #&#123;title&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">when</span> <span class="attr">test</span>=<span class="string">&quot;author != null&quot;</span>&gt;</span></span><br><span class="line">                and author = #&#123;author&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">when</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">otherwise</span>&gt;</span></span><br><span class="line">                and views = #&#123;views&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">otherwise</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">choose</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="trim-where-set"><a href="#trim-where-set" class="headerlink" title="trim (where,set)"></a>trim (where,set)</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">select * from mybatis.blog</span><br><span class="line"><span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">        title = #&#123;title&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author != null&quot;</span>&gt;</span></span><br><span class="line">        and author = #&#123;author&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateBlog&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span>&gt;</span></span><br><span class="line">    update mybatis.blog</span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">            title = #&#123;title&#125;,</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author != null&quot;</span>&gt;</span></span><br><span class="line">            author = #&#123;author&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    where id = #&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>æ‰€è°“çš„åŠ¨æ€SQLï¼Œæœ¬è´¨è¿˜æ˜¯SQLè¯­å¥ ï¼Œ åªæ˜¯æˆ‘ä»¬å¯ä»¥åœ¨SQLå±‚é¢ï¼Œå»æ‰§è¡Œä¸€ä¸ªé€»è¾‘ä»£ç </strong></p>
<p>if</p>
<p>where ï¼Œ set ï¼Œ choose ï¼Œwhen</p>
<h3 id="SQLç‰‡æ®µ"><a href="#SQLç‰‡æ®µ" class="headerlink" title="SQLç‰‡æ®µ"></a>SQLç‰‡æ®µ</h3><p>æœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå°†ä¸€äº›åŠŸèƒ½çš„éƒ¨åˆ†æŠ½å–å‡ºæ¥ï¼Œæ–¹ä¾¿å¤ç”¨ï¼</p>
<ol>
<li>ä½¿ç”¨SQLæ ‡ç­¾æŠ½å–å…¬å…±çš„éƒ¨åˆ†</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;if-title-author&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title != null&quot;</span>&gt;</span></span><br><span class="line">        title = #&#123;title&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;author != null&quot;</span>&gt;</span></span><br><span class="line">        and author = #&#123;author&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>åœ¨éœ€è¦ä½¿ç”¨çš„åœ°æ–¹ä½¿ç”¨Includeæ ‡ç­¾å¼•ç”¨å³å¯</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryBlogIF&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;blog&quot;</span>&gt;</span></span><br><span class="line">    select * from mybatis.blog</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;if-title-author&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ³¨æ„äº‹é¡¹ï¼š</p>
<ul>
<li>æœ€å¥½åŸºäºå•è¡¨æ¥å®šä¹‰SQLç‰‡æ®µï¼</li>
<li>ä¸è¦å­˜åœ¨whereæ ‡ç­¾</li>
</ul>
<h3 id="Foreach"><a href="#Foreach" class="headerlink" title="Foreach"></a>Foreach</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">where</span> <span class="number">1</span><span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> </span><br><span class="line"></span><br><span class="line">  <span class="operator">&lt;</span>foreach item<span class="operator">=</span>&quot;id&quot; collection<span class="operator">=</span>&quot;ids&quot;</span><br><span class="line">      <span class="keyword">open</span><span class="operator">=</span>&quot;(&quot; separator<span class="operator">=</span>&quot;or&quot; <span class="keyword">close</span><span class="operator">=</span>&quot;)&quot;<span class="operator">&gt;</span></span><br><span class="line">        #&#123;id&#125;</span><br><span class="line">  <span class="operator">&lt;</span><span class="operator">/</span>foreach<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line">(id<span class="operator">=</span><span class="number">1</span> <span class="keyword">or</span> id<span class="operator">=</span><span class="number">2</span> <span class="keyword">or</span> id<span class="operator">=</span><span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<img src="/2023/11/04/mybatis/1658194950770-d5707686-7d04-45ff-8515-dadd2d41077c.png" class title="img">

<img src="/2023/11/04/mybatis/1658194961829-01d74913-7cc1-43b3-a948-c8cd287faa32.png" class title="img">

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">        select * from mybatis.blog where 1=1 and (id=1 or id = 2 or id=3)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        æˆ‘ä»¬ç°åœ¨ä¼ é€’ä¸€ä¸ªä¸‡èƒ½çš„map ï¼Œ è¿™mapä¸­å¯ä»¥å­˜åœ¨ä¸€ä¸ªé›†åˆï¼</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;queryBlogForeach&quot;</span> <span class="attr">parameterType</span>=<span class="string">&quot;map&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;blog&quot;</span>&gt;</span></span><br><span class="line">    select * from mybatis.blog</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;ids&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">open</span>=<span class="string">&quot;and (&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;or&quot;</span>&gt;</span></span><br><span class="line">            id = #&#123;id&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>åŠ¨æ€SQLå°±æ˜¯åœ¨æ‹¼æ¥SQLè¯­å¥ï¼Œæˆ‘ä»¬åªè¦ä¿è¯SQLçš„æ­£ç¡®æ€§ï¼ŒæŒ‰ç…§SQLçš„æ ¼å¼ï¼Œå»æ’åˆ—ç»„åˆå°±å¯ä»¥äº†</p>
<p>å»ºè®®ï¼š</p>
<ul>
<li>ç°åœ¨Mysqlä¸­å†™å‡ºå®Œæ•´çš„SQL,å†å¯¹åº”çš„å»ä¿®æ”¹æˆä¸ºæˆ‘ä»¬çš„åŠ¨æ€SQLå®ç°é€šç”¨å³å¯ï¼</li>
</ul>
<h2 id="13ã€ç¼“å­˜"><a href="#13ã€ç¼“å­˜" class="headerlink" title="13ã€ç¼“å­˜"></a>13ã€ç¼“å­˜</h2><h3 id="13-1ã€ç®€ä»‹"><a href="#13-1ã€ç®€ä»‹" class="headerlink" title="13.1ã€ç®€ä»‹"></a>13.1ã€ç®€ä»‹</h3><figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">æŸ¥è¯¢  ï¼š  è¿æ¥æ•°æ®åº“ ï¼Œè€—èµ„æºï¼</span><br><span class="line">	ä¸€æ¬¡æŸ¥è¯¢çš„ç»“æœï¼Œç»™ä»–æš‚å­˜åœ¨ä¸€ä¸ªå¯ä»¥ç›´æ¥å–åˆ°çš„åœ°æ–¹ï¼<span class="comment">--&gt; å†…å­˜ ï¼š ç¼“å­˜</span></span><br><span class="line">	</span><br><span class="line">æˆ‘ä»¬å†æ¬¡æŸ¥è¯¢ç›¸åŒæ•°æ®çš„æ—¶å€™ï¼Œç›´æ¥èµ°ç¼“å­˜ï¼Œå°±ä¸ç”¨èµ°æ•°æ®åº“äº†</span><br></pre></td></tr></table></figure>

<ol>
<li>ä»€ä¹ˆæ˜¯ç¼“å­˜ [ Cache ]ï¼Ÿ</li>
</ol>
<ul>
<li><ul>
<li>å­˜åœ¨å†…å­˜ä¸­çš„ä¸´æ—¶æ•°æ®ã€‚</li>
<li>å°†ç”¨æˆ·ç»å¸¸æŸ¥è¯¢çš„æ•°æ®æ”¾åœ¨ç¼“å­˜ï¼ˆå†…å­˜ï¼‰ä¸­ï¼Œç”¨æˆ·å»æŸ¥è¯¢æ•°æ®å°±ä¸ç”¨ä»ç£ç›˜ä¸Š(å…³ç³»å‹æ•°æ®åº“æ•°æ®æ–‡ä»¶)æŸ¥è¯¢ï¼Œä»ç¼“å­˜ä¸­æŸ¥è¯¢ï¼Œä»è€Œæé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œè§£å†³äº†é«˜å¹¶å‘ç³»ç»Ÿçš„æ€§èƒ½é—®é¢˜ã€‚</li>
</ul>
</li>
</ul>
<ol>
<li>ä¸ºä»€ä¹ˆä½¿ç”¨ç¼“å­˜ï¼Ÿ</li>
</ol>
<ul>
<li><ul>
<li>å‡å°‘å’Œæ•°æ®åº“çš„äº¤äº’æ¬¡æ•°ï¼Œå‡å°‘ç³»ç»Ÿå¼€é”€ï¼Œæé«˜ç³»ç»Ÿæ•ˆç‡ã€‚</li>
</ul>
</li>
</ul>
<ol>
<li>ä»€ä¹ˆæ ·çš„æ•°æ®èƒ½ä½¿ç”¨ç¼“å­˜ï¼Ÿ</li>
</ol>
<ul>
<li><ul>
<li>ç»å¸¸æŸ¥è¯¢å¹¶ä¸”ä¸ç»å¸¸æ”¹å˜çš„æ•°æ®ã€‚ã€å¯ä»¥ä½¿ç”¨ç¼“å­˜ã€‘</li>
</ul>
</li>
</ul>
<h3 id="13-2ã€Mybatisç¼“å­˜"><a href="#13-2ã€Mybatisç¼“å­˜" class="headerlink" title="13.2ã€Mybatisç¼“å­˜"></a>13.2ã€Mybatisç¼“å­˜</h3><ul>
<li><p>MyBatisåŒ…å«ä¸€ä¸ªéå¸¸å¼ºå¤§çš„æŸ¥è¯¢ç¼“å­˜ç‰¹æ€§ï¼Œå®ƒå¯ä»¥éå¸¸æ–¹ä¾¿åœ°å®šåˆ¶å’Œé…ç½®ç¼“å­˜ã€‚ç¼“å­˜å¯ä»¥æå¤§çš„æå‡æŸ¥è¯¢æ•ˆç‡ã€‚</p>
</li>
<li><p>MyBatisç³»ç»Ÿä¸­é»˜è®¤å®šä¹‰äº†ä¸¤çº§ç¼“å­˜ï¼š<strong>ä¸€çº§ç¼“å­˜</strong>å’Œ<strong>äºŒçº§ç¼“å­˜</strong></p>
</li>
<li><ul>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼Œåªæœ‰ä¸€çº§ç¼“å­˜å¼€å¯ã€‚ï¼ˆSqlSessionçº§åˆ«çš„ç¼“å­˜ï¼Œä¹Ÿç§°ä¸ºæœ¬åœ°ç¼“å­˜ï¼‰</li>
<li>äºŒçº§ç¼“å­˜éœ€è¦æ‰‹åŠ¨å¼€å¯å’Œé…ç½®ï¼Œä»–æ˜¯åŸºäºnamespaceçº§åˆ«çš„ç¼“å­˜ã€‚</li>
<li>ä¸ºäº†æé«˜æ‰©å±•æ€§ï¼ŒMyBatiså®šä¹‰äº†ç¼“å­˜æ¥å£Cacheã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å®ç°Cacheæ¥å£æ¥è‡ªå®šä¹‰äºŒçº§ç¼“å­˜</li>
</ul>
</li>
</ul>
<h3 id="13-3ã€ä¸€çº§ç¼“å­˜"><a href="#13-3ã€ä¸€çº§ç¼“å­˜" class="headerlink" title="13.3ã€ä¸€çº§ç¼“å­˜"></a>13.3ã€ä¸€çº§ç¼“å­˜</h3><ul>
<li><p>ä¸€çº§ç¼“å­˜ä¹Ÿå«æœ¬åœ°ç¼“å­˜ï¼š SqlSession</p>
</li>
<li><ul>
<li>ä¸æ•°æ®åº“åŒä¸€æ¬¡ä¼šè¯æœŸé—´æŸ¥è¯¢åˆ°çš„æ•°æ®ä¼šæ”¾åœ¨æœ¬åœ°ç¼“å­˜ä¸­ã€‚</li>
<li>ä»¥åå¦‚æœéœ€è¦è·å–ç›¸åŒçš„æ•°æ®ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­æ‹¿ï¼Œæ²¡å¿…é¡»å†å»æŸ¥è¯¢æ•°æ®åº“ï¼›</li>
</ul>
</li>
</ul>
<p>æµ‹è¯•æ­¥éª¤ï¼š</p>
<ol>
<li>å¼€å¯æ—¥å¿—ï¼</li>
<li>æµ‹è¯•åœ¨ä¸€ä¸ªSesionä¸­æŸ¥è¯¢ä¸¤æ¬¡ç›¸åŒè®°å½•</li>
<li>æŸ¥çœ‹æ—¥å¿—è¾“å‡º</li>
</ol>
<img src="/2023/11/04/mybatis/1658195158819-74ac4b03-80ce-4653-ab05-98145e3d6a7d.png" class title="img">

<p>ç¼“å­˜å¤±æ•ˆçš„æƒ…å†µï¼š</p>
<ol>
<li>æŸ¥è¯¢ä¸åŒçš„ä¸œè¥¿</li>
<li>å¢åˆ æ”¹æ“ä½œï¼Œå¯èƒ½ä¼šæ”¹å˜åŸæ¥çš„æ•°æ®ï¼Œæ‰€ä»¥å¿…å®šä¼šåˆ·æ–°ç¼“å­˜ï¼</li>
</ol>
<img src="/2023/11/04/mybatis/1658195206169-43cddb36-35dc-4e78-b7f3-8b26c4bc8b45.png" class title="img">

<ol>
<li>æŸ¥è¯¢ä¸åŒçš„Mapper.xml</li>
<li>æ‰‹åŠ¨æ¸…ç†ç¼“å­˜ï¼</li>
</ol>
<img src="/2023/11/04/mybatis/1658195232348-f6a9db7f-3c33-4eec-8370-3a86c8d7a39f.png" class title="img">

<p>å°ç»“ï¼šä¸€çº§ç¼“å­˜é»˜è®¤æ˜¯å¼€å¯çš„ï¼Œåªåœ¨ä¸€æ¬¡SqlSessionä¸­æœ‰æ•ˆï¼Œä¹Ÿå°±æ˜¯æ‹¿åˆ°è¿æ¥åˆ°å…³é—­è¿æ¥è¿™ä¸ªåŒºé—´æ®µï¼</p>
<p>ä¸€çº§ç¼“å­˜å°±æ˜¯ä¸€ä¸ªMapã€‚</p>
<h3 id="13-4ã€äºŒçº§ç¼“å­˜"><a href="#13-4ã€äºŒçº§ç¼“å­˜" class="headerlink" title="13.4ã€äºŒçº§ç¼“å­˜"></a>13.4ã€äºŒçº§ç¼“å­˜</h3><ul>
<li><p>äºŒçº§ç¼“å­˜ä¹Ÿå«å…¨å±€ç¼“å­˜ï¼Œä¸€çº§ç¼“å­˜ä½œç”¨åŸŸå¤ªä½äº†ï¼Œæ‰€ä»¥è¯ç”Ÿäº†äºŒçº§ç¼“å­˜</p>
</li>
<li><p>åŸºäºnamespaceçº§åˆ«çš„ç¼“å­˜ï¼Œä¸€ä¸ªåç§°ç©ºé—´ï¼Œå¯¹åº”ä¸€ä¸ªäºŒçº§ç¼“å­˜ï¼›</p>
</li>
<li><p>å·¥ä½œæœºåˆ¶</p>
</li>
<li><ul>
<li>ä¸€ä¸ªä¼šè¯æŸ¥è¯¢ä¸€æ¡æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®å°±ä¼šè¢«æ”¾åœ¨å½“å‰ä¼šè¯çš„ä¸€çº§ç¼“å­˜ä¸­ï¼›</li>
<li>å¦‚æœå½“å‰ä¼šè¯å…³é—­äº†ï¼Œè¿™ä¸ªä¼šè¯å¯¹åº”çš„ä¸€çº§ç¼“å­˜å°±æ²¡äº†ï¼›ä½†æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ˜¯ï¼Œä¼šè¯å…³é—­äº†ï¼Œä¸€çº§ç¼“å­˜ä¸­çš„æ•°æ®è¢«ä¿å­˜åˆ°äºŒçº§ç¼“å­˜ä¸­ï¼›</li>
<li>æ–°çš„ä¼šè¯æŸ¥è¯¢ä¿¡æ¯ï¼Œå°±å¯ä»¥ä»äºŒçº§ç¼“å­˜ä¸­è·å–å†…å®¹ï¼›</li>
<li>ä¸åŒçš„mapperæŸ¥å‡ºçš„æ•°æ®ä¼šæ”¾åœ¨è‡ªå·±å¯¹åº”çš„ç¼“å­˜ï¼ˆmapï¼‰ä¸­ï¼›</li>
</ul>
</li>
</ul>
<p>æ­¥éª¤ï¼š</p>
<ol>
<li>å¼€å¯å…¨å±€ç¼“å­˜</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--æ˜¾ç¤ºçš„å¼€å¯å…¨å±€ç¼“å­˜--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;cacheEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>åœ¨è¦ä½¿ç”¨äºŒçº§ç¼“å­˜çš„Mapperä¸­å¼€å¯</li>
</ol>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--åœ¨å½“å‰Mapper.xmlä¸­ä½¿ç”¨äºŒçº§ç¼“å­˜--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">cache</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥è‡ªå®šä¹‰å‚æ•°</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--åœ¨å½“å‰Mapper.xmlä¸­ä½¿ç”¨äºŒçº§ç¼“å­˜--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">cache</span>  <span class="attr">eviction</span>=<span class="string">&quot;FIFO&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">flushInterval</span>=<span class="string">&quot;60000&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">size</span>=<span class="string">&quot;512&quot;</span></span></span><br><span class="line"><span class="tag">       <span class="attr">readOnly</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>æµ‹è¯•</li>
</ol>
<p>â€‹     \1. é—®é¢˜ï¼šæˆ‘ä»¬éœ€è¦å°†å®ä½“ç±»åºåˆ—åŒ–ï¼å¦åˆ™å°±ä¼šæŠ¥é”™ï¼</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Caused by: java.io.NotSerializableException: com.kuang.pojo.User</span><br></pre></td></tr></table></figure>

<p>   \2. è§£å†³</p>
<img src="/2023/11/04/mybatis/1658196568590-c92da223-6a31-4028-9c1c-6c55eaa8de46.png" class title="img">

<p>å°ç»“ï¼š</p>
<ul>
<li>åªè¦å¼€å¯äº†äºŒçº§ç¼“å­˜ï¼Œåœ¨åŒä¸€ä¸ªMapperä¸‹å°±æœ‰æ•ˆ</li>
<li>æ‰€æœ‰çš„æ•°æ®éƒ½ä¼šå…ˆæ”¾åœ¨ä¸€çº§ç¼“å­˜ä¸­ï¼›</li>
<li>åªæœ‰å½“ä¼šè¯æäº¤ï¼Œæˆ–è€…å…³é—­çš„æ—¶å€™ï¼Œæ‰ä¼šæäº¤åˆ°äºŒçº§ç¼“å†²ä¸­ï¼</li>
</ul>
<h3 id="13-5ã€ç¼“å­˜åŸç†"><a href="#13-5ã€ç¼“å­˜åŸç†" class="headerlink" title="13.5ã€ç¼“å­˜åŸç†"></a>13.5ã€ç¼“å­˜åŸç†</h3><img src="/2023/11/04/mybatis/1658195551324-688fd705-860f-4fce-a0bc-bbce51ee0625.png" class title="img">

<h3 id="13-6ã€è‡ªå®šä¹‰ç¼“å­˜-ehcache"><a href="#13-6ã€è‡ªå®šä¹‰ç¼“å­˜-ehcache" class="headerlink" title="13.6ã€è‡ªå®šä¹‰ç¼“å­˜-ehcache"></a>13.6ã€è‡ªå®šä¹‰ç¼“å­˜-ehcache</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">Ehcacheæ˜¯ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„å¼€æºJavaåˆ†å¸ƒå¼ç¼“å­˜ã€‚ä¸»è¦é¢å‘é€šç”¨ç¼“å­˜</span><br></pre></td></tr></table></figure>

<p>è¦åœ¨ç¨‹åºä¸­ä½¿ç”¨ehcacheï¼Œå…ˆè¦å¯¼åŒ…ï¼</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis.caches/mybatis-ehcache --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.caches<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-ehcache<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>åœ¨mapperä¸­æŒ‡å®šä½¿ç”¨æˆ‘ä»¬çš„ehcacheç¼“å­˜å®ç°ï¼</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--åœ¨å½“å‰Mapper.xmlä¸­ä½¿ç”¨äºŒçº§ç¼“å­˜--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">cache</span> <span class="attr">type</span>=<span class="string">&quot;org.mybatis.caches.ehcache.EhcacheCache&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure>

<p>ehcache.xml</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ehcache</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:noNamespaceSchemaLocation</span>=<span class="string">&quot;http://ehcache.org/ehcache.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">updateCheck</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">       diskStoreï¼šä¸ºç¼“å­˜è·¯å¾„ï¼Œehcacheåˆ†ä¸ºå†…å­˜å’Œç£ç›˜ä¸¤çº§ï¼Œæ­¤å±æ€§å®šä¹‰ç£ç›˜çš„ç¼“å­˜ä½ç½®ã€‚å‚æ•°è§£é‡Šå¦‚ä¸‹ï¼š</span></span><br><span class="line"><span class="comment">       user.home â€“ ç”¨æˆ·ä¸»ç›®å½•</span></span><br><span class="line"><span class="comment">       user.dir  â€“ ç”¨æˆ·å½“å‰å·¥ä½œç›®å½•</span></span><br><span class="line"><span class="comment">       java.io.tmpdir â€“ é»˜è®¤ä¸´æ—¶æ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">diskStore</span> <span class="attr">path</span>=<span class="string">&quot;./tmpdir/Tmp_EhCache&quot;</span>/&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">defaultCache</span></span></span><br><span class="line"><span class="tag">            <span class="attr">eternal</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">maxElementsInMemory</span>=<span class="string">&quot;10000&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">overflowToDisk</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">diskPersistent</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">timeToIdleSeconds</span>=<span class="string">&quot;1800&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">timeToLiveSeconds</span>=<span class="string">&quot;259200&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">memoryStoreEvictionPolicy</span>=<span class="string">&quot;LRU&quot;</span>/&gt;</span></span><br><span class="line"> </span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span></span></span><br><span class="line"><span class="tag">            <span class="attr">name</span>=<span class="string">&quot;cloud_user&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">eternal</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">maxElementsInMemory</span>=<span class="string">&quot;5000&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">overflowToDisk</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">diskPersistent</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">timeToIdleSeconds</span>=<span class="string">&quot;1800&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">timeToLiveSeconds</span>=<span class="string">&quot;1800&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">memoryStoreEvictionPolicy</span>=<span class="string">&quot;LRU&quot;</span>/&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">       defaultCacheï¼šé»˜è®¤ç¼“å­˜ç­–ç•¥ï¼Œå½“ehcacheæ‰¾ä¸åˆ°å®šä¹‰çš„ç¼“å­˜æ—¶ï¼Œåˆ™ä½¿ç”¨è¿™ä¸ªç¼“å­˜ç­–ç•¥ã€‚åªèƒ½å®šä¹‰ä¸€ä¸ªã€‚</span></span><br><span class="line"><span class="comment">     --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">      name:ç¼“å­˜åç§°ã€‚</span></span><br><span class="line"><span class="comment">      maxElementsInMemory:ç¼“å­˜æœ€å¤§æ•°ç›®</span></span><br><span class="line"><span class="comment">      maxElementsOnDiskï¼šç¡¬ç›˜æœ€å¤§ç¼“å­˜ä¸ªæ•°ã€‚</span></span><br><span class="line"><span class="comment">      eternal:å¯¹è±¡æ˜¯å¦æ°¸ä¹…æœ‰æ•ˆï¼Œä¸€ä½†è®¾ç½®äº†ï¼Œtimeoutå°†ä¸èµ·ä½œç”¨ã€‚</span></span><br><span class="line"><span class="comment">      overflowToDisk:æ˜¯å¦ä¿å­˜åˆ°ç£ç›˜ï¼Œå½“ç³»ç»Ÿå½“æœºæ—¶</span></span><br><span class="line"><span class="comment">      timeToIdleSeconds:è®¾ç½®å¯¹è±¡åœ¨å¤±æ•ˆå‰çš„å…è®¸é—²ç½®æ—¶é—´ï¼ˆå•ä½ï¼šç§’ï¼‰ã€‚ä»…å½“eternal=falseå¯¹è±¡ä¸æ˜¯æ°¸ä¹…æœ‰æ•ˆæ—¶ä½¿ç”¨ï¼Œå¯é€‰å±æ€§ï¼Œé»˜è®¤å€¼æ˜¯0ï¼Œä¹Ÿå°±æ˜¯å¯é—²ç½®æ—¶é—´æ— ç©·å¤§ã€‚</span></span><br><span class="line"><span class="comment">      timeToLiveSeconds:è®¾ç½®å¯¹è±¡åœ¨å¤±æ•ˆå‰å…è®¸å­˜æ´»æ—¶é—´ï¼ˆå•ä½ï¼šç§’ï¼‰ã€‚æœ€å¤§æ—¶é—´ä»‹äºåˆ›å»ºæ—¶é—´å’Œå¤±æ•ˆæ—¶é—´ä¹‹é—´ã€‚ä»…å½“eternal=falseå¯¹è±¡ä¸æ˜¯æ°¸ä¹…æœ‰æ•ˆæ—¶ä½¿ç”¨ï¼Œé»˜è®¤æ˜¯0.ï¼Œä¹Ÿå°±æ˜¯å¯¹è±¡å­˜æ´»æ—¶é—´æ— ç©·å¤§ã€‚</span></span><br><span class="line"><span class="comment">      diskPersistentï¼šæ˜¯å¦ç¼“å­˜è™šæ‹Ÿæœºé‡å¯æœŸæ•°æ® Whether the disk store persists between restarts of the Virtual Machine. The default value is false.</span></span><br><span class="line"><span class="comment">      diskSpoolBufferSizeMBï¼šè¿™ä¸ªå‚æ•°è®¾ç½®DiskStoreï¼ˆç£ç›˜ç¼“å­˜ï¼‰çš„ç¼“å­˜åŒºå¤§å°ã€‚é»˜è®¤æ˜¯30MBã€‚æ¯ä¸ªCacheéƒ½åº”è¯¥æœ‰è‡ªå·±çš„ä¸€ä¸ªç¼“å†²åŒºã€‚</span></span><br><span class="line"><span class="comment">      diskExpiryThreadIntervalSecondsï¼šç£ç›˜å¤±æ•ˆçº¿ç¨‹è¿è¡Œæ—¶é—´é—´éš”ï¼Œé»˜è®¤æ˜¯120ç§’ã€‚</span></span><br><span class="line"><span class="comment">      memoryStoreEvictionPolicyï¼šå½“è¾¾åˆ°maxElementsInMemoryé™åˆ¶æ—¶ï¼ŒEhcacheå°†ä¼šæ ¹æ®æŒ‡å®šçš„ç­–ç•¥å»æ¸…ç†å†…å­˜ã€‚é»˜è®¤ç­–ç•¥æ˜¯LRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰ã€‚ä½ å¯ä»¥è®¾ç½®ä¸ºFIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰æˆ–æ˜¯LFUï¼ˆè¾ƒå°‘ä½¿ç”¨ï¼‰ã€‚</span></span><br><span class="line"><span class="comment">      clearOnFlushï¼šå†…å­˜æ•°é‡æœ€å¤§æ—¶æ˜¯å¦æ¸…é™¤ã€‚</span></span><br><span class="line"><span class="comment">      memoryStoreEvictionPolicy:å¯é€‰ç­–ç•¥æœ‰ï¼šLRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼Œé»˜è®¤ç­–ç•¥ï¼‰ã€FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰ã€LFUï¼ˆæœ€å°‘è®¿é—®æ¬¡æ•°ï¼‰ã€‚</span></span><br><span class="line"><span class="comment">      FIFOï¼Œfirst in first outï¼Œè¿™ä¸ªæ˜¯å¤§å®¶æœ€ç†Ÿçš„ï¼Œå…ˆè¿›å…ˆå‡ºã€‚</span></span><br><span class="line"><span class="comment">      LFUï¼Œ Less Frequently Usedï¼Œå°±æ˜¯ä¸Šé¢ä¾‹å­ä¸­ä½¿ç”¨çš„ç­–ç•¥ï¼Œç›´ç™½ä¸€ç‚¹å°±æ˜¯è®²ä¸€ç›´ä»¥æ¥æœ€å°‘è¢«ä½¿ç”¨çš„ã€‚å¦‚ä¸Šé¢æ‰€è®²ï¼Œç¼“å­˜çš„å…ƒç´ æœ‰ä¸€ä¸ªhitå±æ€§ï¼Œhitå€¼æœ€å°çš„å°†ä¼šè¢«æ¸…å‡ºç¼“å­˜ã€‚</span></span><br><span class="line"><span class="comment">      LRUï¼ŒLeast Recently Usedï¼Œæœ€è¿‘æœ€å°‘ä½¿ç”¨çš„ï¼Œç¼“å­˜çš„å…ƒç´ æœ‰ä¸€ä¸ªæ—¶é—´æˆ³ï¼Œå½“ç¼“å­˜å®¹é‡æ»¡äº†ï¼Œè€Œåˆéœ€è¦è…¾å‡ºåœ°æ–¹æ¥ç¼“å­˜æ–°çš„å…ƒç´ çš„æ—¶å€™ï¼Œé‚£ä¹ˆç°æœ‰ç¼“å­˜å…ƒç´ ä¸­æ—¶é—´æˆ³ç¦»å½“å‰æ—¶é—´æœ€è¿œçš„å…ƒç´ å°†è¢«æ¸…å‡ºç¼“å­˜ã€‚</span></span><br><span class="line"><span class="comment">   --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">ehcache</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Redisæ•°æ®åº“æ¥åšç¼“å­˜ï¼ K-V</p>
]]></content>
      <categories>
        <category>mybatisæ¡†æ¶</category>
      </categories>
      <tags>
        <tag>mysql</tag>
        <tag>æ•°æ®åº“æ¡†æ¶</tag>
        <tag>mybatis</tag>
      </tags>
  </entry>
</search>
